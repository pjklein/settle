{
  "version": 3,
  "sources": ["../../base64-js/index.js", "../../bs58/index.js", "../../@noble/hashes/hmac.js", "../../@noble/hashes/pbkdf2.js", "../../@noble/hashes/_u64.js", "../../@noble/hashes/sha512.js", "../../@scure/base/index.ts", "../../@scure/bip39/index.js", "../../@scure/bip39/wordlists/english.js", "../../jsontokens/lib/base64Url.ts", "../../@noble/secp256k1/lib/index.js", "../../jsontokens/lib/ecdsaSigFormatter.ts", "../../jsontokens/lib/errors.ts", "../../jsontokens/lib/cryptoClients/cryptoClients/secp256k1.ts", "../../jsontokens/lib/cryptoClients/cryptoClients/index.ts", "../../jsontokens/lib/cryptoClients/cryptoClients/sha256.ts", "../../jsontokens/lib/signer.ts", "../../jsontokens/lib/verifier.ts", "../../jsontokens/lib/decode.ts", "../../jsontokens/lib/index.ts", "../../zone-file/src/zoneFileTemplate.ts", "../../zone-file/src/makeZoneFile.ts", "../../zone-file/src/parseZoneFile.ts", "../../zone-file/src/zoneFile.ts", "../../zone-file/dist/index.js", "../../async/dist/async.js", "../../schema-inspector/lib/schema-inspector.js", "../../schema-inspector/index.js", "../../cross-fetch/dist/browser-polyfill.js", "../../@stacks/auth/src/constants.ts", "../../@stacks/auth/node_modules/@stacks/common/src/config.ts", "../../@stacks/auth/node_modules/@stacks/common/src/errors.ts", "../../@stacks/auth/node_modules/@stacks/common/src/logger.ts", "../../@stacks/auth/node_modules/@stacks/common/src/utils.ts", "../../@stacks/auth/node_modules/@stacks/common/src/constants.ts", "../../@stacks/auth/node_modules/@stacks/common/src/fetch.ts", "../../@stacks/auth/src/appConfig.ts", "../../@stacks/encryption/node_modules/@stacks/common/src/errors.ts", "../../@stacks/encryption/node_modules/@stacks/common/src/logger.ts", "../../@stacks/encryption/node_modules/@stacks/common/src/utils.ts", "../../@stacks/encryption/node_modules/@stacks/common/src/keys.ts", "../../@stacks/encryption/src/ec.ts", "../../@stacks/encryption/src/cryptoUtils.ts", "../../@stacks/encryption/src/aesCipher.ts", "../../@stacks/encryption/src/keys.ts", "../../@stacks/encryption/src/hashRipemd160.ts", "../../@stacks/encryption/src/sha2Hash.ts", "../../@stacks/encryption/src/encryption.ts", "../../@stacks/encryption/src/wallet.ts", "../../@stacks/auth/src/messages.ts", "../../@stacks/auth/src/dids.ts", "../../@stacks/auth/src/provider.ts", "../../@stacks/auth/src/verification.ts", "../../@stacks/auth/src/sessionData.ts", "../../@stacks/auth/src/sessionStore.ts", "../../@stacks/auth/src/userSession.ts", "../../@stacks/profile/src/profileTokens.ts", "../../@stacks/profile/node_modules/@stacks/common/src/config.ts", "../../@stacks/profile/node_modules/@stacks/common/src/errors.ts", "../../@stacks/profile/node_modules/@stacks/common/src/logger.ts", "../../@stacks/profile/node_modules/@stacks/common/src/utils.ts", "../../@stacks/profile/src/profileSchemas/personLegacy.ts", "../../@stacks/profile/src/profileSchemas/personZoneFiles.ts", "../../@stacks/profile/src/profileSchemas/personUtils.ts", "../../@stacks/profile/src/profile.ts", "../../@stacks/auth/src/protocolEchoDetection.ts", "../../@stacks/auth/src/profile.ts", "../../@stacks/network-v6/src/fetch.ts", "../../@stacks/common/src/errors.ts", "../../@stacks/common/src/logger.ts", "../../@stacks/common/src/utils.ts", "../../@stacks/common/src/constants.ts", "../../@stacks/common/src/buffer.ts", "../../@stacks/network-v6/src/network.ts", "../../@stacks/connect/node_modules/@stacks/common/src/errors.ts", "../../@stacks/connect/node_modules/@stacks/common/src/logger.ts", "../../@stacks/connect/node_modules/@stacks/common/src/utils.ts", "../../@stacks/transactions-v6/src/constants.ts", "../../@stacks/transactions-v6/src/utils.ts", "../../@stacks/transactions-v6/src/common.ts", "../../@stacks/transactions-v6/src/postcondition-types.ts", "../../@stacks/transactions-v6/src/clarity/constants.ts", "../../@stacks/transactions-v6/src/clarity/types/intCV.ts", "../../@stacks/transactions-v6/src/keys.ts", "../../@stacks/transactions-v6/src/payload.ts", "../../@stacks/transactions-v6/src/errors.ts", "../../@stacks/transactions-v6/src/signature.ts", "../../@stacks/transactions-v6/src/types.ts", "../../@stacks/transactions-v6/src/clarity/serialize.ts", "../../@stacks/transactions-v6/node_modules/@stacks/network/src/fetch.ts", "../../@stacks/transactions-v6/node_modules/@stacks/network/src/network.ts", "../../@stacks/transactions-v6/src/builders.ts", "../../@stacks/transactions-v6/src/contract-abi.ts", "../../@stacks/transactions-v6/src/structuredDataSignature.ts", "../../@stacks/connect-ui/dist/esm/loader.js", "../../@stacks/connect-ui/loader/index.js", "../../@stacks/connect/src/auth.ts", "../../@stacks/connect/src/utils.ts", "../../@stacks/connect/src/bitcoin/psbt.ts", "../../@stacks/connect/src/types/transactions.ts", "../../@stacks/connect/src/transactions/index.ts", "../../@stacks/connect/src/signature/index.ts", "../../@stacks/connect/src/signature/structuredData.ts", "../../@stacks/connect/src/profile/index.ts", "../../@stacks/connect/src/types/bitcoin.ts", "../../@stacks/connect/src/ui.ts", "../../@stacks/connect/src/asigna.ts", "../../@stacks/connect/src/providers.ts"],
  "sourcesContent": ["'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n", "const basex = require('base-x')\nconst ALPHABET = '123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz'\n\nmodule.exports = basex(ALPHABET)\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.hmac = void 0;\nconst _assert_js_1 = require(\"./_assert.js\");\nconst utils_js_1 = require(\"./utils.js\");\n// HMAC (RFC 2104)\nclass HMAC extends utils_js_1.Hash {\n    constructor(hash, _key) {\n        super();\n        this.finished = false;\n        this.destroyed = false;\n        _assert_js_1.default.hash(hash);\n        const key = (0, utils_js_1.toBytes)(_key);\n        this.iHash = hash.create();\n        if (typeof this.iHash.update !== 'function')\n            throw new TypeError('Expected instance of class which extends utils.Hash');\n        this.blockLen = this.iHash.blockLen;\n        this.outputLen = this.iHash.outputLen;\n        const blockLen = this.blockLen;\n        const pad = new Uint8Array(blockLen);\n        // blockLen can be bigger than outputLen\n        pad.set(key.length > blockLen ? hash.create().update(key).digest() : key);\n        for (let i = 0; i < pad.length; i++)\n            pad[i] ^= 0x36;\n        this.iHash.update(pad);\n        // By doing update (processing of first block) of outer hash here we can re-use it between multiple calls via clone\n        this.oHash = hash.create();\n        // Undo internal XOR && apply outer XOR\n        for (let i = 0; i < pad.length; i++)\n            pad[i] ^= 0x36 ^ 0x5c;\n        this.oHash.update(pad);\n        pad.fill(0);\n    }\n    update(buf) {\n        _assert_js_1.default.exists(this);\n        this.iHash.update(buf);\n        return this;\n    }\n    digestInto(out) {\n        _assert_js_1.default.exists(this);\n        _assert_js_1.default.bytes(out, this.outputLen);\n        this.finished = true;\n        this.iHash.digestInto(out);\n        this.oHash.update(out);\n        this.oHash.digestInto(out);\n        this.destroy();\n    }\n    digest() {\n        const out = new Uint8Array(this.oHash.outputLen);\n        this.digestInto(out);\n        return out;\n    }\n    _cloneInto(to) {\n        // Create new instance without calling constructor since key already in state and we don't know it.\n        to || (to = Object.create(Object.getPrototypeOf(this), {}));\n        const { oHash, iHash, finished, destroyed, blockLen, outputLen } = this;\n        to = to;\n        to.finished = finished;\n        to.destroyed = destroyed;\n        to.blockLen = blockLen;\n        to.outputLen = outputLen;\n        to.oHash = oHash._cloneInto(to.oHash);\n        to.iHash = iHash._cloneInto(to.iHash);\n        return to;\n    }\n    destroy() {\n        this.destroyed = true;\n        this.oHash.destroy();\n        this.iHash.destroy();\n    }\n}\n/**\n * HMAC: RFC2104 message authentication code.\n * @param hash - function that would be used e.g. sha256\n * @param key - message key\n * @param message - message data\n */\nconst hmac = (hash, key, message) => new HMAC(hash, key).update(message).digest();\nexports.hmac = hmac;\nexports.hmac.create = (hash, key) => new HMAC(hash, key);\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.pbkdf2Async = exports.pbkdf2 = void 0;\nconst _assert_js_1 = require(\"./_assert.js\");\nconst hmac_js_1 = require(\"./hmac.js\");\nconst utils_js_1 = require(\"./utils.js\");\n// Common prologue and epilogue for sync/async functions\nfunction pbkdf2Init(hash, _password, _salt, _opts) {\n    _assert_js_1.default.hash(hash);\n    const opts = (0, utils_js_1.checkOpts)({ dkLen: 32, asyncTick: 10 }, _opts);\n    const { c, dkLen, asyncTick } = opts;\n    _assert_js_1.default.number(c);\n    _assert_js_1.default.number(dkLen);\n    _assert_js_1.default.number(asyncTick);\n    if (c < 1)\n        throw new Error('PBKDF2: iterations (c) should be >= 1');\n    const password = (0, utils_js_1.toBytes)(_password);\n    const salt = (0, utils_js_1.toBytes)(_salt);\n    // DK = PBKDF2(PRF, Password, Salt, c, dkLen);\n    const DK = new Uint8Array(dkLen);\n    // U1 = PRF(Password, Salt + INT_32_BE(i))\n    const PRF = hmac_js_1.hmac.create(hash, password);\n    const PRFSalt = PRF._cloneInto().update(salt);\n    return { c, dkLen, asyncTick, DK, PRF, PRFSalt };\n}\nfunction pbkdf2Output(PRF, PRFSalt, DK, prfW, u) {\n    PRF.destroy();\n    PRFSalt.destroy();\n    if (prfW)\n        prfW.destroy();\n    u.fill(0);\n    return DK;\n}\n/**\n * PBKDF2-HMAC: RFC 2898 key derivation function\n * @param hash - hash function that would be used e.g. sha256\n * @param password - password from which a derived key is generated\n * @param salt - cryptographic salt\n * @param opts - {c, dkLen} where c is work factor and dkLen is output message size\n */\nfunction pbkdf2(hash, password, salt, opts) {\n    const { c, dkLen, DK, PRF, PRFSalt } = pbkdf2Init(hash, password, salt, opts);\n    let prfW; // Working copy\n    const arr = new Uint8Array(4);\n    const view = (0, utils_js_1.createView)(arr);\n    const u = new Uint8Array(PRF.outputLen);\n    // DK = T1 + T2 + ⋯ + Tdklen/hlen\n    for (let ti = 1, pos = 0; pos < dkLen; ti++, pos += PRF.outputLen) {\n        // Ti = F(Password, Salt, c, i)\n        const Ti = DK.subarray(pos, pos + PRF.outputLen);\n        view.setInt32(0, ti, false);\n        // F(Password, Salt, c, i) = U1 ^ U2 ^ ⋯ ^ Uc\n        // U1 = PRF(Password, Salt + INT_32_BE(i))\n        (prfW = PRFSalt._cloneInto(prfW)).update(arr).digestInto(u);\n        Ti.set(u.subarray(0, Ti.length));\n        for (let ui = 1; ui < c; ui++) {\n            // Uc = PRF(Password, Uc−1)\n            PRF._cloneInto(prfW).update(u).digestInto(u);\n            for (let i = 0; i < Ti.length; i++)\n                Ti[i] ^= u[i];\n        }\n    }\n    return pbkdf2Output(PRF, PRFSalt, DK, prfW, u);\n}\nexports.pbkdf2 = pbkdf2;\nasync function pbkdf2Async(hash, password, salt, opts) {\n    const { c, dkLen, asyncTick, DK, PRF, PRFSalt } = pbkdf2Init(hash, password, salt, opts);\n    let prfW; // Working copy\n    const arr = new Uint8Array(4);\n    const view = (0, utils_js_1.createView)(arr);\n    const u = new Uint8Array(PRF.outputLen);\n    // DK = T1 + T2 + ⋯ + Tdklen/hlen\n    for (let ti = 1, pos = 0; pos < dkLen; ti++, pos += PRF.outputLen) {\n        // Ti = F(Password, Salt, c, i)\n        const Ti = DK.subarray(pos, pos + PRF.outputLen);\n        view.setInt32(0, ti, false);\n        // F(Password, Salt, c, i) = U1 ^ U2 ^ ⋯ ^ Uc\n        // U1 = PRF(Password, Salt + INT_32_BE(i))\n        (prfW = PRFSalt._cloneInto(prfW)).update(arr).digestInto(u);\n        Ti.set(u.subarray(0, Ti.length));\n        await (0, utils_js_1.asyncLoop)(c - 1, asyncTick, (i) => {\n            // Uc = PRF(Password, Uc−1)\n            PRF._cloneInto(prfW).update(u).digestInto(u);\n            for (let i = 0; i < Ti.length; i++)\n                Ti[i] ^= u[i];\n        });\n    }\n    return pbkdf2Output(PRF, PRFSalt, DK, prfW, u);\n}\nexports.pbkdf2Async = pbkdf2Async;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.add = exports.toBig = exports.split = exports.fromBig = void 0;\nconst U32_MASK64 = BigInt(2 ** 32 - 1);\nconst _32n = BigInt(32);\n// We are not using BigUint64Array, because they are extremely slow as per 2022\nfunction fromBig(n, le = false) {\n    if (le)\n        return { h: Number(n & U32_MASK64), l: Number((n >> _32n) & U32_MASK64) };\n    return { h: Number((n >> _32n) & U32_MASK64) | 0, l: Number(n & U32_MASK64) | 0 };\n}\nexports.fromBig = fromBig;\nfunction split(lst, le = false) {\n    let Ah = new Uint32Array(lst.length);\n    let Al = new Uint32Array(lst.length);\n    for (let i = 0; i < lst.length; i++) {\n        const { h, l } = fromBig(lst[i], le);\n        [Ah[i], Al[i]] = [h, l];\n    }\n    return [Ah, Al];\n}\nexports.split = split;\nconst toBig = (h, l) => (BigInt(h >>> 0) << _32n) | BigInt(l >>> 0);\nexports.toBig = toBig;\n// for Shift in [0, 32)\nconst shrSH = (h, l, s) => h >>> s;\nconst shrSL = (h, l, s) => (h << (32 - s)) | (l >>> s);\n// Right rotate for Shift in [1, 32)\nconst rotrSH = (h, l, s) => (h >>> s) | (l << (32 - s));\nconst rotrSL = (h, l, s) => (h << (32 - s)) | (l >>> s);\n// Right rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotrBH = (h, l, s) => (h << (64 - s)) | (l >>> (s - 32));\nconst rotrBL = (h, l, s) => (h >>> (s - 32)) | (l << (64 - s));\n// Right rotate for shift===32 (just swaps l&h)\nconst rotr32H = (h, l) => l;\nconst rotr32L = (h, l) => h;\n// Left rotate for Shift in [1, 32)\nconst rotlSH = (h, l, s) => (h << s) | (l >>> (32 - s));\nconst rotlSL = (h, l, s) => (l << s) | (h >>> (32 - s));\n// Left rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotlBH = (h, l, s) => (l << (s - 32)) | (h >>> (64 - s));\nconst rotlBL = (h, l, s) => (h << (s - 32)) | (l >>> (64 - s));\n// JS uses 32-bit signed integers for bitwise operations which means we cannot\n// simple take carry out of low bit sum by shift, we need to use division.\n// Removing \"export\" has 5% perf penalty -_-\nfunction add(Ah, Al, Bh, Bl) {\n    const l = (Al >>> 0) + (Bl >>> 0);\n    return { h: (Ah + Bh + ((l / 2 ** 32) | 0)) | 0, l: l | 0 };\n}\nexports.add = add;\n// Addition with more than 2 elements\nconst add3L = (Al, Bl, Cl) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0);\nconst add3H = (low, Ah, Bh, Ch) => (Ah + Bh + Ch + ((low / 2 ** 32) | 0)) | 0;\nconst add4L = (Al, Bl, Cl, Dl) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0);\nconst add4H = (low, Ah, Bh, Ch, Dh) => (Ah + Bh + Ch + Dh + ((low / 2 ** 32) | 0)) | 0;\nconst add5L = (Al, Bl, Cl, Dl, El) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0) + (El >>> 0);\nconst add5H = (low, Ah, Bh, Ch, Dh, Eh) => (Ah + Bh + Ch + Dh + Eh + ((low / 2 ** 32) | 0)) | 0;\n// prettier-ignore\nconst u64 = {\n    fromBig, split, toBig: exports.toBig,\n    shrSH, shrSL,\n    rotrSH, rotrSL, rotrBH, rotrBL,\n    rotr32H, rotr32L,\n    rotlSH, rotlSL, rotlBH, rotlBL,\n    add, add3L, add3H, add4L, add4H, add5H, add5L,\n};\nexports.default = u64;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.sha384 = exports.sha512_256 = exports.sha512_224 = exports.sha512 = exports.SHA512 = void 0;\nconst _sha2_js_1 = require(\"./_sha2.js\");\nconst _u64_js_1 = require(\"./_u64.js\");\nconst utils_js_1 = require(\"./utils.js\");\n// Round contants (first 32 bits of the fractional parts of the cube roots of the first 80 primes 2..409):\n// prettier-ignore\nconst [SHA512_Kh, SHA512_Kl] = _u64_js_1.default.split([\n    '0x428a2f98d728ae22', '0x7137449123ef65cd', '0xb5c0fbcfec4d3b2f', '0xe9b5dba58189dbbc',\n    '0x3956c25bf348b538', '0x59f111f1b605d019', '0x923f82a4af194f9b', '0xab1c5ed5da6d8118',\n    '0xd807aa98a3030242', '0x12835b0145706fbe', '0x243185be4ee4b28c', '0x550c7dc3d5ffb4e2',\n    '0x72be5d74f27b896f', '0x80deb1fe3b1696b1', '0x9bdc06a725c71235', '0xc19bf174cf692694',\n    '0xe49b69c19ef14ad2', '0xefbe4786384f25e3', '0x0fc19dc68b8cd5b5', '0x240ca1cc77ac9c65',\n    '0x2de92c6f592b0275', '0x4a7484aa6ea6e483', '0x5cb0a9dcbd41fbd4', '0x76f988da831153b5',\n    '0x983e5152ee66dfab', '0xa831c66d2db43210', '0xb00327c898fb213f', '0xbf597fc7beef0ee4',\n    '0xc6e00bf33da88fc2', '0xd5a79147930aa725', '0x06ca6351e003826f', '0x142929670a0e6e70',\n    '0x27b70a8546d22ffc', '0x2e1b21385c26c926', '0x4d2c6dfc5ac42aed', '0x53380d139d95b3df',\n    '0x650a73548baf63de', '0x766a0abb3c77b2a8', '0x81c2c92e47edaee6', '0x92722c851482353b',\n    '0xa2bfe8a14cf10364', '0xa81a664bbc423001', '0xc24b8b70d0f89791', '0xc76c51a30654be30',\n    '0xd192e819d6ef5218', '0xd69906245565a910', '0xf40e35855771202a', '0x106aa07032bbd1b8',\n    '0x19a4c116b8d2d0c8', '0x1e376c085141ab53', '0x2748774cdf8eeb99', '0x34b0bcb5e19b48a8',\n    '0x391c0cb3c5c95a63', '0x4ed8aa4ae3418acb', '0x5b9cca4f7763e373', '0x682e6ff3d6b2b8a3',\n    '0x748f82ee5defb2fc', '0x78a5636f43172f60', '0x84c87814a1f0ab72', '0x8cc702081a6439ec',\n    '0x90befffa23631e28', '0xa4506cebde82bde9', '0xbef9a3f7b2c67915', '0xc67178f2e372532b',\n    '0xca273eceea26619c', '0xd186b8c721c0c207', '0xeada7dd6cde0eb1e', '0xf57d4f7fee6ed178',\n    '0x06f067aa72176fba', '0x0a637dc5a2c898a6', '0x113f9804bef90dae', '0x1b710b35131c471b',\n    '0x28db77f523047d84', '0x32caab7b40c72493', '0x3c9ebe0a15c9bebc', '0x431d67c49c100d4c',\n    '0x4cc5d4becb3e42b6', '0x597f299cfc657e2a', '0x5fcb6fab3ad6faec', '0x6c44198c4a475817'\n].map(n => BigInt(n)));\n// Temporary buffer, not used to store anything between runs\nconst SHA512_W_H = new Uint32Array(80);\nconst SHA512_W_L = new Uint32Array(80);\nclass SHA512 extends _sha2_js_1.SHA2 {\n    constructor() {\n        super(128, 64, 16, false);\n        // We cannot use array here since array allows indexing by variable which means optimizer/compiler cannot use registers.\n        // Also looks cleaner and easier to verify with spec.\n        // Initial state (first 32 bits of the fractional parts of the square roots of the first 8 primes 2..19):\n        // h -- high 32 bits, l -- low 32 bits\n        this.Ah = 0x6a09e667 | 0;\n        this.Al = 0xf3bcc908 | 0;\n        this.Bh = 0xbb67ae85 | 0;\n        this.Bl = 0x84caa73b | 0;\n        this.Ch = 0x3c6ef372 | 0;\n        this.Cl = 0xfe94f82b | 0;\n        this.Dh = 0xa54ff53a | 0;\n        this.Dl = 0x5f1d36f1 | 0;\n        this.Eh = 0x510e527f | 0;\n        this.El = 0xade682d1 | 0;\n        this.Fh = 0x9b05688c | 0;\n        this.Fl = 0x2b3e6c1f | 0;\n        this.Gh = 0x1f83d9ab | 0;\n        this.Gl = 0xfb41bd6b | 0;\n        this.Hh = 0x5be0cd19 | 0;\n        this.Hl = 0x137e2179 | 0;\n    }\n    // prettier-ignore\n    get() {\n        const { Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl } = this;\n        return [Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl];\n    }\n    // prettier-ignore\n    set(Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl) {\n        this.Ah = Ah | 0;\n        this.Al = Al | 0;\n        this.Bh = Bh | 0;\n        this.Bl = Bl | 0;\n        this.Ch = Ch | 0;\n        this.Cl = Cl | 0;\n        this.Dh = Dh | 0;\n        this.Dl = Dl | 0;\n        this.Eh = Eh | 0;\n        this.El = El | 0;\n        this.Fh = Fh | 0;\n        this.Fl = Fl | 0;\n        this.Gh = Gh | 0;\n        this.Gl = Gl | 0;\n        this.Hh = Hh | 0;\n        this.Hl = Hl | 0;\n    }\n    process(view, offset) {\n        // Extend the first 16 words into the remaining 64 words w[16..79] of the message schedule array\n        for (let i = 0; i < 16; i++, offset += 4) {\n            SHA512_W_H[i] = view.getUint32(offset);\n            SHA512_W_L[i] = view.getUint32((offset += 4));\n        }\n        for (let i = 16; i < 80; i++) {\n            // s0 := (w[i-15] rightrotate 1) xor (w[i-15] rightrotate 8) xor (w[i-15] rightshift 7)\n            const W15h = SHA512_W_H[i - 15] | 0;\n            const W15l = SHA512_W_L[i - 15] | 0;\n            const s0h = _u64_js_1.default.rotrSH(W15h, W15l, 1) ^ _u64_js_1.default.rotrSH(W15h, W15l, 8) ^ _u64_js_1.default.shrSH(W15h, W15l, 7);\n            const s0l = _u64_js_1.default.rotrSL(W15h, W15l, 1) ^ _u64_js_1.default.rotrSL(W15h, W15l, 8) ^ _u64_js_1.default.shrSL(W15h, W15l, 7);\n            // s1 := (w[i-2] rightrotate 19) xor (w[i-2] rightrotate 61) xor (w[i-2] rightshift 6)\n            const W2h = SHA512_W_H[i - 2] | 0;\n            const W2l = SHA512_W_L[i - 2] | 0;\n            const s1h = _u64_js_1.default.rotrSH(W2h, W2l, 19) ^ _u64_js_1.default.rotrBH(W2h, W2l, 61) ^ _u64_js_1.default.shrSH(W2h, W2l, 6);\n            const s1l = _u64_js_1.default.rotrSL(W2h, W2l, 19) ^ _u64_js_1.default.rotrBL(W2h, W2l, 61) ^ _u64_js_1.default.shrSL(W2h, W2l, 6);\n            // SHA256_W[i] = s0 + s1 + SHA256_W[i - 7] + SHA256_W[i - 16];\n            const SUMl = _u64_js_1.default.add4L(s0l, s1l, SHA512_W_L[i - 7], SHA512_W_L[i - 16]);\n            const SUMh = _u64_js_1.default.add4H(SUMl, s0h, s1h, SHA512_W_H[i - 7], SHA512_W_H[i - 16]);\n            SHA512_W_H[i] = SUMh | 0;\n            SHA512_W_L[i] = SUMl | 0;\n        }\n        let { Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl } = this;\n        // Compression function main loop, 80 rounds\n        for (let i = 0; i < 80; i++) {\n            // S1 := (e rightrotate 14) xor (e rightrotate 18) xor (e rightrotate 41)\n            const sigma1h = _u64_js_1.default.rotrSH(Eh, El, 14) ^ _u64_js_1.default.rotrSH(Eh, El, 18) ^ _u64_js_1.default.rotrBH(Eh, El, 41);\n            const sigma1l = _u64_js_1.default.rotrSL(Eh, El, 14) ^ _u64_js_1.default.rotrSL(Eh, El, 18) ^ _u64_js_1.default.rotrBL(Eh, El, 41);\n            //const T1 = (H + sigma1 + Chi(E, F, G) + SHA256_K[i] + SHA256_W[i]) | 0;\n            const CHIh = (Eh & Fh) ^ (~Eh & Gh);\n            const CHIl = (El & Fl) ^ (~El & Gl);\n            // T1 = H + sigma1 + Chi(E, F, G) + SHA512_K[i] + SHA512_W[i]\n            // prettier-ignore\n            const T1ll = _u64_js_1.default.add5L(Hl, sigma1l, CHIl, SHA512_Kl[i], SHA512_W_L[i]);\n            const T1h = _u64_js_1.default.add5H(T1ll, Hh, sigma1h, CHIh, SHA512_Kh[i], SHA512_W_H[i]);\n            const T1l = T1ll | 0;\n            // S0 := (a rightrotate 28) xor (a rightrotate 34) xor (a rightrotate 39)\n            const sigma0h = _u64_js_1.default.rotrSH(Ah, Al, 28) ^ _u64_js_1.default.rotrBH(Ah, Al, 34) ^ _u64_js_1.default.rotrBH(Ah, Al, 39);\n            const sigma0l = _u64_js_1.default.rotrSL(Ah, Al, 28) ^ _u64_js_1.default.rotrBL(Ah, Al, 34) ^ _u64_js_1.default.rotrBL(Ah, Al, 39);\n            const MAJh = (Ah & Bh) ^ (Ah & Ch) ^ (Bh & Ch);\n            const MAJl = (Al & Bl) ^ (Al & Cl) ^ (Bl & Cl);\n            Hh = Gh | 0;\n            Hl = Gl | 0;\n            Gh = Fh | 0;\n            Gl = Fl | 0;\n            Fh = Eh | 0;\n            Fl = El | 0;\n            ({ h: Eh, l: El } = _u64_js_1.default.add(Dh | 0, Dl | 0, T1h | 0, T1l | 0));\n            Dh = Ch | 0;\n            Dl = Cl | 0;\n            Ch = Bh | 0;\n            Cl = Bl | 0;\n            Bh = Ah | 0;\n            Bl = Al | 0;\n            const All = _u64_js_1.default.add3L(T1l, sigma0l, MAJl);\n            Ah = _u64_js_1.default.add3H(All, T1h, sigma0h, MAJh);\n            Al = All | 0;\n        }\n        // Add the compressed chunk to the current hash value\n        ({ h: Ah, l: Al } = _u64_js_1.default.add(this.Ah | 0, this.Al | 0, Ah | 0, Al | 0));\n        ({ h: Bh, l: Bl } = _u64_js_1.default.add(this.Bh | 0, this.Bl | 0, Bh | 0, Bl | 0));\n        ({ h: Ch, l: Cl } = _u64_js_1.default.add(this.Ch | 0, this.Cl | 0, Ch | 0, Cl | 0));\n        ({ h: Dh, l: Dl } = _u64_js_1.default.add(this.Dh | 0, this.Dl | 0, Dh | 0, Dl | 0));\n        ({ h: Eh, l: El } = _u64_js_1.default.add(this.Eh | 0, this.El | 0, Eh | 0, El | 0));\n        ({ h: Fh, l: Fl } = _u64_js_1.default.add(this.Fh | 0, this.Fl | 0, Fh | 0, Fl | 0));\n        ({ h: Gh, l: Gl } = _u64_js_1.default.add(this.Gh | 0, this.Gl | 0, Gh | 0, Gl | 0));\n        ({ h: Hh, l: Hl } = _u64_js_1.default.add(this.Hh | 0, this.Hl | 0, Hh | 0, Hl | 0));\n        this.set(Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl);\n    }\n    roundClean() {\n        SHA512_W_H.fill(0);\n        SHA512_W_L.fill(0);\n    }\n    destroy() {\n        this.buffer.fill(0);\n        this.set(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);\n    }\n}\nexports.SHA512 = SHA512;\nclass SHA512_224 extends SHA512 {\n    constructor() {\n        super();\n        // h -- high 32 bits, l -- low 32 bits\n        this.Ah = 0x8c3d37c8 | 0;\n        this.Al = 0x19544da2 | 0;\n        this.Bh = 0x73e19966 | 0;\n        this.Bl = 0x89dcd4d6 | 0;\n        this.Ch = 0x1dfab7ae | 0;\n        this.Cl = 0x32ff9c82 | 0;\n        this.Dh = 0x679dd514 | 0;\n        this.Dl = 0x582f9fcf | 0;\n        this.Eh = 0x0f6d2b69 | 0;\n        this.El = 0x7bd44da8 | 0;\n        this.Fh = 0x77e36f73 | 0;\n        this.Fl = 0x04c48942 | 0;\n        this.Gh = 0x3f9d85a8 | 0;\n        this.Gl = 0x6a1d36c8 | 0;\n        this.Hh = 0x1112e6ad | 0;\n        this.Hl = 0x91d692a1 | 0;\n        this.outputLen = 28;\n    }\n}\nclass SHA512_256 extends SHA512 {\n    constructor() {\n        super();\n        // h -- high 32 bits, l -- low 32 bits\n        this.Ah = 0x22312194 | 0;\n        this.Al = 0xfc2bf72c | 0;\n        this.Bh = 0x9f555fa3 | 0;\n        this.Bl = 0xc84c64c2 | 0;\n        this.Ch = 0x2393b86b | 0;\n        this.Cl = 0x6f53b151 | 0;\n        this.Dh = 0x96387719 | 0;\n        this.Dl = 0x5940eabd | 0;\n        this.Eh = 0x96283ee2 | 0;\n        this.El = 0xa88effe3 | 0;\n        this.Fh = 0xbe5e1e25 | 0;\n        this.Fl = 0x53863992 | 0;\n        this.Gh = 0x2b0199fc | 0;\n        this.Gl = 0x2c85b8aa | 0;\n        this.Hh = 0x0eb72ddc | 0;\n        this.Hl = 0x81c52ca2 | 0;\n        this.outputLen = 32;\n    }\n}\nclass SHA384 extends SHA512 {\n    constructor() {\n        super();\n        // h -- high 32 bits, l -- low 32 bits\n        this.Ah = 0xcbbb9d5d | 0;\n        this.Al = 0xc1059ed8 | 0;\n        this.Bh = 0x629a292a | 0;\n        this.Bl = 0x367cd507 | 0;\n        this.Ch = 0x9159015a | 0;\n        this.Cl = 0x3070dd17 | 0;\n        this.Dh = 0x152fecd8 | 0;\n        this.Dl = 0xf70e5939 | 0;\n        this.Eh = 0x67332667 | 0;\n        this.El = 0xffc00b31 | 0;\n        this.Fh = 0x8eb44a87 | 0;\n        this.Fl = 0x68581511 | 0;\n        this.Gh = 0xdb0c2e0d | 0;\n        this.Gl = 0x64f98fa7 | 0;\n        this.Hh = 0x47b5481d | 0;\n        this.Hl = 0xbefa4fa4 | 0;\n        this.outputLen = 48;\n    }\n}\nexports.sha512 = (0, utils_js_1.wrapConstructor)(() => new SHA512());\nexports.sha512_224 = (0, utils_js_1.wrapConstructor)(() => new SHA512_224());\nexports.sha512_256 = (0, utils_js_1.wrapConstructor)(() => new SHA512_256());\nexports.sha384 = (0, utils_js_1.wrapConstructor)(() => new SHA384());\n", "/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */\n\n// Utilities\n/**\n * @__NO_SIDE_EFFECTS__\n */\nexport function assertNumber(n: number) {\n  if (!Number.isSafeInteger(n)) throw new Error(`Wrong integer: ${n}`);\n}\nexport interface Coder<F, T> {\n  encode(from: F): T;\n  decode(to: T): F;\n}\n\nexport interface BytesCoder extends Coder<Uint8Array, string> {\n  encode: (data: Uint8Array) => string;\n  decode: (str: string) => Uint8Array;\n}\n\nfunction isBytes(a: unknown): a is Uint8Array {\n  return (\n    a instanceof Uint8Array ||\n    (a != null && typeof a === 'object' && a.constructor.name === 'Uint8Array')\n  );\n}\n\n// TODO: some recusive type inference so it would check correct order of input/output inside rest?\n// like <string, number>, <number, bytes>, <bytes, float>\ntype Chain = [Coder<any, any>, ...Coder<any, any>[]];\n// Extract info from Coder type\ntype Input<F> = F extends Coder<infer T, any> ? T : never;\ntype Output<F> = F extends Coder<any, infer T> ? T : never;\n// Generic function for arrays\ntype First<T> = T extends [infer U, ...any[]] ? U : never;\ntype Last<T> = T extends [...any[], infer U] ? U : never;\ntype Tail<T> = T extends [any, ...infer U] ? U : never;\n\ntype AsChain<C extends Chain, Rest = Tail<C>> = {\n  // C[K] = Coder<Input<C[K]>, Input<Rest[k]>>\n  [K in keyof C]: Coder<Input<C[K]>, Input<K extends keyof Rest ? Rest[K] : any>>;\n};\n\n/**\n * @__NO_SIDE_EFFECTS__\n */\nfunction chain<T extends Chain & AsChain<T>>(...args: T): Coder<Input<First<T>>, Output<Last<T>>> {\n  const id = (a: any) => a;\n  // Wrap call in closure so JIT can inline calls\n  const wrap = (a: any, b: any) => (c: any) => a(b(c));\n  // Construct chain of args[-1].encode(args[-2].encode([...]))\n  const encode = args.map((x) => x.encode).reduceRight(wrap, id);\n  // Construct chain of args[0].decode(args[1].decode(...))\n  const decode = args.map((x) => x.decode).reduce(wrap, id);\n  return { encode, decode };\n}\n\ntype Alphabet = string[] | string;\n\n/**\n * Encodes integer radix representation to array of strings using alphabet and back\n * @__NO_SIDE_EFFECTS__\n */\nfunction alphabet(alphabet: Alphabet): Coder<number[], string[]> {\n  return {\n    encode: (digits: number[]) => {\n      if (!Array.isArray(digits) || (digits.length && typeof digits[0] !== 'number'))\n        throw new Error('alphabet.encode input should be an array of numbers');\n      return digits.map((i) => {\n        assertNumber(i);\n        if (i < 0 || i >= alphabet.length)\n          throw new Error(`Digit index outside alphabet: ${i} (alphabet: ${alphabet.length})`);\n        return alphabet[i]!;\n      });\n    },\n    decode: (input: string[]) => {\n      if (!Array.isArray(input) || (input.length && typeof input[0] !== 'string'))\n        throw new Error('alphabet.decode input should be array of strings');\n      return input.map((letter) => {\n        if (typeof letter !== 'string')\n          throw new Error(`alphabet.decode: not string element=${letter}`);\n        const index = alphabet.indexOf(letter);\n        if (index === -1) throw new Error(`Unknown letter: \"${letter}\". Allowed: ${alphabet}`);\n        return index;\n      });\n    },\n  };\n}\n\n/**\n * @__NO_SIDE_EFFECTS__\n */\nfunction join(separator = ''): Coder<string[], string> {\n  if (typeof separator !== 'string') throw new Error('join separator should be string');\n  return {\n    encode: (from) => {\n      if (!Array.isArray(from) || (from.length && typeof from[0] !== 'string'))\n        throw new Error('join.encode input should be array of strings');\n      for (let i of from)\n        if (typeof i !== 'string') throw new Error(`join.encode: non-string input=${i}`);\n      return from.join(separator);\n    },\n    decode: (to) => {\n      if (typeof to !== 'string') throw new Error('join.decode input should be string');\n      return to.split(separator);\n    },\n  };\n}\n\n/**\n * Pad strings array so it has integer number of bits\n * @__NO_SIDE_EFFECTS__\n */\nfunction padding(bits: number, chr = '='): Coder<string[], string[]> {\n  assertNumber(bits);\n  if (typeof chr !== 'string') throw new Error('padding chr should be string');\n  return {\n    encode(data: string[]): string[] {\n      if (!Array.isArray(data) || (data.length && typeof data[0] !== 'string'))\n        throw new Error('padding.encode input should be array of strings');\n      for (let i of data)\n        if (typeof i !== 'string') throw new Error(`padding.encode: non-string input=${i}`);\n      while ((data.length * bits) % 8) data.push(chr);\n      return data;\n    },\n    decode(input: string[]): string[] {\n      if (!Array.isArray(input) || (input.length && typeof input[0] !== 'string'))\n        throw new Error('padding.encode input should be array of strings');\n      for (let i of input)\n        if (typeof i !== 'string') throw new Error(`padding.decode: non-string input=${i}`);\n      let end = input.length;\n      if ((end * bits) % 8)\n        throw new Error('Invalid padding: string should have whole number of bytes');\n      for (; end > 0 && input[end - 1] === chr; end--) {\n        if (!(((end - 1) * bits) % 8))\n          throw new Error('Invalid padding: string has too much padding');\n      }\n      return input.slice(0, end);\n    },\n  };\n}\n\n/**\n * @__NO_SIDE_EFFECTS__\n */\nfunction normalize<T>(fn: (val: T) => T): Coder<T, T> {\n  if (typeof fn !== 'function') throw new Error('normalize fn should be function');\n  return { encode: (from: T) => from, decode: (to: T) => fn(to) };\n}\n\n/**\n * Slow: O(n^2) time complexity\n * @__NO_SIDE_EFFECTS__\n */\nfunction convertRadix(data: number[], from: number, to: number): number[] {\n  // base 1 is impossible\n  if (from < 2) throw new Error(`convertRadix: wrong from=${from}, base cannot be less than 2`);\n  if (to < 2) throw new Error(`convertRadix: wrong to=${to}, base cannot be less than 2`);\n  if (!Array.isArray(data)) throw new Error('convertRadix: data should be array');\n  if (!data.length) return [];\n  let pos = 0;\n  const res = [];\n  const digits = Array.from(data);\n  digits.forEach((d) => {\n    assertNumber(d);\n    if (d < 0 || d >= from) throw new Error(`Wrong integer: ${d}`);\n  });\n  while (true) {\n    let carry = 0;\n    let done = true;\n    for (let i = pos; i < digits.length; i++) {\n      const digit = digits[i]!;\n      const digitBase = from * carry + digit;\n      if (\n        !Number.isSafeInteger(digitBase) ||\n        (from * carry) / from !== carry ||\n        digitBase - digit !== from * carry\n      ) {\n        throw new Error('convertRadix: carry overflow');\n      }\n      carry = digitBase % to;\n      const rounded = Math.floor(digitBase / to);\n      digits[i] = rounded;\n      if (!Number.isSafeInteger(rounded) || rounded * to + carry !== digitBase)\n        throw new Error('convertRadix: carry overflow');\n      if (!done) continue;\n      else if (!rounded) pos = i;\n      else done = false;\n    }\n    res.push(carry);\n    if (done) break;\n  }\n  for (let i = 0; i < data.length - 1 && data[i] === 0; i++) res.push(0);\n  return res.reverse();\n}\n\nconst gcd = /* @__NO_SIDE_EFFECTS__ */ (a: number, b: number): number => (!b ? a : gcd(b, a % b));\nconst radix2carry = /*@__NO_SIDE_EFFECTS__ */ (from: number, to: number) =>\n  from + (to - gcd(from, to));\n/**\n * Implemented with numbers, because BigInt is 5x slower\n * @__NO_SIDE_EFFECTS__\n */\nfunction convertRadix2(data: number[], from: number, to: number, padding: boolean): number[] {\n  if (!Array.isArray(data)) throw new Error('convertRadix2: data should be array');\n  if (from <= 0 || from > 32) throw new Error(`convertRadix2: wrong from=${from}`);\n  if (to <= 0 || to > 32) throw new Error(`convertRadix2: wrong to=${to}`);\n  if (radix2carry(from, to) > 32) {\n    throw new Error(\n      `convertRadix2: carry overflow from=${from} to=${to} carryBits=${radix2carry(from, to)}`\n    );\n  }\n  let carry = 0;\n  let pos = 0; // bitwise position in current element\n  const mask = 2 ** to - 1;\n  const res: number[] = [];\n  for (const n of data) {\n    assertNumber(n);\n    if (n >= 2 ** from) throw new Error(`convertRadix2: invalid data word=${n} from=${from}`);\n    carry = (carry << from) | n;\n    if (pos + from > 32) throw new Error(`convertRadix2: carry overflow pos=${pos} from=${from}`);\n    pos += from;\n    for (; pos >= to; pos -= to) res.push(((carry >> (pos - to)) & mask) >>> 0);\n    carry &= 2 ** pos - 1; // clean carry, otherwise it will cause overflow\n  }\n  carry = (carry << (to - pos)) & mask;\n  if (!padding && pos >= from) throw new Error('Excess padding');\n  if (!padding && carry) throw new Error(`Non-zero padding: ${carry}`);\n  if (padding && pos > 0) res.push(carry >>> 0);\n  return res;\n}\n\n/**\n * @__NO_SIDE_EFFECTS__\n */\nfunction radix(num: number): Coder<Uint8Array, number[]> {\n  assertNumber(num);\n  return {\n    encode: (bytes: Uint8Array) => {\n      if (!isBytes(bytes)) throw new Error('radix.encode input should be Uint8Array');\n      return convertRadix(Array.from(bytes), 2 ** 8, num);\n    },\n    decode: (digits: number[]) => {\n      if (!Array.isArray(digits) || (digits.length && typeof digits[0] !== 'number'))\n        throw new Error('radix.decode input should be array of numbers');\n      return Uint8Array.from(convertRadix(digits, num, 2 ** 8));\n    },\n  };\n}\n\n/**\n * If both bases are power of same number (like `2**8 <-> 2**64`),\n * there is a linear algorithm. For now we have implementation for power-of-two bases only.\n * @__NO_SIDE_EFFECTS__\n */\nfunction radix2(bits: number, revPadding = false): Coder<Uint8Array, number[]> {\n  assertNumber(bits);\n  if (bits <= 0 || bits > 32) throw new Error('radix2: bits should be in (0..32]');\n  if (radix2carry(8, bits) > 32 || radix2carry(bits, 8) > 32)\n    throw new Error('radix2: carry overflow');\n  return {\n    encode: (bytes: Uint8Array) => {\n      if (!isBytes(bytes)) throw new Error('radix2.encode input should be Uint8Array');\n      return convertRadix2(Array.from(bytes), 8, bits, !revPadding);\n    },\n    decode: (digits: number[]) => {\n      if (!Array.isArray(digits) || (digits.length && typeof digits[0] !== 'number'))\n        throw new Error('radix2.decode input should be array of numbers');\n      return Uint8Array.from(convertRadix2(digits, bits, 8, revPadding));\n    },\n  };\n}\n\ntype ArgumentTypes<F extends Function> = F extends (...args: infer A) => any ? A : never;\n/**\n * @__NO_SIDE_EFFECTS__\n */\nfunction unsafeWrapper<T extends (...args: any) => any>(fn: T) {\n  if (typeof fn !== 'function') throw new Error('unsafeWrapper fn should be function');\n  return function (...args: ArgumentTypes<T>): ReturnType<T> | void {\n    try {\n      return fn.apply(null, args);\n    } catch (e) {}\n  };\n}\n\n/**\n * @__NO_SIDE_EFFECTS__\n */\nfunction checksum(\n  len: number,\n  fn: (data: Uint8Array) => Uint8Array\n): Coder<Uint8Array, Uint8Array> {\n  assertNumber(len);\n  if (typeof fn !== 'function') throw new Error('checksum fn should be function');\n  return {\n    encode(data: Uint8Array) {\n      if (!isBytes(data)) throw new Error('checksum.encode: input should be Uint8Array');\n      const checksum = fn(data).slice(0, len);\n      const res = new Uint8Array(data.length + len);\n      res.set(data);\n      res.set(checksum, data.length);\n      return res;\n    },\n    decode(data: Uint8Array) {\n      if (!isBytes(data)) throw new Error('checksum.decode: input should be Uint8Array');\n      const payload = data.slice(0, -len);\n      const newChecksum = fn(payload).slice(0, len);\n      const oldChecksum = data.slice(-len);\n      for (let i = 0; i < len; i++)\n        if (newChecksum[i] !== oldChecksum[i]) throw new Error('Invalid checksum');\n      return payload;\n    },\n  };\n}\n\n// prettier-ignore\nexport const utils = {\n  alphabet, chain, checksum, convertRadix, convertRadix2, radix, radix2, join, padding,\n};\n\n// RFC 4648 aka RFC 3548\n// ---------------------\nexport const base16: BytesCoder = /* @__PURE__ */ chain(\n  radix2(4),\n  alphabet('0123456789ABCDEF'),\n  join('')\n);\nexport const base32: BytesCoder = /* @__PURE__ */ chain(\n  radix2(5),\n  alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZ234567'),\n  padding(5),\n  join('')\n);\nexport const base32nopad: BytesCoder = /* @__PURE__ */ chain(\n  radix2(5),\n  alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZ234567'),\n  join('')\n);\nexport const base32hex: BytesCoder = /* @__PURE__ */ chain(\n  radix2(5),\n  alphabet('0123456789ABCDEFGHIJKLMNOPQRSTUV'),\n  padding(5),\n  join('')\n);\nexport const base32hexnopad: BytesCoder = /* @__PURE__ */ chain(\n  radix2(5),\n  alphabet('0123456789ABCDEFGHIJKLMNOPQRSTUV'),\n  join('')\n);\nexport const base32crockford: BytesCoder = /* @__PURE__ */ chain(\n  radix2(5),\n  alphabet('0123456789ABCDEFGHJKMNPQRSTVWXYZ'),\n  join(''),\n  normalize((s: string) => s.toUpperCase().replace(/O/g, '0').replace(/[IL]/g, '1'))\n);\nexport const base64: BytesCoder = /* @__PURE__ */ chain(\n  radix2(6),\n  alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'),\n  padding(6),\n  join('')\n);\nexport const base64nopad: BytesCoder = /* @__PURE__ */ chain(\n  radix2(6),\n  alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'),\n  join('')\n);\nexport const base64url: BytesCoder = /* @__PURE__ */ chain(\n  radix2(6),\n  alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_'),\n  padding(6),\n  join('')\n);\nexport const base64urlnopad: BytesCoder = /* @__PURE__ */ chain(\n  radix2(6),\n  alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_'),\n  join('')\n);\n\n// base58 code\n// -----------\nconst genBase58 = (abc: string) => chain(radix(58), alphabet(abc), join(''));\n\nexport const base58: BytesCoder = /* @__PURE__ */ genBase58(\n  '123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz'\n);\nexport const base58flickr: BytesCoder = /* @__PURE__ */ genBase58(\n  '123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ'\n);\nexport const base58xrp: BytesCoder = /* @__PURE__ */ genBase58(\n  'rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz'\n);\n\n// xmr ver is done in 8-byte blocks (which equals 11 chars in decoding). Last (non-full) block padded with '1' to size in XMR_BLOCK_LEN.\n// Block encoding significantly reduces quadratic complexity of base58.\n\n// Data len (index) -> encoded block len\nconst XMR_BLOCK_LEN = [0, 2, 3, 5, 6, 7, 9, 10, 11];\nexport const base58xmr: BytesCoder = {\n  encode(data: Uint8Array) {\n    let res = '';\n    for (let i = 0; i < data.length; i += 8) {\n      const block = data.subarray(i, i + 8);\n      res += base58.encode(block).padStart(XMR_BLOCK_LEN[block.length]!, '1');\n    }\n    return res;\n  },\n  decode(str: string) {\n    let res: number[] = [];\n    for (let i = 0; i < str.length; i += 11) {\n      const slice = str.slice(i, i + 11);\n      const blockLen = XMR_BLOCK_LEN.indexOf(slice.length);\n      const block = base58.decode(slice);\n      for (let j = 0; j < block.length - blockLen; j++) {\n        if (block[j] !== 0) throw new Error('base58xmr: wrong padding');\n      }\n      res = res.concat(Array.from(block.slice(block.length - blockLen)));\n    }\n    return Uint8Array.from(res);\n  },\n};\n\nexport const createBase58check = (sha256: (data: Uint8Array) => Uint8Array): BytesCoder =>\n  chain(\n    checksum(4, (data) => sha256(sha256(data))),\n    base58\n  );\n// legacy export, bad name\nexport const base58check = createBase58check;\n\n// Bech32 code\n// -----------\nexport interface Bech32Decoded<Prefix extends string = string> {\n  prefix: Prefix;\n  words: number[];\n}\nexport interface Bech32DecodedWithArray<Prefix extends string = string> {\n  prefix: Prefix;\n  words: number[];\n  bytes: Uint8Array;\n}\n\nconst BECH_ALPHABET: Coder<number[], string> = /* @__PURE__ */ chain(\n  alphabet('qpzry9x8gf2tvdw0s3jn54khce6mua7l'),\n  join('')\n);\n\nconst POLYMOD_GENERATORS = [0x3b6a57b2, 0x26508e6d, 0x1ea119fa, 0x3d4233dd, 0x2a1462b3];\n/**\n * @__NO_SIDE_EFFECTS__\n */\nfunction bech32Polymod(pre: number): number {\n  const b = pre >> 25;\n  let chk = (pre & 0x1ffffff) << 5;\n  for (let i = 0; i < POLYMOD_GENERATORS.length; i++) {\n    if (((b >> i) & 1) === 1) chk ^= POLYMOD_GENERATORS[i]!;\n  }\n  return chk;\n}\n\n/**\n * @__NO_SIDE_EFFECTS__\n */\nfunction bechChecksum(prefix: string, words: number[], encodingConst = 1): string {\n  const len = prefix.length;\n  let chk = 1;\n  for (let i = 0; i < len; i++) {\n    const c = prefix.charCodeAt(i);\n    if (c < 33 || c > 126) throw new Error(`Invalid prefix (${prefix})`);\n    chk = bech32Polymod(chk) ^ (c >> 5);\n  }\n  chk = bech32Polymod(chk);\n  for (let i = 0; i < len; i++) chk = bech32Polymod(chk) ^ (prefix.charCodeAt(i) & 0x1f);\n  for (let v of words) chk = bech32Polymod(chk) ^ v;\n  for (let i = 0; i < 6; i++) chk = bech32Polymod(chk);\n  chk ^= encodingConst;\n  return BECH_ALPHABET.encode(convertRadix2([chk % 2 ** 30], 30, 5, false));\n}\n\nexport interface Bech32 {\n  encode<Prefix extends string>(\n    prefix: Prefix,\n    words: number[] | Uint8Array,\n    limit?: number | false\n  ): `${Lowercase<Prefix>}1${string}`;\n  decode<Prefix extends string>(\n    str: `${Prefix}1${string}`,\n    limit?: number | false\n  ): Bech32Decoded<Prefix>;\n  encodeFromBytes(prefix: string, bytes: Uint8Array): string;\n  decodeToBytes(str: string): Bech32DecodedWithArray;\n  decodeUnsafe(str: string, limit?: number | false): void | Bech32Decoded<string>;\n  fromWords(to: number[]): Uint8Array;\n  fromWordsUnsafe(to: number[]): void | Uint8Array;\n  toWords(from: Uint8Array): number[];\n}\n/**\n * @__NO_SIDE_EFFECTS__\n */\nfunction genBech32(encoding: 'bech32' | 'bech32m'): Bech32 {\n  const ENCODING_CONST = encoding === 'bech32' ? 1 : 0x2bc830a3;\n  const _words = radix2(5);\n  const fromWords = _words.decode;\n  const toWords = _words.encode;\n  const fromWordsUnsafe = unsafeWrapper(fromWords);\n\n  function encode<Prefix extends string>(\n    prefix: Prefix,\n    words: number[] | Uint8Array,\n    limit: number | false = 90\n  ): `${Lowercase<Prefix>}1${string}` {\n    if (typeof prefix !== 'string')\n      throw new Error(`bech32.encode prefix should be string, not ${typeof prefix}`);\n    if (words instanceof Uint8Array) words = Array.from(words);\n    if (!Array.isArray(words) || (words.length && typeof words[0] !== 'number'))\n      throw new Error(`bech32.encode words should be array of numbers, not ${typeof words}`);\n    if (prefix.length === 0) throw new TypeError(`Invalid prefix length ${prefix.length}`);\n    const actualLength = prefix.length + 7 + words.length;\n    if (limit !== false && actualLength > limit)\n      throw new TypeError(`Length ${actualLength} exceeds limit ${limit}`);\n    const lowered = prefix.toLowerCase();\n    const sum = bechChecksum(lowered, words, ENCODING_CONST);\n    return `${lowered}1${BECH_ALPHABET.encode(words)}${sum}` as `${Lowercase<Prefix>}1${string}`;\n  }\n\n  function decode<Prefix extends string>(\n    str: `${Prefix}1${string}`,\n    limit?: number | false\n  ): Bech32Decoded<Prefix>;\n  function decode(str: string, limit?: number | false): Bech32Decoded;\n  function decode(str: string, limit: number | false = 90): Bech32Decoded {\n    if (typeof str !== 'string')\n      throw new Error(`bech32.decode input should be string, not ${typeof str}`);\n    if (str.length < 8 || (limit !== false && str.length > limit))\n      throw new TypeError(`Wrong string length: ${str.length} (${str}). Expected (8..${limit})`);\n    // don't allow mixed case\n    const lowered = str.toLowerCase();\n    if (str !== lowered && str !== str.toUpperCase())\n      throw new Error(`String must be lowercase or uppercase`);\n    const sepIndex = lowered.lastIndexOf('1');\n    if (sepIndex === 0 || sepIndex === -1)\n      throw new Error(`Letter \"1\" must be present between prefix and data only`);\n    const prefix = lowered.slice(0, sepIndex);\n    const data = lowered.slice(sepIndex + 1);\n    if (data.length < 6) throw new Error('Data must be at least 6 characters long');\n    const words = BECH_ALPHABET.decode(data).slice(0, -6);\n    const sum = bechChecksum(prefix, words, ENCODING_CONST);\n    if (!data.endsWith(sum)) throw new Error(`Invalid checksum in ${str}: expected \"${sum}\"`);\n    return { prefix, words };\n  }\n\n  const decodeUnsafe = unsafeWrapper(decode);\n\n  function decodeToBytes(str: string): Bech32DecodedWithArray {\n    const { prefix, words } = decode(str, false);\n    return { prefix, words, bytes: fromWords(words) };\n  }\n\n  function encodeFromBytes(prefix: string, bytes: Uint8Array) {\n    return encode(prefix, toWords(bytes));\n  }\n\n  return {\n    encode,\n    decode,\n    encodeFromBytes,\n    decodeToBytes,\n    decodeUnsafe,\n    fromWords,\n    fromWordsUnsafe,\n    toWords,\n  };\n}\n\nexport const bech32: Bech32 = /* @__PURE__ */ genBech32('bech32');\nexport const bech32m: Bech32 = /* @__PURE__ */ genBech32('bech32m');\n\ndeclare const TextEncoder: any;\ndeclare const TextDecoder: any;\n\nexport const utf8: BytesCoder = {\n  encode: (data) => new TextDecoder().decode(data),\n  decode: (str) => new TextEncoder().encode(str),\n};\n\nexport const hex: BytesCoder = /* @__PURE__ */ chain(\n  radix2(4),\n  alphabet('0123456789abcdef'),\n  join(''),\n  normalize((s: string) => {\n    if (typeof s !== 'string' || s.length % 2)\n      throw new TypeError(`hex.decode: expected string, got ${typeof s} with length ${s.length}`);\n    return s.toLowerCase();\n  })\n);\n\n// prettier-ignore\nconst CODERS = {\n  utf8, hex, base16, base32, base64, base64url, base58, base58xmr\n};\ntype CoderType = keyof typeof CODERS;\nconst coderTypeError =\n  'Invalid encoding type. Available types: utf8, hex, base16, base32, base64, base64url, base58, base58xmr';\n\nexport const bytesToString = (type: CoderType, bytes: Uint8Array): string => {\n  if (typeof type !== 'string' || !CODERS.hasOwnProperty(type)) throw new TypeError(coderTypeError);\n  if (!isBytes(bytes)) throw new TypeError('bytesToString() expects Uint8Array');\n  return CODERS[type].encode(bytes);\n};\nexport const str = bytesToString; // as in python, but for bytes only\n\nexport const stringToBytes = (type: CoderType, str: string): Uint8Array => {\n  if (!CODERS.hasOwnProperty(type)) throw new TypeError(coderTypeError);\n  if (typeof str !== 'string') throw new TypeError('stringToBytes() expects string');\n  return CODERS[type].decode(str);\n};\nexport const bytes = stringToBytes;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.mnemonicToSeedSync = exports.mnemonicToSeed = exports.validateMnemonic = exports.entropyToMnemonic = exports.mnemonicToEntropy = exports.generateMnemonic = void 0;\n/*! scure-bip39 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */\nconst _assert_1 = require(\"@noble/hashes/_assert\");\nconst pbkdf2_1 = require(\"@noble/hashes/pbkdf2\");\nconst sha256_1 = require(\"@noble/hashes/sha256\");\nconst sha512_1 = require(\"@noble/hashes/sha512\");\nconst utils_1 = require(\"@noble/hashes/utils\");\nconst base_1 = require(\"@scure/base\");\n// Japanese wordlist\nconst isJapanese = (wordlist) => wordlist[0] === '\\u3042\\u3044\\u3053\\u304f\\u3057\\u3093';\n// Normalization replaces equivalent sequences of characters\n// so that any two texts that are equivalent will be reduced\n// to the same sequence of code points, called the normal form of the original text.\nfunction nfkd(str) {\n    if (typeof str !== 'string')\n        throw new TypeError(`Invalid mnemonic type: ${typeof str}`);\n    return str.normalize('NFKD');\n}\nfunction normalize(str) {\n    const norm = nfkd(str);\n    const words = norm.split(' ');\n    if (![12, 15, 18, 21, 24].includes(words.length))\n        throw new Error('Invalid mnemonic');\n    return { nfkd: norm, words };\n}\nfunction assertEntropy(entropy) {\n    _assert_1.default.bytes(entropy, 16, 20, 24, 28, 32);\n}\n/**\n * Generate x random words. Uses Cryptographically-Secure Random Number Generator.\n * @param wordlist imported wordlist for specific language\n * @param strength mnemonic strength 128-256 bits\n * @example\n * generateMnemonic(wordlist, 128)\n * // 'legal winner thank year wave sausage worth useful legal winner thank yellow'\n */\nfunction generateMnemonic(wordlist, strength = 128) {\n    _assert_1.default.number(strength);\n    if (strength % 32 !== 0 || strength > 256)\n        throw new TypeError('Invalid entropy');\n    return entropyToMnemonic((0, utils_1.randomBytes)(strength / 8), wordlist);\n}\nexports.generateMnemonic = generateMnemonic;\nconst calcChecksum = (entropy) => {\n    // Checksum is ent.length/4 bits long\n    const bitsLeft = 8 - entropy.length / 4;\n    // Zero rightmost \"bitsLeft\" bits in byte\n    // For example: bitsLeft=4 val=10111101 -> 10110000\n    return new Uint8Array([((0, sha256_1.sha256)(entropy)[0] >> bitsLeft) << bitsLeft]);\n};\nfunction getCoder(wordlist) {\n    if (!Array.isArray(wordlist) || wordlist.length !== 2 ** 11 || typeof wordlist[0] !== 'string')\n        throw new Error('Worlist: expected array of 2048 strings');\n    wordlist.forEach((i) => {\n        if (typeof i !== 'string')\n            throw new Error(`Wordlist: non-string element: ${i}`);\n    });\n    return base_1.utils.chain(base_1.utils.checksum(1, calcChecksum), base_1.utils.radix2(11, true), base_1.utils.alphabet(wordlist));\n}\n/**\n * Reversible: Converts mnemonic string to raw entropy in form of byte array.\n * @param mnemonic 12-24 words\n * @param wordlist imported wordlist for specific language\n * @example\n * const mnem = 'legal winner thank year wave sausage worth useful legal winner thank yellow';\n * mnemonicToEntropy(mnem, wordlist)\n * // Produces\n * new Uint8Array([\n *   0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f,\n *   0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f\n * ])\n */\nfunction mnemonicToEntropy(mnemonic, wordlist) {\n    const { words } = normalize(mnemonic);\n    const entropy = getCoder(wordlist).decode(words);\n    assertEntropy(entropy);\n    return entropy;\n}\nexports.mnemonicToEntropy = mnemonicToEntropy;\n/**\n * Reversible: Converts raw entropy in form of byte array to mnemonic string.\n * @param entropy byte array\n * @param wordlist imported wordlist for specific language\n * @returns 12-24 words\n * @example\n * const ent = new Uint8Array([\n *   0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f,\n *   0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f\n * ]);\n * entropyToMnemonic(ent, wordlist);\n * // 'legal winner thank year wave sausage worth useful legal winner thank yellow'\n */\nfunction entropyToMnemonic(entropy, wordlist) {\n    assertEntropy(entropy);\n    const words = getCoder(wordlist).encode(entropy);\n    return words.join(isJapanese(wordlist) ? '\\u3000' : ' ');\n}\nexports.entropyToMnemonic = entropyToMnemonic;\n/**\n * Validates mnemonic for being 12-24 words contained in `wordlist`.\n */\nfunction validateMnemonic(mnemonic, wordlist) {\n    try {\n        mnemonicToEntropy(mnemonic, wordlist);\n    }\n    catch (e) {\n        return false;\n    }\n    return true;\n}\nexports.validateMnemonic = validateMnemonic;\nconst salt = (passphrase) => nfkd(`mnemonic${passphrase}`);\n/**\n * Irreversible: Uses KDF to derive 64 bytes of key data from mnemonic + optional password.\n * @param mnemonic 12-24 words\n * @param passphrase string that will additionally protect the key\n * @returns 64 bytes of key data\n * @example\n * const mnem = 'legal winner thank year wave sausage worth useful legal winner thank yellow';\n * await mnemonicToSeed(mnem, 'password');\n * // new Uint8Array([...64 bytes])\n */\nfunction mnemonicToSeed(mnemonic, passphrase = '') {\n    return (0, pbkdf2_1.pbkdf2Async)(sha512_1.sha512, normalize(mnemonic).nfkd, salt(passphrase), { c: 2048, dkLen: 64 });\n}\nexports.mnemonicToSeed = mnemonicToSeed;\n/**\n * Irreversible: Uses KDF to derive 64 bytes of key data from mnemonic + optional password.\n * @param mnemonic 12-24 words\n * @param passphrase string that will additionally protect the key\n * @returns 64 bytes of key data\n * @example\n * const mnem = 'legal winner thank year wave sausage worth useful legal winner thank yellow';\n * mnemonicToSeedSync(mnem, 'password');\n * // new Uint8Array([...64 bytes])\n */\nfunction mnemonicToSeedSync(mnemonic, passphrase = '') {\n    return (0, pbkdf2_1.pbkdf2)(sha512_1.sha512, normalize(mnemonic).nfkd, salt(passphrase), { c: 2048, dkLen: 64 });\n}\nexports.mnemonicToSeedSync = mnemonicToSeedSync;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.wordlist = void 0;\nexports.wordlist = `abandon\nability\nable\nabout\nabove\nabsent\nabsorb\nabstract\nabsurd\nabuse\naccess\naccident\naccount\naccuse\nachieve\nacid\nacoustic\nacquire\nacross\nact\naction\nactor\nactress\nactual\nadapt\nadd\naddict\naddress\nadjust\nadmit\nadult\nadvance\nadvice\naerobic\naffair\nafford\nafraid\nagain\nage\nagent\nagree\nahead\naim\nair\nairport\naisle\nalarm\nalbum\nalcohol\nalert\nalien\nall\nalley\nallow\nalmost\nalone\nalpha\nalready\nalso\nalter\nalways\namateur\namazing\namong\namount\namused\nanalyst\nanchor\nancient\nanger\nangle\nangry\nanimal\nankle\nannounce\nannual\nanother\nanswer\nantenna\nantique\nanxiety\nany\napart\napology\nappear\napple\napprove\napril\narch\narctic\narea\narena\nargue\narm\narmed\narmor\narmy\naround\narrange\narrest\narrive\narrow\nart\nartefact\nartist\nartwork\nask\naspect\nassault\nasset\nassist\nassume\nasthma\nathlete\natom\nattack\nattend\nattitude\nattract\nauction\naudit\naugust\naunt\nauthor\nauto\nautumn\naverage\navocado\navoid\nawake\naware\naway\nawesome\nawful\nawkward\naxis\nbaby\nbachelor\nbacon\nbadge\nbag\nbalance\nbalcony\nball\nbamboo\nbanana\nbanner\nbar\nbarely\nbargain\nbarrel\nbase\nbasic\nbasket\nbattle\nbeach\nbean\nbeauty\nbecause\nbecome\nbeef\nbefore\nbegin\nbehave\nbehind\nbelieve\nbelow\nbelt\nbench\nbenefit\nbest\nbetray\nbetter\nbetween\nbeyond\nbicycle\nbid\nbike\nbind\nbiology\nbird\nbirth\nbitter\nblack\nblade\nblame\nblanket\nblast\nbleak\nbless\nblind\nblood\nblossom\nblouse\nblue\nblur\nblush\nboard\nboat\nbody\nboil\nbomb\nbone\nbonus\nbook\nboost\nborder\nboring\nborrow\nboss\nbottom\nbounce\nbox\nboy\nbracket\nbrain\nbrand\nbrass\nbrave\nbread\nbreeze\nbrick\nbridge\nbrief\nbright\nbring\nbrisk\nbroccoli\nbroken\nbronze\nbroom\nbrother\nbrown\nbrush\nbubble\nbuddy\nbudget\nbuffalo\nbuild\nbulb\nbulk\nbullet\nbundle\nbunker\nburden\nburger\nburst\nbus\nbusiness\nbusy\nbutter\nbuyer\nbuzz\ncabbage\ncabin\ncable\ncactus\ncage\ncake\ncall\ncalm\ncamera\ncamp\ncan\ncanal\ncancel\ncandy\ncannon\ncanoe\ncanvas\ncanyon\ncapable\ncapital\ncaptain\ncar\ncarbon\ncard\ncargo\ncarpet\ncarry\ncart\ncase\ncash\ncasino\ncastle\ncasual\ncat\ncatalog\ncatch\ncategory\ncattle\ncaught\ncause\ncaution\ncave\nceiling\ncelery\ncement\ncensus\ncentury\ncereal\ncertain\nchair\nchalk\nchampion\nchange\nchaos\nchapter\ncharge\nchase\nchat\ncheap\ncheck\ncheese\nchef\ncherry\nchest\nchicken\nchief\nchild\nchimney\nchoice\nchoose\nchronic\nchuckle\nchunk\nchurn\ncigar\ncinnamon\ncircle\ncitizen\ncity\ncivil\nclaim\nclap\nclarify\nclaw\nclay\nclean\nclerk\nclever\nclick\nclient\ncliff\nclimb\nclinic\nclip\nclock\nclog\nclose\ncloth\ncloud\nclown\nclub\nclump\ncluster\nclutch\ncoach\ncoast\ncoconut\ncode\ncoffee\ncoil\ncoin\ncollect\ncolor\ncolumn\ncombine\ncome\ncomfort\ncomic\ncommon\ncompany\nconcert\nconduct\nconfirm\ncongress\nconnect\nconsider\ncontrol\nconvince\ncook\ncool\ncopper\ncopy\ncoral\ncore\ncorn\ncorrect\ncost\ncotton\ncouch\ncountry\ncouple\ncourse\ncousin\ncover\ncoyote\ncrack\ncradle\ncraft\ncram\ncrane\ncrash\ncrater\ncrawl\ncrazy\ncream\ncredit\ncreek\ncrew\ncricket\ncrime\ncrisp\ncritic\ncrop\ncross\ncrouch\ncrowd\ncrucial\ncruel\ncruise\ncrumble\ncrunch\ncrush\ncry\ncrystal\ncube\nculture\ncup\ncupboard\ncurious\ncurrent\ncurtain\ncurve\ncushion\ncustom\ncute\ncycle\ndad\ndamage\ndamp\ndance\ndanger\ndaring\ndash\ndaughter\ndawn\nday\ndeal\ndebate\ndebris\ndecade\ndecember\ndecide\ndecline\ndecorate\ndecrease\ndeer\ndefense\ndefine\ndefy\ndegree\ndelay\ndeliver\ndemand\ndemise\ndenial\ndentist\ndeny\ndepart\ndepend\ndeposit\ndepth\ndeputy\nderive\ndescribe\ndesert\ndesign\ndesk\ndespair\ndestroy\ndetail\ndetect\ndevelop\ndevice\ndevote\ndiagram\ndial\ndiamond\ndiary\ndice\ndiesel\ndiet\ndiffer\ndigital\ndignity\ndilemma\ndinner\ndinosaur\ndirect\ndirt\ndisagree\ndiscover\ndisease\ndish\ndismiss\ndisorder\ndisplay\ndistance\ndivert\ndivide\ndivorce\ndizzy\ndoctor\ndocument\ndog\ndoll\ndolphin\ndomain\ndonate\ndonkey\ndonor\ndoor\ndose\ndouble\ndove\ndraft\ndragon\ndrama\ndrastic\ndraw\ndream\ndress\ndrift\ndrill\ndrink\ndrip\ndrive\ndrop\ndrum\ndry\nduck\ndumb\ndune\nduring\ndust\ndutch\nduty\ndwarf\ndynamic\neager\neagle\nearly\nearn\nearth\neasily\neast\neasy\necho\necology\neconomy\nedge\nedit\neducate\neffort\negg\neight\neither\nelbow\nelder\nelectric\nelegant\nelement\nelephant\nelevator\nelite\nelse\nembark\nembody\nembrace\nemerge\nemotion\nemploy\nempower\nempty\nenable\nenact\nend\nendless\nendorse\nenemy\nenergy\nenforce\nengage\nengine\nenhance\nenjoy\nenlist\nenough\nenrich\nenroll\nensure\nenter\nentire\nentry\nenvelope\nepisode\nequal\nequip\nera\nerase\nerode\nerosion\nerror\nerupt\nescape\nessay\nessence\nestate\neternal\nethics\nevidence\nevil\nevoke\nevolve\nexact\nexample\nexcess\nexchange\nexcite\nexclude\nexcuse\nexecute\nexercise\nexhaust\nexhibit\nexile\nexist\nexit\nexotic\nexpand\nexpect\nexpire\nexplain\nexpose\nexpress\nextend\nextra\neye\neyebrow\nfabric\nface\nfaculty\nfade\nfaint\nfaith\nfall\nfalse\nfame\nfamily\nfamous\nfan\nfancy\nfantasy\nfarm\nfashion\nfat\nfatal\nfather\nfatigue\nfault\nfavorite\nfeature\nfebruary\nfederal\nfee\nfeed\nfeel\nfemale\nfence\nfestival\nfetch\nfever\nfew\nfiber\nfiction\nfield\nfigure\nfile\nfilm\nfilter\nfinal\nfind\nfine\nfinger\nfinish\nfire\nfirm\nfirst\nfiscal\nfish\nfit\nfitness\nfix\nflag\nflame\nflash\nflat\nflavor\nflee\nflight\nflip\nfloat\nflock\nfloor\nflower\nfluid\nflush\nfly\nfoam\nfocus\nfog\nfoil\nfold\nfollow\nfood\nfoot\nforce\nforest\nforget\nfork\nfortune\nforum\nforward\nfossil\nfoster\nfound\nfox\nfragile\nframe\nfrequent\nfresh\nfriend\nfringe\nfrog\nfront\nfrost\nfrown\nfrozen\nfruit\nfuel\nfun\nfunny\nfurnace\nfury\nfuture\ngadget\ngain\ngalaxy\ngallery\ngame\ngap\ngarage\ngarbage\ngarden\ngarlic\ngarment\ngas\ngasp\ngate\ngather\ngauge\ngaze\ngeneral\ngenius\ngenre\ngentle\ngenuine\ngesture\nghost\ngiant\ngift\ngiggle\nginger\ngiraffe\ngirl\ngive\nglad\nglance\nglare\nglass\nglide\nglimpse\nglobe\ngloom\nglory\nglove\nglow\nglue\ngoat\ngoddess\ngold\ngood\ngoose\ngorilla\ngospel\ngossip\ngovern\ngown\ngrab\ngrace\ngrain\ngrant\ngrape\ngrass\ngravity\ngreat\ngreen\ngrid\ngrief\ngrit\ngrocery\ngroup\ngrow\ngrunt\nguard\nguess\nguide\nguilt\nguitar\ngun\ngym\nhabit\nhair\nhalf\nhammer\nhamster\nhand\nhappy\nharbor\nhard\nharsh\nharvest\nhat\nhave\nhawk\nhazard\nhead\nhealth\nheart\nheavy\nhedgehog\nheight\nhello\nhelmet\nhelp\nhen\nhero\nhidden\nhigh\nhill\nhint\nhip\nhire\nhistory\nhobby\nhockey\nhold\nhole\nholiday\nhollow\nhome\nhoney\nhood\nhope\nhorn\nhorror\nhorse\nhospital\nhost\nhotel\nhour\nhover\nhub\nhuge\nhuman\nhumble\nhumor\nhundred\nhungry\nhunt\nhurdle\nhurry\nhurt\nhusband\nhybrid\nice\nicon\nidea\nidentify\nidle\nignore\nill\nillegal\nillness\nimage\nimitate\nimmense\nimmune\nimpact\nimpose\nimprove\nimpulse\ninch\ninclude\nincome\nincrease\nindex\nindicate\nindoor\nindustry\ninfant\ninflict\ninform\ninhale\ninherit\ninitial\ninject\ninjury\ninmate\ninner\ninnocent\ninput\ninquiry\ninsane\ninsect\ninside\ninspire\ninstall\nintact\ninterest\ninto\ninvest\ninvite\ninvolve\niron\nisland\nisolate\nissue\nitem\nivory\njacket\njaguar\njar\njazz\njealous\njeans\njelly\njewel\njob\njoin\njoke\njourney\njoy\njudge\njuice\njump\njungle\njunior\njunk\njust\nkangaroo\nkeen\nkeep\nketchup\nkey\nkick\nkid\nkidney\nkind\nkingdom\nkiss\nkit\nkitchen\nkite\nkitten\nkiwi\nknee\nknife\nknock\nknow\nlab\nlabel\nlabor\nladder\nlady\nlake\nlamp\nlanguage\nlaptop\nlarge\nlater\nlatin\nlaugh\nlaundry\nlava\nlaw\nlawn\nlawsuit\nlayer\nlazy\nleader\nleaf\nlearn\nleave\nlecture\nleft\nleg\nlegal\nlegend\nleisure\nlemon\nlend\nlength\nlens\nleopard\nlesson\nletter\nlevel\nliar\nliberty\nlibrary\nlicense\nlife\nlift\nlight\nlike\nlimb\nlimit\nlink\nlion\nliquid\nlist\nlittle\nlive\nlizard\nload\nloan\nlobster\nlocal\nlock\nlogic\nlonely\nlong\nloop\nlottery\nloud\nlounge\nlove\nloyal\nlucky\nluggage\nlumber\nlunar\nlunch\nluxury\nlyrics\nmachine\nmad\nmagic\nmagnet\nmaid\nmail\nmain\nmajor\nmake\nmammal\nman\nmanage\nmandate\nmango\nmansion\nmanual\nmaple\nmarble\nmarch\nmargin\nmarine\nmarket\nmarriage\nmask\nmass\nmaster\nmatch\nmaterial\nmath\nmatrix\nmatter\nmaximum\nmaze\nmeadow\nmean\nmeasure\nmeat\nmechanic\nmedal\nmedia\nmelody\nmelt\nmember\nmemory\nmention\nmenu\nmercy\nmerge\nmerit\nmerry\nmesh\nmessage\nmetal\nmethod\nmiddle\nmidnight\nmilk\nmillion\nmimic\nmind\nminimum\nminor\nminute\nmiracle\nmirror\nmisery\nmiss\nmistake\nmix\nmixed\nmixture\nmobile\nmodel\nmodify\nmom\nmoment\nmonitor\nmonkey\nmonster\nmonth\nmoon\nmoral\nmore\nmorning\nmosquito\nmother\nmotion\nmotor\nmountain\nmouse\nmove\nmovie\nmuch\nmuffin\nmule\nmultiply\nmuscle\nmuseum\nmushroom\nmusic\nmust\nmutual\nmyself\nmystery\nmyth\nnaive\nname\nnapkin\nnarrow\nnasty\nnation\nnature\nnear\nneck\nneed\nnegative\nneglect\nneither\nnephew\nnerve\nnest\nnet\nnetwork\nneutral\nnever\nnews\nnext\nnice\nnight\nnoble\nnoise\nnominee\nnoodle\nnormal\nnorth\nnose\nnotable\nnote\nnothing\nnotice\nnovel\nnow\nnuclear\nnumber\nnurse\nnut\noak\nobey\nobject\noblige\nobscure\nobserve\nobtain\nobvious\noccur\nocean\noctober\nodor\noff\noffer\noffice\noften\noil\nokay\nold\nolive\nolympic\nomit\nonce\none\nonion\nonline\nonly\nopen\nopera\nopinion\noppose\noption\norange\norbit\norchard\norder\nordinary\norgan\norient\noriginal\norphan\nostrich\nother\noutdoor\nouter\noutput\noutside\noval\noven\nover\nown\nowner\noxygen\noyster\nozone\npact\npaddle\npage\npair\npalace\npalm\npanda\npanel\npanic\npanther\npaper\nparade\nparent\npark\nparrot\nparty\npass\npatch\npath\npatient\npatrol\npattern\npause\npave\npayment\npeace\npeanut\npear\npeasant\npelican\npen\npenalty\npencil\npeople\npepper\nperfect\npermit\nperson\npet\nphone\nphoto\nphrase\nphysical\npiano\npicnic\npicture\npiece\npig\npigeon\npill\npilot\npink\npioneer\npipe\npistol\npitch\npizza\nplace\nplanet\nplastic\nplate\nplay\nplease\npledge\npluck\nplug\nplunge\npoem\npoet\npoint\npolar\npole\npolice\npond\npony\npool\npopular\nportion\nposition\npossible\npost\npotato\npottery\npoverty\npowder\npower\npractice\npraise\npredict\nprefer\nprepare\npresent\npretty\nprevent\nprice\npride\nprimary\nprint\npriority\nprison\nprivate\nprize\nproblem\nprocess\nproduce\nprofit\nprogram\nproject\npromote\nproof\nproperty\nprosper\nprotect\nproud\nprovide\npublic\npudding\npull\npulp\npulse\npumpkin\npunch\npupil\npuppy\npurchase\npurity\npurpose\npurse\npush\nput\npuzzle\npyramid\nquality\nquantum\nquarter\nquestion\nquick\nquit\nquiz\nquote\nrabbit\nraccoon\nrace\nrack\nradar\nradio\nrail\nrain\nraise\nrally\nramp\nranch\nrandom\nrange\nrapid\nrare\nrate\nrather\nraven\nraw\nrazor\nready\nreal\nreason\nrebel\nrebuild\nrecall\nreceive\nrecipe\nrecord\nrecycle\nreduce\nreflect\nreform\nrefuse\nregion\nregret\nregular\nreject\nrelax\nrelease\nrelief\nrely\nremain\nremember\nremind\nremove\nrender\nrenew\nrent\nreopen\nrepair\nrepeat\nreplace\nreport\nrequire\nrescue\nresemble\nresist\nresource\nresponse\nresult\nretire\nretreat\nreturn\nreunion\nreveal\nreview\nreward\nrhythm\nrib\nribbon\nrice\nrich\nride\nridge\nrifle\nright\nrigid\nring\nriot\nripple\nrisk\nritual\nrival\nriver\nroad\nroast\nrobot\nrobust\nrocket\nromance\nroof\nrookie\nroom\nrose\nrotate\nrough\nround\nroute\nroyal\nrubber\nrude\nrug\nrule\nrun\nrunway\nrural\nsad\nsaddle\nsadness\nsafe\nsail\nsalad\nsalmon\nsalon\nsalt\nsalute\nsame\nsample\nsand\nsatisfy\nsatoshi\nsauce\nsausage\nsave\nsay\nscale\nscan\nscare\nscatter\nscene\nscheme\nschool\nscience\nscissors\nscorpion\nscout\nscrap\nscreen\nscript\nscrub\nsea\nsearch\nseason\nseat\nsecond\nsecret\nsection\nsecurity\nseed\nseek\nsegment\nselect\nsell\nseminar\nsenior\nsense\nsentence\nseries\nservice\nsession\nsettle\nsetup\nseven\nshadow\nshaft\nshallow\nshare\nshed\nshell\nsheriff\nshield\nshift\nshine\nship\nshiver\nshock\nshoe\nshoot\nshop\nshort\nshoulder\nshove\nshrimp\nshrug\nshuffle\nshy\nsibling\nsick\nside\nsiege\nsight\nsign\nsilent\nsilk\nsilly\nsilver\nsimilar\nsimple\nsince\nsing\nsiren\nsister\nsituate\nsix\nsize\nskate\nsketch\nski\nskill\nskin\nskirt\nskull\nslab\nslam\nsleep\nslender\nslice\nslide\nslight\nslim\nslogan\nslot\nslow\nslush\nsmall\nsmart\nsmile\nsmoke\nsmooth\nsnack\nsnake\nsnap\nsniff\nsnow\nsoap\nsoccer\nsocial\nsock\nsoda\nsoft\nsolar\nsoldier\nsolid\nsolution\nsolve\nsomeone\nsong\nsoon\nsorry\nsort\nsoul\nsound\nsoup\nsource\nsouth\nspace\nspare\nspatial\nspawn\nspeak\nspecial\nspeed\nspell\nspend\nsphere\nspice\nspider\nspike\nspin\nspirit\nsplit\nspoil\nsponsor\nspoon\nsport\nspot\nspray\nspread\nspring\nspy\nsquare\nsqueeze\nsquirrel\nstable\nstadium\nstaff\nstage\nstairs\nstamp\nstand\nstart\nstate\nstay\nsteak\nsteel\nstem\nstep\nstereo\nstick\nstill\nsting\nstock\nstomach\nstone\nstool\nstory\nstove\nstrategy\nstreet\nstrike\nstrong\nstruggle\nstudent\nstuff\nstumble\nstyle\nsubject\nsubmit\nsubway\nsuccess\nsuch\nsudden\nsuffer\nsugar\nsuggest\nsuit\nsummer\nsun\nsunny\nsunset\nsuper\nsupply\nsupreme\nsure\nsurface\nsurge\nsurprise\nsurround\nsurvey\nsuspect\nsustain\nswallow\nswamp\nswap\nswarm\nswear\nsweet\nswift\nswim\nswing\nswitch\nsword\nsymbol\nsymptom\nsyrup\nsystem\ntable\ntackle\ntag\ntail\ntalent\ntalk\ntank\ntape\ntarget\ntask\ntaste\ntattoo\ntaxi\nteach\nteam\ntell\nten\ntenant\ntennis\ntent\nterm\ntest\ntext\nthank\nthat\ntheme\nthen\ntheory\nthere\nthey\nthing\nthis\nthought\nthree\nthrive\nthrow\nthumb\nthunder\nticket\ntide\ntiger\ntilt\ntimber\ntime\ntiny\ntip\ntired\ntissue\ntitle\ntoast\ntobacco\ntoday\ntoddler\ntoe\ntogether\ntoilet\ntoken\ntomato\ntomorrow\ntone\ntongue\ntonight\ntool\ntooth\ntop\ntopic\ntopple\ntorch\ntornado\ntortoise\ntoss\ntotal\ntourist\ntoward\ntower\ntown\ntoy\ntrack\ntrade\ntraffic\ntragic\ntrain\ntransfer\ntrap\ntrash\ntravel\ntray\ntreat\ntree\ntrend\ntrial\ntribe\ntrick\ntrigger\ntrim\ntrip\ntrophy\ntrouble\ntruck\ntrue\ntruly\ntrumpet\ntrust\ntruth\ntry\ntube\ntuition\ntumble\ntuna\ntunnel\nturkey\nturn\nturtle\ntwelve\ntwenty\ntwice\ntwin\ntwist\ntwo\ntype\ntypical\nugly\numbrella\nunable\nunaware\nuncle\nuncover\nunder\nundo\nunfair\nunfold\nunhappy\nuniform\nunique\nunit\nuniverse\nunknown\nunlock\nuntil\nunusual\nunveil\nupdate\nupgrade\nuphold\nupon\nupper\nupset\nurban\nurge\nusage\nuse\nused\nuseful\nuseless\nusual\nutility\nvacant\nvacuum\nvague\nvalid\nvalley\nvalve\nvan\nvanish\nvapor\nvarious\nvast\nvault\nvehicle\nvelvet\nvendor\nventure\nvenue\nverb\nverify\nversion\nvery\nvessel\nveteran\nviable\nvibrant\nvicious\nvictory\nvideo\nview\nvillage\nvintage\nviolin\nvirtual\nvirus\nvisa\nvisit\nvisual\nvital\nvivid\nvocal\nvoice\nvoid\nvolcano\nvolume\nvote\nvoyage\nwage\nwagon\nwait\nwalk\nwall\nwalnut\nwant\nwarfare\nwarm\nwarrior\nwash\nwasp\nwaste\nwater\nwave\nway\nwealth\nweapon\nwear\nweasel\nweather\nweb\nwedding\nweekend\nweird\nwelcome\nwest\nwet\nwhale\nwhat\nwheat\nwheel\nwhen\nwhere\nwhip\nwhisper\nwide\nwidth\nwife\nwild\nwill\nwin\nwindow\nwine\nwing\nwink\nwinner\nwinter\nwire\nwisdom\nwise\nwish\nwitness\nwolf\nwoman\nwonder\nwood\nwool\nword\nwork\nworld\nworry\nworth\nwrap\nwreck\nwrestle\nwrist\nwrite\nwrong\nyard\nyear\nyellow\nyou\nyoung\nyouth\nzebra\nzero\nzone\nzoo`.split('\\n');\n", null, "\"use strict\";\n/*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.utils = exports.schnorr = exports.verify = exports.signSync = exports.sign = exports.getSharedSecret = exports.recoverPublicKey = exports.getPublicKey = exports.Signature = exports.Point = exports.CURVE = void 0;\nconst nodeCrypto = require(\"crypto\");\nconst _0n = BigInt(0);\nconst _1n = BigInt(1);\nconst _2n = BigInt(2);\nconst _3n = BigInt(3);\nconst _8n = BigInt(8);\nconst CURVE = Object.freeze({\n    a: _0n,\n    b: BigInt(7),\n    P: BigInt('0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f'),\n    n: BigInt('0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141'),\n    h: _1n,\n    Gx: BigInt('55066263022277343669578718895168534326250603453777594175500187360389116729240'),\n    Gy: BigInt('32670510020758816978083085130507043184471273380659243275938904335757337482424'),\n    beta: BigInt('0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee'),\n});\nexports.CURVE = CURVE;\nconst divNearest = (a, b) => (a + b / _2n) / b;\nconst endo = {\n    beta: BigInt('0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee'),\n    splitScalar(k) {\n        const { n } = CURVE;\n        const a1 = BigInt('0x3086d221a7d46bcde86c90e49284eb15');\n        const b1 = -_1n * BigInt('0xe4437ed6010e88286f547fa90abfe4c3');\n        const a2 = BigInt('0x114ca50f7a8e2f3f657c1108d9d44cfd8');\n        const b2 = a1;\n        const POW_2_128 = BigInt('0x100000000000000000000000000000000');\n        const c1 = divNearest(b2 * k, n);\n        const c2 = divNearest(-b1 * k, n);\n        let k1 = mod(k - c1 * a1 - c2 * a2, n);\n        let k2 = mod(-c1 * b1 - c2 * b2, n);\n        const k1neg = k1 > POW_2_128;\n        const k2neg = k2 > POW_2_128;\n        if (k1neg)\n            k1 = n - k1;\n        if (k2neg)\n            k2 = n - k2;\n        if (k1 > POW_2_128 || k2 > POW_2_128) {\n            throw new Error('splitScalarEndo: Endomorphism failed, k=' + k);\n        }\n        return { k1neg, k1, k2neg, k2 };\n    },\n};\nconst fieldLen = 32;\nconst groupLen = 32;\nconst hashLen = 32;\nconst compressedLen = fieldLen + 1;\nconst uncompressedLen = 2 * fieldLen + 1;\nfunction weierstrass(x) {\n    const { a, b } = CURVE;\n    const x2 = mod(x * x);\n    const x3 = mod(x2 * x);\n    return mod(x3 + a * x + b);\n}\nconst USE_ENDOMORPHISM = CURVE.a === _0n;\nclass ShaError extends Error {\n    constructor(message) {\n        super(message);\n    }\n}\nfunction assertJacPoint(other) {\n    if (!(other instanceof JacobianPoint))\n        throw new TypeError('JacobianPoint expected');\n}\nclass JacobianPoint {\n    constructor(x, y, z) {\n        this.x = x;\n        this.y = y;\n        this.z = z;\n    }\n    static fromAffine(p) {\n        if (!(p instanceof Point)) {\n            throw new TypeError('JacobianPoint#fromAffine: expected Point');\n        }\n        if (p.equals(Point.ZERO))\n            return JacobianPoint.ZERO;\n        return new JacobianPoint(p.x, p.y, _1n);\n    }\n    static toAffineBatch(points) {\n        const toInv = invertBatch(points.map((p) => p.z));\n        return points.map((p, i) => p.toAffine(toInv[i]));\n    }\n    static normalizeZ(points) {\n        return JacobianPoint.toAffineBatch(points).map(JacobianPoint.fromAffine);\n    }\n    equals(other) {\n        assertJacPoint(other);\n        const { x: X1, y: Y1, z: Z1 } = this;\n        const { x: X2, y: Y2, z: Z2 } = other;\n        const Z1Z1 = mod(Z1 * Z1);\n        const Z2Z2 = mod(Z2 * Z2);\n        const U1 = mod(X1 * Z2Z2);\n        const U2 = mod(X2 * Z1Z1);\n        const S1 = mod(mod(Y1 * Z2) * Z2Z2);\n        const S2 = mod(mod(Y2 * Z1) * Z1Z1);\n        return U1 === U2 && S1 === S2;\n    }\n    negate() {\n        return new JacobianPoint(this.x, mod(-this.y), this.z);\n    }\n    double() {\n        const { x: X1, y: Y1, z: Z1 } = this;\n        const A = mod(X1 * X1);\n        const B = mod(Y1 * Y1);\n        const C = mod(B * B);\n        const x1b = X1 + B;\n        const D = mod(_2n * (mod(x1b * x1b) - A - C));\n        const E = mod(_3n * A);\n        const F = mod(E * E);\n        const X3 = mod(F - _2n * D);\n        const Y3 = mod(E * (D - X3) - _8n * C);\n        const Z3 = mod(_2n * Y1 * Z1);\n        return new JacobianPoint(X3, Y3, Z3);\n    }\n    add(other) {\n        assertJacPoint(other);\n        const { x: X1, y: Y1, z: Z1 } = this;\n        const { x: X2, y: Y2, z: Z2 } = other;\n        if (X2 === _0n || Y2 === _0n)\n            return this;\n        if (X1 === _0n || Y1 === _0n)\n            return other;\n        const Z1Z1 = mod(Z1 * Z1);\n        const Z2Z2 = mod(Z2 * Z2);\n        const U1 = mod(X1 * Z2Z2);\n        const U2 = mod(X2 * Z1Z1);\n        const S1 = mod(mod(Y1 * Z2) * Z2Z2);\n        const S2 = mod(mod(Y2 * Z1) * Z1Z1);\n        const H = mod(U2 - U1);\n        const r = mod(S2 - S1);\n        if (H === _0n) {\n            if (r === _0n) {\n                return this.double();\n            }\n            else {\n                return JacobianPoint.ZERO;\n            }\n        }\n        const HH = mod(H * H);\n        const HHH = mod(H * HH);\n        const V = mod(U1 * HH);\n        const X3 = mod(r * r - HHH - _2n * V);\n        const Y3 = mod(r * (V - X3) - S1 * HHH);\n        const Z3 = mod(Z1 * Z2 * H);\n        return new JacobianPoint(X3, Y3, Z3);\n    }\n    subtract(other) {\n        return this.add(other.negate());\n    }\n    multiplyUnsafe(scalar) {\n        const P0 = JacobianPoint.ZERO;\n        if (typeof scalar === 'bigint' && scalar === _0n)\n            return P0;\n        let n = normalizeScalar(scalar);\n        if (n === _1n)\n            return this;\n        if (!USE_ENDOMORPHISM) {\n            let p = P0;\n            let d = this;\n            while (n > _0n) {\n                if (n & _1n)\n                    p = p.add(d);\n                d = d.double();\n                n >>= _1n;\n            }\n            return p;\n        }\n        let { k1neg, k1, k2neg, k2 } = endo.splitScalar(n);\n        let k1p = P0;\n        let k2p = P0;\n        let d = this;\n        while (k1 > _0n || k2 > _0n) {\n            if (k1 & _1n)\n                k1p = k1p.add(d);\n            if (k2 & _1n)\n                k2p = k2p.add(d);\n            d = d.double();\n            k1 >>= _1n;\n            k2 >>= _1n;\n        }\n        if (k1neg)\n            k1p = k1p.negate();\n        if (k2neg)\n            k2p = k2p.negate();\n        k2p = new JacobianPoint(mod(k2p.x * endo.beta), k2p.y, k2p.z);\n        return k1p.add(k2p);\n    }\n    precomputeWindow(W) {\n        const windows = USE_ENDOMORPHISM ? 128 / W + 1 : 256 / W + 1;\n        const points = [];\n        let p = this;\n        let base = p;\n        for (let window = 0; window < windows; window++) {\n            base = p;\n            points.push(base);\n            for (let i = 1; i < 2 ** (W - 1); i++) {\n                base = base.add(p);\n                points.push(base);\n            }\n            p = base.double();\n        }\n        return points;\n    }\n    wNAF(n, affinePoint) {\n        if (!affinePoint && this.equals(JacobianPoint.BASE))\n            affinePoint = Point.BASE;\n        const W = (affinePoint && affinePoint._WINDOW_SIZE) || 1;\n        if (256 % W) {\n            throw new Error('Point#wNAF: Invalid precomputation window, must be power of 2');\n        }\n        let precomputes = affinePoint && pointPrecomputes.get(affinePoint);\n        if (!precomputes) {\n            precomputes = this.precomputeWindow(W);\n            if (affinePoint && W !== 1) {\n                precomputes = JacobianPoint.normalizeZ(precomputes);\n                pointPrecomputes.set(affinePoint, precomputes);\n            }\n        }\n        let p = JacobianPoint.ZERO;\n        let f = JacobianPoint.BASE;\n        const windows = 1 + (USE_ENDOMORPHISM ? 128 / W : 256 / W);\n        const windowSize = 2 ** (W - 1);\n        const mask = BigInt(2 ** W - 1);\n        const maxNumber = 2 ** W;\n        const shiftBy = BigInt(W);\n        for (let window = 0; window < windows; window++) {\n            const offset = window * windowSize;\n            let wbits = Number(n & mask);\n            n >>= shiftBy;\n            if (wbits > windowSize) {\n                wbits -= maxNumber;\n                n += _1n;\n            }\n            const offset1 = offset;\n            const offset2 = offset + Math.abs(wbits) - 1;\n            const cond1 = window % 2 !== 0;\n            const cond2 = wbits < 0;\n            if (wbits === 0) {\n                f = f.add(constTimeNegate(cond1, precomputes[offset1]));\n            }\n            else {\n                p = p.add(constTimeNegate(cond2, precomputes[offset2]));\n            }\n        }\n        return { p, f };\n    }\n    multiply(scalar, affinePoint) {\n        let n = normalizeScalar(scalar);\n        let point;\n        let fake;\n        if (USE_ENDOMORPHISM) {\n            const { k1neg, k1, k2neg, k2 } = endo.splitScalar(n);\n            let { p: k1p, f: f1p } = this.wNAF(k1, affinePoint);\n            let { p: k2p, f: f2p } = this.wNAF(k2, affinePoint);\n            k1p = constTimeNegate(k1neg, k1p);\n            k2p = constTimeNegate(k2neg, k2p);\n            k2p = new JacobianPoint(mod(k2p.x * endo.beta), k2p.y, k2p.z);\n            point = k1p.add(k2p);\n            fake = f1p.add(f2p);\n        }\n        else {\n            const { p, f } = this.wNAF(n, affinePoint);\n            point = p;\n            fake = f;\n        }\n        return JacobianPoint.normalizeZ([point, fake])[0];\n    }\n    toAffine(invZ) {\n        const { x, y, z } = this;\n        const is0 = this.equals(JacobianPoint.ZERO);\n        if (invZ == null)\n            invZ = is0 ? _8n : invert(z);\n        const iz1 = invZ;\n        const iz2 = mod(iz1 * iz1);\n        const iz3 = mod(iz2 * iz1);\n        const ax = mod(x * iz2);\n        const ay = mod(y * iz3);\n        const zz = mod(z * iz1);\n        if (is0)\n            return Point.ZERO;\n        if (zz !== _1n)\n            throw new Error('invZ was invalid');\n        return new Point(ax, ay);\n    }\n}\nJacobianPoint.BASE = new JacobianPoint(CURVE.Gx, CURVE.Gy, _1n);\nJacobianPoint.ZERO = new JacobianPoint(_0n, _1n, _0n);\nfunction constTimeNegate(condition, item) {\n    const neg = item.negate();\n    return condition ? neg : item;\n}\nconst pointPrecomputes = new WeakMap();\nclass Point {\n    constructor(x, y) {\n        this.x = x;\n        this.y = y;\n    }\n    _setWindowSize(windowSize) {\n        this._WINDOW_SIZE = windowSize;\n        pointPrecomputes.delete(this);\n    }\n    hasEvenY() {\n        return this.y % _2n === _0n;\n    }\n    static fromCompressedHex(bytes) {\n        const isShort = bytes.length === 32;\n        const x = bytesToNumber(isShort ? bytes : bytes.subarray(1));\n        if (!isValidFieldElement(x))\n            throw new Error('Point is not on curve');\n        const y2 = weierstrass(x);\n        let y = sqrtMod(y2);\n        const isYOdd = (y & _1n) === _1n;\n        if (isShort) {\n            if (isYOdd)\n                y = mod(-y);\n        }\n        else {\n            const isFirstByteOdd = (bytes[0] & 1) === 1;\n            if (isFirstByteOdd !== isYOdd)\n                y = mod(-y);\n        }\n        const point = new Point(x, y);\n        point.assertValidity();\n        return point;\n    }\n    static fromUncompressedHex(bytes) {\n        const x = bytesToNumber(bytes.subarray(1, fieldLen + 1));\n        const y = bytesToNumber(bytes.subarray(fieldLen + 1, fieldLen * 2 + 1));\n        const point = new Point(x, y);\n        point.assertValidity();\n        return point;\n    }\n    static fromHex(hex) {\n        const bytes = ensureBytes(hex);\n        const len = bytes.length;\n        const header = bytes[0];\n        if (len === fieldLen)\n            return this.fromCompressedHex(bytes);\n        if (len === compressedLen && (header === 0x02 || header === 0x03)) {\n            return this.fromCompressedHex(bytes);\n        }\n        if (len === uncompressedLen && header === 0x04)\n            return this.fromUncompressedHex(bytes);\n        throw new Error(`Point.fromHex: received invalid point. Expected 32-${compressedLen} compressed bytes or ${uncompressedLen} uncompressed bytes, not ${len}`);\n    }\n    static fromPrivateKey(privateKey) {\n        return Point.BASE.multiply(normalizePrivateKey(privateKey));\n    }\n    static fromSignature(msgHash, signature, recovery) {\n        const { r, s } = normalizeSignature(signature);\n        if (![0, 1, 2, 3].includes(recovery))\n            throw new Error('Cannot recover: invalid recovery bit');\n        const h = truncateHash(ensureBytes(msgHash));\n        const { n } = CURVE;\n        const radj = recovery === 2 || recovery === 3 ? r + n : r;\n        const rinv = invert(radj, n);\n        const u1 = mod(-h * rinv, n);\n        const u2 = mod(s * rinv, n);\n        const prefix = recovery & 1 ? '03' : '02';\n        const R = Point.fromHex(prefix + numTo32bStr(radj));\n        const Q = Point.BASE.multiplyAndAddUnsafe(R, u1, u2);\n        if (!Q)\n            throw new Error('Cannot recover signature: point at infinify');\n        Q.assertValidity();\n        return Q;\n    }\n    toRawBytes(isCompressed = false) {\n        return hexToBytes(this.toHex(isCompressed));\n    }\n    toHex(isCompressed = false) {\n        const x = numTo32bStr(this.x);\n        if (isCompressed) {\n            const prefix = this.hasEvenY() ? '02' : '03';\n            return `${prefix}${x}`;\n        }\n        else {\n            return `04${x}${numTo32bStr(this.y)}`;\n        }\n    }\n    toHexX() {\n        return this.toHex(true).slice(2);\n    }\n    toRawX() {\n        return this.toRawBytes(true).slice(1);\n    }\n    assertValidity() {\n        const msg = 'Point is not on elliptic curve';\n        const { x, y } = this;\n        if (!isValidFieldElement(x) || !isValidFieldElement(y))\n            throw new Error(msg);\n        const left = mod(y * y);\n        const right = weierstrass(x);\n        if (mod(left - right) !== _0n)\n            throw new Error(msg);\n    }\n    equals(other) {\n        return this.x === other.x && this.y === other.y;\n    }\n    negate() {\n        return new Point(this.x, mod(-this.y));\n    }\n    double() {\n        return JacobianPoint.fromAffine(this).double().toAffine();\n    }\n    add(other) {\n        return JacobianPoint.fromAffine(this).add(JacobianPoint.fromAffine(other)).toAffine();\n    }\n    subtract(other) {\n        return this.add(other.negate());\n    }\n    multiply(scalar) {\n        return JacobianPoint.fromAffine(this).multiply(scalar, this).toAffine();\n    }\n    multiplyAndAddUnsafe(Q, a, b) {\n        const P = JacobianPoint.fromAffine(this);\n        const aP = a === _0n || a === _1n || this !== Point.BASE ? P.multiplyUnsafe(a) : P.multiply(a);\n        const bQ = JacobianPoint.fromAffine(Q).multiplyUnsafe(b);\n        const sum = aP.add(bQ);\n        return sum.equals(JacobianPoint.ZERO) ? undefined : sum.toAffine();\n    }\n}\nexports.Point = Point;\nPoint.BASE = new Point(CURVE.Gx, CURVE.Gy);\nPoint.ZERO = new Point(_0n, _0n);\nfunction sliceDER(s) {\n    return Number.parseInt(s[0], 16) >= 8 ? '00' + s : s;\n}\nfunction parseDERInt(data) {\n    if (data.length < 2 || data[0] !== 0x02) {\n        throw new Error(`Invalid signature integer tag: ${bytesToHex(data)}`);\n    }\n    const len = data[1];\n    const res = data.subarray(2, len + 2);\n    if (!len || res.length !== len) {\n        throw new Error(`Invalid signature integer: wrong length`);\n    }\n    if (res[0] === 0x00 && res[1] <= 0x7f) {\n        throw new Error('Invalid signature integer: trailing length');\n    }\n    return { data: bytesToNumber(res), left: data.subarray(len + 2) };\n}\nfunction parseDERSignature(data) {\n    if (data.length < 2 || data[0] != 0x30) {\n        throw new Error(`Invalid signature tag: ${bytesToHex(data)}`);\n    }\n    if (data[1] !== data.length - 2) {\n        throw new Error('Invalid signature: incorrect length');\n    }\n    const { data: r, left: sBytes } = parseDERInt(data.subarray(2));\n    const { data: s, left: rBytesLeft } = parseDERInt(sBytes);\n    if (rBytesLeft.length) {\n        throw new Error(`Invalid signature: left bytes after parsing: ${bytesToHex(rBytesLeft)}`);\n    }\n    return { r, s };\n}\nclass Signature {\n    constructor(r, s) {\n        this.r = r;\n        this.s = s;\n        this.assertValidity();\n    }\n    static fromCompact(hex) {\n        const arr = hex instanceof Uint8Array;\n        const name = 'Signature.fromCompact';\n        if (typeof hex !== 'string' && !arr)\n            throw new TypeError(`${name}: Expected string or Uint8Array`);\n        const str = arr ? bytesToHex(hex) : hex;\n        if (str.length !== 128)\n            throw new Error(`${name}: Expected 64-byte hex`);\n        return new Signature(hexToNumber(str.slice(0, 64)), hexToNumber(str.slice(64, 128)));\n    }\n    static fromDER(hex) {\n        const arr = hex instanceof Uint8Array;\n        if (typeof hex !== 'string' && !arr)\n            throw new TypeError(`Signature.fromDER: Expected string or Uint8Array`);\n        const { r, s } = parseDERSignature(arr ? hex : hexToBytes(hex));\n        return new Signature(r, s);\n    }\n    static fromHex(hex) {\n        return this.fromDER(hex);\n    }\n    assertValidity() {\n        const { r, s } = this;\n        if (!isWithinCurveOrder(r))\n            throw new Error('Invalid Signature: r must be 0 < r < n');\n        if (!isWithinCurveOrder(s))\n            throw new Error('Invalid Signature: s must be 0 < s < n');\n    }\n    hasHighS() {\n        const HALF = CURVE.n >> _1n;\n        return this.s > HALF;\n    }\n    normalizeS() {\n        return this.hasHighS() ? new Signature(this.r, mod(-this.s, CURVE.n)) : this;\n    }\n    toDERRawBytes() {\n        return hexToBytes(this.toDERHex());\n    }\n    toDERHex() {\n        const sHex = sliceDER(numberToHexUnpadded(this.s));\n        const rHex = sliceDER(numberToHexUnpadded(this.r));\n        const sHexL = sHex.length / 2;\n        const rHexL = rHex.length / 2;\n        const sLen = numberToHexUnpadded(sHexL);\n        const rLen = numberToHexUnpadded(rHexL);\n        const length = numberToHexUnpadded(rHexL + sHexL + 4);\n        return `30${length}02${rLen}${rHex}02${sLen}${sHex}`;\n    }\n    toRawBytes() {\n        return this.toDERRawBytes();\n    }\n    toHex() {\n        return this.toDERHex();\n    }\n    toCompactRawBytes() {\n        return hexToBytes(this.toCompactHex());\n    }\n    toCompactHex() {\n        return numTo32bStr(this.r) + numTo32bStr(this.s);\n    }\n}\nexports.Signature = Signature;\nfunction concatBytes(...arrays) {\n    if (!arrays.every((b) => b instanceof Uint8Array))\n        throw new Error('Uint8Array list expected');\n    if (arrays.length === 1)\n        return arrays[0];\n    const length = arrays.reduce((a, arr) => a + arr.length, 0);\n    const result = new Uint8Array(length);\n    for (let i = 0, pad = 0; i < arrays.length; i++) {\n        const arr = arrays[i];\n        result.set(arr, pad);\n        pad += arr.length;\n    }\n    return result;\n}\nconst hexes = Array.from({ length: 256 }, (v, i) => i.toString(16).padStart(2, '0'));\nfunction bytesToHex(uint8a) {\n    if (!(uint8a instanceof Uint8Array))\n        throw new Error('Expected Uint8Array');\n    let hex = '';\n    for (let i = 0; i < uint8a.length; i++) {\n        hex += hexes[uint8a[i]];\n    }\n    return hex;\n}\nconst POW_2_256 = BigInt('0x10000000000000000000000000000000000000000000000000000000000000000');\nfunction numTo32bStr(num) {\n    if (typeof num !== 'bigint')\n        throw new Error('Expected bigint');\n    if (!(_0n <= num && num < POW_2_256))\n        throw new Error('Expected number 0 <= n < 2^256');\n    return num.toString(16).padStart(64, '0');\n}\nfunction numTo32b(num) {\n    const b = hexToBytes(numTo32bStr(num));\n    if (b.length !== 32)\n        throw new Error('Error: expected 32 bytes');\n    return b;\n}\nfunction numberToHexUnpadded(num) {\n    const hex = num.toString(16);\n    return hex.length & 1 ? `0${hex}` : hex;\n}\nfunction hexToNumber(hex) {\n    if (typeof hex !== 'string') {\n        throw new TypeError('hexToNumber: expected string, got ' + typeof hex);\n    }\n    return BigInt(`0x${hex}`);\n}\nfunction hexToBytes(hex) {\n    if (typeof hex !== 'string') {\n        throw new TypeError('hexToBytes: expected string, got ' + typeof hex);\n    }\n    if (hex.length % 2)\n        throw new Error('hexToBytes: received invalid unpadded hex' + hex.length);\n    const array = new Uint8Array(hex.length / 2);\n    for (let i = 0; i < array.length; i++) {\n        const j = i * 2;\n        const hexByte = hex.slice(j, j + 2);\n        const byte = Number.parseInt(hexByte, 16);\n        if (Number.isNaN(byte) || byte < 0)\n            throw new Error('Invalid byte sequence');\n        array[i] = byte;\n    }\n    return array;\n}\nfunction bytesToNumber(bytes) {\n    return hexToNumber(bytesToHex(bytes));\n}\nfunction ensureBytes(hex) {\n    return hex instanceof Uint8Array ? Uint8Array.from(hex) : hexToBytes(hex);\n}\nfunction normalizeScalar(num) {\n    if (typeof num === 'number' && Number.isSafeInteger(num) && num > 0)\n        return BigInt(num);\n    if (typeof num === 'bigint' && isWithinCurveOrder(num))\n        return num;\n    throw new TypeError('Expected valid private scalar: 0 < scalar < curve.n');\n}\nfunction mod(a, b = CURVE.P) {\n    const result = a % b;\n    return result >= _0n ? result : b + result;\n}\nfunction pow2(x, power) {\n    const { P } = CURVE;\n    let res = x;\n    while (power-- > _0n) {\n        res *= res;\n        res %= P;\n    }\n    return res;\n}\nfunction sqrtMod(x) {\n    const { P } = CURVE;\n    const _6n = BigInt(6);\n    const _11n = BigInt(11);\n    const _22n = BigInt(22);\n    const _23n = BigInt(23);\n    const _44n = BigInt(44);\n    const _88n = BigInt(88);\n    const b2 = (x * x * x) % P;\n    const b3 = (b2 * b2 * x) % P;\n    const b6 = (pow2(b3, _3n) * b3) % P;\n    const b9 = (pow2(b6, _3n) * b3) % P;\n    const b11 = (pow2(b9, _2n) * b2) % P;\n    const b22 = (pow2(b11, _11n) * b11) % P;\n    const b44 = (pow2(b22, _22n) * b22) % P;\n    const b88 = (pow2(b44, _44n) * b44) % P;\n    const b176 = (pow2(b88, _88n) * b88) % P;\n    const b220 = (pow2(b176, _44n) * b44) % P;\n    const b223 = (pow2(b220, _3n) * b3) % P;\n    const t1 = (pow2(b223, _23n) * b22) % P;\n    const t2 = (pow2(t1, _6n) * b2) % P;\n    const rt = pow2(t2, _2n);\n    const xc = (rt * rt) % P;\n    if (xc !== x)\n        throw new Error('Cannot find square root');\n    return rt;\n}\nfunction invert(number, modulo = CURVE.P) {\n    if (number === _0n || modulo <= _0n) {\n        throw new Error(`invert: expected positive integers, got n=${number} mod=${modulo}`);\n    }\n    let a = mod(number, modulo);\n    let b = modulo;\n    let x = _0n, y = _1n, u = _1n, v = _0n;\n    while (a !== _0n) {\n        const q = b / a;\n        const r = b % a;\n        const m = x - u * q;\n        const n = y - v * q;\n        b = a, a = r, x = u, y = v, u = m, v = n;\n    }\n    const gcd = b;\n    if (gcd !== _1n)\n        throw new Error('invert: does not exist');\n    return mod(x, modulo);\n}\nfunction invertBatch(nums, p = CURVE.P) {\n    const scratch = new Array(nums.length);\n    const lastMultiplied = nums.reduce((acc, num, i) => {\n        if (num === _0n)\n            return acc;\n        scratch[i] = acc;\n        return mod(acc * num, p);\n    }, _1n);\n    const inverted = invert(lastMultiplied, p);\n    nums.reduceRight((acc, num, i) => {\n        if (num === _0n)\n            return acc;\n        scratch[i] = mod(acc * scratch[i], p);\n        return mod(acc * num, p);\n    }, inverted);\n    return scratch;\n}\nfunction bits2int_2(bytes) {\n    const delta = bytes.length * 8 - groupLen * 8;\n    const num = bytesToNumber(bytes);\n    return delta > 0 ? num >> BigInt(delta) : num;\n}\nfunction truncateHash(hash, truncateOnly = false) {\n    const h = bits2int_2(hash);\n    if (truncateOnly)\n        return h;\n    const { n } = CURVE;\n    return h >= n ? h - n : h;\n}\nlet _sha256Sync;\nlet _hmacSha256Sync;\nclass HmacDrbg {\n    constructor(hashLen, qByteLen) {\n        this.hashLen = hashLen;\n        this.qByteLen = qByteLen;\n        if (typeof hashLen !== 'number' || hashLen < 2)\n            throw new Error('hashLen must be a number');\n        if (typeof qByteLen !== 'number' || qByteLen < 2)\n            throw new Error('qByteLen must be a number');\n        this.v = new Uint8Array(hashLen).fill(1);\n        this.k = new Uint8Array(hashLen).fill(0);\n        this.counter = 0;\n    }\n    hmac(...values) {\n        return exports.utils.hmacSha256(this.k, ...values);\n    }\n    hmacSync(...values) {\n        return _hmacSha256Sync(this.k, ...values);\n    }\n    checkSync() {\n        if (typeof _hmacSha256Sync !== 'function')\n            throw new ShaError('hmacSha256Sync needs to be set');\n    }\n    incr() {\n        if (this.counter >= 1000)\n            throw new Error('Tried 1,000 k values for sign(), all were invalid');\n        this.counter += 1;\n    }\n    async reseed(seed = new Uint8Array()) {\n        this.k = await this.hmac(this.v, Uint8Array.from([0x00]), seed);\n        this.v = await this.hmac(this.v);\n        if (seed.length === 0)\n            return;\n        this.k = await this.hmac(this.v, Uint8Array.from([0x01]), seed);\n        this.v = await this.hmac(this.v);\n    }\n    reseedSync(seed = new Uint8Array()) {\n        this.checkSync();\n        this.k = this.hmacSync(this.v, Uint8Array.from([0x00]), seed);\n        this.v = this.hmacSync(this.v);\n        if (seed.length === 0)\n            return;\n        this.k = this.hmacSync(this.v, Uint8Array.from([0x01]), seed);\n        this.v = this.hmacSync(this.v);\n    }\n    async generate() {\n        this.incr();\n        let len = 0;\n        const out = [];\n        while (len < this.qByteLen) {\n            this.v = await this.hmac(this.v);\n            const sl = this.v.slice();\n            out.push(sl);\n            len += this.v.length;\n        }\n        return concatBytes(...out);\n    }\n    generateSync() {\n        this.checkSync();\n        this.incr();\n        let len = 0;\n        const out = [];\n        while (len < this.qByteLen) {\n            this.v = this.hmacSync(this.v);\n            const sl = this.v.slice();\n            out.push(sl);\n            len += this.v.length;\n        }\n        return concatBytes(...out);\n    }\n}\nfunction isWithinCurveOrder(num) {\n    return _0n < num && num < CURVE.n;\n}\nfunction isValidFieldElement(num) {\n    return _0n < num && num < CURVE.P;\n}\nfunction kmdToSig(kBytes, m, d, lowS = true) {\n    const { n } = CURVE;\n    const k = truncateHash(kBytes, true);\n    if (!isWithinCurveOrder(k))\n        return;\n    const kinv = invert(k, n);\n    const q = Point.BASE.multiply(k);\n    const r = mod(q.x, n);\n    if (r === _0n)\n        return;\n    const s = mod(kinv * mod(m + d * r, n), n);\n    if (s === _0n)\n        return;\n    let sig = new Signature(r, s);\n    let recovery = (q.x === sig.r ? 0 : 2) | Number(q.y & _1n);\n    if (lowS && sig.hasHighS()) {\n        sig = sig.normalizeS();\n        recovery ^= 1;\n    }\n    return { sig, recovery };\n}\nfunction normalizePrivateKey(key) {\n    let num;\n    if (typeof key === 'bigint') {\n        num = key;\n    }\n    else if (typeof key === 'number' && Number.isSafeInteger(key) && key > 0) {\n        num = BigInt(key);\n    }\n    else if (typeof key === 'string') {\n        if (key.length !== 2 * groupLen)\n            throw new Error('Expected 32 bytes of private key');\n        num = hexToNumber(key);\n    }\n    else if (key instanceof Uint8Array) {\n        if (key.length !== groupLen)\n            throw new Error('Expected 32 bytes of private key');\n        num = bytesToNumber(key);\n    }\n    else {\n        throw new TypeError('Expected valid private key');\n    }\n    if (!isWithinCurveOrder(num))\n        throw new Error('Expected private key: 0 < key < n');\n    return num;\n}\nfunction normalizePublicKey(publicKey) {\n    if (publicKey instanceof Point) {\n        publicKey.assertValidity();\n        return publicKey;\n    }\n    else {\n        return Point.fromHex(publicKey);\n    }\n}\nfunction normalizeSignature(signature) {\n    if (signature instanceof Signature) {\n        signature.assertValidity();\n        return signature;\n    }\n    try {\n        return Signature.fromDER(signature);\n    }\n    catch (error) {\n        return Signature.fromCompact(signature);\n    }\n}\nfunction getPublicKey(privateKey, isCompressed = false) {\n    return Point.fromPrivateKey(privateKey).toRawBytes(isCompressed);\n}\nexports.getPublicKey = getPublicKey;\nfunction recoverPublicKey(msgHash, signature, recovery, isCompressed = false) {\n    return Point.fromSignature(msgHash, signature, recovery).toRawBytes(isCompressed);\n}\nexports.recoverPublicKey = recoverPublicKey;\nfunction isProbPub(item) {\n    const arr = item instanceof Uint8Array;\n    const str = typeof item === 'string';\n    const len = (arr || str) && item.length;\n    if (arr)\n        return len === compressedLen || len === uncompressedLen;\n    if (str)\n        return len === compressedLen * 2 || len === uncompressedLen * 2;\n    if (item instanceof Point)\n        return true;\n    return false;\n}\nfunction getSharedSecret(privateA, publicB, isCompressed = false) {\n    if (isProbPub(privateA))\n        throw new TypeError('getSharedSecret: first arg must be private key');\n    if (!isProbPub(publicB))\n        throw new TypeError('getSharedSecret: second arg must be public key');\n    const b = normalizePublicKey(publicB);\n    b.assertValidity();\n    return b.multiply(normalizePrivateKey(privateA)).toRawBytes(isCompressed);\n}\nexports.getSharedSecret = getSharedSecret;\nfunction bits2int(bytes) {\n    const slice = bytes.length > fieldLen ? bytes.slice(0, fieldLen) : bytes;\n    return bytesToNumber(slice);\n}\nfunction bits2octets(bytes) {\n    const z1 = bits2int(bytes);\n    const z2 = mod(z1, CURVE.n);\n    return int2octets(z2 < _0n ? z1 : z2);\n}\nfunction int2octets(num) {\n    return numTo32b(num);\n}\nfunction initSigArgs(msgHash, privateKey, extraEntropy) {\n    if (msgHash == null)\n        throw new Error(`sign: expected valid message hash, not \"${msgHash}\"`);\n    const h1 = ensureBytes(msgHash);\n    const d = normalizePrivateKey(privateKey);\n    const seedArgs = [int2octets(d), bits2octets(h1)];\n    if (extraEntropy != null) {\n        if (extraEntropy === true)\n            extraEntropy = exports.utils.randomBytes(fieldLen);\n        const e = ensureBytes(extraEntropy);\n        if (e.length !== fieldLen)\n            throw new Error(`sign: Expected ${fieldLen} bytes of extra data`);\n        seedArgs.push(e);\n    }\n    const seed = concatBytes(...seedArgs);\n    const m = bits2int(h1);\n    return { seed, m, d };\n}\nfunction finalizeSig(recSig, opts) {\n    const { sig, recovery } = recSig;\n    const { der, recovered } = Object.assign({ canonical: true, der: true }, opts);\n    const hashed = der ? sig.toDERRawBytes() : sig.toCompactRawBytes();\n    return recovered ? [hashed, recovery] : hashed;\n}\nasync function sign(msgHash, privKey, opts = {}) {\n    const { seed, m, d } = initSigArgs(msgHash, privKey, opts.extraEntropy);\n    const drbg = new HmacDrbg(hashLen, groupLen);\n    await drbg.reseed(seed);\n    let sig;\n    while (!(sig = kmdToSig(await drbg.generate(), m, d, opts.canonical)))\n        await drbg.reseed();\n    return finalizeSig(sig, opts);\n}\nexports.sign = sign;\nfunction signSync(msgHash, privKey, opts = {}) {\n    const { seed, m, d } = initSigArgs(msgHash, privKey, opts.extraEntropy);\n    const drbg = new HmacDrbg(hashLen, groupLen);\n    drbg.reseedSync(seed);\n    let sig;\n    while (!(sig = kmdToSig(drbg.generateSync(), m, d, opts.canonical)))\n        drbg.reseedSync();\n    return finalizeSig(sig, opts);\n}\nexports.signSync = signSync;\nconst vopts = { strict: true };\nfunction verify(signature, msgHash, publicKey, opts = vopts) {\n    let sig;\n    try {\n        sig = normalizeSignature(signature);\n        msgHash = ensureBytes(msgHash);\n    }\n    catch (error) {\n        return false;\n    }\n    const { r, s } = sig;\n    if (opts.strict && sig.hasHighS())\n        return false;\n    const h = truncateHash(msgHash);\n    let P;\n    try {\n        P = normalizePublicKey(publicKey);\n    }\n    catch (error) {\n        return false;\n    }\n    const { n } = CURVE;\n    const sinv = invert(s, n);\n    const u1 = mod(h * sinv, n);\n    const u2 = mod(r * sinv, n);\n    const R = Point.BASE.multiplyAndAddUnsafe(P, u1, u2);\n    if (!R)\n        return false;\n    const v = mod(R.x, n);\n    return v === r;\n}\nexports.verify = verify;\nfunction schnorrChallengeFinalize(ch) {\n    return mod(bytesToNumber(ch), CURVE.n);\n}\nclass SchnorrSignature {\n    constructor(r, s) {\n        this.r = r;\n        this.s = s;\n        this.assertValidity();\n    }\n    static fromHex(hex) {\n        const bytes = ensureBytes(hex);\n        if (bytes.length !== 64)\n            throw new TypeError(`SchnorrSignature.fromHex: expected 64 bytes, not ${bytes.length}`);\n        const r = bytesToNumber(bytes.subarray(0, 32));\n        const s = bytesToNumber(bytes.subarray(32, 64));\n        return new SchnorrSignature(r, s);\n    }\n    assertValidity() {\n        const { r, s } = this;\n        if (!isValidFieldElement(r) || !isWithinCurveOrder(s))\n            throw new Error('Invalid signature');\n    }\n    toHex() {\n        return numTo32bStr(this.r) + numTo32bStr(this.s);\n    }\n    toRawBytes() {\n        return hexToBytes(this.toHex());\n    }\n}\nfunction schnorrGetPublicKey(privateKey) {\n    return Point.fromPrivateKey(privateKey).toRawX();\n}\nclass InternalSchnorrSignature {\n    constructor(message, privateKey, auxRand = exports.utils.randomBytes()) {\n        if (message == null)\n            throw new TypeError(`sign: Expected valid message, not \"${message}\"`);\n        this.m = ensureBytes(message);\n        const { x, scalar } = this.getScalar(normalizePrivateKey(privateKey));\n        this.px = x;\n        this.d = scalar;\n        this.rand = ensureBytes(auxRand);\n        if (this.rand.length !== 32)\n            throw new TypeError('sign: Expected 32 bytes of aux randomness');\n    }\n    getScalar(priv) {\n        const point = Point.fromPrivateKey(priv);\n        const scalar = point.hasEvenY() ? priv : CURVE.n - priv;\n        return { point, scalar, x: point.toRawX() };\n    }\n    initNonce(d, t0h) {\n        return numTo32b(d ^ bytesToNumber(t0h));\n    }\n    finalizeNonce(k0h) {\n        const k0 = mod(bytesToNumber(k0h), CURVE.n);\n        if (k0 === _0n)\n            throw new Error('sign: Creation of signature failed. k is zero');\n        const { point: R, x: rx, scalar: k } = this.getScalar(k0);\n        return { R, rx, k };\n    }\n    finalizeSig(R, k, e, d) {\n        return new SchnorrSignature(R.x, mod(k + e * d, CURVE.n)).toRawBytes();\n    }\n    error() {\n        throw new Error('sign: Invalid signature produced');\n    }\n    async calc() {\n        const { m, d, px, rand } = this;\n        const tag = exports.utils.taggedHash;\n        const t = this.initNonce(d, await tag(TAGS.aux, rand));\n        const { R, rx, k } = this.finalizeNonce(await tag(TAGS.nonce, t, px, m));\n        const e = schnorrChallengeFinalize(await tag(TAGS.challenge, rx, px, m));\n        const sig = this.finalizeSig(R, k, e, d);\n        if (!(await schnorrVerify(sig, m, px)))\n            this.error();\n        return sig;\n    }\n    calcSync() {\n        const { m, d, px, rand } = this;\n        const tag = exports.utils.taggedHashSync;\n        const t = this.initNonce(d, tag(TAGS.aux, rand));\n        const { R, rx, k } = this.finalizeNonce(tag(TAGS.nonce, t, px, m));\n        const e = schnorrChallengeFinalize(tag(TAGS.challenge, rx, px, m));\n        const sig = this.finalizeSig(R, k, e, d);\n        if (!schnorrVerifySync(sig, m, px))\n            this.error();\n        return sig;\n    }\n}\nasync function schnorrSign(msg, privKey, auxRand) {\n    return new InternalSchnorrSignature(msg, privKey, auxRand).calc();\n}\nfunction schnorrSignSync(msg, privKey, auxRand) {\n    return new InternalSchnorrSignature(msg, privKey, auxRand).calcSync();\n}\nfunction initSchnorrVerify(signature, message, publicKey) {\n    const raw = signature instanceof SchnorrSignature;\n    const sig = raw ? signature : SchnorrSignature.fromHex(signature);\n    if (raw)\n        sig.assertValidity();\n    return {\n        ...sig,\n        m: ensureBytes(message),\n        P: normalizePublicKey(publicKey),\n    };\n}\nfunction finalizeSchnorrVerify(r, P, s, e) {\n    const R = Point.BASE.multiplyAndAddUnsafe(P, normalizePrivateKey(s), mod(-e, CURVE.n));\n    if (!R || !R.hasEvenY() || R.x !== r)\n        return false;\n    return true;\n}\nasync function schnorrVerify(signature, message, publicKey) {\n    try {\n        const { r, s, m, P } = initSchnorrVerify(signature, message, publicKey);\n        const e = schnorrChallengeFinalize(await exports.utils.taggedHash(TAGS.challenge, numTo32b(r), P.toRawX(), m));\n        return finalizeSchnorrVerify(r, P, s, e);\n    }\n    catch (error) {\n        return false;\n    }\n}\nfunction schnorrVerifySync(signature, message, publicKey) {\n    try {\n        const { r, s, m, P } = initSchnorrVerify(signature, message, publicKey);\n        const e = schnorrChallengeFinalize(exports.utils.taggedHashSync(TAGS.challenge, numTo32b(r), P.toRawX(), m));\n        return finalizeSchnorrVerify(r, P, s, e);\n    }\n    catch (error) {\n        if (error instanceof ShaError)\n            throw error;\n        return false;\n    }\n}\nexports.schnorr = {\n    Signature: SchnorrSignature,\n    getPublicKey: schnorrGetPublicKey,\n    sign: schnorrSign,\n    verify: schnorrVerify,\n    signSync: schnorrSignSync,\n    verifySync: schnorrVerifySync,\n};\nPoint.BASE._setWindowSize(8);\nconst crypto = {\n    node: nodeCrypto,\n    web: typeof self === 'object' && 'crypto' in self ? self.crypto : undefined,\n};\nconst TAGS = {\n    challenge: 'BIP0340/challenge',\n    aux: 'BIP0340/aux',\n    nonce: 'BIP0340/nonce',\n};\nconst TAGGED_HASH_PREFIXES = {};\nexports.utils = {\n    bytesToHex,\n    hexToBytes,\n    concatBytes,\n    mod,\n    invert,\n    isValidPrivateKey(privateKey) {\n        try {\n            normalizePrivateKey(privateKey);\n            return true;\n        }\n        catch (error) {\n            return false;\n        }\n    },\n    _bigintTo32Bytes: numTo32b,\n    _normalizePrivateKey: normalizePrivateKey,\n    hashToPrivateKey: (hash) => {\n        hash = ensureBytes(hash);\n        const minLen = groupLen + 8;\n        if (hash.length < minLen || hash.length > 1024) {\n            throw new Error(`Expected valid bytes of private key as per FIPS 186`);\n        }\n        const num = mod(bytesToNumber(hash), CURVE.n - _1n) + _1n;\n        return numTo32b(num);\n    },\n    randomBytes: (bytesLength = 32) => {\n        if (crypto.web) {\n            return crypto.web.getRandomValues(new Uint8Array(bytesLength));\n        }\n        else if (crypto.node) {\n            const { randomBytes } = crypto.node;\n            return Uint8Array.from(randomBytes(bytesLength));\n        }\n        else {\n            throw new Error(\"The environment doesn't have randomBytes function\");\n        }\n    },\n    randomPrivateKey: () => exports.utils.hashToPrivateKey(exports.utils.randomBytes(groupLen + 8)),\n    precompute(windowSize = 8, point = Point.BASE) {\n        const cached = point === Point.BASE ? point : new Point(point.x, point.y);\n        cached._setWindowSize(windowSize);\n        cached.multiply(_3n);\n        return cached;\n    },\n    sha256: async (...messages) => {\n        if (crypto.web) {\n            const buffer = await crypto.web.subtle.digest('SHA-256', concatBytes(...messages));\n            return new Uint8Array(buffer);\n        }\n        else if (crypto.node) {\n            const { createHash } = crypto.node;\n            const hash = createHash('sha256');\n            messages.forEach((m) => hash.update(m));\n            return Uint8Array.from(hash.digest());\n        }\n        else {\n            throw new Error(\"The environment doesn't have sha256 function\");\n        }\n    },\n    hmacSha256: async (key, ...messages) => {\n        if (crypto.web) {\n            const ckey = await crypto.web.subtle.importKey('raw', key, { name: 'HMAC', hash: { name: 'SHA-256' } }, false, ['sign']);\n            const message = concatBytes(...messages);\n            const buffer = await crypto.web.subtle.sign('HMAC', ckey, message);\n            return new Uint8Array(buffer);\n        }\n        else if (crypto.node) {\n            const { createHmac } = crypto.node;\n            const hash = createHmac('sha256', key);\n            messages.forEach((m) => hash.update(m));\n            return Uint8Array.from(hash.digest());\n        }\n        else {\n            throw new Error(\"The environment doesn't have hmac-sha256 function\");\n        }\n    },\n    sha256Sync: undefined,\n    hmacSha256Sync: undefined,\n    taggedHash: async (tag, ...messages) => {\n        let tagP = TAGGED_HASH_PREFIXES[tag];\n        if (tagP === undefined) {\n            const tagH = await exports.utils.sha256(Uint8Array.from(tag, (c) => c.charCodeAt(0)));\n            tagP = concatBytes(tagH, tagH);\n            TAGGED_HASH_PREFIXES[tag] = tagP;\n        }\n        return exports.utils.sha256(tagP, ...messages);\n    },\n    taggedHashSync: (tag, ...messages) => {\n        if (typeof _sha256Sync !== 'function')\n            throw new ShaError('sha256Sync is undefined, you need to set it');\n        let tagP = TAGGED_HASH_PREFIXES[tag];\n        if (tagP === undefined) {\n            const tagH = _sha256Sync(Uint8Array.from(tag, (c) => c.charCodeAt(0)));\n            tagP = concatBytes(tagH, tagH);\n            TAGGED_HASH_PREFIXES[tag] = tagP;\n        }\n        return _sha256Sync(tagP, ...messages);\n    },\n    _JacobianPoint: JacobianPoint,\n};\nObject.defineProperties(exports.utils, {\n    sha256Sync: {\n        configurable: false,\n        get() {\n            return _sha256Sync;\n        },\n        set(val) {\n            if (!_sha256Sync)\n                _sha256Sync = val;\n        },\n    },\n    hmacSha256Sync: {\n        configurable: false,\n        get() {\n            return _hmacSha256Sync;\n        },\n        set(val) {\n            if (!_hmacSha256Sync)\n                _hmacSha256Sync = val;\n        },\n    },\n});\n", null, null, null, null, null, null, null, null, null, "export function getZoneFileTemplate() {\n  return '{$origin}\\n\\\n{$ttl}\\n\\\n\\n\\\n; SOA Record\\n\\\n{name} {ttl}    IN  SOA {mname}{rname}(\\n\\\n{serial} ;serial\\n\\\n{refresh} ;refresh\\n\\\n{retry} ;retry\\n\\\n{expire} ;expire\\n\\\n{minimum} ;minimum ttl\\n\\\n)\\n\\\n\\n\\\n; NS Records\\n\\\n{ns}\\n\\\n\\n\\\n; MX Records\\n\\\n{mx}\\n\\\n\\n\\\n; A Records\\n\\\n{a}\\n\\\n\\n\\\n; AAAA Records\\n\\\n{aaaa}\\n\\\n\\n\\\n; CNAME Records\\n\\\n{cname}\\n\\\n\\n\\\n; PTR Records\\n\\\n{ptr}\\n\\\n\\n\\\n; TXT Records\\n\\\n{txt}\\n\\\n\\n\\\n; SRV Records\\n\\\n{srv}\\n\\\n\\n\\\n; SPF Records\\n\\\n{spf}\\n\\\n\\n\\\n; URI Records\\n\\\n{uri}\\n\\\n';\n}\n", "import {\n  AType,\n  CNAMEType,\n  MXType,\n  NSType,\n  SoaType,\n  SPFType,\n  SRVType,\n  TXTType,\n  URIType,\n  ZoneFileObject,\n} from './zoneFile';\n\nimport { getZoneFileTemplate } from './zoneFileTemplate';\n\nexport function makeZoneFile(jsonZoneFile: ZoneFileObject, template: string = getZoneFileTemplate()) {\n  template = processOrigin(jsonZoneFile['$origin'], template);\n  template = processTTL(jsonZoneFile['$ttl'], template);\n  template = processSOA(jsonZoneFile['soa'], template);\n  template = processNS(jsonZoneFile['ns'], template);\n  template = processA(jsonZoneFile['a'], template);\n  template = processAAAA(jsonZoneFile['aaaa'], template);\n  template = processCNAME(jsonZoneFile['cname'], template);\n  template = processMX(jsonZoneFile['mx'], template);\n  template = processPTR(jsonZoneFile['ptr'], template);\n  template = processTXT(jsonZoneFile['txt'], template);\n  template = processSRV(jsonZoneFile['srv'], template);\n  template = processSPF(jsonZoneFile['spf'], template);\n  template = processURI(jsonZoneFile['uri'], template);\n  template = processValues(jsonZoneFile, template);\n  return template.replace(/\\n{2,}/gim, '\\n\\n');\n}\n\nfunction processOrigin(data: string | undefined, template: string) {\n  let ret = '';\n  if (typeof data !== 'undefined') {\n    ret += '$ORIGIN ' + data;\n  }\n  return template.replace('{$origin}', ret);\n}\n\nfunction processTTL(data: number | undefined, template: string) {\n  let ret = '';\n  if (typeof data !== 'undefined') {\n    ret += '$TTL ' + data;\n  }\n  return template.replace('{$ttl}', ret);\n}\n\nfunction processSOA(data: SoaType | undefined, template: string) {\n  let ret = template;\n  if (typeof data !== 'undefined') {\n    data.name = data.name || '@';\n    data.ttl = data.ttl || '';\n    for (const key in data) {\n      const value = (data as Record<string, string>)[key];\n      ret = ret.replace('{' + key + '}', value + '\\t');\n    }\n  }\n  return ret;\n}\n\nfunction processNS(data: NSType[] | undefined, template: string) {\n  let ret = '';\n  if (data) {\n    for (const record of data) {\n      ret += (record.name || '@') + '\\t';\n      if (record.ttl) ret += record.ttl + '\\t';\n      ret += 'IN\\tNS\\t' + record.host + '\\n';\n    }\n  }\n  return template.replace('{ns}', ret);\n}\n\nfunction processA(data: AType[] | undefined, template: string) {\n  let ret = '';\n  if (data) {\n    for (const record of data) {\n      ret += (record.name || '@') + '\\t';\n      if (record.ttl) ret += record.ttl + '\\t';\n      ret += 'IN\\tA\\t' + record.ip + '\\n';\n    }\n  }\n  return template.replace('{a}', ret);\n}\n\nfunction processAAAA(data: AType[] | undefined, template: string) {\n  let ret = '';\n  if (data) {\n    for (const record of data) {\n      ret += (record.name || '@') + '\\t';\n      if (record.ttl) ret += record.ttl + '\\t';\n      ret += 'IN\\tAAAA\\t' + record.ip + '\\n';\n    }\n  }\n  return template.replace('{aaaa}', ret);\n}\n\nfunction processCNAME(data: CNAMEType[] | undefined, template: string) {\n  let ret = '';\n  if (data) {\n    for (const record of data) {\n      ret += (record.name || '@') + '\\t';\n      if (record.ttl) ret += record.ttl + '\\t';\n      ret += 'IN\\tCNAME\\t' + record.alias + '\\n';\n    }\n  }\n  return template.replace('{cname}', ret);\n}\n\nfunction processMX(data: MXType[] | undefined, template: string) {\n  let ret = '';\n  if (data) {\n    for (const record of data) {\n      ret += (record.name || '@') + '\\t';\n      if (record.ttl) ret += record.ttl + '\\t';\n      ret += 'IN\\tMX\\t' + record.preference + '\\t' + record.host + '\\n';\n    }\n  }\n  return template.replace('{mx}', ret);\n}\n\nfunction processPTR(data: NSType[] | undefined, template: string) {\n  let ret = '';\n  if (data) {\n    for (const record of data) {\n      ret += (record.name || '@') + '\\t';\n      if (record.ttl) ret += record.ttl + '\\t';\n      ret += 'IN\\tPTR\\t' + record.host + '\\n';\n    }\n  }\n  return template.replace('{ptr}', ret);\n}\n\nfunction processTXT(data: TXTType[] | undefined, template: string) {\n  let ret = '';\n  if (data) {\n    for (const record of data) {\n      ret += (record.name || '@') + '\\t';\n      if (record.ttl) ret += record.ttl + '\\t';\n      ret += 'IN\\tTXT\\t';\n      const txtData = record.txt;\n      if (typeof txtData === 'string') {\n        ret += '\"' + txtData + '\"';\n      } else if (txtData instanceof Array) {\n        ret += txtData\n          .map(function(datum) {\n            return '\"' + datum + '\"';\n          })\n          .join(' ');\n      }\n      ret += '\\n';\n    }\n  }\n  return template.replace('{txt}', ret);\n}\n\nfunction processSRV(data: SRVType[] | undefined, template: string) {\n  let ret = '';\n  if (data) {\n    for (const record of data) {\n      ret += (record.name || '@') + '\\t';\n      if (record.ttl) ret += record.ttl + '\\t';\n      ret += 'IN\\tSRV\\t' + record.priority + '\\t';\n      ret += record.weight + '\\t';\n      ret += record.port + '\\t';\n      ret += record.target + '\\n';\n    }\n  }\n  return template.replace('{srv}', ret);\n}\n\nfunction processSPF(data: SPFType[] | undefined, template: string) {\n  let ret = '';\n  if (data) {\n    for (const record of data) {\n      ret += (record.name || '@') + '\\t';\n      if (record.ttl) ret += record.ttl + '\\t';\n      ret += 'IN\\tSPF\\t' + record.data + '\\n';\n    }\n  }\n  return template.replace('{spf}', ret);\n}\n\nfunction processURI(data: URIType[] | undefined, template: string) {\n  let ret = '';\n  if (data) {\n    for (const record of data) {\n      ret += (record.name || '@') + '\\t';\n      if (record.ttl) ret += record.ttl + '\\t';\n      ret += 'IN\\tURI\\t' + record.priority + '\\t';\n      ret += record.weight + '\\t';\n      ret += '\"' + record.target + '\"\\n';\n    }\n  }\n  return template.replace('{uri}', ret);\n}\n\nfunction processValues(jsonZoneFile: ZoneFileObject, template: string) {\n  template = template.replace(\n    '{zone}',\n    jsonZoneFile['$origin'] || (jsonZoneFile['soa'] ? jsonZoneFile['soa']['name'] : false) || ''\n  );\n  template = template.replace('{datetime}', new Date().toISOString());\n  const time = Math.round(Date.now() / 1000);\n  return template.replace('{time}', `${time}`);\n}\n", "import {\n  NSType,\n  AType,\n  CNAMEType,\n  MXType,\n  TXTType,\n  SRVType,\n  SPFType,\n  URIType,\n  ZoneFileObject,\n  SoaType,\n} from './zoneFile';\n\nexport function parseZoneFile(text: string) {\n  text = removeComments(text);\n  text = flatten(text);\n  return parseRRs(text);\n}\n\nfunction removeComments(text: string) {\n  const re = /(^|[^\\\\]);.*/g;\n  return text.replace(re, function(_m, g1) {\n    return g1 ? g1 : ''; // if g1 is set/matched, re-insert it, else remove\n  });\n}\n\nfunction flatten(text: string) {\n  const captured = [];\n  const re = /\\([\\s\\S]*?\\)/gim;\n  let match = re.exec(text);\n  while (match !== null) {\n    const replacement = match[0].replace(/\\s+/gm, ' ');\n    captured.push({ match, replacement });\n    // captured Text, index, input\n    match = re.exec(text);\n  }\n  const arrText = text.split('');\n  for (const cur of captured) {\n    const { match, replacement } = cur;\n    arrText.splice(match.index, match[0].length, replacement);\n  }\n  return arrText.join('').replace(/\\(|\\)/gim, ' ');\n}\n\nfunction parseRRs(text: string) {\n  const ret: ZoneFileObject = {};\n  const rrs = text.split('\\n');\n  for (const rr of rrs) {\n    if (!rr || !rr.trim()) {\n      continue;\n    }\n    const uRR = rr.toUpperCase();\n    if (/\\s+TXT\\s+/.test(uRR)) {\n      ret.txt = ret.txt || [];\n      ret.txt.push(parseTXT(rr));\n    } else if (uRR.indexOf('$ORIGIN') === 0) {\n      ret.$origin = rr.split(/\\s+/g)[1];\n    } else if (uRR.indexOf('$TTL') === 0) {\n      ret.$ttl = parseInt(rr.split(/\\s+/g)[1], 10);\n    } else if (/\\s+SOA\\s+/.test(uRR)) {\n      ret.soa = parseSOA(rr);\n    } else if (/\\s+NS\\s+/.test(uRR)) {\n      ret.ns = ret.ns || [];\n      ret.ns.push(parseNS(rr));\n    } else if (/\\s+A\\s+/.test(uRR)) {\n      ret.a = ret.a || [];\n      ret.a.push(parseA(rr, ret.a));\n    } else if (/\\s+AAAA\\s+/.test(uRR)) {\n      ret.aaaa = ret.aaaa || [];\n      ret.aaaa.push(parseAAAA(rr));\n    } else if (/\\s+CNAME\\s+/.test(uRR)) {\n      ret.cname = ret.cname || [];\n      ret.cname.push(parseCNAME(rr));\n    } else if (/\\s+MX\\s+/.test(uRR)) {\n      ret.mx = ret.mx || [];\n      ret.mx.push(parseMX(rr));\n    } else if (/\\s+PTR\\s+/.test(uRR)) {\n      ret.ptr = ret.ptr || [];\n      ret.ptr.push(parsePTR(rr, ret.ptr, ret.$origin));\n    } else if (/\\s+SRV\\s+/.test(uRR)) {\n      ret.srv = ret.srv || [];\n      ret.srv.push(parseSRV(rr));\n    } else if (/\\s+SPF\\s+/.test(uRR)) {\n      ret.spf = ret.spf || [];\n      ret.spf.push(parseSPF(rr));\n    } else if (/\\s+URI\\s+/.test(uRR)) {\n      ret.uri = ret.uri || [];\n      ret.uri.push(parseURI(rr));\n    }\n  }\n  return ret;\n}\n\nfunction parseSOA(rr: string) {\n  const soa: SoaType = {};\n  const rrTokens = rr.trim().split(/\\s+/g);\n  const l = rrTokens.length;\n  soa.name = rrTokens[0];\n  soa.minimum = parseInt(rrTokens[l - 1], 10);\n  soa.expire = parseInt(rrTokens[l - 2], 10);\n  soa.retry = parseInt(rrTokens[l - 3], 10);\n  soa.refresh = parseInt(rrTokens[l - 4], 10);\n  soa.serial = parseInt(rrTokens[l - 5], 10);\n  soa.rname = rrTokens[l - 6];\n  soa.mname = rrTokens[l - 7];\n  if (!isNaN((rrTokens[1] as unknown) as number)) soa.ttl = parseInt(rrTokens[1], 10);\n  return soa;\n}\n\nfunction parseNS(rr: string) {\n  const rrTokens = rr.trim().split(/\\s+/g);\n  const l = rrTokens.length;\n  const result: NSType = {\n    name: rrTokens[0],\n    host: rrTokens[l - 1],\n  };\n\n  if (!isNaN((rrTokens[1] as unknown) as number)) result.ttl = parseInt(rrTokens[1], 10);\n  return result;\n}\n\nfunction parseA(rr: string, recordsSoFar: AType[]) {\n  const rrTokens = rr.trim().split(/\\s+/g);\n  const urrTokens = rr\n    .trim()\n    .toUpperCase()\n    .split(/\\s+/g);\n  const l = rrTokens.length;\n  const result: AType = {\n    name: rrTokens[0],\n    ip: rrTokens[l - 1],\n  };\n\n  if (urrTokens.lastIndexOf('A') === 0) {\n    if (recordsSoFar.length) {\n      result.name = recordsSoFar[recordsSoFar.length - 1].name;\n    } else {\n      result.name = '@';\n    }\n  }\n\n  if (!isNaN((rrTokens[1] as unknown) as number)) result.ttl = parseInt(rrTokens[1], 10);\n  return result;\n}\n\nfunction parseAAAA(rr: string) {\n  const rrTokens = rr.trim().split(/\\s+/g);\n  const l = rrTokens.length;\n  const result: AType = {\n    name: rrTokens[0],\n    ip: rrTokens[l - 1],\n  };\n\n  if (!isNaN((rrTokens[1] as unknown) as number)) result.ttl = parseInt(rrTokens[1], 10);\n  return result;\n}\n\nfunction parseCNAME(rr: string) {\n  const rrTokens = rr.trim().split(/\\s+/g);\n  const l = rrTokens.length;\n  const result: CNAMEType = {\n    name: rrTokens[0],\n    alias: rrTokens[l - 1],\n  };\n\n  if (!isNaN((rrTokens[1] as unknown) as number)) result.ttl = parseInt(rrTokens[1], 10);\n  return result;\n}\n\nfunction parseMX(rr: string) {\n  const rrTokens = rr.trim().split(/\\s+/g);\n  const l = rrTokens.length;\n  const result: MXType = {\n    name: rrTokens[0],\n    preference: parseInt(rrTokens[l - 2], 10),\n    host: rrTokens[l - 1],\n  };\n\n  if (!isNaN((rrTokens[1] as unknown) as number)) result.ttl = parseInt(rrTokens[1], 10);\n  return result;\n}\n\nfunction parseTXT(rr: string) {\n  const rrTokens = rr.trim().match(/[^\\s\"']+|\"[^\"]*\"|'[^']*'/g);\n  if (!rrTokens) throw new Error('Failure to tokenize TXT record');\n  const l = rrTokens.length;\n  const indexTXT = rrTokens.indexOf('TXT');\n\n  function stripText(txt: string) {\n    if (txt.indexOf('\"') > -1) {\n      txt = txt.split('\"')[1];\n    }\n    return txt;\n  }\n\n  let tokenTxt: string | string[];\n  if (l - indexTXT - 1 > 1) {\n    tokenTxt = [...rrTokens.slice(indexTXT + 1).map(stripText)];\n  } else {\n    tokenTxt = stripText(rrTokens[l - 1]);\n  }\n\n  const result: TXTType = {\n    name: rrTokens[0],\n    txt: tokenTxt,\n  };\n\n  if (!isNaN((rrTokens[1] as unknown) as number)) result.ttl = parseInt(rrTokens[1], 10);\n  return result;\n}\n\nfunction parsePTR(rr: string, recordsSoFar: NSType[], currentOrigin: string | undefined) {\n  const rrTokens = rr.trim().split(/\\s+/g);\n  const urrTokens = rr\n    .trim()\n    .toUpperCase()\n    .split(/\\s+/g);\n\n  if (urrTokens.lastIndexOf('PTR') === 0 && recordsSoFar[recordsSoFar.length - 1]) {\n    rrTokens.unshift(recordsSoFar[recordsSoFar.length - 1].name as string);\n  }\n\n  const l = rrTokens.length;\n  const result: NSType = {\n    name: rrTokens[0],\n    fullname: rrTokens[0] + '.' + currentOrigin,\n    host: rrTokens[l - 1],\n  };\n\n  if (!isNaN((rrTokens[1] as unknown) as number)) result.ttl = parseInt(rrTokens[1], 10);\n  return result;\n}\n\nfunction parseSRV(rr: string) {\n  const rrTokens = rr.trim().split(/\\s+/g);\n  const l = rrTokens.length;\n  const result: SRVType = {\n    name: rrTokens[0],\n    target: rrTokens[l - 1],\n    priority: parseInt(rrTokens[l - 4], 10),\n    weight: parseInt(rrTokens[l - 3], 10),\n    port: parseInt(rrTokens[l - 2], 10),\n  };\n\n  if (!isNaN((rrTokens[1] as unknown) as number)) result.ttl = parseInt(rrTokens[1], 10);\n  return result;\n}\n\nfunction parseSPF(rr: string) {\n  const rrTokens = rr.trim().split(/\\s+/g);\n  const result: SPFType = {\n    name: rrTokens[0],\n    data: '',\n  };\n\n  let l = rrTokens.length;\n  while (l-- > 4) {\n    result.data = rrTokens[l] + ' ' + result.data.trim();\n  }\n\n  if (!isNaN((rrTokens[1] as unknown) as number)) result.ttl = parseInt(rrTokens[1], 10);\n  return result;\n}\n\nfunction parseURI(rr: string) {\n  const rrTokens = rr.trim().split(/\\s+/g);\n  const l = rrTokens.length;\n  const result: URIType = {\n    name: rrTokens[0],\n    target: rrTokens[l - 1].replace(/\"/g, ''),\n    priority: parseInt(rrTokens[l - 3], 10),\n    weight: parseInt(rrTokens[l - 2], 10),\n  };\n\n  if (!isNaN((rrTokens[1] as unknown) as number)) result.ttl = parseInt(rrTokens[1], 10);\n  return result;\n}\n", "import { makeZoneFile } from './makeZoneFile';\nimport { parseZoneFile } from './parseZoneFile';\n\nexport type SoaType = {\n  name?: string;\n  ttl?: number | string;\n  minimum?: number;\n  expire?: number;\n  retry?: number;\n  refresh?: number;\n  serial?: number;\n  rname?: string;\n  mname?: string;\n};\nexport type NSType = { name: string; ttl?: number; host: string; fullname?: string };\nexport type AType = { name: string; ttl?: number; ip: string };\nexport type CNAMEType = { name: string; ttl?: number; alias: string };\nexport type MXType = { name: string; ttl?: number; host: string; preference: number };\nexport type TXTType = { name: string; ttl?: number; txt: string | string[] };\nexport type SRVType = { name: string; ttl?: number; priority: number; weight: number; port: number; target: string };\nexport type SPFType = { name: string; ttl?: number; data: string };\nexport type URIType = { name: string; ttl?: number; priority: number; weight: number; target: string };\n\nexport type ZoneFileObject = {\n  $origin?: string;\n  $ttl?: number;\n  soa?: SoaType;\n  ns?: NSType[];\n  a?: AType[];\n  aaaa?: AType[];\n  cname?: CNAMEType[];\n  mx?: MXType[];\n  ptr?: NSType[];\n  txt?: TXTType[];\n  srv?: SRVType[];\n  spf?: SPFType[];\n  uri?: URIType[];\n  $domain?: string;\n};\n\nexport class ZoneFile {\n  jsonZoneFile: ZoneFileObject;\n\n  constructor(zoneFile: ZoneFileObject | string) {\n    if (typeof zoneFile === 'object') {\n      this.jsonZoneFile = JSON.parse(JSON.stringify(zoneFile));\n    } else if (typeof zoneFile === 'string') {\n      this.jsonZoneFile = parseZoneFile(zoneFile);\n    } else {\n      this.jsonZoneFile = (undefined as unknown) as ZoneFileObject;\n    }\n  }\n\n  toJSON() {\n    return this.jsonZoneFile;\n  }\n\n  toString() {\n    return makeZoneFile(this.toJSON());\n  }\n}\n", "\n'use strict'\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./zone-file.cjs.production.min.js')\n} else {\n  module.exports = require('./zone-file.cjs.development.js')\n}\n", "(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (factory((global.async = global.async || {})));\n}(this, (function (exports) { 'use strict';\n\nfunction slice(arrayLike, start) {\n    start = start|0;\n    var newLen = Math.max(arrayLike.length - start, 0);\n    var newArr = Array(newLen);\n    for(var idx = 0; idx < newLen; idx++)  {\n        newArr[idx] = arrayLike[start + idx];\n    }\n    return newArr;\n}\n\n/**\n * Creates a continuation function with some arguments already applied.\n *\n * Useful as a shorthand when combined with other control flow functions. Any\n * arguments passed to the returned function are added to the arguments\n * originally passed to apply.\n *\n * @name apply\n * @static\n * @memberOf module:Utils\n * @method\n * @category Util\n * @param {Function} fn - The function you want to eventually apply all\n * arguments to. Invokes with (arguments...).\n * @param {...*} arguments... - Any number of arguments to automatically apply\n * when the continuation is called.\n * @returns {Function} the partially-applied function\n * @example\n *\n * // using apply\n * async.parallel([\n *     async.apply(fs.writeFile, 'testfile1', 'test1'),\n *     async.apply(fs.writeFile, 'testfile2', 'test2')\n * ]);\n *\n *\n * // the same process without using apply\n * async.parallel([\n *     function(callback) {\n *         fs.writeFile('testfile1', 'test1', callback);\n *     },\n *     function(callback) {\n *         fs.writeFile('testfile2', 'test2', callback);\n *     }\n * ]);\n *\n * // It's possible to pass any number of additional arguments when calling the\n * // continuation:\n *\n * node> var fn = async.apply(sys.puts, 'one');\n * node> fn('two', 'three');\n * one\n * two\n * three\n */\nvar apply = function(fn/*, ...args*/) {\n    var args = slice(arguments, 1);\n    return function(/*callArgs*/) {\n        var callArgs = slice(arguments);\n        return fn.apply(null, args.concat(callArgs));\n    };\n};\n\nvar initialParams = function (fn) {\n    return function (/*...args, callback*/) {\n        var args = slice(arguments);\n        var callback = args.pop();\n        fn.call(this, args, callback);\n    };\n};\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nvar hasSetImmediate = typeof setImmediate === 'function' && setImmediate;\nvar hasNextTick = typeof process === 'object' && typeof process.nextTick === 'function';\n\nfunction fallback(fn) {\n    setTimeout(fn, 0);\n}\n\nfunction wrap(defer) {\n    return function (fn/*, ...args*/) {\n        var args = slice(arguments, 1);\n        defer(function () {\n            fn.apply(null, args);\n        });\n    };\n}\n\nvar _defer;\n\nif (hasSetImmediate) {\n    _defer = setImmediate;\n} else if (hasNextTick) {\n    _defer = process.nextTick;\n} else {\n    _defer = fallback;\n}\n\nvar setImmediate$1 = wrap(_defer);\n\n/**\n * Take a sync function and make it async, passing its return value to a\n * callback. This is useful for plugging sync functions into a waterfall,\n * series, or other async functions. Any arguments passed to the generated\n * function will be passed to the wrapped function (except for the final\n * callback argument). Errors thrown will be passed to the callback.\n *\n * If the function passed to `asyncify` returns a Promise, that promises's\n * resolved/rejected state will be used to call the callback, rather than simply\n * the synchronous return value.\n *\n * This also means you can asyncify ES2017 `async` functions.\n *\n * @name asyncify\n * @static\n * @memberOf module:Utils\n * @method\n * @alias wrapSync\n * @category Util\n * @param {Function} func - The synchronous function, or Promise-returning\n * function to convert to an {@link AsyncFunction}.\n * @returns {AsyncFunction} An asynchronous wrapper of the `func`. To be\n * invoked with `(args..., callback)`.\n * @example\n *\n * // passing a regular synchronous function\n * async.waterfall([\n *     async.apply(fs.readFile, filename, \"utf8\"),\n *     async.asyncify(JSON.parse),\n *     function (data, next) {\n *         // data is the result of parsing the text.\n *         // If there was a parsing error, it would have been caught.\n *     }\n * ], callback);\n *\n * // passing a function returning a promise\n * async.waterfall([\n *     async.apply(fs.readFile, filename, \"utf8\"),\n *     async.asyncify(function (contents) {\n *         return db.model.create(contents);\n *     }),\n *     function (model, next) {\n *         // `model` is the instantiated model object.\n *         // If there was an error, this function would be skipped.\n *     }\n * ], callback);\n *\n * // es2017 example, though `asyncify` is not needed if your JS environment\n * // supports async functions out of the box\n * var q = async.queue(async.asyncify(async function(file) {\n *     var intermediateStep = await processFile(file);\n *     return await somePromise(intermediateStep)\n * }));\n *\n * q.push(files);\n */\nfunction asyncify(func) {\n    return initialParams(function (args, callback) {\n        var result;\n        try {\n            result = func.apply(this, args);\n        } catch (e) {\n            return callback(e);\n        }\n        // if result is Promise object\n        if (isObject(result) && typeof result.then === 'function') {\n            result.then(function(value) {\n                invokeCallback(callback, null, value);\n            }, function(err) {\n                invokeCallback(callback, err.message ? err : new Error(err));\n            });\n        } else {\n            callback(null, result);\n        }\n    });\n}\n\nfunction invokeCallback(callback, error, value) {\n    try {\n        callback(error, value);\n    } catch (e) {\n        setImmediate$1(rethrow, e);\n    }\n}\n\nfunction rethrow(error) {\n    throw error;\n}\n\nvar supportsSymbol = typeof Symbol === 'function';\n\nfunction isAsync(fn) {\n    return supportsSymbol && fn[Symbol.toStringTag] === 'AsyncFunction';\n}\n\nfunction wrapAsync(asyncFn) {\n    return isAsync(asyncFn) ? asyncify(asyncFn) : asyncFn;\n}\n\nfunction applyEach$1(eachfn) {\n    return function(fns/*, ...args*/) {\n        var args = slice(arguments, 1);\n        var go = initialParams(function(args, callback) {\n            var that = this;\n            return eachfn(fns, function (fn, cb) {\n                wrapAsync(fn).apply(that, args.concat(cb));\n            }, callback);\n        });\n        if (args.length) {\n            return go.apply(this, args);\n        }\n        else {\n            return go;\n        }\n    };\n}\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Built-in value references. */\nvar Symbol$1 = root.Symbol;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag$1 = Symbol$1 ? Symbol$1.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag$1),\n      tag = value[symToStringTag$1];\n\n  try {\n    value[symToStringTag$1] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag$1] = tag;\n    } else {\n      delete value[symToStringTag$1];\n    }\n  }\n  return result;\n}\n\n/** Used for built-in method references. */\nvar objectProto$1 = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString$1 = objectProto$1.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString$1.call(value);\n}\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]';\nvar undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol$1 ? Symbol$1.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]';\nvar funcTag = '[object Function]';\nvar genTag = '[object GeneratorFunction]';\nvar proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n// A temporary value used to identify if the loop should be broken.\n// See #1064, #1293\nvar breakLoop = {};\n\n/**\n * This method returns `undefined`.\n *\n * @static\n * @memberOf _\n * @since 2.3.0\n * @category Util\n * @example\n *\n * _.times(2, _.noop);\n * // => [undefined, undefined]\n */\nfunction noop() {\n  // No operation performed.\n}\n\nfunction once(fn) {\n    return function () {\n        if (fn === null) return;\n        var callFn = fn;\n        fn = null;\n        callFn.apply(this, arguments);\n    };\n}\n\nvar iteratorSymbol = typeof Symbol === 'function' && Symbol.iterator;\n\nvar getIterator = function (coll) {\n    return iteratorSymbol && coll[iteratorSymbol] && coll[iteratorSymbol]();\n};\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\n/** Used for built-in method references. */\nvar objectProto$3 = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty$2 = objectProto$3.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto$3.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty$2.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER$1 = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER$1 : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\n/** `Object#toString` result references. */\nvar argsTag$1 = '[object Arguments]';\nvar arrayTag = '[object Array]';\nvar boolTag = '[object Boolean]';\nvar dateTag = '[object Date]';\nvar errorTag = '[object Error]';\nvar funcTag$1 = '[object Function]';\nvar mapTag = '[object Map]';\nvar numberTag = '[object Number]';\nvar objectTag = '[object Object]';\nvar regexpTag = '[object RegExp]';\nvar setTag = '[object Set]';\nvar stringTag = '[object String]';\nvar weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]';\nvar dataViewTag = '[object DataView]';\nvar float32Tag = '[object Float32Array]';\nvar float64Tag = '[object Float64Array]';\nvar int8Tag = '[object Int8Array]';\nvar int16Tag = '[object Int16Array]';\nvar int32Tag = '[object Int32Array]';\nvar uint8Tag = '[object Uint8Array]';\nvar uint8ClampedTag = '[object Uint8ClampedArray]';\nvar uint16Tag = '[object Uint16Array]';\nvar uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag$1] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag$1] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\n/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\n/** Detect free variable `exports`. */\nvar freeExports$1 = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule$1 = freeExports$1 && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports$1 = freeModule$1 && freeModule$1.exports === freeExports$1;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports$1 && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule$1 && freeModule$1.require && freeModule$1.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\n/** Used for built-in method references. */\nvar objectProto$2 = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty$1 = objectProto$2.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty$1.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/** Used for built-in method references. */\nvar objectProto$5 = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto$5;\n\n  return value === proto;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\n/** Used for built-in method references. */\nvar objectProto$4 = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty$3 = objectProto$4.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty$3.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nfunction createArrayIterator(coll) {\n    var i = -1;\n    var len = coll.length;\n    return function next() {\n        return ++i < len ? {value: coll[i], key: i} : null;\n    }\n}\n\nfunction createES2015Iterator(iterator) {\n    var i = -1;\n    return function next() {\n        var item = iterator.next();\n        if (item.done)\n            return null;\n        i++;\n        return {value: item.value, key: i};\n    }\n}\n\nfunction createObjectIterator(obj) {\n    var okeys = keys(obj);\n    var i = -1;\n    var len = okeys.length;\n    return function next() {\n        var key = okeys[++i];\n        if (key === '__proto__') {\n            return next();\n        }\n        return i < len ? {value: obj[key], key: key} : null;\n    };\n}\n\nfunction iterator(coll) {\n    if (isArrayLike(coll)) {\n        return createArrayIterator(coll);\n    }\n\n    var iterator = getIterator(coll);\n    return iterator ? createES2015Iterator(iterator) : createObjectIterator(coll);\n}\n\nfunction onlyOnce(fn) {\n    return function() {\n        if (fn === null) throw new Error(\"Callback was already called.\");\n        var callFn = fn;\n        fn = null;\n        callFn.apply(this, arguments);\n    };\n}\n\nfunction _eachOfLimit(limit) {\n    return function (obj, iteratee, callback) {\n        callback = once(callback || noop);\n        if (limit <= 0 || !obj) {\n            return callback(null);\n        }\n        var nextElem = iterator(obj);\n        var done = false;\n        var running = 0;\n        var looping = false;\n\n        function iterateeCallback(err, value) {\n            running -= 1;\n            if (err) {\n                done = true;\n                callback(err);\n            }\n            else if (value === breakLoop || (done && running <= 0)) {\n                done = true;\n                return callback(null);\n            }\n            else if (!looping) {\n                replenish();\n            }\n        }\n\n        function replenish () {\n            looping = true;\n            while (running < limit && !done) {\n                var elem = nextElem();\n                if (elem === null) {\n                    done = true;\n                    if (running <= 0) {\n                        callback(null);\n                    }\n                    return;\n                }\n                running += 1;\n                iteratee(elem.value, elem.key, onlyOnce(iterateeCallback));\n            }\n            looping = false;\n        }\n\n        replenish();\n    };\n}\n\n/**\n * The same as [`eachOf`]{@link module:Collections.eachOf} but runs a maximum of `limit` async operations at a\n * time.\n *\n * @name eachOfLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.eachOf]{@link module:Collections.eachOf}\n * @alias forEachOfLimit\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - An async function to apply to each\n * item in `coll`. The `key` is the item's key, or index in the case of an\n * array.\n * Invoked with (item, key, callback).\n * @param {Function} [callback] - A callback which is called when all\n * `iteratee` functions have finished, or an error occurs. Invoked with (err).\n */\nfunction eachOfLimit(coll, limit, iteratee, callback) {\n    _eachOfLimit(limit)(coll, wrapAsync(iteratee), callback);\n}\n\nfunction doLimit(fn, limit) {\n    return function (iterable, iteratee, callback) {\n        return fn(iterable, limit, iteratee, callback);\n    };\n}\n\n// eachOf implementation optimized for array-likes\nfunction eachOfArrayLike(coll, iteratee, callback) {\n    callback = once(callback || noop);\n    var index = 0,\n        completed = 0,\n        length = coll.length;\n    if (length === 0) {\n        callback(null);\n    }\n\n    function iteratorCallback(err, value) {\n        if (err) {\n            callback(err);\n        } else if ((++completed === length) || value === breakLoop) {\n            callback(null);\n        }\n    }\n\n    for (; index < length; index++) {\n        iteratee(coll[index], index, onlyOnce(iteratorCallback));\n    }\n}\n\n// a generic version of eachOf which can handle array, object, and iterator cases.\nvar eachOfGeneric = doLimit(eachOfLimit, Infinity);\n\n/**\n * Like [`each`]{@link module:Collections.each}, except that it passes the key (or index) as the second argument\n * to the iteratee.\n *\n * @name eachOf\n * @static\n * @memberOf module:Collections\n * @method\n * @alias forEachOf\n * @category Collection\n * @see [async.each]{@link module:Collections.each}\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - A function to apply to each\n * item in `coll`.\n * The `key` is the item's key, or index in the case of an array.\n * Invoked with (item, key, callback).\n * @param {Function} [callback] - A callback which is called when all\n * `iteratee` functions have finished, or an error occurs. Invoked with (err).\n * @example\n *\n * var obj = {dev: \"/dev.json\", test: \"/test.json\", prod: \"/prod.json\"};\n * var configs = {};\n *\n * async.forEachOf(obj, function (value, key, callback) {\n *     fs.readFile(__dirname + value, \"utf8\", function (err, data) {\n *         if (err) return callback(err);\n *         try {\n *             configs[key] = JSON.parse(data);\n *         } catch (e) {\n *             return callback(e);\n *         }\n *         callback();\n *     });\n * }, function (err) {\n *     if (err) console.error(err.message);\n *     // configs is now a map of JSON data\n *     doSomethingWith(configs);\n * });\n */\nvar eachOf = function(coll, iteratee, callback) {\n    var eachOfImplementation = isArrayLike(coll) ? eachOfArrayLike : eachOfGeneric;\n    eachOfImplementation(coll, wrapAsync(iteratee), callback);\n};\n\nfunction doParallel(fn) {\n    return function (obj, iteratee, callback) {\n        return fn(eachOf, obj, wrapAsync(iteratee), callback);\n    };\n}\n\nfunction _asyncMap(eachfn, arr, iteratee, callback) {\n    callback = callback || noop;\n    arr = arr || [];\n    var results = [];\n    var counter = 0;\n    var _iteratee = wrapAsync(iteratee);\n\n    eachfn(arr, function (value, _, callback) {\n        var index = counter++;\n        _iteratee(value, function (err, v) {\n            results[index] = v;\n            callback(err);\n        });\n    }, function (err) {\n        callback(err, results);\n    });\n}\n\n/**\n * Produces a new collection of values by mapping each value in `coll` through\n * the `iteratee` function. The `iteratee` is called with an item from `coll`\n * and a callback for when it has finished processing. Each of these callback\n * takes 2 arguments: an `error`, and the transformed item from `coll`. If\n * `iteratee` passes an error to its callback, the main `callback` (for the\n * `map` function) is immediately called with the error.\n *\n * Note, that since this function applies the `iteratee` to each item in\n * parallel, there is no guarantee that the `iteratee` functions will complete\n * in order. However, the results array will be in the same order as the\n * original `coll`.\n *\n * If `map` is passed an Object, the results will be an Array.  The results\n * will roughly be in the order of the original Objects' keys (but this can\n * vary across JavaScript engines).\n *\n * @name map\n * @static\n * @memberOf module:Collections\n * @method\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async function to apply to each item in\n * `coll`.\n * The iteratee should complete with the transformed item.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. Results is an Array of the\n * transformed items from the `coll`. Invoked with (err, results).\n * @example\n *\n * async.map(['file1','file2','file3'], fs.stat, function(err, results) {\n *     // results is now an array of stats for each file\n * });\n */\nvar map = doParallel(_asyncMap);\n\n/**\n * Applies the provided arguments to each function in the array, calling\n * `callback` after all functions have completed. If you only provide the first\n * argument, `fns`, then it will return a function which lets you pass in the\n * arguments as if it were a single function call. If more arguments are\n * provided, `callback` is required while `args` is still optional.\n *\n * @name applyEach\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {Array|Iterable|Object} fns - A collection of {@link AsyncFunction}s\n * to all call with the same arguments\n * @param {...*} [args] - any number of separate arguments to pass to the\n * function.\n * @param {Function} [callback] - the final argument should be the callback,\n * called when all functions have completed processing.\n * @returns {Function} - If only the first argument, `fns`, is provided, it will\n * return a function which lets you pass in the arguments as if it were a single\n * function call. The signature is `(..args, callback)`. If invoked with any\n * arguments, `callback` is required.\n * @example\n *\n * async.applyEach([enableSearch, updateSchema], 'bucket', callback);\n *\n * // partial application example:\n * async.each(\n *     buckets,\n *     async.applyEach([enableSearch, updateSchema]),\n *     callback\n * );\n */\nvar applyEach = applyEach$1(map);\n\nfunction doParallelLimit(fn) {\n    return function (obj, limit, iteratee, callback) {\n        return fn(_eachOfLimit(limit), obj, wrapAsync(iteratee), callback);\n    };\n}\n\n/**\n * The same as [`map`]{@link module:Collections.map} but runs a maximum of `limit` async operations at a time.\n *\n * @name mapLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.map]{@link module:Collections.map}\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - An async function to apply to each item in\n * `coll`.\n * The iteratee should complete with the transformed item.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. Results is an array of the\n * transformed items from the `coll`. Invoked with (err, results).\n */\nvar mapLimit = doParallelLimit(_asyncMap);\n\n/**\n * The same as [`map`]{@link module:Collections.map} but runs only a single async operation at a time.\n *\n * @name mapSeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.map]{@link module:Collections.map}\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async function to apply to each item in\n * `coll`.\n * The iteratee should complete with the transformed item.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. Results is an array of the\n * transformed items from the `coll`. Invoked with (err, results).\n */\nvar mapSeries = doLimit(mapLimit, 1);\n\n/**\n * The same as [`applyEach`]{@link module:ControlFlow.applyEach} but runs only a single async operation at a time.\n *\n * @name applyEachSeries\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.applyEach]{@link module:ControlFlow.applyEach}\n * @category Control Flow\n * @param {Array|Iterable|Object} fns - A collection of {@link AsyncFunction}s to all\n * call with the same arguments\n * @param {...*} [args] - any number of separate arguments to pass to the\n * function.\n * @param {Function} [callback] - the final argument should be the callback,\n * called when all functions have completed processing.\n * @returns {Function} - If only the first argument is provided, it will return\n * a function which lets you pass in the arguments as if it were a single\n * function call.\n */\nvar applyEachSeries = applyEach$1(mapSeries);\n\n/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\n/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\n/**\n * The base implementation of `_.forOwn` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Object} Returns `object`.\n */\nfunction baseForOwn(object, iteratee) {\n  return object && baseFor(object, iteratee, keys);\n}\n\n/**\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\n * support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} predicate The function invoked per iteration.\n * @param {number} fromIndex The index to search from.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseFindIndex(array, predicate, fromIndex, fromRight) {\n  var length = array.length,\n      index = fromIndex + (fromRight ? 1 : -1);\n\n  while ((fromRight ? index-- : ++index < length)) {\n    if (predicate(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.isNaN` without support for number objects.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n */\nfunction baseIsNaN(value) {\n  return value !== value;\n}\n\n/**\n * A specialized version of `_.indexOf` which performs strict equality\n * comparisons of values, i.e. `===`.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction strictIndexOf(array, value, fromIndex) {\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (array[index] === value) {\n      return index;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseIndexOf(array, value, fromIndex) {\n  return value === value\n    ? strictIndexOf(array, value, fromIndex)\n    : baseFindIndex(array, baseIsNaN, fromIndex);\n}\n\n/**\n * Determines the best order for running the {@link AsyncFunction}s in `tasks`, based on\n * their requirements. Each function can optionally depend on other functions\n * being completed first, and each function is run as soon as its requirements\n * are satisfied.\n *\n * If any of the {@link AsyncFunction}s pass an error to their callback, the `auto` sequence\n * will stop. Further tasks will not execute (so any other functions depending\n * on it will not run), and the main `callback` is immediately called with the\n * error.\n *\n * {@link AsyncFunction}s also receive an object containing the results of functions which\n * have completed so far as the first argument, if they have dependencies. If a\n * task function has no dependencies, it will only be passed a callback.\n *\n * @name auto\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {Object} tasks - An object. Each of its properties is either a\n * function or an array of requirements, with the {@link AsyncFunction} itself the last item\n * in the array. The object's key of a property serves as the name of the task\n * defined by that property, i.e. can be used when specifying requirements for\n * other tasks. The function receives one or two arguments:\n * * a `results` object, containing the results of the previously executed\n *   functions, only passed if the task has any dependencies,\n * * a `callback(err, result)` function, which must be called when finished,\n *   passing an `error` (which can be `null`) and the result of the function's\n *   execution.\n * @param {number} [concurrency=Infinity] - An optional `integer` for\n * determining the maximum number of tasks that can be run in parallel. By\n * default, as many as possible.\n * @param {Function} [callback] - An optional callback which is called when all\n * the tasks have been completed. It receives the `err` argument if any `tasks`\n * pass an error to their callback. Results are always returned; however, if an\n * error occurs, no further `tasks` will be performed, and the results object\n * will only contain partial results. Invoked with (err, results).\n * @returns undefined\n * @example\n *\n * async.auto({\n *     // this function will just be passed a callback\n *     readData: async.apply(fs.readFile, 'data.txt', 'utf-8'),\n *     showData: ['readData', function(results, cb) {\n *         // results.readData is the file's contents\n *         // ...\n *     }]\n * }, callback);\n *\n * async.auto({\n *     get_data: function(callback) {\n *         console.log('in get_data');\n *         // async code to get some data\n *         callback(null, 'data', 'converted to array');\n *     },\n *     make_folder: function(callback) {\n *         console.log('in make_folder');\n *         // async code to create a directory to store a file in\n *         // this is run at the same time as getting the data\n *         callback(null, 'folder');\n *     },\n *     write_file: ['get_data', 'make_folder', function(results, callback) {\n *         console.log('in write_file', JSON.stringify(results));\n *         // once there is some data and the directory exists,\n *         // write the data to a file in the directory\n *         callback(null, 'filename');\n *     }],\n *     email_link: ['write_file', function(results, callback) {\n *         console.log('in email_link', JSON.stringify(results));\n *         // once the file is written let's email a link to it...\n *         // results.write_file contains the filename returned by write_file.\n *         callback(null, {'file':results.write_file, 'email':'user@example.com'});\n *     }]\n * }, function(err, results) {\n *     console.log('err = ', err);\n *     console.log('results = ', results);\n * });\n */\nvar auto = function (tasks, concurrency, callback) {\n    if (typeof concurrency === 'function') {\n        // concurrency is optional, shift the args.\n        callback = concurrency;\n        concurrency = null;\n    }\n    callback = once(callback || noop);\n    var keys$$1 = keys(tasks);\n    var numTasks = keys$$1.length;\n    if (!numTasks) {\n        return callback(null);\n    }\n    if (!concurrency) {\n        concurrency = numTasks;\n    }\n\n    var results = {};\n    var runningTasks = 0;\n    var hasError = false;\n\n    var listeners = Object.create(null);\n\n    var readyTasks = [];\n\n    // for cycle detection:\n    var readyToCheck = []; // tasks that have been identified as reachable\n    // without the possibility of returning to an ancestor task\n    var uncheckedDependencies = {};\n\n    baseForOwn(tasks, function (task, key) {\n        if (!isArray(task)) {\n            // no dependencies\n            enqueueTask(key, [task]);\n            readyToCheck.push(key);\n            return;\n        }\n\n        var dependencies = task.slice(0, task.length - 1);\n        var remainingDependencies = dependencies.length;\n        if (remainingDependencies === 0) {\n            enqueueTask(key, task);\n            readyToCheck.push(key);\n            return;\n        }\n        uncheckedDependencies[key] = remainingDependencies;\n\n        arrayEach(dependencies, function (dependencyName) {\n            if (!tasks[dependencyName]) {\n                throw new Error('async.auto task `' + key +\n                    '` has a non-existent dependency `' +\n                    dependencyName + '` in ' +\n                    dependencies.join(', '));\n            }\n            addListener(dependencyName, function () {\n                remainingDependencies--;\n                if (remainingDependencies === 0) {\n                    enqueueTask(key, task);\n                }\n            });\n        });\n    });\n\n    checkForDeadlocks();\n    processQueue();\n\n    function enqueueTask(key, task) {\n        readyTasks.push(function () {\n            runTask(key, task);\n        });\n    }\n\n    function processQueue() {\n        if (readyTasks.length === 0 && runningTasks === 0) {\n            return callback(null, results);\n        }\n        while(readyTasks.length && runningTasks < concurrency) {\n            var run = readyTasks.shift();\n            run();\n        }\n\n    }\n\n    function addListener(taskName, fn) {\n        var taskListeners = listeners[taskName];\n        if (!taskListeners) {\n            taskListeners = listeners[taskName] = [];\n        }\n\n        taskListeners.push(fn);\n    }\n\n    function taskComplete(taskName) {\n        var taskListeners = listeners[taskName] || [];\n        arrayEach(taskListeners, function (fn) {\n            fn();\n        });\n        processQueue();\n    }\n\n\n    function runTask(key, task) {\n        if (hasError) return;\n\n        var taskCallback = onlyOnce(function(err, result) {\n            runningTasks--;\n            if (arguments.length > 2) {\n                result = slice(arguments, 1);\n            }\n            if (err) {\n                var safeResults = {};\n                baseForOwn(results, function(val, rkey) {\n                    safeResults[rkey] = val;\n                });\n                safeResults[key] = result;\n                hasError = true;\n                listeners = Object.create(null);\n\n                callback(err, safeResults);\n            } else {\n                results[key] = result;\n                taskComplete(key);\n            }\n        });\n\n        runningTasks++;\n        var taskFn = wrapAsync(task[task.length - 1]);\n        if (task.length > 1) {\n            taskFn(results, taskCallback);\n        } else {\n            taskFn(taskCallback);\n        }\n    }\n\n    function checkForDeadlocks() {\n        // Kahn's algorithm\n        // https://en.wikipedia.org/wiki/Topological_sorting#Kahn.27s_algorithm\n        // http://connalle.blogspot.com/2013/10/topological-sortingkahn-algorithm.html\n        var currentTask;\n        var counter = 0;\n        while (readyToCheck.length) {\n            currentTask = readyToCheck.pop();\n            counter++;\n            arrayEach(getDependents(currentTask), function (dependent) {\n                if (--uncheckedDependencies[dependent] === 0) {\n                    readyToCheck.push(dependent);\n                }\n            });\n        }\n\n        if (counter !== numTasks) {\n            throw new Error(\n                'async.auto cannot execute tasks due to a recursive dependency'\n            );\n        }\n    }\n\n    function getDependents(taskName) {\n        var result = [];\n        baseForOwn(tasks, function (task, key) {\n            if (isArray(task) && baseIndexOf(task, taskName, 0) >= 0) {\n                result.push(key);\n            }\n        });\n        return result;\n    }\n};\n\n/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol$1 ? Symbol$1.prototype : undefined;\nvar symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * The base implementation of `_.slice` without an iteratee call guard.\n *\n * @private\n * @param {Array} array The array to slice.\n * @param {number} [start=0] The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the slice of `array`.\n */\nfunction baseSlice(array, start, end) {\n  var index = -1,\n      length = array.length;\n\n  if (start < 0) {\n    start = -start > length ? 0 : (length + start);\n  }\n  end = end > length ? length : end;\n  if (end < 0) {\n    end += length;\n  }\n  length = start > end ? 0 : ((end - start) >>> 0);\n  start >>>= 0;\n\n  var result = Array(length);\n  while (++index < length) {\n    result[index] = array[index + start];\n  }\n  return result;\n}\n\n/**\n * Casts `array` to a slice if it's needed.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {number} start The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the cast slice.\n */\nfunction castSlice(array, start, end) {\n  var length = array.length;\n  end = end === undefined ? length : end;\n  return (!start && end >= length) ? array : baseSlice(array, start, end);\n}\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last string symbol\n * that is not found in the character symbols.\n *\n * @private\n * @param {Array} strSymbols The string symbols to inspect.\n * @param {Array} chrSymbols The character symbols to find.\n * @returns {number} Returns the index of the last unmatched string symbol.\n */\nfunction charsEndIndex(strSymbols, chrSymbols) {\n  var index = strSymbols.length;\n\n  while (index-- && baseIndexOf(chrSymbols, strSymbols[index], 0) > -1) {}\n  return index;\n}\n\n/**\n * Used by `_.trim` and `_.trimStart` to get the index of the first string symbol\n * that is not found in the character symbols.\n *\n * @private\n * @param {Array} strSymbols The string symbols to inspect.\n * @param {Array} chrSymbols The character symbols to find.\n * @returns {number} Returns the index of the first unmatched string symbol.\n */\nfunction charsStartIndex(strSymbols, chrSymbols) {\n  var index = -1,\n      length = strSymbols.length;\n\n  while (++index < length && baseIndexOf(chrSymbols, strSymbols[index], 0) > -1) {}\n  return index;\n}\n\n/**\n * Converts an ASCII `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction asciiToArray(string) {\n  return string.split('');\n}\n\n/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff';\nvar rsComboMarksRange = '\\\\u0300-\\\\u036f';\nvar reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f';\nvar rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff';\nvar rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange;\nvar rsVarRange = '\\\\ufe0e\\\\ufe0f';\n\n/** Used to compose unicode capture groups. */\nvar rsZWJ = '\\\\u200d';\n\n/** Used to detect strings with [zero-width joiners or code points from the astral planes](http://eev.ee/blog/2015/09/12/dark-corners-of-unicode/). */\nvar reHasUnicode = RegExp('[' + rsZWJ + rsAstralRange  + rsComboRange + rsVarRange + ']');\n\n/**\n * Checks if `string` contains Unicode symbols.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {boolean} Returns `true` if a symbol is found, else `false`.\n */\nfunction hasUnicode(string) {\n  return reHasUnicode.test(string);\n}\n\n/** Used to compose unicode character classes. */\nvar rsAstralRange$1 = '\\\\ud800-\\\\udfff';\nvar rsComboMarksRange$1 = '\\\\u0300-\\\\u036f';\nvar reComboHalfMarksRange$1 = '\\\\ufe20-\\\\ufe2f';\nvar rsComboSymbolsRange$1 = '\\\\u20d0-\\\\u20ff';\nvar rsComboRange$1 = rsComboMarksRange$1 + reComboHalfMarksRange$1 + rsComboSymbolsRange$1;\nvar rsVarRange$1 = '\\\\ufe0e\\\\ufe0f';\n\n/** Used to compose unicode capture groups. */\nvar rsAstral = '[' + rsAstralRange$1 + ']';\nvar rsCombo = '[' + rsComboRange$1 + ']';\nvar rsFitz = '\\\\ud83c[\\\\udffb-\\\\udfff]';\nvar rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')';\nvar rsNonAstral = '[^' + rsAstralRange$1 + ']';\nvar rsRegional = '(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}';\nvar rsSurrPair = '[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]';\nvar rsZWJ$1 = '\\\\u200d';\n\n/** Used to compose unicode regexes. */\nvar reOptMod = rsModifier + '?';\nvar rsOptVar = '[' + rsVarRange$1 + ']?';\nvar rsOptJoin = '(?:' + rsZWJ$1 + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*';\nvar rsSeq = rsOptVar + reOptMod + rsOptJoin;\nvar rsSymbol = '(?:' + [rsNonAstral + rsCombo + '?', rsCombo, rsRegional, rsSurrPair, rsAstral].join('|') + ')';\n\n/** Used to match [string symbols](https://mathiasbynens.be/notes/javascript-unicode). */\nvar reUnicode = RegExp(rsFitz + '(?=' + rsFitz + ')|' + rsSymbol + rsSeq, 'g');\n\n/**\n * Converts a Unicode `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction unicodeToArray(string) {\n  return string.match(reUnicode) || [];\n}\n\n/**\n * Converts `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction stringToArray(string) {\n  return hasUnicode(string)\n    ? unicodeToArray(string)\n    : asciiToArray(string);\n}\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/**\n * Removes leading and trailing whitespace or specified characters from `string`.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to trim.\n * @param {string} [chars=whitespace] The characters to trim.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {string} Returns the trimmed string.\n * @example\n *\n * _.trim('  abc  ');\n * // => 'abc'\n *\n * _.trim('-_-abc-_-', '_-');\n * // => 'abc'\n *\n * _.map(['  foo  ', '  bar  '], _.trim);\n * // => ['foo', 'bar']\n */\nfunction trim(string, chars, guard) {\n  string = toString(string);\n  if (string && (guard || chars === undefined)) {\n    return string.replace(reTrim, '');\n  }\n  if (!string || !(chars = baseToString(chars))) {\n    return string;\n  }\n  var strSymbols = stringToArray(string),\n      chrSymbols = stringToArray(chars),\n      start = charsStartIndex(strSymbols, chrSymbols),\n      end = charsEndIndex(strSymbols, chrSymbols) + 1;\n\n  return castSlice(strSymbols, start, end).join('');\n}\n\nvar FN_ARGS = /^(?:async\\s+)?(function)?\\s*[^\\(]*\\(\\s*([^\\)]*)\\)/m;\nvar FN_ARG_SPLIT = /,/;\nvar FN_ARG = /(=.+)?(\\s*)$/;\nvar STRIP_COMMENTS = /((\\/\\/.*$)|(\\/\\*[\\s\\S]*?\\*\\/))/mg;\n\nfunction parseParams(func) {\n    func = func.toString().replace(STRIP_COMMENTS, '');\n    func = func.match(FN_ARGS)[2].replace(' ', '');\n    func = func ? func.split(FN_ARG_SPLIT) : [];\n    func = func.map(function (arg){\n        return trim(arg.replace(FN_ARG, ''));\n    });\n    return func;\n}\n\n/**\n * A dependency-injected version of the [async.auto]{@link module:ControlFlow.auto} function. Dependent\n * tasks are specified as parameters to the function, after the usual callback\n * parameter, with the parameter names matching the names of the tasks it\n * depends on. This can provide even more readable task graphs which can be\n * easier to maintain.\n *\n * If a final callback is specified, the task results are similarly injected,\n * specified as named parameters after the initial error parameter.\n *\n * The autoInject function is purely syntactic sugar and its semantics are\n * otherwise equivalent to [async.auto]{@link module:ControlFlow.auto}.\n *\n * @name autoInject\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.auto]{@link module:ControlFlow.auto}\n * @category Control Flow\n * @param {Object} tasks - An object, each of whose properties is an {@link AsyncFunction} of\n * the form 'func([dependencies...], callback). The object's key of a property\n * serves as the name of the task defined by that property, i.e. can be used\n * when specifying requirements for other tasks.\n * * The `callback` parameter is a `callback(err, result)` which must be called\n *   when finished, passing an `error` (which can be `null`) and the result of\n *   the function's execution. The remaining parameters name other tasks on\n *   which the task is dependent, and the results from those tasks are the\n *   arguments of those parameters.\n * @param {Function} [callback] - An optional callback which is called when all\n * the tasks have been completed. It receives the `err` argument if any `tasks`\n * pass an error to their callback, and a `results` object with any completed\n * task results, similar to `auto`.\n * @example\n *\n * //  The example from `auto` can be rewritten as follows:\n * async.autoInject({\n *     get_data: function(callback) {\n *         // async code to get some data\n *         callback(null, 'data', 'converted to array');\n *     },\n *     make_folder: function(callback) {\n *         // async code to create a directory to store a file in\n *         // this is run at the same time as getting the data\n *         callback(null, 'folder');\n *     },\n *     write_file: function(get_data, make_folder, callback) {\n *         // once there is some data and the directory exists,\n *         // write the data to a file in the directory\n *         callback(null, 'filename');\n *     },\n *     email_link: function(write_file, callback) {\n *         // once the file is written let's email a link to it...\n *         // write_file contains the filename returned by write_file.\n *         callback(null, {'file':write_file, 'email':'user@example.com'});\n *     }\n * }, function(err, results) {\n *     console.log('err = ', err);\n *     console.log('email_link = ', results.email_link);\n * });\n *\n * // If you are using a JS minifier that mangles parameter names, `autoInject`\n * // will not work with plain functions, since the parameter names will be\n * // collapsed to a single letter identifier.  To work around this, you can\n * // explicitly specify the names of the parameters your task function needs\n * // in an array, similar to Angular.js dependency injection.\n *\n * // This still has an advantage over plain `auto`, since the results a task\n * // depends on are still spread into arguments.\n * async.autoInject({\n *     //...\n *     write_file: ['get_data', 'make_folder', function(get_data, make_folder, callback) {\n *         callback(null, 'filename');\n *     }],\n *     email_link: ['write_file', function(write_file, callback) {\n *         callback(null, {'file':write_file, 'email':'user@example.com'});\n *     }]\n *     //...\n * }, function(err, results) {\n *     console.log('err = ', err);\n *     console.log('email_link = ', results.email_link);\n * });\n */\nfunction autoInject(tasks, callback) {\n    var newTasks = {};\n\n    baseForOwn(tasks, function (taskFn, key) {\n        var params;\n        var fnIsAsync = isAsync(taskFn);\n        var hasNoDeps =\n            (!fnIsAsync && taskFn.length === 1) ||\n            (fnIsAsync && taskFn.length === 0);\n\n        if (isArray(taskFn)) {\n            params = taskFn.slice(0, -1);\n            taskFn = taskFn[taskFn.length - 1];\n\n            newTasks[key] = params.concat(params.length > 0 ? newTask : taskFn);\n        } else if (hasNoDeps) {\n            // no dependencies, use the function as-is\n            newTasks[key] = taskFn;\n        } else {\n            params = parseParams(taskFn);\n            if (taskFn.length === 0 && !fnIsAsync && params.length === 0) {\n                throw new Error(\"autoInject task functions require explicit parameters.\");\n            }\n\n            // remove callback param\n            if (!fnIsAsync) params.pop();\n\n            newTasks[key] = params.concat(newTask);\n        }\n\n        function newTask(results, taskCb) {\n            var newArgs = arrayMap(params, function (name) {\n                return results[name];\n            });\n            newArgs.push(taskCb);\n            wrapAsync(taskFn).apply(null, newArgs);\n        }\n    });\n\n    auto(newTasks, callback);\n}\n\n// Simple doubly linked list (https://en.wikipedia.org/wiki/Doubly_linked_list) implementation\n// used for queues. This implementation assumes that the node provided by the user can be modified\n// to adjust the next and last properties. We implement only the minimal functionality\n// for queue support.\nfunction DLL() {\n    this.head = this.tail = null;\n    this.length = 0;\n}\n\nfunction setInitial(dll, node) {\n    dll.length = 1;\n    dll.head = dll.tail = node;\n}\n\nDLL.prototype.removeLink = function(node) {\n    if (node.prev) node.prev.next = node.next;\n    else this.head = node.next;\n    if (node.next) node.next.prev = node.prev;\n    else this.tail = node.prev;\n\n    node.prev = node.next = null;\n    this.length -= 1;\n    return node;\n};\n\nDLL.prototype.empty = function () {\n    while(this.head) this.shift();\n    return this;\n};\n\nDLL.prototype.insertAfter = function(node, newNode) {\n    newNode.prev = node;\n    newNode.next = node.next;\n    if (node.next) node.next.prev = newNode;\n    else this.tail = newNode;\n    node.next = newNode;\n    this.length += 1;\n};\n\nDLL.prototype.insertBefore = function(node, newNode) {\n    newNode.prev = node.prev;\n    newNode.next = node;\n    if (node.prev) node.prev.next = newNode;\n    else this.head = newNode;\n    node.prev = newNode;\n    this.length += 1;\n};\n\nDLL.prototype.unshift = function(node) {\n    if (this.head) this.insertBefore(this.head, node);\n    else setInitial(this, node);\n};\n\nDLL.prototype.push = function(node) {\n    if (this.tail) this.insertAfter(this.tail, node);\n    else setInitial(this, node);\n};\n\nDLL.prototype.shift = function() {\n    return this.head && this.removeLink(this.head);\n};\n\nDLL.prototype.pop = function() {\n    return this.tail && this.removeLink(this.tail);\n};\n\nDLL.prototype.toArray = function () {\n    var arr = Array(this.length);\n    var curr = this.head;\n    for(var idx = 0; idx < this.length; idx++) {\n        arr[idx] = curr.data;\n        curr = curr.next;\n    }\n    return arr;\n};\n\nDLL.prototype.remove = function (testFn) {\n    var curr = this.head;\n    while(!!curr) {\n        var next = curr.next;\n        if (testFn(curr)) {\n            this.removeLink(curr);\n        }\n        curr = next;\n    }\n    return this;\n};\n\nfunction queue(worker, concurrency, payload) {\n    if (concurrency == null) {\n        concurrency = 1;\n    }\n    else if(concurrency === 0) {\n        throw new Error('Concurrency must not be zero');\n    }\n\n    var _worker = wrapAsync(worker);\n    var numRunning = 0;\n    var workersList = [];\n\n    var processingScheduled = false;\n    function _insert(data, insertAtFront, callback) {\n        if (callback != null && typeof callback !== 'function') {\n            throw new Error('task callback must be a function');\n        }\n        q.started = true;\n        if (!isArray(data)) {\n            data = [data];\n        }\n        if (data.length === 0 && q.idle()) {\n            // call drain immediately if there are no tasks\n            return setImmediate$1(function() {\n                q.drain();\n            });\n        }\n\n        for (var i = 0, l = data.length; i < l; i++) {\n            var item = {\n                data: data[i],\n                callback: callback || noop\n            };\n\n            if (insertAtFront) {\n                q._tasks.unshift(item);\n            } else {\n                q._tasks.push(item);\n            }\n        }\n\n        if (!processingScheduled) {\n            processingScheduled = true;\n            setImmediate$1(function() {\n                processingScheduled = false;\n                q.process();\n            });\n        }\n    }\n\n    function _next(tasks) {\n        return function(err){\n            numRunning -= 1;\n\n            for (var i = 0, l = tasks.length; i < l; i++) {\n                var task = tasks[i];\n\n                var index = baseIndexOf(workersList, task, 0);\n                if (index === 0) {\n                    workersList.shift();\n                } else if (index > 0) {\n                    workersList.splice(index, 1);\n                }\n\n                task.callback.apply(task, arguments);\n\n                if (err != null) {\n                    q.error(err, task.data);\n                }\n            }\n\n            if (numRunning <= (q.concurrency - q.buffer) ) {\n                q.unsaturated();\n            }\n\n            if (q.idle()) {\n                q.drain();\n            }\n            q.process();\n        };\n    }\n\n    var isProcessing = false;\n    var q = {\n        _tasks: new DLL(),\n        concurrency: concurrency,\n        payload: payload,\n        saturated: noop,\n        unsaturated:noop,\n        buffer: concurrency / 4,\n        empty: noop,\n        drain: noop,\n        error: noop,\n        started: false,\n        paused: false,\n        push: function (data, callback) {\n            _insert(data, false, callback);\n        },\n        kill: function () {\n            q.drain = noop;\n            q._tasks.empty();\n        },\n        unshift: function (data, callback) {\n            _insert(data, true, callback);\n        },\n        remove: function (testFn) {\n            q._tasks.remove(testFn);\n        },\n        process: function () {\n            // Avoid trying to start too many processing operations. This can occur\n            // when callbacks resolve synchronously (#1267).\n            if (isProcessing) {\n                return;\n            }\n            isProcessing = true;\n            while(!q.paused && numRunning < q.concurrency && q._tasks.length){\n                var tasks = [], data = [];\n                var l = q._tasks.length;\n                if (q.payload) l = Math.min(l, q.payload);\n                for (var i = 0; i < l; i++) {\n                    var node = q._tasks.shift();\n                    tasks.push(node);\n                    workersList.push(node);\n                    data.push(node.data);\n                }\n\n                numRunning += 1;\n\n                if (q._tasks.length === 0) {\n                    q.empty();\n                }\n\n                if (numRunning === q.concurrency) {\n                    q.saturated();\n                }\n\n                var cb = onlyOnce(_next(tasks));\n                _worker(data, cb);\n            }\n            isProcessing = false;\n        },\n        length: function () {\n            return q._tasks.length;\n        },\n        running: function () {\n            return numRunning;\n        },\n        workersList: function () {\n            return workersList;\n        },\n        idle: function() {\n            return q._tasks.length + numRunning === 0;\n        },\n        pause: function () {\n            q.paused = true;\n        },\n        resume: function () {\n            if (q.paused === false) { return; }\n            q.paused = false;\n            setImmediate$1(q.process);\n        }\n    };\n    return q;\n}\n\n/**\n * A cargo of tasks for the worker function to complete. Cargo inherits all of\n * the same methods and event callbacks as [`queue`]{@link module:ControlFlow.queue}.\n * @typedef {Object} CargoObject\n * @memberOf module:ControlFlow\n * @property {Function} length - A function returning the number of items\n * waiting to be processed. Invoke like `cargo.length()`.\n * @property {number} payload - An `integer` for determining how many tasks\n * should be process per round. This property can be changed after a `cargo` is\n * created to alter the payload on-the-fly.\n * @property {Function} push - Adds `task` to the `queue`. The callback is\n * called once the `worker` has finished processing the task. Instead of a\n * single task, an array of `tasks` can be submitted. The respective callback is\n * used for every task in the list. Invoke like `cargo.push(task, [callback])`.\n * @property {Function} saturated - A callback that is called when the\n * `queue.length()` hits the concurrency and further tasks will be queued.\n * @property {Function} empty - A callback that is called when the last item\n * from the `queue` is given to a `worker`.\n * @property {Function} drain - A callback that is called when the last item\n * from the `queue` has returned from the `worker`.\n * @property {Function} idle - a function returning false if there are items\n * waiting or being processed, or true if not. Invoke like `cargo.idle()`.\n * @property {Function} pause - a function that pauses the processing of tasks\n * until `resume()` is called. Invoke like `cargo.pause()`.\n * @property {Function} resume - a function that resumes the processing of\n * queued tasks when the queue is paused. Invoke like `cargo.resume()`.\n * @property {Function} kill - a function that removes the `drain` callback and\n * empties remaining tasks from the queue forcing it to go idle. Invoke like `cargo.kill()`.\n */\n\n/**\n * Creates a `cargo` object with the specified payload. Tasks added to the\n * cargo will be processed altogether (up to the `payload` limit). If the\n * `worker` is in progress, the task is queued until it becomes available. Once\n * the `worker` has completed some tasks, each callback of those tasks is\n * called. Check out [these](https://camo.githubusercontent.com/6bbd36f4cf5b35a0f11a96dcd2e97711ffc2fb37/68747470733a2f2f662e636c6f75642e6769746875622e636f6d2f6173736574732f313637363837312f36383130382f62626330636662302d356632392d313165322d393734662d3333393763363464633835382e676966) [animations](https://camo.githubusercontent.com/f4810e00e1c5f5f8addbe3e9f49064fd5d102699/68747470733a2f2f662e636c6f75642e6769746875622e636f6d2f6173736574732f313637363837312f36383130312f38346339323036362d356632392d313165322d383134662d3964336430323431336266642e676966)\n * for how `cargo` and `queue` work.\n *\n * While [`queue`]{@link module:ControlFlow.queue} passes only one task to one of a group of workers\n * at a time, cargo passes an array of tasks to a single worker, repeating\n * when the worker is finished.\n *\n * @name cargo\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.queue]{@link module:ControlFlow.queue}\n * @category Control Flow\n * @param {AsyncFunction} worker - An asynchronous function for processing an array\n * of queued tasks. Invoked with `(tasks, callback)`.\n * @param {number} [payload=Infinity] - An optional `integer` for determining\n * how many tasks should be processed per round; if omitted, the default is\n * unlimited.\n * @returns {module:ControlFlow.CargoObject} A cargo object to manage the tasks. Callbacks can\n * attached as certain properties to listen for specific events during the\n * lifecycle of the cargo and inner queue.\n * @example\n *\n * // create a cargo object with payload 2\n * var cargo = async.cargo(function(tasks, callback) {\n *     for (var i=0; i<tasks.length; i++) {\n *         console.log('hello ' + tasks[i].name);\n *     }\n *     callback();\n * }, 2);\n *\n * // add some items\n * cargo.push({name: 'foo'}, function(err) {\n *     console.log('finished processing foo');\n * });\n * cargo.push({name: 'bar'}, function(err) {\n *     console.log('finished processing bar');\n * });\n * cargo.push({name: 'baz'}, function(err) {\n *     console.log('finished processing baz');\n * });\n */\nfunction cargo(worker, payload) {\n    return queue(worker, 1, payload);\n}\n\n/**\n * The same as [`eachOf`]{@link module:Collections.eachOf} but runs only a single async operation at a time.\n *\n * @name eachOfSeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.eachOf]{@link module:Collections.eachOf}\n * @alias forEachOfSeries\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async function to apply to each item in\n * `coll`.\n * Invoked with (item, key, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. Invoked with (err).\n */\nvar eachOfSeries = doLimit(eachOfLimit, 1);\n\n/**\n * Reduces `coll` into a single value using an async `iteratee` to return each\n * successive step. `memo` is the initial state of the reduction. This function\n * only operates in series.\n *\n * For performance reasons, it may make sense to split a call to this function\n * into a parallel map, and then use the normal `Array.prototype.reduce` on the\n * results. This function is for situations where each step in the reduction\n * needs to be async; if you can get the data before reducing it, then it's\n * probably a good idea to do so.\n *\n * @name reduce\n * @static\n * @memberOf module:Collections\n * @method\n * @alias inject\n * @alias foldl\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {*} memo - The initial state of the reduction.\n * @param {AsyncFunction} iteratee - A function applied to each item in the\n * array to produce the next step in the reduction.\n * The `iteratee` should complete with the next state of the reduction.\n * If the iteratee complete with an error, the reduction is stopped and the\n * main `callback` is immediately called with the error.\n * Invoked with (memo, item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Result is the reduced value. Invoked with\n * (err, result).\n * @example\n *\n * async.reduce([1,2,3], 0, function(memo, item, callback) {\n *     // pointless async:\n *     process.nextTick(function() {\n *         callback(null, memo + item)\n *     });\n * }, function(err, result) {\n *     // result is now equal to the last value of memo, which is 6\n * });\n */\nfunction reduce(coll, memo, iteratee, callback) {\n    callback = once(callback || noop);\n    var _iteratee = wrapAsync(iteratee);\n    eachOfSeries(coll, function(x, i, callback) {\n        _iteratee(memo, x, function(err, v) {\n            memo = v;\n            callback(err);\n        });\n    }, function(err) {\n        callback(err, memo);\n    });\n}\n\n/**\n * Version of the compose function that is more natural to read. Each function\n * consumes the return value of the previous function. It is the equivalent of\n * [compose]{@link module:ControlFlow.compose} with the arguments reversed.\n *\n * Each function is executed with the `this` binding of the composed function.\n *\n * @name seq\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.compose]{@link module:ControlFlow.compose}\n * @category Control Flow\n * @param {...AsyncFunction} functions - the asynchronous functions to compose\n * @returns {Function} a function that composes the `functions` in order\n * @example\n *\n * // Requires lodash (or underscore), express3 and dresende's orm2.\n * // Part of an app, that fetches cats of the logged user.\n * // This example uses `seq` function to avoid overnesting and error\n * // handling clutter.\n * app.get('/cats', function(request, response) {\n *     var User = request.models.User;\n *     async.seq(\n *         _.bind(User.get, User),  // 'User.get' has signature (id, callback(err, data))\n *         function(user, fn) {\n *             user.getCats(fn);      // 'getCats' has signature (callback(err, data))\n *         }\n *     )(req.session.user_id, function (err, cats) {\n *         if (err) {\n *             console.error(err);\n *             response.json({ status: 'error', message: err.message });\n *         } else {\n *             response.json({ status: 'ok', message: 'Cats found', data: cats });\n *         }\n *     });\n * });\n */\nfunction seq(/*...functions*/) {\n    var _functions = arrayMap(arguments, wrapAsync);\n    return function(/*...args*/) {\n        var args = slice(arguments);\n        var that = this;\n\n        var cb = args[args.length - 1];\n        if (typeof cb == 'function') {\n            args.pop();\n        } else {\n            cb = noop;\n        }\n\n        reduce(_functions, args, function(newargs, fn, cb) {\n            fn.apply(that, newargs.concat(function(err/*, ...nextargs*/) {\n                var nextargs = slice(arguments, 1);\n                cb(err, nextargs);\n            }));\n        },\n        function(err, results) {\n            cb.apply(that, [err].concat(results));\n        });\n    };\n}\n\n/**\n * Creates a function which is a composition of the passed asynchronous\n * functions. Each function consumes the return value of the function that\n * follows. Composing functions `f()`, `g()`, and `h()` would produce the result\n * of `f(g(h()))`, only this version uses callbacks to obtain the return values.\n *\n * Each function is executed with the `this` binding of the composed function.\n *\n * @name compose\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {...AsyncFunction} functions - the asynchronous functions to compose\n * @returns {Function} an asynchronous function that is the composed\n * asynchronous `functions`\n * @example\n *\n * function add1(n, callback) {\n *     setTimeout(function () {\n *         callback(null, n + 1);\n *     }, 10);\n * }\n *\n * function mul3(n, callback) {\n *     setTimeout(function () {\n *         callback(null, n * 3);\n *     }, 10);\n * }\n *\n * var add1mul3 = async.compose(mul3, add1);\n * add1mul3(4, function (err, result) {\n *     // result now equals 15\n * });\n */\nvar compose = function(/*...args*/) {\n    return seq.apply(null, slice(arguments).reverse());\n};\n\nvar _concat = Array.prototype.concat;\n\n/**\n * The same as [`concat`]{@link module:Collections.concat} but runs a maximum of `limit` async operations at a time.\n *\n * @name concatLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.concat]{@link module:Collections.concat}\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - A function to apply to each item in `coll`,\n * which should use an array as its result. Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished, or an error occurs. Results is an array\n * containing the concatenated results of the `iteratee` function. Invoked with\n * (err, results).\n */\nvar concatLimit = function(coll, limit, iteratee, callback) {\n    callback = callback || noop;\n    var _iteratee = wrapAsync(iteratee);\n    mapLimit(coll, limit, function(val, callback) {\n        _iteratee(val, function(err /*, ...args*/) {\n            if (err) return callback(err);\n            return callback(null, slice(arguments, 1));\n        });\n    }, function(err, mapResults) {\n        var result = [];\n        for (var i = 0; i < mapResults.length; i++) {\n            if (mapResults[i]) {\n                result = _concat.apply(result, mapResults[i]);\n            }\n        }\n\n        return callback(err, result);\n    });\n};\n\n/**\n * Applies `iteratee` to each item in `coll`, concatenating the results. Returns\n * the concatenated list. The `iteratee`s are called in parallel, and the\n * results are concatenated as they return. There is no guarantee that the\n * results array will be returned in the original order of `coll` passed to the\n * `iteratee` function.\n *\n * @name concat\n * @static\n * @memberOf module:Collections\n * @method\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - A function to apply to each item in `coll`,\n * which should use an array as its result. Invoked with (item, callback).\n * @param {Function} [callback(err)] - A callback which is called after all the\n * `iteratee` functions have finished, or an error occurs. Results is an array\n * containing the concatenated results of the `iteratee` function. Invoked with\n * (err, results).\n * @example\n *\n * async.concat(['dir1','dir2','dir3'], fs.readdir, function(err, files) {\n *     // files is now a list of filenames that exist in the 3 directories\n * });\n */\nvar concat = doLimit(concatLimit, Infinity);\n\n/**\n * The same as [`concat`]{@link module:Collections.concat} but runs only a single async operation at a time.\n *\n * @name concatSeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.concat]{@link module:Collections.concat}\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - A function to apply to each item in `coll`.\n * The iteratee should complete with an array an array of results.\n * Invoked with (item, callback).\n * @param {Function} [callback(err)] - A callback which is called after all the\n * `iteratee` functions have finished, or an error occurs. Results is an array\n * containing the concatenated results of the `iteratee` function. Invoked with\n * (err, results).\n */\nvar concatSeries = doLimit(concatLimit, 1);\n\n/**\n * Returns a function that when called, calls-back with the values provided.\n * Useful as the first function in a [`waterfall`]{@link module:ControlFlow.waterfall}, or for plugging values in to\n * [`auto`]{@link module:ControlFlow.auto}.\n *\n * @name constant\n * @static\n * @memberOf module:Utils\n * @method\n * @category Util\n * @param {...*} arguments... - Any number of arguments to automatically invoke\n * callback with.\n * @returns {AsyncFunction} Returns a function that when invoked, automatically\n * invokes the callback with the previous given arguments.\n * @example\n *\n * async.waterfall([\n *     async.constant(42),\n *     function (value, next) {\n *         // value === 42\n *     },\n *     //...\n * ], callback);\n *\n * async.waterfall([\n *     async.constant(filename, \"utf8\"),\n *     fs.readFile,\n *     function (fileData, next) {\n *         //...\n *     }\n *     //...\n * ], callback);\n *\n * async.auto({\n *     hostname: async.constant(\"https://server.net/\"),\n *     port: findFreePort,\n *     launchServer: [\"hostname\", \"port\", function (options, cb) {\n *         startServer(options, cb);\n *     }],\n *     //...\n * }, callback);\n */\nvar constant = function(/*...values*/) {\n    var values = slice(arguments);\n    var args = [null].concat(values);\n    return function (/*...ignoredArgs, callback*/) {\n        var callback = arguments[arguments.length - 1];\n        return callback.apply(this, args);\n    };\n};\n\n/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nfunction _createTester(check, getResult) {\n    return function(eachfn, arr, iteratee, cb) {\n        cb = cb || noop;\n        var testPassed = false;\n        var testResult;\n        eachfn(arr, function(value, _, callback) {\n            iteratee(value, function(err, result) {\n                if (err) {\n                    callback(err);\n                } else if (check(result) && !testResult) {\n                    testPassed = true;\n                    testResult = getResult(true, value);\n                    callback(null, breakLoop);\n                } else {\n                    callback();\n                }\n            });\n        }, function(err) {\n            if (err) {\n                cb(err);\n            } else {\n                cb(null, testPassed ? testResult : getResult(false));\n            }\n        });\n    };\n}\n\nfunction _findGetResult(v, x) {\n    return x;\n}\n\n/**\n * Returns the first value in `coll` that passes an async truth test. The\n * `iteratee` is applied in parallel, meaning the first iteratee to return\n * `true` will fire the detect `callback` with that result. That means the\n * result might not be the first item in the original `coll` (in terms of order)\n * that passes the test.\n\n * If order within the original `coll` is important, then look at\n * [`detectSeries`]{@link module:Collections.detectSeries}.\n *\n * @name detect\n * @static\n * @memberOf module:Collections\n * @method\n * @alias find\n * @category Collections\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - A truth test to apply to each item in `coll`.\n * The iteratee must complete with a boolean value as its result.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called as soon as any\n * iteratee returns `true`, or after all the `iteratee` functions have finished.\n * Result will be the first item in the array that passes the truth test\n * (iteratee) or the value `undefined` if none passed. Invoked with\n * (err, result).\n * @example\n *\n * async.detect(['file1','file2','file3'], function(filePath, callback) {\n *     fs.access(filePath, function(err) {\n *         callback(null, !err)\n *     });\n * }, function(err, result) {\n *     // result now equals the first file in the list that exists\n * });\n */\nvar detect = doParallel(_createTester(identity, _findGetResult));\n\n/**\n * The same as [`detect`]{@link module:Collections.detect} but runs a maximum of `limit` async operations at a\n * time.\n *\n * @name detectLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.detect]{@link module:Collections.detect}\n * @alias findLimit\n * @category Collections\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - A truth test to apply to each item in `coll`.\n * The iteratee must complete with a boolean value as its result.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called as soon as any\n * iteratee returns `true`, or after all the `iteratee` functions have finished.\n * Result will be the first item in the array that passes the truth test\n * (iteratee) or the value `undefined` if none passed. Invoked with\n * (err, result).\n */\nvar detectLimit = doParallelLimit(_createTester(identity, _findGetResult));\n\n/**\n * The same as [`detect`]{@link module:Collections.detect} but runs only a single async operation at a time.\n *\n * @name detectSeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.detect]{@link module:Collections.detect}\n * @alias findSeries\n * @category Collections\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - A truth test to apply to each item in `coll`.\n * The iteratee must complete with a boolean value as its result.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called as soon as any\n * iteratee returns `true`, or after all the `iteratee` functions have finished.\n * Result will be the first item in the array that passes the truth test\n * (iteratee) or the value `undefined` if none passed. Invoked with\n * (err, result).\n */\nvar detectSeries = doLimit(detectLimit, 1);\n\nfunction consoleFunc(name) {\n    return function (fn/*, ...args*/) {\n        var args = slice(arguments, 1);\n        args.push(function (err/*, ...args*/) {\n            var args = slice(arguments, 1);\n            if (typeof console === 'object') {\n                if (err) {\n                    if (console.error) {\n                        console.error(err);\n                    }\n                } else if (console[name]) {\n                    arrayEach(args, function (x) {\n                        console[name](x);\n                    });\n                }\n            }\n        });\n        wrapAsync(fn).apply(null, args);\n    };\n}\n\n/**\n * Logs the result of an [`async` function]{@link AsyncFunction} to the\n * `console` using `console.dir` to display the properties of the resulting object.\n * Only works in Node.js or in browsers that support `console.dir` and\n * `console.error` (such as FF and Chrome).\n * If multiple arguments are returned from the async function,\n * `console.dir` is called on each argument in order.\n *\n * @name dir\n * @static\n * @memberOf module:Utils\n * @method\n * @category Util\n * @param {AsyncFunction} function - The function you want to eventually apply\n * all arguments to.\n * @param {...*} arguments... - Any number of arguments to apply to the function.\n * @example\n *\n * // in a module\n * var hello = function(name, callback) {\n *     setTimeout(function() {\n *         callback(null, {hello: name});\n *     }, 1000);\n * };\n *\n * // in the node repl\n * node> async.dir(hello, 'world');\n * {hello: 'world'}\n */\nvar dir = consoleFunc('dir');\n\n/**\n * The post-check version of [`during`]{@link module:ControlFlow.during}. To reflect the difference in\n * the order of operations, the arguments `test` and `fn` are switched.\n *\n * Also a version of [`doWhilst`]{@link module:ControlFlow.doWhilst} with asynchronous `test` function.\n * @name doDuring\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.during]{@link module:ControlFlow.during}\n * @category Control Flow\n * @param {AsyncFunction} fn - An async function which is called each time\n * `test` passes. Invoked with (callback).\n * @param {AsyncFunction} test - asynchronous truth test to perform before each\n * execution of `fn`. Invoked with (...args, callback), where `...args` are the\n * non-error args from the previous callback of `fn`.\n * @param {Function} [callback] - A callback which is called after the test\n * function has failed and repeated execution of `fn` has stopped. `callback`\n * will be passed an error if one occurred, otherwise `null`.\n */\nfunction doDuring(fn, test, callback) {\n    callback = onlyOnce(callback || noop);\n    var _fn = wrapAsync(fn);\n    var _test = wrapAsync(test);\n\n    function next(err/*, ...args*/) {\n        if (err) return callback(err);\n        var args = slice(arguments, 1);\n        args.push(check);\n        _test.apply(this, args);\n    }\n\n    function check(err, truth) {\n        if (err) return callback(err);\n        if (!truth) return callback(null);\n        _fn(next);\n    }\n\n    check(null, true);\n\n}\n\n/**\n * The post-check version of [`whilst`]{@link module:ControlFlow.whilst}. To reflect the difference in\n * the order of operations, the arguments `test` and `iteratee` are switched.\n *\n * `doWhilst` is to `whilst` as `do while` is to `while` in plain JavaScript.\n *\n * @name doWhilst\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.whilst]{@link module:ControlFlow.whilst}\n * @category Control Flow\n * @param {AsyncFunction} iteratee - A function which is called each time `test`\n * passes. Invoked with (callback).\n * @param {Function} test - synchronous truth test to perform after each\n * execution of `iteratee`. Invoked with any non-error callback results of\n * `iteratee`.\n * @param {Function} [callback] - A callback which is called after the test\n * function has failed and repeated execution of `iteratee` has stopped.\n * `callback` will be passed an error and any arguments passed to the final\n * `iteratee`'s callback. Invoked with (err, [results]);\n */\nfunction doWhilst(iteratee, test, callback) {\n    callback = onlyOnce(callback || noop);\n    var _iteratee = wrapAsync(iteratee);\n    var next = function(err/*, ...args*/) {\n        if (err) return callback(err);\n        var args = slice(arguments, 1);\n        if (test.apply(this, args)) return _iteratee(next);\n        callback.apply(null, [null].concat(args));\n    };\n    _iteratee(next);\n}\n\n/**\n * Like ['doWhilst']{@link module:ControlFlow.doWhilst}, except the `test` is inverted. Note the\n * argument ordering differs from `until`.\n *\n * @name doUntil\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.doWhilst]{@link module:ControlFlow.doWhilst}\n * @category Control Flow\n * @param {AsyncFunction} iteratee - An async function which is called each time\n * `test` fails. Invoked with (callback).\n * @param {Function} test - synchronous truth test to perform after each\n * execution of `iteratee`. Invoked with any non-error callback results of\n * `iteratee`.\n * @param {Function} [callback] - A callback which is called after the test\n * function has passed and repeated execution of `iteratee` has stopped. `callback`\n * will be passed an error and any arguments passed to the final `iteratee`'s\n * callback. Invoked with (err, [results]);\n */\nfunction doUntil(iteratee, test, callback) {\n    doWhilst(iteratee, function() {\n        return !test.apply(this, arguments);\n    }, callback);\n}\n\n/**\n * Like [`whilst`]{@link module:ControlFlow.whilst}, except the `test` is an asynchronous function that\n * is passed a callback in the form of `function (err, truth)`. If error is\n * passed to `test` or `fn`, the main callback is immediately called with the\n * value of the error.\n *\n * @name during\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.whilst]{@link module:ControlFlow.whilst}\n * @category Control Flow\n * @param {AsyncFunction} test - asynchronous truth test to perform before each\n * execution of `fn`. Invoked with (callback).\n * @param {AsyncFunction} fn - An async function which is called each time\n * `test` passes. Invoked with (callback).\n * @param {Function} [callback] - A callback which is called after the test\n * function has failed and repeated execution of `fn` has stopped. `callback`\n * will be passed an error, if one occurred, otherwise `null`.\n * @example\n *\n * var count = 0;\n *\n * async.during(\n *     function (callback) {\n *         return callback(null, count < 5);\n *     },\n *     function (callback) {\n *         count++;\n *         setTimeout(callback, 1000);\n *     },\n *     function (err) {\n *         // 5 seconds have passed\n *     }\n * );\n */\nfunction during(test, fn, callback) {\n    callback = onlyOnce(callback || noop);\n    var _fn = wrapAsync(fn);\n    var _test = wrapAsync(test);\n\n    function next(err) {\n        if (err) return callback(err);\n        _test(check);\n    }\n\n    function check(err, truth) {\n        if (err) return callback(err);\n        if (!truth) return callback(null);\n        _fn(next);\n    }\n\n    _test(check);\n}\n\nfunction _withoutIndex(iteratee) {\n    return function (value, index, callback) {\n        return iteratee(value, callback);\n    };\n}\n\n/**\n * Applies the function `iteratee` to each item in `coll`, in parallel.\n * The `iteratee` is called with an item from the list, and a callback for when\n * it has finished. If the `iteratee` passes an error to its `callback`, the\n * main `callback` (for the `each` function) is immediately called with the\n * error.\n *\n * Note, that since this function applies `iteratee` to each item in parallel,\n * there is no guarantee that the iteratee functions will complete in order.\n *\n * @name each\n * @static\n * @memberOf module:Collections\n * @method\n * @alias forEach\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async function to apply to\n * each item in `coll`. Invoked with (item, callback).\n * The array index is not passed to the iteratee.\n * If you need the index, use `eachOf`.\n * @param {Function} [callback] - A callback which is called when all\n * `iteratee` functions have finished, or an error occurs. Invoked with (err).\n * @example\n *\n * // assuming openFiles is an array of file names and saveFile is a function\n * // to save the modified contents of that file:\n *\n * async.each(openFiles, saveFile, function(err){\n *   // if any of the saves produced an error, err would equal that error\n * });\n *\n * // assuming openFiles is an array of file names\n * async.each(openFiles, function(file, callback) {\n *\n *     // Perform operation on file here.\n *     console.log('Processing file ' + file);\n *\n *     if( file.length > 32 ) {\n *       console.log('This file name is too long');\n *       callback('File name too long');\n *     } else {\n *       // Do work to process file here\n *       console.log('File processed');\n *       callback();\n *     }\n * }, function(err) {\n *     // if any of the file processing produced an error, err would equal that error\n *     if( err ) {\n *       // One of the iterations produced an error.\n *       // All processing will now stop.\n *       console.log('A file failed to process');\n *     } else {\n *       console.log('All files have been processed successfully');\n *     }\n * });\n */\nfunction eachLimit(coll, iteratee, callback) {\n    eachOf(coll, _withoutIndex(wrapAsync(iteratee)), callback);\n}\n\n/**\n * The same as [`each`]{@link module:Collections.each} but runs a maximum of `limit` async operations at a time.\n *\n * @name eachLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.each]{@link module:Collections.each}\n * @alias forEachLimit\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - An async function to apply to each item in\n * `coll`.\n * The array index is not passed to the iteratee.\n * If you need the index, use `eachOfLimit`.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called when all\n * `iteratee` functions have finished, or an error occurs. Invoked with (err).\n */\nfunction eachLimit$1(coll, limit, iteratee, callback) {\n    _eachOfLimit(limit)(coll, _withoutIndex(wrapAsync(iteratee)), callback);\n}\n\n/**\n * The same as [`each`]{@link module:Collections.each} but runs only a single async operation at a time.\n *\n * @name eachSeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.each]{@link module:Collections.each}\n * @alias forEachSeries\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async function to apply to each\n * item in `coll`.\n * The array index is not passed to the iteratee.\n * If you need the index, use `eachOfSeries`.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called when all\n * `iteratee` functions have finished, or an error occurs. Invoked with (err).\n */\nvar eachSeries = doLimit(eachLimit$1, 1);\n\n/**\n * Wrap an async function and ensure it calls its callback on a later tick of\n * the event loop.  If the function already calls its callback on a next tick,\n * no extra deferral is added. This is useful for preventing stack overflows\n * (`RangeError: Maximum call stack size exceeded`) and generally keeping\n * [Zalgo](http://blog.izs.me/post/59142742143/designing-apis-for-asynchrony)\n * contained. ES2017 `async` functions are returned as-is -- they are immune\n * to Zalgo's corrupting influences, as they always resolve on a later tick.\n *\n * @name ensureAsync\n * @static\n * @memberOf module:Utils\n * @method\n * @category Util\n * @param {AsyncFunction} fn - an async function, one that expects a node-style\n * callback as its last argument.\n * @returns {AsyncFunction} Returns a wrapped function with the exact same call\n * signature as the function passed in.\n * @example\n *\n * function sometimesAsync(arg, callback) {\n *     if (cache[arg]) {\n *         return callback(null, cache[arg]); // this would be synchronous!!\n *     } else {\n *         doSomeIO(arg, callback); // this IO would be asynchronous\n *     }\n * }\n *\n * // this has a risk of stack overflows if many results are cached in a row\n * async.mapSeries(args, sometimesAsync, done);\n *\n * // this will defer sometimesAsync's callback if necessary,\n * // preventing stack overflows\n * async.mapSeries(args, async.ensureAsync(sometimesAsync), done);\n */\nfunction ensureAsync(fn) {\n    if (isAsync(fn)) return fn;\n    return initialParams(function (args, callback) {\n        var sync = true;\n        args.push(function () {\n            var innerArgs = arguments;\n            if (sync) {\n                setImmediate$1(function () {\n                    callback.apply(null, innerArgs);\n                });\n            } else {\n                callback.apply(null, innerArgs);\n            }\n        });\n        fn.apply(this, args);\n        sync = false;\n    });\n}\n\nfunction notId(v) {\n    return !v;\n}\n\n/**\n * Returns `true` if every element in `coll` satisfies an async test. If any\n * iteratee call returns `false`, the main `callback` is immediately called.\n *\n * @name every\n * @static\n * @memberOf module:Collections\n * @method\n * @alias all\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async truth test to apply to each item\n * in the collection in parallel.\n * The iteratee must complete with a boolean result value.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Result will be either `true` or `false`\n * depending on the values of the async tests. Invoked with (err, result).\n * @example\n *\n * async.every(['file1','file2','file3'], function(filePath, callback) {\n *     fs.access(filePath, function(err) {\n *         callback(null, !err)\n *     });\n * }, function(err, result) {\n *     // if result is true then every file exists\n * });\n */\nvar every = doParallel(_createTester(notId, notId));\n\n/**\n * The same as [`every`]{@link module:Collections.every} but runs a maximum of `limit` async operations at a time.\n *\n * @name everyLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.every]{@link module:Collections.every}\n * @alias allLimit\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - An async truth test to apply to each item\n * in the collection in parallel.\n * The iteratee must complete with a boolean result value.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Result will be either `true` or `false`\n * depending on the values of the async tests. Invoked with (err, result).\n */\nvar everyLimit = doParallelLimit(_createTester(notId, notId));\n\n/**\n * The same as [`every`]{@link module:Collections.every} but runs only a single async operation at a time.\n *\n * @name everySeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.every]{@link module:Collections.every}\n * @alias allSeries\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async truth test to apply to each item\n * in the collection in series.\n * The iteratee must complete with a boolean result value.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Result will be either `true` or `false`\n * depending on the values of the async tests. Invoked with (err, result).\n */\nvar everySeries = doLimit(everyLimit, 1);\n\n/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\nfunction filterArray(eachfn, arr, iteratee, callback) {\n    var truthValues = new Array(arr.length);\n    eachfn(arr, function (x, index, callback) {\n        iteratee(x, function (err, v) {\n            truthValues[index] = !!v;\n            callback(err);\n        });\n    }, function (err) {\n        if (err) return callback(err);\n        var results = [];\n        for (var i = 0; i < arr.length; i++) {\n            if (truthValues[i]) results.push(arr[i]);\n        }\n        callback(null, results);\n    });\n}\n\nfunction filterGeneric(eachfn, coll, iteratee, callback) {\n    var results = [];\n    eachfn(coll, function (x, index, callback) {\n        iteratee(x, function (err, v) {\n            if (err) {\n                callback(err);\n            } else {\n                if (v) {\n                    results.push({index: index, value: x});\n                }\n                callback();\n            }\n        });\n    }, function (err) {\n        if (err) {\n            callback(err);\n        } else {\n            callback(null, arrayMap(results.sort(function (a, b) {\n                return a.index - b.index;\n            }), baseProperty('value')));\n        }\n    });\n}\n\nfunction _filter(eachfn, coll, iteratee, callback) {\n    var filter = isArrayLike(coll) ? filterArray : filterGeneric;\n    filter(eachfn, coll, wrapAsync(iteratee), callback || noop);\n}\n\n/**\n * Returns a new array of all the values in `coll` which pass an async truth\n * test. This operation is performed in parallel, but the results array will be\n * in the same order as the original.\n *\n * @name filter\n * @static\n * @memberOf module:Collections\n * @method\n * @alias select\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {Function} iteratee - A truth test to apply to each item in `coll`.\n * The `iteratee` is passed a `callback(err, truthValue)`, which must be called\n * with a boolean argument once it has completed. Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Invoked with (err, results).\n * @example\n *\n * async.filter(['file1','file2','file3'], function(filePath, callback) {\n *     fs.access(filePath, function(err) {\n *         callback(null, !err)\n *     });\n * }, function(err, results) {\n *     // results now equals an array of the existing files\n * });\n */\nvar filter = doParallel(_filter);\n\n/**\n * The same as [`filter`]{@link module:Collections.filter} but runs a maximum of `limit` async operations at a\n * time.\n *\n * @name filterLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.filter]{@link module:Collections.filter}\n * @alias selectLimit\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {Function} iteratee - A truth test to apply to each item in `coll`.\n * The `iteratee` is passed a `callback(err, truthValue)`, which must be called\n * with a boolean argument once it has completed. Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Invoked with (err, results).\n */\nvar filterLimit = doParallelLimit(_filter);\n\n/**\n * The same as [`filter`]{@link module:Collections.filter} but runs only a single async operation at a time.\n *\n * @name filterSeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.filter]{@link module:Collections.filter}\n * @alias selectSeries\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {Function} iteratee - A truth test to apply to each item in `coll`.\n * The `iteratee` is passed a `callback(err, truthValue)`, which must be called\n * with a boolean argument once it has completed. Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Invoked with (err, results)\n */\nvar filterSeries = doLimit(filterLimit, 1);\n\n/**\n * Calls the asynchronous function `fn` with a callback parameter that allows it\n * to call itself again, in series, indefinitely.\n\n * If an error is passed to the callback then `errback` is called with the\n * error, and execution stops, otherwise it will never be called.\n *\n * @name forever\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {AsyncFunction} fn - an async function to call repeatedly.\n * Invoked with (next).\n * @param {Function} [errback] - when `fn` passes an error to it's callback,\n * this function will be called, and execution stops. Invoked with (err).\n * @example\n *\n * async.forever(\n *     function(next) {\n *         // next is suitable for passing to things that need a callback(err [, whatever]);\n *         // it will result in this function being called again.\n *     },\n *     function(err) {\n *         // if next is called with a value in its first parameter, it will appear\n *         // in here as 'err', and execution will stop.\n *     }\n * );\n */\nfunction forever(fn, errback) {\n    var done = onlyOnce(errback || noop);\n    var task = wrapAsync(ensureAsync(fn));\n\n    function next(err) {\n        if (err) return done(err);\n        task(next);\n    }\n    next();\n}\n\n/**\n * The same as [`groupBy`]{@link module:Collections.groupBy} but runs a maximum of `limit` async operations at a time.\n *\n * @name groupByLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.groupBy]{@link module:Collections.groupBy}\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - An async function to apply to each item in\n * `coll`.\n * The iteratee should complete with a `key` to group the value under.\n * Invoked with (value, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. Result is an `Object` whoses\n * properties are arrays of values which returned the corresponding key.\n */\nvar groupByLimit = function(coll, limit, iteratee, callback) {\n    callback = callback || noop;\n    var _iteratee = wrapAsync(iteratee);\n    mapLimit(coll, limit, function(val, callback) {\n        _iteratee(val, function(err, key) {\n            if (err) return callback(err);\n            return callback(null, {key: key, val: val});\n        });\n    }, function(err, mapResults) {\n        var result = {};\n        // from MDN, handle object having an `hasOwnProperty` prop\n        var hasOwnProperty = Object.prototype.hasOwnProperty;\n\n        for (var i = 0; i < mapResults.length; i++) {\n            if (mapResults[i]) {\n                var key = mapResults[i].key;\n                var val = mapResults[i].val;\n\n                if (hasOwnProperty.call(result, key)) {\n                    result[key].push(val);\n                } else {\n                    result[key] = [val];\n                }\n            }\n        }\n\n        return callback(err, result);\n    });\n};\n\n/**\n * Returns a new object, where each value corresponds to an array of items, from\n * `coll`, that returned the corresponding key. That is, the keys of the object\n * correspond to the values passed to the `iteratee` callback.\n *\n * Note: Since this function applies the `iteratee` to each item in parallel,\n * there is no guarantee that the `iteratee` functions will complete in order.\n * However, the values for each key in the `result` will be in the same order as\n * the original `coll`. For Objects, the values will roughly be in the order of\n * the original Objects' keys (but this can vary across JavaScript engines).\n *\n * @name groupBy\n * @static\n * @memberOf module:Collections\n * @method\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async function to apply to each item in\n * `coll`.\n * The iteratee should complete with a `key` to group the value under.\n * Invoked with (value, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. Result is an `Object` whoses\n * properties are arrays of values which returned the corresponding key.\n * @example\n *\n * async.groupBy(['userId1', 'userId2', 'userId3'], function(userId, callback) {\n *     db.findById(userId, function(err, user) {\n *         if (err) return callback(err);\n *         return callback(null, user.age);\n *     });\n * }, function(err, result) {\n *     // result is object containing the userIds grouped by age\n *     // e.g. { 30: ['userId1', 'userId3'], 42: ['userId2']};\n * });\n */\nvar groupBy = doLimit(groupByLimit, Infinity);\n\n/**\n * The same as [`groupBy`]{@link module:Collections.groupBy} but runs only a single async operation at a time.\n *\n * @name groupBySeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.groupBy]{@link module:Collections.groupBy}\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - An async function to apply to each item in\n * `coll`.\n * The iteratee should complete with a `key` to group the value under.\n * Invoked with (value, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. Result is an `Object` whoses\n * properties are arrays of values which returned the corresponding key.\n */\nvar groupBySeries = doLimit(groupByLimit, 1);\n\n/**\n * Logs the result of an `async` function to the `console`. Only works in\n * Node.js or in browsers that support `console.log` and `console.error` (such\n * as FF and Chrome). If multiple arguments are returned from the async\n * function, `console.log` is called on each argument in order.\n *\n * @name log\n * @static\n * @memberOf module:Utils\n * @method\n * @category Util\n * @param {AsyncFunction} function - The function you want to eventually apply\n * all arguments to.\n * @param {...*} arguments... - Any number of arguments to apply to the function.\n * @example\n *\n * // in a module\n * var hello = function(name, callback) {\n *     setTimeout(function() {\n *         callback(null, 'hello ' + name);\n *     }, 1000);\n * };\n *\n * // in the node repl\n * node> async.log(hello, 'world');\n * 'hello world'\n */\nvar log = consoleFunc('log');\n\n/**\n * The same as [`mapValues`]{@link module:Collections.mapValues} but runs a maximum of `limit` async operations at a\n * time.\n *\n * @name mapValuesLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.mapValues]{@link module:Collections.mapValues}\n * @category Collection\n * @param {Object} obj - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - A function to apply to each value and key\n * in `coll`.\n * The iteratee should complete with the transformed value as its result.\n * Invoked with (value, key, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. `result` is a new object consisting\n * of each key from `obj`, with each transformed value on the right-hand side.\n * Invoked with (err, result).\n */\nfunction mapValuesLimit(obj, limit, iteratee, callback) {\n    callback = once(callback || noop);\n    var newObj = {};\n    var _iteratee = wrapAsync(iteratee);\n    eachOfLimit(obj, limit, function(val, key, next) {\n        _iteratee(val, key, function (err, result) {\n            if (err) return next(err);\n            newObj[key] = result;\n            next();\n        });\n    }, function (err) {\n        callback(err, newObj);\n    });\n}\n\n/**\n * A relative of [`map`]{@link module:Collections.map}, designed for use with objects.\n *\n * Produces a new Object by mapping each value of `obj` through the `iteratee`\n * function. The `iteratee` is called each `value` and `key` from `obj` and a\n * callback for when it has finished processing. Each of these callbacks takes\n * two arguments: an `error`, and the transformed item from `obj`. If `iteratee`\n * passes an error to its callback, the main `callback` (for the `mapValues`\n * function) is immediately called with the error.\n *\n * Note, the order of the keys in the result is not guaranteed.  The keys will\n * be roughly in the order they complete, (but this is very engine-specific)\n *\n * @name mapValues\n * @static\n * @memberOf module:Collections\n * @method\n * @category Collection\n * @param {Object} obj - A collection to iterate over.\n * @param {AsyncFunction} iteratee - A function to apply to each value and key\n * in `coll`.\n * The iteratee should complete with the transformed value as its result.\n * Invoked with (value, key, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. `result` is a new object consisting\n * of each key from `obj`, with each transformed value on the right-hand side.\n * Invoked with (err, result).\n * @example\n *\n * async.mapValues({\n *     f1: 'file1',\n *     f2: 'file2',\n *     f3: 'file3'\n * }, function (file, key, callback) {\n *   fs.stat(file, callback);\n * }, function(err, result) {\n *     // result is now a map of stats for each file, e.g.\n *     // {\n *     //     f1: [stats for file1],\n *     //     f2: [stats for file2],\n *     //     f3: [stats for file3]\n *     // }\n * });\n */\n\nvar mapValues = doLimit(mapValuesLimit, Infinity);\n\n/**\n * The same as [`mapValues`]{@link module:Collections.mapValues} but runs only a single async operation at a time.\n *\n * @name mapValuesSeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.mapValues]{@link module:Collections.mapValues}\n * @category Collection\n * @param {Object} obj - A collection to iterate over.\n * @param {AsyncFunction} iteratee - A function to apply to each value and key\n * in `coll`.\n * The iteratee should complete with the transformed value as its result.\n * Invoked with (value, key, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. `result` is a new object consisting\n * of each key from `obj`, with each transformed value on the right-hand side.\n * Invoked with (err, result).\n */\nvar mapValuesSeries = doLimit(mapValuesLimit, 1);\n\nfunction has(obj, key) {\n    return key in obj;\n}\n\n/**\n * Caches the results of an async function. When creating a hash to store\n * function results against, the callback is omitted from the hash and an\n * optional hash function can be used.\n *\n * If no hash function is specified, the first argument is used as a hash key,\n * which may work reasonably if it is a string or a data type that converts to a\n * distinct string. Note that objects and arrays will not behave reasonably.\n * Neither will cases where the other arguments are significant. In such cases,\n * specify your own hash function.\n *\n * The cache of results is exposed as the `memo` property of the function\n * returned by `memoize`.\n *\n * @name memoize\n * @static\n * @memberOf module:Utils\n * @method\n * @category Util\n * @param {AsyncFunction} fn - The async function to proxy and cache results from.\n * @param {Function} hasher - An optional function for generating a custom hash\n * for storing results. It has all the arguments applied to it apart from the\n * callback, and must be synchronous.\n * @returns {AsyncFunction} a memoized version of `fn`\n * @example\n *\n * var slow_fn = function(name, callback) {\n *     // do something\n *     callback(null, result);\n * };\n * var fn = async.memoize(slow_fn);\n *\n * // fn can now be used as if it were slow_fn\n * fn('some name', function() {\n *     // callback\n * });\n */\nfunction memoize(fn, hasher) {\n    var memo = Object.create(null);\n    var queues = Object.create(null);\n    hasher = hasher || identity;\n    var _fn = wrapAsync(fn);\n    var memoized = initialParams(function memoized(args, callback) {\n        var key = hasher.apply(null, args);\n        if (has(memo, key)) {\n            setImmediate$1(function() {\n                callback.apply(null, memo[key]);\n            });\n        } else if (has(queues, key)) {\n            queues[key].push(callback);\n        } else {\n            queues[key] = [callback];\n            _fn.apply(null, args.concat(function(/*args*/) {\n                var args = slice(arguments);\n                memo[key] = args;\n                var q = queues[key];\n                delete queues[key];\n                for (var i = 0, l = q.length; i < l; i++) {\n                    q[i].apply(null, args);\n                }\n            }));\n        }\n    });\n    memoized.memo = memo;\n    memoized.unmemoized = fn;\n    return memoized;\n}\n\n/**\n * Calls `callback` on a later loop around the event loop. In Node.js this just\n * calls `process.nextTick`.  In the browser it will use `setImmediate` if\n * available, otherwise `setTimeout(callback, 0)`, which means other higher\n * priority events may precede the execution of `callback`.\n *\n * This is used internally for browser-compatibility purposes.\n *\n * @name nextTick\n * @static\n * @memberOf module:Utils\n * @method\n * @see [async.setImmediate]{@link module:Utils.setImmediate}\n * @category Util\n * @param {Function} callback - The function to call on a later loop around\n * the event loop. Invoked with (args...).\n * @param {...*} args... - any number of additional arguments to pass to the\n * callback on the next tick.\n * @example\n *\n * var call_order = [];\n * async.nextTick(function() {\n *     call_order.push('two');\n *     // call_order now equals ['one','two']\n * });\n * call_order.push('one');\n *\n * async.setImmediate(function (a, b, c) {\n *     // a, b, and c equal 1, 2, and 3\n * }, 1, 2, 3);\n */\nvar _defer$1;\n\nif (hasNextTick) {\n    _defer$1 = process.nextTick;\n} else if (hasSetImmediate) {\n    _defer$1 = setImmediate;\n} else {\n    _defer$1 = fallback;\n}\n\nvar nextTick = wrap(_defer$1);\n\nfunction _parallel(eachfn, tasks, callback) {\n    callback = callback || noop;\n    var results = isArrayLike(tasks) ? [] : {};\n\n    eachfn(tasks, function (task, key, callback) {\n        wrapAsync(task)(function (err, result) {\n            if (arguments.length > 2) {\n                result = slice(arguments, 1);\n            }\n            results[key] = result;\n            callback(err);\n        });\n    }, function (err) {\n        callback(err, results);\n    });\n}\n\n/**\n * Run the `tasks` collection of functions in parallel, without waiting until\n * the previous function has completed. If any of the functions pass an error to\n * its callback, the main `callback` is immediately called with the value of the\n * error. Once the `tasks` have completed, the results are passed to the final\n * `callback` as an array.\n *\n * **Note:** `parallel` is about kicking-off I/O tasks in parallel, not about\n * parallel execution of code.  If your tasks do not use any timers or perform\n * any I/O, they will actually be executed in series.  Any synchronous setup\n * sections for each task will happen one after the other.  JavaScript remains\n * single-threaded.\n *\n * **Hint:** Use [`reflect`]{@link module:Utils.reflect} to continue the\n * execution of other tasks when a task fails.\n *\n * It is also possible to use an object instead of an array. Each property will\n * be run as a function and the results will be passed to the final `callback`\n * as an object instead of an array. This can be a more readable way of handling\n * results from {@link async.parallel}.\n *\n * @name parallel\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {Array|Iterable|Object} tasks - A collection of\n * [async functions]{@link AsyncFunction} to run.\n * Each async function can complete with any number of optional `result` values.\n * @param {Function} [callback] - An optional callback to run once all the\n * functions have completed successfully. This function gets a results array\n * (or object) containing all the result arguments passed to the task callbacks.\n * Invoked with (err, results).\n *\n * @example\n * async.parallel([\n *     function(callback) {\n *         setTimeout(function() {\n *             callback(null, 'one');\n *         }, 200);\n *     },\n *     function(callback) {\n *         setTimeout(function() {\n *             callback(null, 'two');\n *         }, 100);\n *     }\n * ],\n * // optional callback\n * function(err, results) {\n *     // the results array will equal ['one','two'] even though\n *     // the second function had a shorter timeout.\n * });\n *\n * // an example using an object instead of an array\n * async.parallel({\n *     one: function(callback) {\n *         setTimeout(function() {\n *             callback(null, 1);\n *         }, 200);\n *     },\n *     two: function(callback) {\n *         setTimeout(function() {\n *             callback(null, 2);\n *         }, 100);\n *     }\n * }, function(err, results) {\n *     // results is now equals to: {one: 1, two: 2}\n * });\n */\nfunction parallelLimit(tasks, callback) {\n    _parallel(eachOf, tasks, callback);\n}\n\n/**\n * The same as [`parallel`]{@link module:ControlFlow.parallel} but runs a maximum of `limit` async operations at a\n * time.\n *\n * @name parallelLimit\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.parallel]{@link module:ControlFlow.parallel}\n * @category Control Flow\n * @param {Array|Iterable|Object} tasks - A collection of\n * [async functions]{@link AsyncFunction} to run.\n * Each async function can complete with any number of optional `result` values.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {Function} [callback] - An optional callback to run once all the\n * functions have completed successfully. This function gets a results array\n * (or object) containing all the result arguments passed to the task callbacks.\n * Invoked with (err, results).\n */\nfunction parallelLimit$1(tasks, limit, callback) {\n    _parallel(_eachOfLimit(limit), tasks, callback);\n}\n\n/**\n * A queue of tasks for the worker function to complete.\n * @typedef {Object} QueueObject\n * @memberOf module:ControlFlow\n * @property {Function} length - a function returning the number of items\n * waiting to be processed. Invoke with `queue.length()`.\n * @property {boolean} started - a boolean indicating whether or not any\n * items have been pushed and processed by the queue.\n * @property {Function} running - a function returning the number of items\n * currently being processed. Invoke with `queue.running()`.\n * @property {Function} workersList - a function returning the array of items\n * currently being processed. Invoke with `queue.workersList()`.\n * @property {Function} idle - a function returning false if there are items\n * waiting or being processed, or true if not. Invoke with `queue.idle()`.\n * @property {number} concurrency - an integer for determining how many `worker`\n * functions should be run in parallel. This property can be changed after a\n * `queue` is created to alter the concurrency on-the-fly.\n * @property {Function} push - add a new task to the `queue`. Calls `callback`\n * once the `worker` has finished processing the task. Instead of a single task,\n * a `tasks` array can be submitted. The respective callback is used for every\n * task in the list. Invoke with `queue.push(task, [callback])`,\n * @property {Function} unshift - add a new task to the front of the `queue`.\n * Invoke with `queue.unshift(task, [callback])`.\n * @property {Function} remove - remove items from the queue that match a test\n * function.  The test function will be passed an object with a `data` property,\n * and a `priority` property, if this is a\n * [priorityQueue]{@link module:ControlFlow.priorityQueue} object.\n * Invoked with `queue.remove(testFn)`, where `testFn` is of the form\n * `function ({data, priority}) {}` and returns a Boolean.\n * @property {Function} saturated - a callback that is called when the number of\n * running workers hits the `concurrency` limit, and further tasks will be\n * queued.\n * @property {Function} unsaturated - a callback that is called when the number\n * of running workers is less than the `concurrency` & `buffer` limits, and\n * further tasks will not be queued.\n * @property {number} buffer - A minimum threshold buffer in order to say that\n * the `queue` is `unsaturated`.\n * @property {Function} empty - a callback that is called when the last item\n * from the `queue` is given to a `worker`.\n * @property {Function} drain - a callback that is called when the last item\n * from the `queue` has returned from the `worker`.\n * @property {Function} error - a callback that is called when a task errors.\n * Has the signature `function(error, task)`.\n * @property {boolean} paused - a boolean for determining whether the queue is\n * in a paused state.\n * @property {Function} pause - a function that pauses the processing of tasks\n * until `resume()` is called. Invoke with `queue.pause()`.\n * @property {Function} resume - a function that resumes the processing of\n * queued tasks when the queue is paused. Invoke with `queue.resume()`.\n * @property {Function} kill - a function that removes the `drain` callback and\n * empties remaining tasks from the queue forcing it to go idle. No more tasks\n * should be pushed to the queue after calling this function. Invoke with `queue.kill()`.\n */\n\n/**\n * Creates a `queue` object with the specified `concurrency`. Tasks added to the\n * `queue` are processed in parallel (up to the `concurrency` limit). If all\n * `worker`s are in progress, the task is queued until one becomes available.\n * Once a `worker` completes a `task`, that `task`'s callback is called.\n *\n * @name queue\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {AsyncFunction} worker - An async function for processing a queued task.\n * If you want to handle errors from an individual task, pass a callback to\n * `q.push()`. Invoked with (task, callback).\n * @param {number} [concurrency=1] - An `integer` for determining how many\n * `worker` functions should be run in parallel.  If omitted, the concurrency\n * defaults to `1`.  If the concurrency is `0`, an error is thrown.\n * @returns {module:ControlFlow.QueueObject} A queue object to manage the tasks. Callbacks can\n * attached as certain properties to listen for specific events during the\n * lifecycle of the queue.\n * @example\n *\n * // create a queue object with concurrency 2\n * var q = async.queue(function(task, callback) {\n *     console.log('hello ' + task.name);\n *     callback();\n * }, 2);\n *\n * // assign a callback\n * q.drain = function() {\n *     console.log('all items have been processed');\n * };\n *\n * // add some items to the queue\n * q.push({name: 'foo'}, function(err) {\n *     console.log('finished processing foo');\n * });\n * q.push({name: 'bar'}, function (err) {\n *     console.log('finished processing bar');\n * });\n *\n * // add some items to the queue (batch-wise)\n * q.push([{name: 'baz'},{name: 'bay'},{name: 'bax'}], function(err) {\n *     console.log('finished processing item');\n * });\n *\n * // add some items to the front of the queue\n * q.unshift({name: 'bar'}, function (err) {\n *     console.log('finished processing bar');\n * });\n */\nvar queue$1 = function (worker, concurrency) {\n    var _worker = wrapAsync(worker);\n    return queue(function (items, cb) {\n        _worker(items[0], cb);\n    }, concurrency, 1);\n};\n\n/**\n * The same as [async.queue]{@link module:ControlFlow.queue} only tasks are assigned a priority and\n * completed in ascending priority order.\n *\n * @name priorityQueue\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.queue]{@link module:ControlFlow.queue}\n * @category Control Flow\n * @param {AsyncFunction} worker - An async function for processing a queued task.\n * If you want to handle errors from an individual task, pass a callback to\n * `q.push()`.\n * Invoked with (task, callback).\n * @param {number} concurrency - An `integer` for determining how many `worker`\n * functions should be run in parallel.  If omitted, the concurrency defaults to\n * `1`.  If the concurrency is `0`, an error is thrown.\n * @returns {module:ControlFlow.QueueObject} A priorityQueue object to manage the tasks. There are two\n * differences between `queue` and `priorityQueue` objects:\n * * `push(task, priority, [callback])` - `priority` should be a number. If an\n *   array of `tasks` is given, all tasks will be assigned the same priority.\n * * The `unshift` method was removed.\n */\nvar priorityQueue = function(worker, concurrency) {\n    // Start with a normal queue\n    var q = queue$1(worker, concurrency);\n\n    // Override push to accept second parameter representing priority\n    q.push = function(data, priority, callback) {\n        if (callback == null) callback = noop;\n        if (typeof callback !== 'function') {\n            throw new Error('task callback must be a function');\n        }\n        q.started = true;\n        if (!isArray(data)) {\n            data = [data];\n        }\n        if (data.length === 0) {\n            // call drain immediately if there are no tasks\n            return setImmediate$1(function() {\n                q.drain();\n            });\n        }\n\n        priority = priority || 0;\n        var nextNode = q._tasks.head;\n        while (nextNode && priority >= nextNode.priority) {\n            nextNode = nextNode.next;\n        }\n\n        for (var i = 0, l = data.length; i < l; i++) {\n            var item = {\n                data: data[i],\n                priority: priority,\n                callback: callback\n            };\n\n            if (nextNode) {\n                q._tasks.insertBefore(nextNode, item);\n            } else {\n                q._tasks.push(item);\n            }\n        }\n        setImmediate$1(q.process);\n    };\n\n    // Remove unshift function\n    delete q.unshift;\n\n    return q;\n};\n\n/**\n * Runs the `tasks` array of functions in parallel, without waiting until the\n * previous function has completed. Once any of the `tasks` complete or pass an\n * error to its callback, the main `callback` is immediately called. It's\n * equivalent to `Promise.race()`.\n *\n * @name race\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {Array} tasks - An array containing [async functions]{@link AsyncFunction}\n * to run. Each function can complete with an optional `result` value.\n * @param {Function} callback - A callback to run once any of the functions have\n * completed. This function gets an error or result from the first function that\n * completed. Invoked with (err, result).\n * @returns undefined\n * @example\n *\n * async.race([\n *     function(callback) {\n *         setTimeout(function() {\n *             callback(null, 'one');\n *         }, 200);\n *     },\n *     function(callback) {\n *         setTimeout(function() {\n *             callback(null, 'two');\n *         }, 100);\n *     }\n * ],\n * // main callback\n * function(err, result) {\n *     // the result will be equal to 'two' as it finishes earlier\n * });\n */\nfunction race(tasks, callback) {\n    callback = once(callback || noop);\n    if (!isArray(tasks)) return callback(new TypeError('First argument to race must be an array of functions'));\n    if (!tasks.length) return callback();\n    for (var i = 0, l = tasks.length; i < l; i++) {\n        wrapAsync(tasks[i])(callback);\n    }\n}\n\n/**\n * Same as [`reduce`]{@link module:Collections.reduce}, only operates on `array` in reverse order.\n *\n * @name reduceRight\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.reduce]{@link module:Collections.reduce}\n * @alias foldr\n * @category Collection\n * @param {Array} array - A collection to iterate over.\n * @param {*} memo - The initial state of the reduction.\n * @param {AsyncFunction} iteratee - A function applied to each item in the\n * array to produce the next step in the reduction.\n * The `iteratee` should complete with the next state of the reduction.\n * If the iteratee complete with an error, the reduction is stopped and the\n * main `callback` is immediately called with the error.\n * Invoked with (memo, item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Result is the reduced value. Invoked with\n * (err, result).\n */\nfunction reduceRight (array, memo, iteratee, callback) {\n    var reversed = slice(array).reverse();\n    reduce(reversed, memo, iteratee, callback);\n}\n\n/**\n * Wraps the async function in another function that always completes with a\n * result object, even when it errors.\n *\n * The result object has either the property `error` or `value`.\n *\n * @name reflect\n * @static\n * @memberOf module:Utils\n * @method\n * @category Util\n * @param {AsyncFunction} fn - The async function you want to wrap\n * @returns {Function} - A function that always passes null to it's callback as\n * the error. The second argument to the callback will be an `object` with\n * either an `error` or a `value` property.\n * @example\n *\n * async.parallel([\n *     async.reflect(function(callback) {\n *         // do some stuff ...\n *         callback(null, 'one');\n *     }),\n *     async.reflect(function(callback) {\n *         // do some more stuff but error ...\n *         callback('bad stuff happened');\n *     }),\n *     async.reflect(function(callback) {\n *         // do some more stuff ...\n *         callback(null, 'two');\n *     })\n * ],\n * // optional callback\n * function(err, results) {\n *     // values\n *     // results[0].value = 'one'\n *     // results[1].error = 'bad stuff happened'\n *     // results[2].value = 'two'\n * });\n */\nfunction reflect(fn) {\n    var _fn = wrapAsync(fn);\n    return initialParams(function reflectOn(args, reflectCallback) {\n        args.push(function callback(error, cbArg) {\n            if (error) {\n                reflectCallback(null, { error: error });\n            } else {\n                var value;\n                if (arguments.length <= 2) {\n                    value = cbArg;\n                } else {\n                    value = slice(arguments, 1);\n                }\n                reflectCallback(null, { value: value });\n            }\n        });\n\n        return _fn.apply(this, args);\n    });\n}\n\n/**\n * A helper function that wraps an array or an object of functions with `reflect`.\n *\n * @name reflectAll\n * @static\n * @memberOf module:Utils\n * @method\n * @see [async.reflect]{@link module:Utils.reflect}\n * @category Util\n * @param {Array|Object|Iterable} tasks - The collection of\n * [async functions]{@link AsyncFunction} to wrap in `async.reflect`.\n * @returns {Array} Returns an array of async functions, each wrapped in\n * `async.reflect`\n * @example\n *\n * let tasks = [\n *     function(callback) {\n *         setTimeout(function() {\n *             callback(null, 'one');\n *         }, 200);\n *     },\n *     function(callback) {\n *         // do some more stuff but error ...\n *         callback(new Error('bad stuff happened'));\n *     },\n *     function(callback) {\n *         setTimeout(function() {\n *             callback(null, 'two');\n *         }, 100);\n *     }\n * ];\n *\n * async.parallel(async.reflectAll(tasks),\n * // optional callback\n * function(err, results) {\n *     // values\n *     // results[0].value = 'one'\n *     // results[1].error = Error('bad stuff happened')\n *     // results[2].value = 'two'\n * });\n *\n * // an example using an object instead of an array\n * let tasks = {\n *     one: function(callback) {\n *         setTimeout(function() {\n *             callback(null, 'one');\n *         }, 200);\n *     },\n *     two: function(callback) {\n *         callback('two');\n *     },\n *     three: function(callback) {\n *         setTimeout(function() {\n *             callback(null, 'three');\n *         }, 100);\n *     }\n * };\n *\n * async.parallel(async.reflectAll(tasks),\n * // optional callback\n * function(err, results) {\n *     // values\n *     // results.one.value = 'one'\n *     // results.two.error = 'two'\n *     // results.three.value = 'three'\n * });\n */\nfunction reflectAll(tasks) {\n    var results;\n    if (isArray(tasks)) {\n        results = arrayMap(tasks, reflect);\n    } else {\n        results = {};\n        baseForOwn(tasks, function(task, key) {\n            results[key] = reflect.call(this, task);\n        });\n    }\n    return results;\n}\n\nfunction reject$1(eachfn, arr, iteratee, callback) {\n    _filter(eachfn, arr, function(value, cb) {\n        iteratee(value, function(err, v) {\n            cb(err, !v);\n        });\n    }, callback);\n}\n\n/**\n * The opposite of [`filter`]{@link module:Collections.filter}. Removes values that pass an `async` truth test.\n *\n * @name reject\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.filter]{@link module:Collections.filter}\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {Function} iteratee - An async truth test to apply to each item in\n * `coll`.\n * The should complete with a boolean value as its `result`.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Invoked with (err, results).\n * @example\n *\n * async.reject(['file1','file2','file3'], function(filePath, callback) {\n *     fs.access(filePath, function(err) {\n *         callback(null, !err)\n *     });\n * }, function(err, results) {\n *     // results now equals an array of missing files\n *     createFiles(results);\n * });\n */\nvar reject = doParallel(reject$1);\n\n/**\n * The same as [`reject`]{@link module:Collections.reject} but runs a maximum of `limit` async operations at a\n * time.\n *\n * @name rejectLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.reject]{@link module:Collections.reject}\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {Function} iteratee - An async truth test to apply to each item in\n * `coll`.\n * The should complete with a boolean value as its `result`.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Invoked with (err, results).\n */\nvar rejectLimit = doParallelLimit(reject$1);\n\n/**\n * The same as [`reject`]{@link module:Collections.reject} but runs only a single async operation at a time.\n *\n * @name rejectSeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.reject]{@link module:Collections.reject}\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {Function} iteratee - An async truth test to apply to each item in\n * `coll`.\n * The should complete with a boolean value as its `result`.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Invoked with (err, results).\n */\nvar rejectSeries = doLimit(rejectLimit, 1);\n\n/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant$1(value) {\n  return function() {\n    return value;\n  };\n}\n\n/**\n * Attempts to get a successful response from `task` no more than `times` times\n * before returning an error. If the task is successful, the `callback` will be\n * passed the result of the successful task. If all attempts fail, the callback\n * will be passed the error and result (if any) of the final attempt.\n *\n * @name retry\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @see [async.retryable]{@link module:ControlFlow.retryable}\n * @param {Object|number} [opts = {times: 5, interval: 0}| 5] - Can be either an\n * object with `times` and `interval` or a number.\n * * `times` - The number of attempts to make before giving up.  The default\n *   is `5`.\n * * `interval` - The time to wait between retries, in milliseconds.  The\n *   default is `0`. The interval may also be specified as a function of the\n *   retry count (see example).\n * * `errorFilter` - An optional synchronous function that is invoked on\n *   erroneous result. If it returns `true` the retry attempts will continue;\n *   if the function returns `false` the retry flow is aborted with the current\n *   attempt's error and result being returned to the final callback.\n *   Invoked with (err).\n * * If `opts` is a number, the number specifies the number of times to retry,\n *   with the default interval of `0`.\n * @param {AsyncFunction} task - An async function to retry.\n * Invoked with (callback).\n * @param {Function} [callback] - An optional callback which is called when the\n * task has succeeded, or after the final failed attempt. It receives the `err`\n * and `result` arguments of the last attempt at completing the `task`. Invoked\n * with (err, results).\n *\n * @example\n *\n * // The `retry` function can be used as a stand-alone control flow by passing\n * // a callback, as shown below:\n *\n * // try calling apiMethod 3 times\n * async.retry(3, apiMethod, function(err, result) {\n *     // do something with the result\n * });\n *\n * // try calling apiMethod 3 times, waiting 200 ms between each retry\n * async.retry({times: 3, interval: 200}, apiMethod, function(err, result) {\n *     // do something with the result\n * });\n *\n * // try calling apiMethod 10 times with exponential backoff\n * // (i.e. intervals of 100, 200, 400, 800, 1600, ... milliseconds)\n * async.retry({\n *   times: 10,\n *   interval: function(retryCount) {\n *     return 50 * Math.pow(2, retryCount);\n *   }\n * }, apiMethod, function(err, result) {\n *     // do something with the result\n * });\n *\n * // try calling apiMethod the default 5 times no delay between each retry\n * async.retry(apiMethod, function(err, result) {\n *     // do something with the result\n * });\n *\n * // try calling apiMethod only when error condition satisfies, all other\n * // errors will abort the retry control flow and return to final callback\n * async.retry({\n *   errorFilter: function(err) {\n *     return err.message === 'Temporary error'; // only retry on a specific error\n *   }\n * }, apiMethod, function(err, result) {\n *     // do something with the result\n * });\n *\n * // to retry individual methods that are not as reliable within other\n * // control flow functions, use the `retryable` wrapper:\n * async.auto({\n *     users: api.getUsers.bind(api),\n *     payments: async.retryable(3, api.getPayments.bind(api))\n * }, function(err, results) {\n *     // do something with the results\n * });\n *\n */\nfunction retry(opts, task, callback) {\n    var DEFAULT_TIMES = 5;\n    var DEFAULT_INTERVAL = 0;\n\n    var options = {\n        times: DEFAULT_TIMES,\n        intervalFunc: constant$1(DEFAULT_INTERVAL)\n    };\n\n    function parseTimes(acc, t) {\n        if (typeof t === 'object') {\n            acc.times = +t.times || DEFAULT_TIMES;\n\n            acc.intervalFunc = typeof t.interval === 'function' ?\n                t.interval :\n                constant$1(+t.interval || DEFAULT_INTERVAL);\n\n            acc.errorFilter = t.errorFilter;\n        } else if (typeof t === 'number' || typeof t === 'string') {\n            acc.times = +t || DEFAULT_TIMES;\n        } else {\n            throw new Error(\"Invalid arguments for async.retry\");\n        }\n    }\n\n    if (arguments.length < 3 && typeof opts === 'function') {\n        callback = task || noop;\n        task = opts;\n    } else {\n        parseTimes(options, opts);\n        callback = callback || noop;\n    }\n\n    if (typeof task !== 'function') {\n        throw new Error(\"Invalid arguments for async.retry\");\n    }\n\n    var _task = wrapAsync(task);\n\n    var attempt = 1;\n    function retryAttempt() {\n        _task(function(err) {\n            if (err && attempt++ < options.times &&\n                (typeof options.errorFilter != 'function' ||\n                    options.errorFilter(err))) {\n                setTimeout(retryAttempt, options.intervalFunc(attempt));\n            } else {\n                callback.apply(null, arguments);\n            }\n        });\n    }\n\n    retryAttempt();\n}\n\n/**\n * A close relative of [`retry`]{@link module:ControlFlow.retry}.  This method\n * wraps a task and makes it retryable, rather than immediately calling it\n * with retries.\n *\n * @name retryable\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.retry]{@link module:ControlFlow.retry}\n * @category Control Flow\n * @param {Object|number} [opts = {times: 5, interval: 0}| 5] - optional\n * options, exactly the same as from `retry`\n * @param {AsyncFunction} task - the asynchronous function to wrap.\n * This function will be passed any arguments passed to the returned wrapper.\n * Invoked with (...args, callback).\n * @returns {AsyncFunction} The wrapped function, which when invoked, will\n * retry on an error, based on the parameters specified in `opts`.\n * This function will accept the same parameters as `task`.\n * @example\n *\n * async.auto({\n *     dep1: async.retryable(3, getFromFlakyService),\n *     process: [\"dep1\", async.retryable(3, function (results, cb) {\n *         maybeProcessData(results.dep1, cb);\n *     })]\n * }, callback);\n */\nvar retryable = function (opts, task) {\n    if (!task) {\n        task = opts;\n        opts = null;\n    }\n    var _task = wrapAsync(task);\n    return initialParams(function (args, callback) {\n        function taskFn(cb) {\n            _task.apply(null, args.concat(cb));\n        }\n\n        if (opts) retry(opts, taskFn, callback);\n        else retry(taskFn, callback);\n\n    });\n};\n\n/**\n * Run the functions in the `tasks` collection in series, each one running once\n * the previous function has completed. If any functions in the series pass an\n * error to its callback, no more functions are run, and `callback` is\n * immediately called with the value of the error. Otherwise, `callback`\n * receives an array of results when `tasks` have completed.\n *\n * It is also possible to use an object instead of an array. Each property will\n * be run as a function, and the results will be passed to the final `callback`\n * as an object instead of an array. This can be a more readable way of handling\n *  results from {@link async.series}.\n *\n * **Note** that while many implementations preserve the order of object\n * properties, the [ECMAScript Language Specification](http://www.ecma-international.org/ecma-262/5.1/#sec-8.6)\n * explicitly states that\n *\n * > The mechanics and order of enumerating the properties is not specified.\n *\n * So if you rely on the order in which your series of functions are executed,\n * and want this to work on all platforms, consider using an array.\n *\n * @name series\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {Array|Iterable|Object} tasks - A collection containing\n * [async functions]{@link AsyncFunction} to run in series.\n * Each function can complete with any number of optional `result` values.\n * @param {Function} [callback] - An optional callback to run once all the\n * functions have completed. This function gets a results array (or object)\n * containing all the result arguments passed to the `task` callbacks. Invoked\n * with (err, result).\n * @example\n * async.series([\n *     function(callback) {\n *         // do some stuff ...\n *         callback(null, 'one');\n *     },\n *     function(callback) {\n *         // do some more stuff ...\n *         callback(null, 'two');\n *     }\n * ],\n * // optional callback\n * function(err, results) {\n *     // results is now equal to ['one', 'two']\n * });\n *\n * async.series({\n *     one: function(callback) {\n *         setTimeout(function() {\n *             callback(null, 1);\n *         }, 200);\n *     },\n *     two: function(callback){\n *         setTimeout(function() {\n *             callback(null, 2);\n *         }, 100);\n *     }\n * }, function(err, results) {\n *     // results is now equal to: {one: 1, two: 2}\n * });\n */\nfunction series(tasks, callback) {\n    _parallel(eachOfSeries, tasks, callback);\n}\n\n/**\n * Returns `true` if at least one element in the `coll` satisfies an async test.\n * If any iteratee call returns `true`, the main `callback` is immediately\n * called.\n *\n * @name some\n * @static\n * @memberOf module:Collections\n * @method\n * @alias any\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async truth test to apply to each item\n * in the collections in parallel.\n * The iteratee should complete with a boolean `result` value.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called as soon as any\n * iteratee returns `true`, or after all the iteratee functions have finished.\n * Result will be either `true` or `false` depending on the values of the async\n * tests. Invoked with (err, result).\n * @example\n *\n * async.some(['file1','file2','file3'], function(filePath, callback) {\n *     fs.access(filePath, function(err) {\n *         callback(null, !err)\n *     });\n * }, function(err, result) {\n *     // if result is true then at least one of the files exists\n * });\n */\nvar some = doParallel(_createTester(Boolean, identity));\n\n/**\n * The same as [`some`]{@link module:Collections.some} but runs a maximum of `limit` async operations at a time.\n *\n * @name someLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.some]{@link module:Collections.some}\n * @alias anyLimit\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - An async truth test to apply to each item\n * in the collections in parallel.\n * The iteratee should complete with a boolean `result` value.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called as soon as any\n * iteratee returns `true`, or after all the iteratee functions have finished.\n * Result will be either `true` or `false` depending on the values of the async\n * tests. Invoked with (err, result).\n */\nvar someLimit = doParallelLimit(_createTester(Boolean, identity));\n\n/**\n * The same as [`some`]{@link module:Collections.some} but runs only a single async operation at a time.\n *\n * @name someSeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.some]{@link module:Collections.some}\n * @alias anySeries\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async truth test to apply to each item\n * in the collections in series.\n * The iteratee should complete with a boolean `result` value.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called as soon as any\n * iteratee returns `true`, or after all the iteratee functions have finished.\n * Result will be either `true` or `false` depending on the values of the async\n * tests. Invoked with (err, result).\n */\nvar someSeries = doLimit(someLimit, 1);\n\n/**\n * Sorts a list by the results of running each `coll` value through an async\n * `iteratee`.\n *\n * @name sortBy\n * @static\n * @memberOf module:Collections\n * @method\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async function to apply to each item in\n * `coll`.\n * The iteratee should complete with a value to use as the sort criteria as\n * its `result`.\n * Invoked with (item, callback).\n * @param {Function} callback - A callback which is called after all the\n * `iteratee` functions have finished, or an error occurs. Results is the items\n * from the original `coll` sorted by the values returned by the `iteratee`\n * calls. Invoked with (err, results).\n * @example\n *\n * async.sortBy(['file1','file2','file3'], function(file, callback) {\n *     fs.stat(file, function(err, stats) {\n *         callback(err, stats.mtime);\n *     });\n * }, function(err, results) {\n *     // results is now the original array of files sorted by\n *     // modified date\n * });\n *\n * // By modifying the callback parameter the\n * // sorting order can be influenced:\n *\n * // ascending order\n * async.sortBy([1,9,3,5], function(x, callback) {\n *     callback(null, x);\n * }, function(err,result) {\n *     // result callback\n * });\n *\n * // descending order\n * async.sortBy([1,9,3,5], function(x, callback) {\n *     callback(null, x*-1);    //<- x*-1 instead of x, turns the order around\n * }, function(err,result) {\n *     // result callback\n * });\n */\nfunction sortBy (coll, iteratee, callback) {\n    var _iteratee = wrapAsync(iteratee);\n    map(coll, function (x, callback) {\n        _iteratee(x, function (err, criteria) {\n            if (err) return callback(err);\n            callback(null, {value: x, criteria: criteria});\n        });\n    }, function (err, results) {\n        if (err) return callback(err);\n        callback(null, arrayMap(results.sort(comparator), baseProperty('value')));\n    });\n\n    function comparator(left, right) {\n        var a = left.criteria, b = right.criteria;\n        return a < b ? -1 : a > b ? 1 : 0;\n    }\n}\n\n/**\n * Sets a time limit on an asynchronous function. If the function does not call\n * its callback within the specified milliseconds, it will be called with a\n * timeout error. The code property for the error object will be `'ETIMEDOUT'`.\n *\n * @name timeout\n * @static\n * @memberOf module:Utils\n * @method\n * @category Util\n * @param {AsyncFunction} asyncFn - The async function to limit in time.\n * @param {number} milliseconds - The specified time limit.\n * @param {*} [info] - Any variable you want attached (`string`, `object`, etc)\n * to timeout Error for more information..\n * @returns {AsyncFunction} Returns a wrapped function that can be used with any\n * of the control flow functions.\n * Invoke this function with the same parameters as you would `asyncFunc`.\n * @example\n *\n * function myFunction(foo, callback) {\n *     doAsyncTask(foo, function(err, data) {\n *         // handle errors\n *         if (err) return callback(err);\n *\n *         // do some stuff ...\n *\n *         // return processed data\n *         return callback(null, data);\n *     });\n * }\n *\n * var wrapped = async.timeout(myFunction, 1000);\n *\n * // call `wrapped` as you would `myFunction`\n * wrapped({ bar: 'bar' }, function(err, data) {\n *     // if `myFunction` takes < 1000 ms to execute, `err`\n *     // and `data` will have their expected values\n *\n *     // else `err` will be an Error with the code 'ETIMEDOUT'\n * });\n */\nfunction timeout(asyncFn, milliseconds, info) {\n    var fn = wrapAsync(asyncFn);\n\n    return initialParams(function (args, callback) {\n        var timedOut = false;\n        var timer;\n\n        function timeoutCallback() {\n            var name = asyncFn.name || 'anonymous';\n            var error  = new Error('Callback function \"' + name + '\" timed out.');\n            error.code = 'ETIMEDOUT';\n            if (info) {\n                error.info = info;\n            }\n            timedOut = true;\n            callback(error);\n        }\n\n        args.push(function () {\n            if (!timedOut) {\n                callback.apply(null, arguments);\n                clearTimeout(timer);\n            }\n        });\n\n        // setup timer and call original function\n        timer = setTimeout(timeoutCallback, milliseconds);\n        fn.apply(null, args);\n    });\n}\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeCeil = Math.ceil;\nvar nativeMax = Math.max;\n\n/**\n * The base implementation of `_.range` and `_.rangeRight` which doesn't\n * coerce arguments.\n *\n * @private\n * @param {number} start The start of the range.\n * @param {number} end The end of the range.\n * @param {number} step The value to increment or decrement by.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Array} Returns the range of numbers.\n */\nfunction baseRange(start, end, step, fromRight) {\n  var index = -1,\n      length = nativeMax(nativeCeil((end - start) / (step || 1)), 0),\n      result = Array(length);\n\n  while (length--) {\n    result[fromRight ? length : ++index] = start;\n    start += step;\n  }\n  return result;\n}\n\n/**\n * The same as [times]{@link module:ControlFlow.times} but runs a maximum of `limit` async operations at a\n * time.\n *\n * @name timesLimit\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.times]{@link module:ControlFlow.times}\n * @category Control Flow\n * @param {number} count - The number of times to run the function.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - The async function to call `n` times.\n * Invoked with the iteration index and a callback: (n, next).\n * @param {Function} callback - see [async.map]{@link module:Collections.map}.\n */\nfunction timeLimit(count, limit, iteratee, callback) {\n    var _iteratee = wrapAsync(iteratee);\n    mapLimit(baseRange(0, count, 1), limit, _iteratee, callback);\n}\n\n/**\n * Calls the `iteratee` function `n` times, and accumulates results in the same\n * manner you would use with [map]{@link module:Collections.map}.\n *\n * @name times\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.map]{@link module:Collections.map}\n * @category Control Flow\n * @param {number} n - The number of times to run the function.\n * @param {AsyncFunction} iteratee - The async function to call `n` times.\n * Invoked with the iteration index and a callback: (n, next).\n * @param {Function} callback - see {@link module:Collections.map}.\n * @example\n *\n * // Pretend this is some complicated async factory\n * var createUser = function(id, callback) {\n *     callback(null, {\n *         id: 'user' + id\n *     });\n * };\n *\n * // generate 5 users\n * async.times(5, function(n, next) {\n *     createUser(n, function(err, user) {\n *         next(err, user);\n *     });\n * }, function(err, users) {\n *     // we should now have 5 users\n * });\n */\nvar times = doLimit(timeLimit, Infinity);\n\n/**\n * The same as [times]{@link module:ControlFlow.times} but runs only a single async operation at a time.\n *\n * @name timesSeries\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.times]{@link module:ControlFlow.times}\n * @category Control Flow\n * @param {number} n - The number of times to run the function.\n * @param {AsyncFunction} iteratee - The async function to call `n` times.\n * Invoked with the iteration index and a callback: (n, next).\n * @param {Function} callback - see {@link module:Collections.map}.\n */\nvar timesSeries = doLimit(timeLimit, 1);\n\n/**\n * A relative of `reduce`.  Takes an Object or Array, and iterates over each\n * element in series, each step potentially mutating an `accumulator` value.\n * The type of the accumulator defaults to the type of collection passed in.\n *\n * @name transform\n * @static\n * @memberOf module:Collections\n * @method\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {*} [accumulator] - The initial state of the transform.  If omitted,\n * it will default to an empty Object or Array, depending on the type of `coll`\n * @param {AsyncFunction} iteratee - A function applied to each item in the\n * collection that potentially modifies the accumulator.\n * Invoked with (accumulator, item, key, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Result is the transformed accumulator.\n * Invoked with (err, result).\n * @example\n *\n * async.transform([1,2,3], function(acc, item, index, callback) {\n *     // pointless async:\n *     process.nextTick(function() {\n *         acc.push(item * 2)\n *         callback(null)\n *     });\n * }, function(err, result) {\n *     // result is now equal to [2, 4, 6]\n * });\n *\n * @example\n *\n * async.transform({a: 1, b: 2, c: 3}, function (obj, val, key, callback) {\n *     setImmediate(function () {\n *         obj[key] = val * 2;\n *         callback();\n *     })\n * }, function (err, result) {\n *     // result is equal to {a: 2, b: 4, c: 6}\n * })\n */\nfunction transform (coll, accumulator, iteratee, callback) {\n    if (arguments.length <= 3) {\n        callback = iteratee;\n        iteratee = accumulator;\n        accumulator = isArray(coll) ? [] : {};\n    }\n    callback = once(callback || noop);\n    var _iteratee = wrapAsync(iteratee);\n\n    eachOf(coll, function(v, k, cb) {\n        _iteratee(accumulator, v, k, cb);\n    }, function(err) {\n        callback(err, accumulator);\n    });\n}\n\n/**\n * It runs each task in series but stops whenever any of the functions were\n * successful. If one of the tasks were successful, the `callback` will be\n * passed the result of the successful task. If all tasks fail, the callback\n * will be passed the error and result (if any) of the final attempt.\n *\n * @name tryEach\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {Array|Iterable|Object} tasks - A collection containing functions to\n * run, each function is passed a `callback(err, result)` it must call on\n * completion with an error `err` (which can be `null`) and an optional `result`\n * value.\n * @param {Function} [callback] - An optional callback which is called when one\n * of the tasks has succeeded, or all have failed. It receives the `err` and\n * `result` arguments of the last attempt at completing the `task`. Invoked with\n * (err, results).\n * @example\n * async.tryEach([\n *     function getDataFromFirstWebsite(callback) {\n *         // Try getting the data from the first website\n *         callback(err, data);\n *     },\n *     function getDataFromSecondWebsite(callback) {\n *         // First website failed,\n *         // Try getting the data from the backup website\n *         callback(err, data);\n *     }\n * ],\n * // optional callback\n * function(err, results) {\n *     Now do something with the data.\n * });\n *\n */\nfunction tryEach(tasks, callback) {\n    var error = null;\n    var result;\n    callback = callback || noop;\n    eachSeries(tasks, function(task, callback) {\n        wrapAsync(task)(function (err, res/*, ...args*/) {\n            if (arguments.length > 2) {\n                result = slice(arguments, 1);\n            } else {\n                result = res;\n            }\n            error = err;\n            callback(!err);\n        });\n    }, function () {\n        callback(error, result);\n    });\n}\n\n/**\n * Undoes a [memoize]{@link module:Utils.memoize}d function, reverting it to the original,\n * unmemoized form. Handy for testing.\n *\n * @name unmemoize\n * @static\n * @memberOf module:Utils\n * @method\n * @see [async.memoize]{@link module:Utils.memoize}\n * @category Util\n * @param {AsyncFunction} fn - the memoized function\n * @returns {AsyncFunction} a function that calls the original unmemoized function\n */\nfunction unmemoize(fn) {\n    return function () {\n        return (fn.unmemoized || fn).apply(null, arguments);\n    };\n}\n\n/**\n * Repeatedly call `iteratee`, while `test` returns `true`. Calls `callback` when\n * stopped, or an error occurs.\n *\n * @name whilst\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {Function} test - synchronous truth test to perform before each\n * execution of `iteratee`. Invoked with ().\n * @param {AsyncFunction} iteratee - An async function which is called each time\n * `test` passes. Invoked with (callback).\n * @param {Function} [callback] - A callback which is called after the test\n * function has failed and repeated execution of `iteratee` has stopped. `callback`\n * will be passed an error and any arguments passed to the final `iteratee`'s\n * callback. Invoked with (err, [results]);\n * @returns undefined\n * @example\n *\n * var count = 0;\n * async.whilst(\n *     function() { return count < 5; },\n *     function(callback) {\n *         count++;\n *         setTimeout(function() {\n *             callback(null, count);\n *         }, 1000);\n *     },\n *     function (err, n) {\n *         // 5 seconds have passed, n = 5\n *     }\n * );\n */\nfunction whilst(test, iteratee, callback) {\n    callback = onlyOnce(callback || noop);\n    var _iteratee = wrapAsync(iteratee);\n    if (!test()) return callback(null);\n    var next = function(err/*, ...args*/) {\n        if (err) return callback(err);\n        if (test()) return _iteratee(next);\n        var args = slice(arguments, 1);\n        callback.apply(null, [null].concat(args));\n    };\n    _iteratee(next);\n}\n\n/**\n * Repeatedly call `iteratee` until `test` returns `true`. Calls `callback` when\n * stopped, or an error occurs. `callback` will be passed an error and any\n * arguments passed to the final `iteratee`'s callback.\n *\n * The inverse of [whilst]{@link module:ControlFlow.whilst}.\n *\n * @name until\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.whilst]{@link module:ControlFlow.whilst}\n * @category Control Flow\n * @param {Function} test - synchronous truth test to perform before each\n * execution of `iteratee`. Invoked with ().\n * @param {AsyncFunction} iteratee - An async function which is called each time\n * `test` fails. Invoked with (callback).\n * @param {Function} [callback] - A callback which is called after the test\n * function has passed and repeated execution of `iteratee` has stopped. `callback`\n * will be passed an error and any arguments passed to the final `iteratee`'s\n * callback. Invoked with (err, [results]);\n */\nfunction until(test, iteratee, callback) {\n    whilst(function() {\n        return !test.apply(this, arguments);\n    }, iteratee, callback);\n}\n\n/**\n * Runs the `tasks` array of functions in series, each passing their results to\n * the next in the array. However, if any of the `tasks` pass an error to their\n * own callback, the next function is not executed, and the main `callback` is\n * immediately called with the error.\n *\n * @name waterfall\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {Array} tasks - An array of [async functions]{@link AsyncFunction}\n * to run.\n * Each function should complete with any number of `result` values.\n * The `result` values will be passed as arguments, in order, to the next task.\n * @param {Function} [callback] - An optional callback to run once all the\n * functions have completed. This will be passed the results of the last task's\n * callback. Invoked with (err, [results]).\n * @returns undefined\n * @example\n *\n * async.waterfall([\n *     function(callback) {\n *         callback(null, 'one', 'two');\n *     },\n *     function(arg1, arg2, callback) {\n *         // arg1 now equals 'one' and arg2 now equals 'two'\n *         callback(null, 'three');\n *     },\n *     function(arg1, callback) {\n *         // arg1 now equals 'three'\n *         callback(null, 'done');\n *     }\n * ], function (err, result) {\n *     // result now equals 'done'\n * });\n *\n * // Or, with named functions:\n * async.waterfall([\n *     myFirstFunction,\n *     mySecondFunction,\n *     myLastFunction,\n * ], function (err, result) {\n *     // result now equals 'done'\n * });\n * function myFirstFunction(callback) {\n *     callback(null, 'one', 'two');\n * }\n * function mySecondFunction(arg1, arg2, callback) {\n *     // arg1 now equals 'one' and arg2 now equals 'two'\n *     callback(null, 'three');\n * }\n * function myLastFunction(arg1, callback) {\n *     // arg1 now equals 'three'\n *     callback(null, 'done');\n * }\n */\nvar waterfall = function(tasks, callback) {\n    callback = once(callback || noop);\n    if (!isArray(tasks)) return callback(new Error('First argument to waterfall must be an array of functions'));\n    if (!tasks.length) return callback();\n    var taskIndex = 0;\n\n    function nextTask(args) {\n        var task = wrapAsync(tasks[taskIndex++]);\n        args.push(onlyOnce(next));\n        task.apply(null, args);\n    }\n\n    function next(err/*, ...args*/) {\n        if (err || taskIndex === tasks.length) {\n            return callback.apply(null, arguments);\n        }\n        nextTask(slice(arguments, 1));\n    }\n\n    nextTask([]);\n};\n\n/**\n * An \"async function\" in the context of Async is an asynchronous function with\n * a variable number of parameters, with the final parameter being a callback.\n * (`function (arg1, arg2, ..., callback) {}`)\n * The final callback is of the form `callback(err, results...)`, which must be\n * called once the function is completed.  The callback should be called with a\n * Error as its first argument to signal that an error occurred.\n * Otherwise, if no error occurred, it should be called with `null` as the first\n * argument, and any additional `result` arguments that may apply, to signal\n * successful completion.\n * The callback must be called exactly once, ideally on a later tick of the\n * JavaScript event loop.\n *\n * This type of function is also referred to as a \"Node-style async function\",\n * or a \"continuation passing-style function\" (CPS). Most of the methods of this\n * library are themselves CPS/Node-style async functions, or functions that\n * return CPS/Node-style async functions.\n *\n * Wherever we accept a Node-style async function, we also directly accept an\n * [ES2017 `async` function]{@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function}.\n * In this case, the `async` function will not be passed a final callback\n * argument, and any thrown error will be used as the `err` argument of the\n * implicit callback, and the return value will be used as the `result` value.\n * (i.e. a `rejected` of the returned Promise becomes the `err` callback\n * argument, and a `resolved` value becomes the `result`.)\n *\n * Note, due to JavaScript limitations, we can only detect native `async`\n * functions and not transpilied implementations.\n * Your environment must have `async`/`await` support for this to work.\n * (e.g. Node > v7.6, or a recent version of a modern browser).\n * If you are using `async` functions through a transpiler (e.g. Babel), you\n * must still wrap the function with [asyncify]{@link module:Utils.asyncify},\n * because the `async function` will be compiled to an ordinary function that\n * returns a promise.\n *\n * @typedef {Function} AsyncFunction\n * @static\n */\n\n/**\n * Async is a utility module which provides straight-forward, powerful functions\n * for working with asynchronous JavaScript. Although originally designed for\n * use with [Node.js](http://nodejs.org) and installable via\n * `npm install --save async`, it can also be used directly in the browser.\n * @module async\n * @see AsyncFunction\n */\n\n\n/**\n * A collection of `async` functions for manipulating collections, such as\n * arrays and objects.\n * @module Collections\n */\n\n/**\n * A collection of `async` functions for controlling the flow through a script.\n * @module ControlFlow\n */\n\n/**\n * A collection of `async` utility functions.\n * @module Utils\n */\n\nvar index = {\n    apply: apply,\n    applyEach: applyEach,\n    applyEachSeries: applyEachSeries,\n    asyncify: asyncify,\n    auto: auto,\n    autoInject: autoInject,\n    cargo: cargo,\n    compose: compose,\n    concat: concat,\n    concatLimit: concatLimit,\n    concatSeries: concatSeries,\n    constant: constant,\n    detect: detect,\n    detectLimit: detectLimit,\n    detectSeries: detectSeries,\n    dir: dir,\n    doDuring: doDuring,\n    doUntil: doUntil,\n    doWhilst: doWhilst,\n    during: during,\n    each: eachLimit,\n    eachLimit: eachLimit$1,\n    eachOf: eachOf,\n    eachOfLimit: eachOfLimit,\n    eachOfSeries: eachOfSeries,\n    eachSeries: eachSeries,\n    ensureAsync: ensureAsync,\n    every: every,\n    everyLimit: everyLimit,\n    everySeries: everySeries,\n    filter: filter,\n    filterLimit: filterLimit,\n    filterSeries: filterSeries,\n    forever: forever,\n    groupBy: groupBy,\n    groupByLimit: groupByLimit,\n    groupBySeries: groupBySeries,\n    log: log,\n    map: map,\n    mapLimit: mapLimit,\n    mapSeries: mapSeries,\n    mapValues: mapValues,\n    mapValuesLimit: mapValuesLimit,\n    mapValuesSeries: mapValuesSeries,\n    memoize: memoize,\n    nextTick: nextTick,\n    parallel: parallelLimit,\n    parallelLimit: parallelLimit$1,\n    priorityQueue: priorityQueue,\n    queue: queue$1,\n    race: race,\n    reduce: reduce,\n    reduceRight: reduceRight,\n    reflect: reflect,\n    reflectAll: reflectAll,\n    reject: reject,\n    rejectLimit: rejectLimit,\n    rejectSeries: rejectSeries,\n    retry: retry,\n    retryable: retryable,\n    seq: seq,\n    series: series,\n    setImmediate: setImmediate$1,\n    some: some,\n    someLimit: someLimit,\n    someSeries: someSeries,\n    sortBy: sortBy,\n    timeout: timeout,\n    times: times,\n    timesLimit: timeLimit,\n    timesSeries: timesSeries,\n    transform: transform,\n    tryEach: tryEach,\n    unmemoize: unmemoize,\n    until: until,\n    waterfall: waterfall,\n    whilst: whilst,\n\n    // aliases\n    all: every,\n    allLimit: everyLimit,\n    allSeries: everySeries,\n    any: some,\n    anyLimit: someLimit,\n    anySeries: someSeries,\n    find: detect,\n    findLimit: detectLimit,\n    findSeries: detectSeries,\n    forEach: eachLimit,\n    forEachSeries: eachSeries,\n    forEachLimit: eachLimit$1,\n    forEachOf: eachOf,\n    forEachOfSeries: eachOfSeries,\n    forEachOfLimit: eachOfLimit,\n    inject: reduce,\n    foldl: reduce,\n    foldr: reduceRight,\n    select: filter,\n    selectLimit: filterLimit,\n    selectSeries: filterSeries,\n    wrapSync: asyncify\n};\n\nexports['default'] = index;\nexports.apply = apply;\nexports.applyEach = applyEach;\nexports.applyEachSeries = applyEachSeries;\nexports.asyncify = asyncify;\nexports.auto = auto;\nexports.autoInject = autoInject;\nexports.cargo = cargo;\nexports.compose = compose;\nexports.concat = concat;\nexports.concatLimit = concatLimit;\nexports.concatSeries = concatSeries;\nexports.constant = constant;\nexports.detect = detect;\nexports.detectLimit = detectLimit;\nexports.detectSeries = detectSeries;\nexports.dir = dir;\nexports.doDuring = doDuring;\nexports.doUntil = doUntil;\nexports.doWhilst = doWhilst;\nexports.during = during;\nexports.each = eachLimit;\nexports.eachLimit = eachLimit$1;\nexports.eachOf = eachOf;\nexports.eachOfLimit = eachOfLimit;\nexports.eachOfSeries = eachOfSeries;\nexports.eachSeries = eachSeries;\nexports.ensureAsync = ensureAsync;\nexports.every = every;\nexports.everyLimit = everyLimit;\nexports.everySeries = everySeries;\nexports.filter = filter;\nexports.filterLimit = filterLimit;\nexports.filterSeries = filterSeries;\nexports.forever = forever;\nexports.groupBy = groupBy;\nexports.groupByLimit = groupByLimit;\nexports.groupBySeries = groupBySeries;\nexports.log = log;\nexports.map = map;\nexports.mapLimit = mapLimit;\nexports.mapSeries = mapSeries;\nexports.mapValues = mapValues;\nexports.mapValuesLimit = mapValuesLimit;\nexports.mapValuesSeries = mapValuesSeries;\nexports.memoize = memoize;\nexports.nextTick = nextTick;\nexports.parallel = parallelLimit;\nexports.parallelLimit = parallelLimit$1;\nexports.priorityQueue = priorityQueue;\nexports.queue = queue$1;\nexports.race = race;\nexports.reduce = reduce;\nexports.reduceRight = reduceRight;\nexports.reflect = reflect;\nexports.reflectAll = reflectAll;\nexports.reject = reject;\nexports.rejectLimit = rejectLimit;\nexports.rejectSeries = rejectSeries;\nexports.retry = retry;\nexports.retryable = retryable;\nexports.seq = seq;\nexports.series = series;\nexports.setImmediate = setImmediate$1;\nexports.some = some;\nexports.someLimit = someLimit;\nexports.someSeries = someSeries;\nexports.sortBy = sortBy;\nexports.timeout = timeout;\nexports.times = times;\nexports.timesLimit = timeLimit;\nexports.timesSeries = timesSeries;\nexports.transform = transform;\nexports.tryEach = tryEach;\nexports.unmemoize = unmemoize;\nexports.until = until;\nexports.waterfall = waterfall;\nexports.whilst = whilst;\nexports.all = every;\nexports.allLimit = everyLimit;\nexports.allSeries = everySeries;\nexports.any = some;\nexports.anyLimit = someLimit;\nexports.anySeries = someSeries;\nexports.find = detect;\nexports.findLimit = detectLimit;\nexports.findSeries = detectSeries;\nexports.forEach = eachLimit;\nexports.forEachSeries = eachSeries;\nexports.forEachLimit = eachLimit$1;\nexports.forEachOf = eachOf;\nexports.forEachOfSeries = eachOfSeries;\nexports.forEachOfLimit = eachOfLimit;\nexports.inject = reduce;\nexports.foldl = reduce;\nexports.foldr = reduceRight;\nexports.select = filter;\nexports.selectLimit = filterLimit;\nexports.selectSeries = filterSeries;\nexports.wrapSync = asyncify;\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n})));\n", "// Disable no-var because we need to support old IE for now.\n/* eslint-disable no-var */\n// Disable space-before-function-paren for compatibility with VS Code default JS formatter.\n/* eslint-disable space-before-function-paren */\n\n/*\n * This module is intended to be executed both on client side and server side.\n * No error should be thrown. (soft error handling)\n */\n\n(function () {\n  var root = {};\n  // Dependencies --------------------------------------------------------------\n  root.async = (typeof require === 'function') ? require('async') : window.async;\n  if (typeof root.async !== 'object') {\n    throw new Error('Module async is required (https://github.com/caolan/async)');\n  }\n  var async = root.async;\n\n  function _extend(origin, add) {\n    if (!add || typeof add !== 'object') {\n      return origin;\n    }\n    var keys = Object.keys(add);\n    var i = keys.length;\n    while (i--) {\n      origin[keys[i]] = add[keys[i]];\n    }\n    return origin;\n  }\n\n  function _merge() {\n    var ret = {};\n    var args = Array.prototype.slice.call(arguments);\n    var keys = null;\n    var i = null;\n\n    args.forEach(function (arg) {\n      if (arg && arg.constructor === Object) {\n        keys = Object.keys(arg);\n        i = keys.length;\n        while (i--) {\n          ret[keys[i]] = arg[keys[i]];\n        }\n      }\n    });\n    return ret;\n  }\n\n  // Customisable class (Base class) -------------------------------------------\n  // Use with operation \"new\" to extend Validation and Sanitization themselves,\n  // not their prototype. In other words, constructor shall be call to extend\n  // those functions, instead of being in their constructor, like this:\n  //   _extend(Validation, new Customisable);\n\n  function Customisable() {\n    this.custom = {};\n\n    this.extend = function (custom) {\n      return _extend(this.custom, custom);\n    };\n\n    this.reset = function () {\n      this.custom = {};\n    };\n\n    this.remove = function (fields) {\n      if (!_typeIs.array(fields)) {\n        fields = [fields];\n      }\n      fields.forEach(function (field) {\n        delete this.custom[field];\n      }, this);\n    };\n  }\n\n  // Inspection class (Base class) ---------------------------------------------\n  // Use to extend Validation and Sanitization prototypes. Inspection\n  // constructor shall be called in derived class constructor.\n\n  function Inspection(schema, custom) {\n    var _stack = ['@'];\n\n    this._schema = schema;\n    this._custom = {};\n    if (custom != null) {\n      for (var key in custom) {\n        if (Object.prototype.hasOwnProperty.call(custom, key)) {\n          this._custom['$' + key] = custom[key];\n        }\n      }\n    }\n\n    this._getDepth = function () {\n      return _stack.length;\n    };\n\n    this._dumpStack = function () {\n      /* eslint-disable no-control-regex */\n      return _stack.map(function (i) { return i.replace(/^\\[/g, '\\u001b\\u001c\\u001d\\u001e'); })\n        .join('.').replace(/\\.\\u001b\\u001c\\u001d\\u001e/g, '[');\n      /* eslint-enable no-control-regex */\n    };\n\n    this._deeperObject = function (name) {\n      _stack.push((/^[a-z$_][a-z0-9$_]*$/i).test(name) ? name : '[\"' + name + '\"]');\n      return this;\n    };\n\n    this._deeperArray = function (i) {\n      _stack.push('[' + i + ']');\n      return this;\n    };\n\n    this._back = function () {\n      _stack.pop();\n      return this;\n    };\n  }\n  // Simple types --------------------------------------------------------------\n  // If the property is not defined or is not in this list:\n  var _typeIs = {\n    function: function (element) {\n      return typeof element === 'function';\n    },\n    string: function (element) {\n      return typeof element === 'string';\n    },\n    number: function (element) {\n      return typeof element === 'number' && !isNaN(element);\n    },\n    integer: function (element) {\n      return typeof element === 'number' && element % 1 === 0;\n    },\n    NaN: function (element) {\n      return typeof element === 'number' && isNaN(element);\n    },\n    boolean: function (element) {\n      return typeof element === 'boolean';\n    },\n    null: function (element) {\n      return element === null;\n    },\n    date: function (element) {\n      return element != null && element instanceof Date;\n    },\n    object: function (element) {\n      return typeof element === 'object' && element != null && element.constructor !== Array;\n    },\n    array: function (element) {\n      return element != null && element.constructor === Array;\n    },\n    any: function () {\n      return true;\n    }\n  };\n\n  function _simpleType(type, candidate) {\n    if (typeof type === 'function') {\n      return candidate instanceof type;\n    }\n    type = type in _typeIs ? type : 'any';\n    return _typeIs[type](candidate);\n  }\n\n  function _realType(candidate) {\n    for (var i in _typeIs) {\n      if (_simpleType(i, candidate)) {\n        if (i !== 'any' && (i !== 'object' || candidate.constructor === Object)) { return i; }\n        return 'an instance of ' + candidate.constructor.name;\n      }\n    }\n  }\n\n  function getIndexes(a, value) {\n    var indexes = [];\n    var i = a.indexOf(value);\n\n    while (i !== -1) {\n      indexes.push(i);\n      i = a.indexOf(value, i + 1);\n    }\n    return indexes;\n  }\n\n  // Available formats ---------------------------------------------------------\n  /* eslint-disable no-useless-escape */\n  // TODO: Study these regex expressions and add more tests so we can consider removing\n  // rule no-useless-escape.\n  var _formats = {\n    void: /^$/,\n    url: /^(https?|ftp):\\/\\/(((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:)*@)?(((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5]))|((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)?(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.?)(:\\d*)?)(\\/((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)+(\\/(([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)*)*)?)?(\\?((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)|[\\uE000-\\uF8FF]|\\/|\\?)*)?(\\#((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)|\\/|\\?)*)?$/i,\n    'date-time': /^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d{3})?(Z?|(-|\\+)\\d{2}:\\d{2})$/,\n    date: /^\\d{4}-\\d{2}-\\d{2}$/,\n    coolDateTime: /^\\d{4}(-|\\/)\\d{2}(-|\\/)\\d{2}(T| )\\d{2}:\\d{2}:\\d{2}(\\.\\d{3})?Z?$/,\n    time: /^\\d{2}\\:\\d{2}\\:\\d{2}$/,\n    color: /^#([0-9a-f])+$/i,\n    // Very flexible regular expression designed to catch only obvious mistakes\n    // that a user might make that would have a 100% chance of causing email\n    // delivery to the address to fail. The library takes a flexible over\n    // strict approach. Users should use this only for basic front end email\n    // address validation and perform more strict checking using server-side\n    // code after the data has been sent to their server.\n    // Sourced from https://www.regular-expressions.info/email.html, modified\n    // to allow lowercase characters too.\n    email: /^[^@]+@[^.]+\\.[a-zA-Z]+$/,\n    /* eslint-enable prefer-regex-literals */\n    /* eslint-enable quotes */\n    numeric: /^[0-9]+$/,\n    integer: /^\\-?[0-9]+$/,\n    decimal: /^\\-?[0-9]*\\.?[0-9]+$/,\n    alpha: /^[a-z]+$/i,\n    alphaNumeric: /^[a-z0-9]+$/i,\n    alphaDash: /^[a-z0-9_-]+$/i,\n    javascript: /^[a-z_\\$][a-z0-9_\\$]*$/i,\n    upperString: /^[A-Z ]*$/,\n    lowerString: /^[a-z ]*$/,\n    v4uuid: /^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[0-9a-f]{4}-[0-9a-f]{12}$/i\n  };\n  /* eslint-enable no-useless-escape */\n\n  // Validation ------------------------------------------------------------------\n  var _validationAttribut = {\n    optional: function (schema, candidate) {\n      var opt = typeof schema.optional === 'boolean' ? schema.optional : (schema.optional === 'true'); // Default is false\n\n      if (opt === true) {\n        return;\n      }\n      if (typeof candidate === 'undefined') {\n        this.report('is missing and not optional', null, 'optional');\n      }\n    },\n    type: function (schema, candidate) {\n      // return because optional function already handle this case\n      if (typeof candidate === 'undefined' || (typeof schema.type !== 'string' && !(schema.type instanceof Array) && typeof schema.type !== 'function')) {\n        return;\n      }\n      var types = _typeIs.array(schema.type) ? schema.type : [schema.type];\n      var typeIsValid = types.some(function (type) {\n        return _simpleType(type, candidate);\n      });\n      if (!typeIsValid) {\n        types = types.map(function (t) { return typeof t === 'function' ? 'an instance of ' + t.name : t; });\n        this.report('must be ' + types.join(' or ') + ', but is ' + _realType(candidate), null, 'type');\n      }\n    },\n    uniqueness: function (schema, candidate) {\n      if (typeof schema.uniqueness === 'string') { schema.uniqueness = (schema.uniqueness === 'true'); }\n      if (typeof schema.uniqueness !== 'boolean' || schema.uniqueness === false || (!_typeIs.array(candidate) && typeof candidate !== 'string')) {\n        return;\n      }\n      var reported = [];\n      for (var i = 0; i < candidate.length; i++) {\n        if (reported.indexOf(candidate[i]) >= 0) {\n          continue;\n        }\n        var indexes = getIndexes(candidate, candidate[i]);\n        if (indexes.length > 1) {\n          reported.push(candidate[i]);\n          this.report('has value [' + candidate[i] + '] more than once at indexes [' + indexes.join(', ') + ']', null, 'uniqueness');\n        }\n      }\n    },\n    pattern: function (schema, candidate) {\n      var self = this;\n      var regexs = schema.pattern;\n      if (typeof candidate !== 'string') {\n        return;\n      }\n      var matches = false;\n      if (!_typeIs.array(regexs)) {\n        regexs = [regexs];\n      }\n      regexs.forEach(function (regex) {\n        if (typeof regex === 'string' && regex in _formats) {\n          regex = _formats[regex];\n        }\n        if (regex instanceof RegExp) {\n          if (regex.test(candidate)) {\n            matches = true;\n          }\n        }\n      });\n      if (!matches) {\n        self.report('must match [' + regexs.join(' or ') + '], but is equal to \"' + candidate + '\"', null, 'pattern');\n      }\n    },\n    validDate: function (schema, candidate) {\n      if (String(schema.validDate) === 'true' && candidate instanceof Date && isNaN(candidate.getTime())) {\n        this.report('must be a valid date', null, 'validDate');\n      }\n    },\n    minLength: function (schema, candidate) {\n      if (typeof candidate !== 'string' && !_typeIs.array(candidate)) {\n        return;\n      }\n      var minLength = Number(schema.minLength);\n      if (isNaN(minLength)) {\n        return;\n      }\n      if (candidate.length < minLength) {\n        this.report('must be longer than ' + minLength + ' elements, but it has ' + candidate.length, null, 'minLength');\n      }\n    },\n    maxLength: function (schema, candidate) {\n      if (typeof candidate !== 'string' && !_typeIs.array(candidate)) {\n        return;\n      }\n      var maxLength = Number(schema.maxLength);\n      if (isNaN(maxLength)) {\n        return;\n      }\n      if (candidate.length > maxLength) {\n        this.report('must be shorter than ' + maxLength + ' elements, but it has ' + candidate.length, null, 'maxLength');\n      }\n    },\n    exactLength: function (schema, candidate) {\n      if (typeof candidate !== 'string' && !_typeIs.array(candidate)) {\n        return;\n      }\n      var exactLength = Number(schema.exactLength);\n      if (isNaN(exactLength)) {\n        return;\n      }\n      if (candidate.length !== exactLength) {\n        this.report('must have exactly ' + exactLength + ' elements, but it have ' + candidate.length, null, 'exactLength');\n      }\n    },\n    lt: function (schema, candidate) {\n      var limit = Number(schema.lt);\n      if (typeof candidate !== 'number' || isNaN(limit)) {\n        return;\n      }\n      if (candidate >= limit) {\n        this.report('must be less than ' + limit + ', but is equal to \"' + candidate + '\"', null, 'lt');\n      }\n    },\n    lte: function (schema, candidate) {\n      var limit = Number(schema.lte);\n      if (typeof candidate !== 'number' || isNaN(limit)) {\n        return;\n      }\n      if (candidate > limit) {\n        this.report('must be less than or equal to ' + limit + ', but is equal to \"' + candidate + '\"', null, 'lte');\n      }\n    },\n    gt: function (schema, candidate) {\n      var limit = Number(schema.gt);\n      if (typeof candidate !== 'number' || isNaN(limit)) {\n        return;\n      }\n      if (candidate <= limit) {\n        this.report('must be greater than ' + limit + ', but is equal to \"' + candidate + '\"', null, 'gt');\n      }\n    },\n    gte: function (schema, candidate) {\n      var limit = Number(schema.gte);\n      if (typeof candidate !== 'number' || isNaN(limit)) {\n        return;\n      }\n      if (candidate < limit) {\n        this.report('must be greater than or equal to ' + limit + ', but is equal to \"' + candidate + '\"', null, 'gte');\n      }\n    },\n    eq: function (schema, candidate) {\n      if (typeof candidate !== 'number' && typeof candidate !== 'string' && typeof candidate !== 'boolean') {\n        return;\n      }\n      var limit = schema.eq;\n      if (typeof limit !== 'number' && typeof limit !== 'string' && typeof limit !== 'boolean' && !_typeIs.array(limit)) {\n        return;\n      }\n      if (_typeIs.array(limit)) {\n        for (var i = 0; i < limit.length; i++) {\n          if (candidate === limit[i]) {\n            return;\n          }\n        }\n        this.report('must be equal to [' + limit.map(function (l) {\n          return '\"' + l + '\"';\n        }).join(' or ') + '], but is equal to \"' + candidate + '\"', null, 'eq');\n      } else {\n        if (candidate !== limit) {\n          this.report('must be equal to \"' + limit + '\", but is equal to \"' + candidate + '\"', null, 'eq');\n        }\n      }\n    },\n    ne: function (schema, candidate) {\n      if (typeof candidate !== 'number' && typeof candidate !== 'string') {\n        return;\n      }\n      var limit = schema.ne;\n      if (typeof limit !== 'number' && typeof limit !== 'string' && !_typeIs.array(limit)) {\n        return;\n      }\n      if (_typeIs.array(limit)) {\n        for (var i = 0; i < limit.length; i++) {\n          if (candidate === limit[i]) {\n            this.report('must not be equal to \"' + limit[i] + '\"', null, 'ne');\n            return;\n          }\n        }\n      } else {\n        if (candidate === limit) {\n          this.report('must not be equal to \"' + limit + '\"', null, 'ne');\n        }\n      }\n    },\n    multipleOf: function (schema, candidate) {\n      const divisor = Number(schema.multipleOf);\n      if (typeof candidate !== 'number' || isNaN(divisor)) {\n        return;\n      }\n      if (candidate % divisor !== 0) {\n        this.report(candidate + ' is not divisible by ' + divisor, null, 'multipleOf');\n      }\n    },\n    someKeys: function (schema, candidat) {\n      var _keys = schema.someKeys;\n      if (!_typeIs.object(candidat)) {\n        return;\n      }\n      var valid = _keys.some(function (action) {\n        return (action in candidat);\n      });\n      if (!valid) {\n        this.report('must have at least key ' + _keys.map(function (i) {\n          return '\"' + i + '\"';\n        }).join(' or '), null, 'someKeys');\n      }\n    },\n    strict: function (schema, candidate) {\n      if (typeof schema.strict === 'string') { schema.strict = (schema.strict === 'true'); }\n      if (schema.strict !== true || !_typeIs.object(candidate) || !_typeIs.object(schema.properties)) {\n        return;\n      }\n      var self = this;\n      if (typeof schema.properties['*'] === 'undefined') {\n        var intruder = Object.keys(candidate).filter(function (key) {\n          return (typeof schema.properties[key] === 'undefined');\n        });\n        if (intruder.length > 0) {\n          var msg = 'should not contains ' + (intruder.length > 1 ? 'properties' : 'property') +\n            ' [' + intruder.map(function (i) { return '\"' + i + '\"'; }).join(', ') + ']';\n          self.report(msg, null, 'strict');\n        }\n      }\n    },\n    exec: function (schema, candidate, callback) {\n      var self = this;\n\n      if (typeof callback === 'function') {\n        return this.asyncExec(schema, candidate, callback);\n      }\n      (_typeIs.array(schema.exec) ? schema.exec : [schema.exec]).forEach(function (exec) {\n        if (typeof exec === 'function') {\n          exec.call(self, schema, candidate);\n        }\n      });\n    },\n    properties: function (schema, candidate, callback) {\n      if (typeof callback === 'function') {\n        return this.asyncProperties(schema, candidate, callback);\n      }\n      if (!(schema.properties instanceof Object) || !(candidate instanceof Object)) {\n        return;\n      }\n      var properties = schema.properties;\n      var i;\n      if (properties['*'] != null) {\n        for (i in candidate) {\n          if (i in properties) {\n            continue;\n          }\n          this._deeperObject(i);\n          this._validate(properties['*'], candidate[i]);\n          this._back();\n        }\n      }\n      for (i in properties) {\n        if (i === '*') {\n          continue;\n        }\n        this._deeperObject(i);\n        this._validate(properties[i], candidate[i]);\n        this._back();\n      }\n    },\n    items: function (schema, candidate, callback) {\n      if (typeof callback === 'function') {\n        return this.asyncItems(schema, candidate, callback);\n      }\n      if (!(schema.items instanceof Object) || !(candidate instanceof Object)) {\n        return;\n      }\n      var items = schema.items;\n      var i, l;\n      // If provided schema is an array\n      // then call validate for each case\n      // else it is an Object\n      // then call validate for each key\n      if (_typeIs.array(items) && _typeIs.array(candidate)) {\n        for (i = 0, l = items.length; i < l; i++) {\n          this._deeperArray(i);\n          this._validate(items[i], candidate[i]);\n          this._back();\n        }\n      } else {\n        for (var key in candidate) {\n          if (Object.prototype.hasOwnProperty.call(candidate, key)) {\n            this._deeperArray(key);\n            this._validate(items, candidate[key]);\n            this._back();\n          }\n        }\n      }\n    }\n  };\n\n  var _asyncValidationAttribut = {\n    asyncExec: function (schema, candidate, callback) {\n      var self = this;\n      async.eachSeries(_typeIs.array(schema.exec) ? schema.exec : [schema.exec], function (exec, done) {\n        if (typeof exec === 'function') {\n          if (exec.length > 2) {\n            return exec.call(self, schema, candidate, done);\n          }\n          exec.call(self, schema, candidate);\n        }\n        async.nextTick(done);\n      }, callback);\n    },\n    asyncProperties: function (schema, candidate, callback) {\n      if (!(schema.properties instanceof Object) || !_typeIs.object(candidate)) {\n        return callback();\n      }\n      var self = this;\n      var properties = schema.properties;\n      async.series([\n        function (next) {\n          if (properties['*'] == null) {\n            return next();\n          }\n          async.eachSeries(Object.keys(candidate), function (i, done) {\n            if (i in properties) {\n              return async.nextTick(done);\n            }\n            self._deeperObject(i);\n            self._asyncValidate(properties['*'], candidate[i], function (err) {\n              self._back();\n              done(err);\n            });\n          }, next);\n        },\n        function (next) {\n          async.eachSeries(Object.keys(properties), function (i, done) {\n            if (i === '*') {\n              return async.nextTick(done);\n            }\n            self._deeperObject(i);\n            self._asyncValidate(properties[i], candidate[i], function (err) {\n              self._back();\n              done(err);\n            });\n          }, next);\n        }\n      ], callback);\n    },\n    asyncItems: function (schema, candidate, callback) {\n      if (!(schema.items instanceof Object) || !(candidate instanceof Object)) {\n        return callback();\n      }\n      var self = this;\n      var items = schema.items;\n\n      if (_typeIs.array(items) && _typeIs.array(candidate)) {\n        async.timesSeries(items.length, function (i, done) {\n          self._deeperArray(i);\n          self._asyncValidate(items[i], candidate[i], function (err, res) {\n            self._back();\n            done(err, res);\n          });\n          self._back();\n        }, callback);\n      } else {\n        async.eachSeries(Object.keys(candidate), function (key, done) {\n          self._deeperArray(key);\n          self._asyncValidate(items, candidate[key], function (err, res) {\n            self._back();\n            done(err, res);\n          });\n        }, callback);\n      }\n    }\n  };\n\n  // Validation Class ----------------------------------------------------------\n  // inherits from Inspection class (actually we just call Inspection\n  // constructor with the new context, because its prototype is empty\n  function Validation(schema, custom) {\n    Inspection.prototype.constructor.call(this, schema, _merge(Validation.custom, custom));\n    var _error = [];\n\n    this._basicFields = Object.keys(_validationAttribut);\n    this._customFields = Object.keys(this._custom);\n    this.origin = null;\n\n    this.report = function (message, code, reason) {\n      var newErr = {\n        code: code || this.userCode || null,\n        reason: reason || 'unknown',\n        message: this.userError || message || 'is invalid',\n        property: this.userAlias ? (this.userAlias + ' (' + this._dumpStack() + ')') : this._dumpStack()\n      };\n      _error.push(newErr);\n      return this;\n    };\n\n    this.result = function () {\n      return {\n        error: _error,\n        valid: _error.length === 0,\n        format: function () {\n          if (this.valid === true) {\n            return 'Candidate is valid';\n          }\n          return this.error.map(function (i) {\n            return 'Property ' + i.property + ': ' + i.message;\n          }).join('\\n');\n        }\n      };\n    };\n  }\n\n  _extend(Validation.prototype, _validationAttribut);\n  _extend(Validation.prototype, _asyncValidationAttribut);\n  _extend(Validation, new Customisable());\n\n  Validation.prototype.validate = function (candidate, callback) {\n    this.origin = candidate;\n    if (typeof callback === 'function') {\n      var self = this;\n      return async.nextTick(function () {\n        self._asyncValidate(self._schema, candidate, function (err) {\n          self.origin = null;\n          callback(err, self.result());\n        });\n      });\n    }\n    return this._validate(this._schema, candidate).result();\n  };\n\n  Validation.prototype._validate = function (schema, candidate, callback) {\n    this.userCode = schema.code || null;\n    this.userError = schema.error || null;\n    this.userAlias = schema.alias || null;\n    this._basicFields.forEach(function (i) {\n      if ((i in schema || i === 'optional') && typeof this[i] === 'function') {\n        this[i](schema, candidate);\n      }\n    }, this);\n    this._customFields.forEach(function (i) {\n      if (i in schema && typeof this._custom[i] === 'function') {\n        this._custom[i].call(this, schema, candidate);\n      }\n    }, this);\n    return this;\n  };\n\n  Validation.prototype._asyncValidate = function (schema, candidate, callback) {\n    var self = this;\n    this.userCode = schema.code || null;\n    this.userError = schema.error || null;\n    this.userAlias = schema.alias || null;\n\n    async.series([\n      function (next) {\n        async.eachSeries(Object.keys(_validationAttribut), function (i, done) {\n          async.nextTick(function () {\n            if ((i in schema || i === 'optional') && typeof self[i] === 'function') {\n              if (self[i].length > 2) {\n                return self[i](schema, candidate, done);\n              }\n              self[i](schema, candidate);\n            }\n            done();\n          });\n        }, next);\n      },\n      function (next) {\n        async.eachSeries(Object.keys(self._custom), function (i, done) {\n          async.nextTick(function () {\n            if (i in schema && typeof self._custom[i] === 'function') {\n              if (self._custom[i].length > 2) {\n                return self._custom[i].call(self, schema, candidate, done);\n              }\n              self._custom[i].call(self, schema, candidate);\n            }\n            done();\n          });\n        }, next);\n      }\n    ], callback);\n  };\n\n  // Sanitization ----------------------------------------------------------------\n  // functions called by _sanitization.type method.\n  var _forceType = {\n    number: function (post, schema) {\n      var n;\n      if (typeof post === 'number') {\n        return post;\n      } else if (post === '') {\n        if (typeof schema.def !== 'undefined') {\n          return schema.def;\n        }\n        return null;\n      } else if (typeof post === 'string') {\n        n = parseFloat(post.replace(/,/g, '.').replace(/ /g, ''));\n        if (typeof n === 'number') {\n          return n;\n        }\n      } else if (post instanceof Date) {\n        return +post;\n      }\n      return null;\n    },\n    integer: function (post, schema) {\n      var n;\n      if (typeof post === 'number' && post % 1 === 0) {\n        return post;\n      } else if (post === '') {\n        if (typeof schema.def !== 'undefined') {\n          return schema.def;\n        }\n        return null;\n      } else if (typeof post === 'string') {\n        n = parseInt(post.replace(/ /g, ''), 10);\n        if (typeof n === 'number') {\n          return n;\n        }\n      } else if (typeof post === 'number') {\n        return parseInt(post, 10);\n      } else if (typeof post === 'boolean') {\n        if (post) { return 1; }\n        return 0;\n      } else if (post instanceof Date) {\n        return +post;\n      }\n      return null;\n    },\n    string: function (post, schema) {\n      if (typeof post === 'boolean' || typeof post === 'number' || post instanceof Date) {\n        return post.toString();\n      } else if (_typeIs.array(post)) {\n        // If user authorize array and strings...\n        if (schema.items || schema.properties) {\n          return post;\n        }\n        return post.join(String(schema.joinWith || ','));\n      } else if (post instanceof Object) {\n        // If user authorize objects ans strings...\n        if (schema.items || schema.properties) {\n          return post;\n        }\n        return JSON.stringify(post);\n      } else if (typeof post === 'string' && post.length) {\n        return post;\n      }\n      return null;\n    },\n    date: function (post, schema) {\n      if (post instanceof Date) {\n        return post;\n      } else {\n        var d = new Date(post);\n        if (!isNaN(d.getTime())) { // if valid date\n          return d;\n        }\n      }\n      return null;\n    },\n    boolean: function (post, schema) {\n      if (typeof post === 'undefined') return null;\n      if (typeof post === 'string' && post.toLowerCase() === 'false') return false;\n      return !!post;\n    },\n    object: function (post, schema) {\n      if (typeof post !== 'string' || _typeIs.object(post)) {\n        return post;\n      }\n      try {\n        return JSON.parse(post);\n      } catch (e) {\n        return null;\n      }\n    },\n    array: function (post, schema) {\n      if (_typeIs.array(post)) {\n        return post;\n      }\n      if (typeof post === 'undefined') {\n        return null;\n      }\n      if (typeof post === 'string') {\n        if (post.substring(0, 1) === '[' && post.slice(-1) === ']') {\n          try {\n            return JSON.parse(post);\n          } catch (e) {\n            return null;\n          }\n        }\n        return post.split(String(schema.splitWith || ','));\n      }\n      if (!_typeIs.array(post)) {\n        return [post];\n      }\n      return null;\n    }\n  };\n\n  var _applyRules = {\n    upper: function (post) {\n      return post.toUpperCase();\n    },\n    lower: function (post) {\n      return post.toLowerCase();\n    },\n    title: function (post) {\n      // Fix by seb (replace \\w\\S* by \\S* => exemple : coucou ça va)\n      return post.replace(/\\S*/g, function (txt) {\n        return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();\n      });\n    },\n    capitalize: function (post) {\n      return post.charAt(0).toUpperCase() + post.substr(1).toLowerCase();\n    },\n    ucfirst: function (post) {\n      return post.charAt(0).toUpperCase() + post.substr(1);\n    },\n    trim: function (post) {\n      return post.trim();\n    }\n  };\n\n  // Every function return the future value of each property. Therefore you\n  // have to return post even if you do not change its value\n  var _sanitizationAttribut = {\n    strict: function (schema, post) {\n      if (typeof schema.strict === 'string') { schema.strict = (schema.strict === 'true'); }\n      if (schema.strict !== true) {\n        return post;\n      }\n      if (!_typeIs.object(schema.properties)) {\n        return post;\n      }\n      if (!_typeIs.object(post)) {\n        return post;\n      }\n      Object.keys(post).forEach(function (key) {\n        if (!(key in schema.properties)) {\n          delete post[key];\n        }\n      });\n      return post;\n    },\n    optional: function (schema, post) {\n      var opt = typeof schema.optional === 'boolean' ? schema.optional : (schema.optional !== 'false'); // Default: true\n      if (opt === true) {\n        return post;\n      }\n      if (typeof post !== 'undefined') {\n        return post;\n      }\n      this.report();\n      if (schema.def === Date) {\n        return new Date();\n      }\n      return schema.def;\n    },\n    type: function (schema, post) {\n      // if (_typeIs['object'](post) || _typeIs.array(post)) {\n      //   return post;\n      // }\n      if (typeof schema.type !== 'string' || typeof _forceType[schema.type] !== 'function') {\n        return post;\n      }\n      var n;\n      var opt = typeof schema.optional === 'boolean' ? schema.optional : true;\n      if (typeof _forceType[schema.type] === 'function') {\n        n = _forceType[schema.type](post, schema);\n        if ((n === null && !opt) || (!n && isNaN(n)) || (n === null && schema.type === 'string')) {\n          n = schema.def;\n        }\n      } else if (!opt) {\n        n = schema.def;\n      }\n      if ((n != null || (typeof schema.def !== 'undefined' && schema.def === n)) && n !== post) {\n        this.report();\n        return n;\n      }\n      return post;\n    },\n    rules: function (schema, post) {\n      var rules = schema.rules;\n      if (typeof post !== 'string' || (typeof rules !== 'string' && !_typeIs.array(rules))) {\n        return post;\n      }\n      var modified = false;\n      (_typeIs.array(rules) ? rules : [rules]).forEach(function (rule) {\n        if (typeof _applyRules[rule] === 'function') {\n          post = _applyRules[rule](post);\n          modified = true;\n        }\n      });\n      if (modified) {\n        this.report();\n      }\n      return post;\n    },\n    min: function (schema, post) {\n      var postTest = Number(post);\n      if (isNaN(postTest)) {\n        return post;\n      }\n      var min = Number(schema.min);\n      if (isNaN(min)) {\n        return post;\n      }\n      if (postTest < min) {\n        this.report();\n        return min;\n      }\n      return post;\n    },\n    max: function (schema, post) {\n      var postTest = Number(post);\n      if (isNaN(postTest)) {\n        return post;\n      }\n      var max = Number(schema.max);\n      if (isNaN(max)) {\n        return post;\n      }\n      if (postTest > max) {\n        this.report();\n        return max;\n      }\n      return post;\n    },\n    minLength: function (schema, post) {\n      var limit = Number(schema.minLength);\n      if (typeof post !== 'string' || isNaN(limit) || limit < 0) {\n        return post;\n      }\n      var str = '';\n      var gap = limit - post.length;\n      if (gap > 0) {\n        for (var i = 0; i < gap; i++) {\n          str += '-';\n        }\n        this.report();\n        return post + str;\n      }\n      return post;\n    },\n    maxLength: function (schema, post) {\n      var limit = Number(schema.maxLength);\n      if (typeof post !== 'string' || isNaN(limit) || limit < 0) {\n        return post;\n      }\n      if (post.length > limit) {\n        this.report();\n        return post.slice(0, limit);\n      }\n      return post;\n    },\n    properties: function (schema, post, callback) {\n      if (typeof callback === 'function') {\n        return this.asyncProperties(schema, post, callback);\n      }\n      if (!post || typeof post !== 'object') {\n        return post;\n      }\n      var properties = schema.properties;\n      var tmp;\n      var i;\n      if (typeof properties['*'] !== 'undefined') {\n        for (i in post) {\n          if (i in properties) {\n            continue;\n          }\n          this._deeperObject(i);\n          tmp = this._sanitize(properties['*'], post[i]);\n          if (typeof tmp !== 'undefined' || 'exec' in properties['*']) {\n            post[i] = tmp;\n          }\n          this._back();\n        }\n      }\n      for (i in properties) {\n        if (i !== '*') {\n          this._deeperObject(i);\n          tmp = this._sanitize(properties[i], post[i]);\n          if (typeof tmp !== 'undefined' || 'exec' in properties[i]) {\n            post[i] = tmp;\n          }\n          this._back();\n        }\n      }\n      return post;\n    },\n    items: function (schema, post, callback) {\n      if (typeof callback === 'function') {\n        return this.asyncItems(schema, post, callback);\n      }\n      if (!(schema.items instanceof Object) || !(post instanceof Object)) {\n        return post;\n      }\n      var i;\n      if (_typeIs.array(schema.items) && _typeIs.array(post)) {\n        var minLength = schema.items.length < post.length ? schema.items.length : post.length;\n        for (i = 0; i < minLength; i++) {\n          this._deeperArray(i);\n          post[i] = this._sanitize(schema.items[i], post[i]);\n          this._back();\n        }\n      } else {\n        for (i in post) {\n          if (Object.prototype.hasOwnProperty.call(post, i)) {\n            this._deeperArray(i);\n            post[i] = this._sanitize(schema.items, post[i]);\n            this._back();\n          }\n        }\n      }\n      return post;\n    },\n    exec: function (schema, post, callback) {\n      if (typeof callback === 'function') {\n        return this.asyncExec(schema, post, callback);\n      }\n      var execs = _typeIs.array(schema.exec) ? schema.exec : [schema.exec];\n\n      execs.forEach(function (exec) {\n        if (typeof exec === 'function') {\n          post = exec.call(this, schema, post);\n        }\n      }, this);\n      return post;\n    }\n  };\n\n  var _asyncSanitizationAttribut = {\n    asyncExec: function (schema, post, callback) {\n      var self = this;\n      var execs = _typeIs.array(schema.exec) ? schema.exec : [schema.exec];\n\n      async.eachSeries(execs, function (exec, done) {\n        if (typeof exec === 'function') {\n          if (exec.length > 2) {\n            return exec.call(self, schema, post, function (err, res) {\n              if (err) {\n                return done(err);\n              }\n              post = res;\n              done();\n            });\n          }\n          post = exec.call(self, schema, post);\n        }\n        done();\n      }, function (err) {\n        callback(err, post);\n      });\n    },\n    asyncProperties: function (schema, post, callback) {\n      if (!post || typeof post !== 'object') {\n        return callback(null, post);\n      }\n      var self = this;\n      var properties = schema.properties;\n\n      async.series([\n        function (next) {\n          if (properties['*'] == null) {\n            return next();\n          }\n          var globing = properties['*'];\n          async.eachSeries(Object.keys(post), function (i, next) {\n            if (i in properties) {\n              return next();\n            }\n            self._deeperObject(i);\n            self._asyncSanitize(globing, post[i], function (err, res) {\n              if (err) { /* Error can safely be ignored here */ }\n              if (typeof res !== 'undefined') {\n                post[i] = res;\n              }\n              self._back();\n              next();\n            });\n          }, next);\n        },\n        function (next) {\n          async.eachSeries(Object.keys(properties), function (i, next) {\n            if (i === '*') {\n              return next();\n            }\n            self._deeperObject(i);\n            self._asyncSanitize(properties[i], post[i], function (err, res) {\n              if (err) {\n                return next(err);\n              }\n              if (typeof res !== 'undefined') {\n                post[i] = res;\n              }\n              self._back();\n              next();\n            });\n          }, next);\n        }\n      ], function (err) {\n        return callback(err, post);\n      });\n    },\n    asyncItems: function (schema, post, callback) {\n      if (!(schema.items instanceof Object) || !(post instanceof Object)) {\n        return callback(null, post);\n      }\n      var self = this;\n      var items = schema.items;\n      if (_typeIs.array(items) && _typeIs.array(post)) {\n        var minLength = items.length < post.length ? items.length : post.length;\n        async.timesSeries(minLength, function (i, next) {\n          self._deeperArray(i);\n          self._asyncSanitize(items[i], post[i], function (err, res) {\n            if (err) {\n              return next(err);\n            }\n            post[i] = res;\n            self._back();\n            next();\n          });\n        }, function (err) {\n          callback(err, post);\n        });\n      } else {\n        async.eachSeries(Object.keys(post), function (key, next) {\n          self._deeperArray(key);\n          self._asyncSanitize(items, post[key], function (err, res) {\n            if (err) {\n              return next();\n            }\n            post[key] = res;\n            self._back();\n            next();\n          });\n        }, function (err) {\n          callback(err, post);\n        });\n      }\n      return post;\n    }\n  };\n\n  // Sanitization Class --------------------------------------------------------\n  // inherits from Inspection class (actually we just call Inspection\n  // constructor with the new context, because its prototype is empty\n  function Sanitization(schema, custom) {\n    Inspection.prototype.constructor.call(this, schema, _merge(Sanitization.custom, custom));\n    var _reporting = [];\n\n    this._basicFields = Object.keys(_sanitizationAttribut);\n    this._customFields = Object.keys(this._custom);\n    this.origin = null;\n\n    this.report = function (message) {\n      var newNot = {\n        message: message || 'was sanitized',\n        property: this.userAlias ? (this.userAlias + ' (' + this._dumpStack() + ')') : this._dumpStack()\n      };\n      if (!_reporting.some(function (e) { return e.property === newNot.property; })) {\n        _reporting.push(newNot);\n      }\n    };\n\n    this.result = function (data) {\n      // For old IE.\n      /* eslint-disable object-shorthand */\n      return {\n        data: data,\n        reporting: _reporting,\n        format: function () {\n          return this.reporting.map(function (i) {\n            return 'Property ' + i.property + ' ' + i.message;\n          }).join('\\n');\n        }\n      };\n      /* eslint-enable object-shorthand */\n    };\n  }\n\n  _extend(Sanitization.prototype, _sanitizationAttribut);\n  _extend(Sanitization.prototype, _asyncSanitizationAttribut);\n  _extend(Sanitization, new Customisable());\n\n  Sanitization.prototype.sanitize = function (post, callback) {\n    this.origin = post;\n    if (typeof callback === 'function') {\n      var self = this;\n      return this._asyncSanitize(this._schema, post, function (err, data) {\n        self.origin = null;\n        callback(err, self.result(data));\n      });\n    }\n    var data = this._sanitize(this._schema, post);\n    this.origin = null;\n    return this.result(data);\n  };\n\n  Sanitization.prototype._sanitize = function (schema, post) {\n    this.userAlias = schema.alias || null;\n    this._basicFields.forEach(function (i) {\n      if ((i in schema || i === 'optional') && typeof this[i] === 'function') {\n        post = this[i](schema, post);\n      }\n    }, this);\n    this._customFields.forEach(function (i) {\n      if (i in schema && typeof this._custom[i] === 'function') {\n        post = this._custom[i].call(this, schema, post);\n      }\n    }, this);\n    return post;\n  };\n\n  Sanitization.prototype._asyncSanitize = function (schema, post, callback) {\n    var self = this;\n    this.userAlias = schema.alias || null;\n\n    async.waterfall([\n      function (next) {\n        async.reduce(self._basicFields, post, function (value, i, next) {\n          async.nextTick(function () {\n            if ((i in schema || i === 'optional') && typeof self[i] === 'function') {\n              if (self[i].length > 2) {\n                return self[i](schema, value, next);\n              }\n              value = self[i](schema, value);\n            }\n            next(null, value);\n          });\n        }, next);\n      },\n      function (inter, next) {\n        async.reduce(self._customFields, inter, function (value, i, next) {\n          async.nextTick(function () {\n            if (i in schema && typeof self._custom[i] === 'function') {\n              if (self._custom[i].length > 2) {\n                return self._custom[i].call(self, schema, value, next);\n              }\n              value = self._custom[i].call(self, schema, value);\n            }\n            next(null, value);\n          });\n        }, next);\n      }\n    ], callback);\n  };\n\n  // ---------------------------------------------------------------------------\n\n  var INT_MIN = -2147483648;\n  var INT_MAX = 2147483647;\n\n  var _rand = {\n    int: function (min, max) {\n      return min + (0 | Math.random() * (max - min + 1));\n    },\n    float: function (min, max) {\n      return (Math.random() * (max - min) + min);\n    },\n    bool: function () {\n      return (Math.random() > 0.5);\n    },\n    char: function (min, max) {\n      return String.fromCharCode(this.int(min, max));\n    },\n    fromList: function (list) {\n      return list[this.int(0, list.length - 1)];\n    }\n  };\n\n  var _formatSample = {\n    'date-time': function () {\n      return new Date().toISOString();\n    },\n    date: function () {\n      return new Date().toISOString().replace(/T.*$/, '');\n    },\n    time: function () {\n      return new Date().toLocaleTimeString({}, { hour12: false });\n    },\n    color: function (min, max) {\n      var s = '#';\n      if (min < 1) {\n        min = 1;\n      }\n      for (var i = 0, l = _rand.int(min, max); i < l; i++) {\n        s += _rand.fromList('0123456789abcdefABCDEF');\n      }\n      return s;\n    },\n    numeric: function () {\n      return '' + _rand.int(0, INT_MAX);\n    },\n    integer: function () {\n      if (_rand.bool() === true) {\n        return '-' + this.numeric();\n      }\n      return this.numeric();\n    },\n    decimal: function () {\n      return this.integer() + '.' + this.numeric();\n    },\n    alpha: function (min, max) {\n      var s = '';\n      if (min < 1) {\n        min = 1;\n      }\n      for (var i = 0, l = _rand.int(min, max); i < l; i++) {\n        s += _rand.fromList('abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ');\n      }\n      return s;\n    },\n    alphaNumeric: function (min, max) {\n      var s = '';\n      if (min < 1) {\n        min = 1;\n      }\n      for (var i = 0, l = _rand.int(min, max); i < l; i++) {\n        s += _rand.fromList('abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789');\n      }\n      return s;\n    },\n    alphaDash: function (min, max) {\n      var s = '';\n      if (min < 1) {\n        min = 1;\n      }\n      for (var i = 0, l = _rand.int(min, max); i < l; i++) {\n        s += _rand.fromList('_-abcdefghijklmnopqrstuvwxyz_-ABCDEFGHIJKLMNOPQRSTUVWXYZ_-0123456789_-');\n      }\n      return s;\n    },\n    javascript: function (min, max) {\n      var s = _rand.fromList('_$abcdefghijklmnopqrstuvwxyz_$ABCDEFGHIJKLMNOPQRSTUVWXYZ_$');\n      for (var i = 0, l = _rand.int(min, max - 1); i < l; i++) {\n        s += _rand.fromList('_$abcdefghijklmnopqrstuvwxyz_$ABCDEFGHIJKLMNOPQRSTUVWXYZ_$0123456789_$');\n      }\n      return s;\n    }\n  };\n\n  function _getLimits(schema) {\n    var min = INT_MIN;\n    var max = INT_MAX;\n\n    if (schema.gte != null) {\n      min = schema.gte;\n    } else if (schema.gt != null) {\n      min = schema.gt + 1;\n    }\n    if (schema.lte != null) {\n      max = schema.lte;\n    } else if (schema.lt != null) {\n      max = schema.lt - 1;\n    }\n    // For old IE.\n    /* eslint-disable object-shorthand */\n    return { min: min, max: max };\n    /* eslint-enable object-shorthand */\n  }\n\n  var _typeGenerator = {\n    string: function (schema) {\n      if (schema.eq != null) {\n        return schema.eq;\n      }\n      var s = '';\n      var minLength = schema.minLength != null ? schema.minLength : 0;\n      var maxLength = schema.maxLength != null ? schema.maxLength : 32;\n      if (typeof schema.pattern === 'string' && typeof _formatSample[schema.pattern] === 'function') {\n        return _formatSample[schema.pattern](minLength, maxLength);\n      }\n\n      var l = schema.exactLength != null ? schema.exactLength : _rand.int(minLength, maxLength);\n      for (var i = 0; i < l; i++) {\n        s += _rand.char(32, 126);\n      }\n      return s;\n    },\n    number: function (schema) {\n      if (schema.eq != null) {\n        return schema.eq;\n      }\n      var limit = _getLimits(schema);\n      var n = _rand.float(limit.min, limit.max);\n      if (schema.ne != null) {\n        var ne = _typeIs.array(schema.ne) ? schema.ne : [schema.ne];\n        while (ne.indexOf(n) !== -1) {\n          n = _rand.float(limit.min, limit.max);\n        }\n      }\n      return n;\n    },\n    integer: function (schema) {\n      if (schema.eq != null) {\n        return schema.eq;\n      }\n      var limit = _getLimits(schema);\n      var n = _rand.int(limit.min, limit.max);\n      if (schema.ne != null) {\n        var ne = _typeIs.array(schema.ne) ? schema.ne : [schema.ne];\n        while (ne.indexOf(n) !== -1) {\n          n = _rand.int(limit.min, limit.max);\n        }\n      }\n      return n;\n    },\n    boolean: function (schema) {\n      if (schema.eq != null) {\n        return schema.eq;\n      }\n      return _rand.bool();\n    },\n    null: function (schema) {\n      return null;\n    },\n    date: function (schema) {\n      if (schema.eq != null) {\n        return schema.eq;\n      }\n      return new Date();\n    },\n    object: function (schema) {\n      var o = {};\n      var prop = schema.properties || {};\n\n      for (var key in prop) {\n        if (Object.prototype.hasOwnProperty.call(prop, key)) {\n          if (prop[key].optional === true && _rand.bool() === true) {\n            continue;\n          }\n          if (key !== '*') {\n            o[key] = this.generate(prop[key]);\n          } else {\n            var rk = '__random_key_';\n            var randomKey = rk + 0;\n            var n = _rand.int(1, 9);\n            for (var i = 1; i <= n; i++) {\n              if (!(randomKey in prop)) {\n                o[randomKey] = this.generate(prop[key]);\n              }\n              randomKey = rk + i;\n            }\n          }\n        }\n      }\n      return o;\n    },\n    array: function (schema) {\n      var self = this;\n      var items = schema.items || {};\n      var minLength = schema.minLength != null ? schema.minLength : 0;\n      var maxLength = schema.maxLength != null ? schema.maxLength : 16;\n      var type;\n      var candidate;\n      var size;\n      var i;\n\n      if (_typeIs.array(items)) {\n        size = items.length;\n        if (schema.exactLength != null) {\n          size = schema.exactLength;\n        } else if (size < minLength) {\n          size = minLength;\n        } else if (size > maxLength) {\n          size = maxLength;\n        }\n        candidate = new Array(size);\n        type = null;\n        for (i = 0; i < size; i++) {\n          type = items[i].type || 'any';\n          if (_typeIs.array(type)) {\n            type = type[_rand.int(0, type.length - 1)];\n          }\n          candidate[i] = self[type](items[i]);\n        }\n      } else {\n        size = schema.exactLength != null ? schema.exactLength : _rand.int(minLength, maxLength);\n        candidate = new Array(size);\n        type = items.type || 'any';\n        if (_typeIs.array(type)) {\n          type = type[_rand.int(0, type.length - 1)];\n        }\n        for (i = 0; i < size; i++) {\n          candidate[i] = self[type](items);\n        }\n      }\n      return candidate;\n    },\n    any: function (schema) {\n      var fields = Object.keys(_typeGenerator);\n      var i = fields[_rand.int(0, fields.length - 2)];\n      return this[i](schema);\n    }\n  };\n\n  // CandidateGenerator Class (Singleton) --------------------------------------\n  function CandidateGenerator() {\n    // Maybe extends Inspection class too ?\n  }\n\n  _extend(CandidateGenerator.prototype, _typeGenerator);\n\n  var _instance = null;\n  CandidateGenerator.instance = function () {\n    if (!(_instance instanceof CandidateGenerator)) {\n      _instance = new CandidateGenerator();\n    }\n    return _instance;\n  };\n\n  CandidateGenerator.prototype.generate = function (schema) {\n    var type = schema.type || 'any';\n    if (_typeIs.array(type)) {\n      type = type[_rand.int(0, type.length - 1)];\n    }\n    return this[type](schema);\n  };\n\n  // Exports ---------------------------------------------------------------------\n  var SchemaInspector = {};\n\n  // if server-side (node.js) else client-side\n  if (typeof module !== 'undefined' && module.exports) {\n    module.exports = SchemaInspector;\n  } else {\n    window.SchemaInspector = SchemaInspector;\n  }\n\n  SchemaInspector.newSanitization = function (schema, custom) {\n    return new Sanitization(schema, custom);\n  };\n\n  SchemaInspector.newValidation = function (schema, custom) {\n    return new Validation(schema, custom);\n  };\n\n  SchemaInspector.Validation = Validation;\n  SchemaInspector.Sanitization = Sanitization;\n\n  SchemaInspector.sanitize = function (schema, post, custom, callback) {\n    if (arguments.length === 3 && typeof custom === 'function') {\n      callback = custom;\n      custom = null;\n    }\n    return new Sanitization(schema, custom).sanitize(post, callback);\n  };\n\n  SchemaInspector.validate = function (schema, candidate, custom, callback) {\n    if (arguments.length === 3 && typeof custom === 'function') {\n      callback = custom;\n      custom = null;\n    }\n    return new Validation(schema, custom).validate(candidate, callback);\n  };\n\n  SchemaInspector.generate = function (schema, n) {\n    if (typeof n === 'number') {\n      var r = new Array(n);\n      for (var i = 0; i < n; i++) {\n        r[i] = CandidateGenerator.instance().generate(schema);\n      }\n      return r;\n    }\n    return CandidateGenerator.instance().generate(schema);\n  };\n})();\n", "module.exports = require('./lib/schema-inspector');\n", "(function(self) {\n\nvar irrelevant = (function (exports) {\n\n  /* eslint-disable no-prototype-builtins */\n  var g =\n    (typeof globalThis !== 'undefined' && globalThis) ||\n    (typeof self !== 'undefined' && self) ||\n    // eslint-disable-next-line no-undef\n    (typeof global !== 'undefined' && global) ||\n    {};\n\n  var support = {\n    searchParams: 'URLSearchParams' in g,\n    iterable: 'Symbol' in g && 'iterator' in Symbol,\n    blob:\n      'FileReader' in g &&\n      'Blob' in g &&\n      (function() {\n        try {\n          new Blob();\n          return true\n        } catch (e) {\n          return false\n        }\n      })(),\n    formData: 'FormData' in g,\n    arrayBuffer: 'ArrayBuffer' in g\n  };\n\n  function isDataView(obj) {\n    return obj && DataView.prototype.isPrototypeOf(obj)\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ];\n\n    var isArrayBufferView =\n      ArrayBuffer.isView ||\n      function(obj) {\n        return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n      };\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name);\n    }\n    if (/[^a-z0-9\\-#$%&'*+.^_`|~!]/i.test(name) || name === '') {\n      throw new TypeError('Invalid character in header field name: \"' + name + '\"')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value);\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift();\n        return {done: value === undefined, value: value}\n      }\n    };\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      };\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {};\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value);\n      }, this);\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        if (header.length != 2) {\n          throw new TypeError('Headers constructor: expected name/value pair to be length 2, found' + header.length)\n        }\n        this.append(header[0], header[1]);\n      }, this);\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name]);\n      }, this);\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name);\n    value = normalizeValue(value);\n    var oldValue = this.map[name];\n    this.map[name] = oldValue ? oldValue + ', ' + value : value;\n  };\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)];\n  };\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name);\n    return this.has(name) ? this.map[name] : null\n  };\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  };\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value);\n  };\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this);\n      }\n    }\n  };\n\n  Headers.prototype.keys = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push(name);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.values = function() {\n    var items = [];\n    this.forEach(function(value) {\n      items.push(value);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.entries = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push([name, value]);\n    });\n    return iteratorFor(items)\n  };\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries;\n  }\n\n  function consumed(body) {\n    if (body._noBody) return\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true;\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result);\n      };\n      reader.onerror = function() {\n        reject(reader.error);\n      };\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsArrayBuffer(blob);\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    var match = /charset=([A-Za-z0-9_-]+)/.exec(blob.type);\n    var encoding = match ? match[1] : 'utf-8';\n    reader.readAsText(blob, encoding);\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf);\n    var chars = new Array(view.length);\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i]);\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength);\n      view.set(new Uint8Array(buf));\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false;\n\n    this._initBody = function(body) {\n      /*\n        fetch-mock wraps the Response object in an ES6 Proxy to\n        provide useful test harness features such as flush. However, on\n        ES5 browsers without fetch or Proxy support pollyfills must be used;\n        the proxy-pollyfill is unable to proxy an attribute unless it exists\n        on the object before the Proxy is created. This change ensures\n        Response.bodyUsed exists on the instance, while maintaining the\n        semantic of setting Request.bodyUsed in the constructor before\n        _initBody is called.\n      */\n      // eslint-disable-next-line no-self-assign\n      this.bodyUsed = this.bodyUsed;\n      this._bodyInit = body;\n      if (!body) {\n        this._noBody = true;\n        this._bodyText = '';\n      } else if (typeof body === 'string') {\n        this._bodyText = body;\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body;\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body;\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString();\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer);\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer]);\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body);\n      } else {\n        this._bodyText = body = Object.prototype.toString.call(body);\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8');\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type);\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8');\n        }\n      }\n    };\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this);\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      };\n    }\n\n    this.arrayBuffer = function() {\n      if (this._bodyArrayBuffer) {\n        var isConsumed = consumed(this);\n        if (isConsumed) {\n          return isConsumed\n        } else if (ArrayBuffer.isView(this._bodyArrayBuffer)) {\n          return Promise.resolve(\n            this._bodyArrayBuffer.buffer.slice(\n              this._bodyArrayBuffer.byteOffset,\n              this._bodyArrayBuffer.byteOffset + this._bodyArrayBuffer.byteLength\n            )\n          )\n        } else {\n          return Promise.resolve(this._bodyArrayBuffer)\n        }\n      } else if (support.blob) {\n        return this.blob().then(readBlobAsArrayBuffer)\n      } else {\n        throw new Error('could not read as ArrayBuffer')\n      }\n    };\n\n    this.text = function() {\n      var rejected = consumed(this);\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    };\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      };\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    };\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['CONNECT', 'DELETE', 'GET', 'HEAD', 'OPTIONS', 'PATCH', 'POST', 'PUT', 'TRACE'];\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase();\n    return methods.indexOf(upcased) > -1 ? upcased : method\n  }\n\n  function Request(input, options) {\n    if (!(this instanceof Request)) {\n      throw new TypeError('Please use the \"new\" operator, this DOM object constructor cannot be called as a function.')\n    }\n\n    options = options || {};\n    var body = options.body;\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url;\n      this.credentials = input.credentials;\n      if (!options.headers) {\n        this.headers = new Headers(input.headers);\n      }\n      this.method = input.method;\n      this.mode = input.mode;\n      this.signal = input.signal;\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit;\n        input.bodyUsed = true;\n      }\n    } else {\n      this.url = String(input);\n    }\n\n    this.credentials = options.credentials || this.credentials || 'same-origin';\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers);\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET');\n    this.mode = options.mode || this.mode || null;\n    this.signal = options.signal || this.signal || (function () {\n      if ('AbortController' in g) {\n        var ctrl = new AbortController();\n        return ctrl.signal;\n      }\n    }());\n    this.referrer = null;\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body);\n\n    if (this.method === 'GET' || this.method === 'HEAD') {\n      if (options.cache === 'no-store' || options.cache === 'no-cache') {\n        // Search for a '_' parameter in the query string\n        var reParamSearch = /([?&])_=[^&]*/;\n        if (reParamSearch.test(this.url)) {\n          // If it already exists then set the value with the current time\n          this.url = this.url.replace(reParamSearch, '$1_=' + new Date().getTime());\n        } else {\n          // Otherwise add a new '_' parameter to the end with the current time\n          var reQueryString = /\\?/;\n          this.url += (reQueryString.test(this.url) ? '&' : '?') + '_=' + new Date().getTime();\n        }\n      }\n    }\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, {body: this._bodyInit})\n  };\n\n  function decode(body) {\n    var form = new FormData();\n    body\n      .trim()\n      .split('&')\n      .forEach(function(bytes) {\n        if (bytes) {\n          var split = bytes.split('=');\n          var name = split.shift().replace(/\\+/g, ' ');\n          var value = split.join('=').replace(/\\+/g, ' ');\n          form.append(decodeURIComponent(name), decodeURIComponent(value));\n        }\n      });\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers();\n    // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n    // https://tools.ietf.org/html/rfc7230#section-3.2\n    var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ');\n    // Avoiding split via regex to work around a common IE11 bug with the core-js 3.6.0 regex polyfill\n    // https://github.com/github/fetch/issues/748\n    // https://github.com/zloirock/core-js/issues/751\n    preProcessedHeaders\n      .split('\\r')\n      .map(function(header) {\n        return header.indexOf('\\n') === 0 ? header.substr(1, header.length) : header\n      })\n      .forEach(function(line) {\n        var parts = line.split(':');\n        var key = parts.shift().trim();\n        if (key) {\n          var value = parts.join(':').trim();\n          try {\n            headers.append(key, value);\n          } catch (error) {\n            console.warn('Response ' + error.message);\n          }\n        }\n      });\n    return headers\n  }\n\n  Body.call(Request.prototype);\n\n  function Response(bodyInit, options) {\n    if (!(this instanceof Response)) {\n      throw new TypeError('Please use the \"new\" operator, this DOM object constructor cannot be called as a function.')\n    }\n    if (!options) {\n      options = {};\n    }\n\n    this.type = 'default';\n    this.status = options.status === undefined ? 200 : options.status;\n    if (this.status < 200 || this.status > 599) {\n      throw new RangeError(\"Failed to construct 'Response': The status provided (0) is outside the range [200, 599].\")\n    }\n    this.ok = this.status >= 200 && this.status < 300;\n    this.statusText = options.statusText === undefined ? '' : '' + options.statusText;\n    this.headers = new Headers(options.headers);\n    this.url = options.url || '';\n    this._initBody(bodyInit);\n  }\n\n  Body.call(Response.prototype);\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  };\n\n  Response.error = function() {\n    var response = new Response(null, {status: 200, statusText: ''});\n    response.ok = false;\n    response.status = 0;\n    response.type = 'error';\n    return response\n  };\n\n  var redirectStatuses = [301, 302, 303, 307, 308];\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  };\n\n  exports.DOMException = g.DOMException;\n  try {\n    new exports.DOMException();\n  } catch (err) {\n    exports.DOMException = function(message, name) {\n      this.message = message;\n      this.name = name;\n      var error = Error(message);\n      this.stack = error.stack;\n    };\n    exports.DOMException.prototype = Object.create(Error.prototype);\n    exports.DOMException.prototype.constructor = exports.DOMException;\n  }\n\n  function fetch(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init);\n\n      if (request.signal && request.signal.aborted) {\n        return reject(new exports.DOMException('Aborted', 'AbortError'))\n      }\n\n      var xhr = new XMLHttpRequest();\n\n      function abortXhr() {\n        xhr.abort();\n      }\n\n      xhr.onload = function() {\n        var options = {\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        };\n        // This check if specifically for when a user fetches a file locally from the file system\n        // Only if the status is out of a normal range\n        if (request.url.indexOf('file://') === 0 && (xhr.status < 200 || xhr.status > 599)) {\n          options.status = 200;\n        } else {\n          options.status = xhr.status;\n        }\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL');\n        var body = 'response' in xhr ? xhr.response : xhr.responseText;\n        setTimeout(function() {\n          resolve(new Response(body, options));\n        }, 0);\n      };\n\n      xhr.onerror = function() {\n        setTimeout(function() {\n          reject(new TypeError('Network request failed'));\n        }, 0);\n      };\n\n      xhr.ontimeout = function() {\n        setTimeout(function() {\n          reject(new TypeError('Network request timed out'));\n        }, 0);\n      };\n\n      xhr.onabort = function() {\n        setTimeout(function() {\n          reject(new exports.DOMException('Aborted', 'AbortError'));\n        }, 0);\n      };\n\n      function fixUrl(url) {\n        try {\n          return url === '' && g.location.href ? g.location.href : url\n        } catch (e) {\n          return url\n        }\n      }\n\n      xhr.open(request.method, fixUrl(request.url), true);\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true;\n      } else if (request.credentials === 'omit') {\n        xhr.withCredentials = false;\n      }\n\n      if ('responseType' in xhr) {\n        if (support.blob) {\n          xhr.responseType = 'blob';\n        } else if (\n          support.arrayBuffer\n        ) {\n          xhr.responseType = 'arraybuffer';\n        }\n      }\n\n      if (init && typeof init.headers === 'object' && !(init.headers instanceof Headers || (g.Headers && init.headers instanceof g.Headers))) {\n        var names = [];\n        Object.getOwnPropertyNames(init.headers).forEach(function(name) {\n          names.push(normalizeName(name));\n          xhr.setRequestHeader(name, normalizeValue(init.headers[name]));\n        });\n        request.headers.forEach(function(value, name) {\n          if (names.indexOf(name) === -1) {\n            xhr.setRequestHeader(name, value);\n          }\n        });\n      } else {\n        request.headers.forEach(function(value, name) {\n          xhr.setRequestHeader(name, value);\n        });\n      }\n\n      if (request.signal) {\n        request.signal.addEventListener('abort', abortXhr);\n\n        xhr.onreadystatechange = function() {\n          // DONE (success or failure)\n          if (xhr.readyState === 4) {\n            request.signal.removeEventListener('abort', abortXhr);\n          }\n        };\n      }\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit);\n    })\n  }\n\n  fetch.polyfill = true;\n\n  if (!g.fetch) {\n    g.fetch = fetch;\n    g.Headers = Headers;\n    g.Request = Request;\n    g.Response = Response;\n  }\n\n  exports.Headers = Headers;\n  exports.Request = Request;\n  exports.Response = Response;\n  exports.fetch = fetch;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n  return exports;\n\n})({});\n})(typeof self !== 'undefined' ? self : this);\n", "/**\n * @ignore\n */\nexport const BLOCKSTACK_HANDLER = 'blockstack';\n/**\n * @ignore\n */\nexport const BLOCKSTACK_STORAGE_LABEL = 'blockstack';\n/**\n * This constant is used in the [[redirectToSignInWithAuthRequest]]\n */\nexport const DEFAULT_BLOCKSTACK_HOST = 'https://browser.blockstack.org/auth';\n\n/**\n * Default user profile object\n */\nexport const DEFAULT_PROFILE = {\n  '@type': 'Person',\n  '@context': 'http://schema.org',\n};\n\n/**\n * Non-exhaustive list of common permission scopes.\n */\nexport const enum AuthScope {\n  /**\n   * Read and write data to the user's Gaia hub in an app-specific storage bucket.\n   * This is the default scope.\n   */\n  store_write = 'store_write',\n  /**\n   * Publish data so that other users of the app can discover and interact with the user.\n   * The user's files stored on Gaia hub are made visible to others via the `apps` property in the\n   * user’s `profile.json` file.\n   */\n  publish_data = 'publish_data',\n  /**\n   * Request the user's email if available.\n   */\n  email = 'email',\n}\n\n/**\n * @ignore\n */\nexport const DEFAULT_SCOPE = [AuthScope.store_write];\n\n/**\n * @ignore\n */\nexport const BLOCKSTACK_APP_PRIVATE_KEY_LABEL = 'blockstack-transit-private-key';\n\n/**\n * @ignore\n */\nexport const DEFAULT_CORE_NODE = 'https://api.hiro.so';\n/**\n * @ignore\n */\nexport const NAME_LOOKUP_PATH = '/v1/names';\n/**\n * @ignore\n */\nexport const LOCALSTORAGE_SESSION_KEY = 'blockstack-session';\n", "/**\n * @ignore\n * todo: remove this file (needed for CLI?)\n */\nconst config = {\n  network: {\n    layer1: 'placeholder',\n  },\n  logLevel: 'debug',\n};\n\nexport { config };\n", "/**\n * @ignore\n */\nexport const ERROR_CODES = {\n  MISSING_PARAMETER: 'missing_parameter',\n  REMOTE_SERVICE_ERROR: 'remote_service_error',\n  INVALID_STATE: 'invalid_state',\n  NO_SESSION_DATA: 'no_session_data',\n  DOES_NOT_EXIST: 'does_not_exist',\n  FAILED_DECRYPTION_ERROR: 'failed_decryption_error',\n  INVALID_DID_ERROR: 'invalid_did_error',\n  NOT_ENOUGH_FUNDS_ERROR: 'not_enough_error',\n  INVALID_AMOUNT_ERROR: 'invalid_amount_error',\n  LOGIN_FAILED_ERROR: 'login_failed',\n  SIGNATURE_VERIFICATION_ERROR: 'signature_verification_failure',\n  CONFLICT_ERROR: 'conflict_error',\n  NOT_ENOUGH_PROOF_ERROR: 'not_enough_proof_error',\n  BAD_PATH_ERROR: 'bad_path_error',\n  VALIDATION_ERROR: 'validation_error',\n  PAYLOAD_TOO_LARGE_ERROR: 'payload_too_large_error',\n  PRECONDITION_FAILED_ERROR: 'precondition_failed_error',\n  UNKNOWN: 'unknown',\n};\n\nObject.freeze(ERROR_CODES);\n\n/**\n * @ignore\n */\ntype ErrorData = {\n  code: string;\n  parameter?: string;\n  message: string;\n};\n\n/**\n * @ignore\n */\nexport class BlockstackError extends Error {\n  message: string;\n\n  code: string;\n\n  parameter?: string;\n\n  constructor(error: ErrorData) {\n    super();\n    let message = error.message;\n    let bugDetails = `Error Code: ${error.code}`;\n    let stack = this.stack;\n    if (!stack) {\n      try {\n        throw new Error();\n      } catch (e: any) {\n        stack = e.stack;\n      }\n    } else {\n      bugDetails += `Stack Trace:\\n${stack}`;\n    }\n    message += `\\nIf you believe this exception is caused by a bug in stacks.js,\n      please file a bug report: https://github.com/blockstack/stacks.js/issues\\n\\n${bugDetails}`;\n    this.message = message;\n    this.code = error.code;\n    this.parameter = error.parameter ? error.parameter : undefined;\n  }\n\n  toString() {\n    return `${super.toString()}\n    code: ${this.code} param: ${this.parameter ? this.parameter : 'n/a'}`;\n  }\n}\n\n/**\n * @ignore\n */\nexport class InvalidParameterError extends BlockstackError {\n  constructor(parameter: string, message: string = '') {\n    super({ code: ERROR_CODES.MISSING_PARAMETER, message, parameter });\n    this.name = 'MissingParametersError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class MissingParameterError extends BlockstackError {\n  constructor(parameter: string, message: string = '') {\n    super({ code: ERROR_CODES.MISSING_PARAMETER, message, parameter });\n    this.name = 'MissingParametersError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class RemoteServiceError extends BlockstackError {\n  response: Response;\n\n  constructor(response: Response, message: string = '') {\n    super({ code: ERROR_CODES.REMOTE_SERVICE_ERROR, message });\n    this.response = response;\n  }\n}\n\n/**\n * @ignore\n */\nexport class InvalidDIDError extends BlockstackError {\n  constructor(message: string = '') {\n    super({ code: ERROR_CODES.INVALID_DID_ERROR, message });\n    this.name = 'InvalidDIDError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class NotEnoughFundsError extends BlockstackError {\n  leftToFund: number;\n\n  constructor(leftToFund: number) {\n    const message = `Not enough UTXOs to fund. Left to fund: ${leftToFund}`;\n    super({ code: ERROR_CODES.NOT_ENOUGH_FUNDS_ERROR, message });\n    this.leftToFund = leftToFund;\n    this.name = 'NotEnoughFundsError';\n    this.message = message;\n  }\n}\n\n/**\n * @ignore\n */\nexport class InvalidAmountError extends BlockstackError {\n  fees: number;\n\n  specifiedAmount: number;\n\n  constructor(fees: number, specifiedAmount: number) {\n    const message =\n      `Not enough coin to fund fees transaction fees. Fees would be ${fees},` +\n      ` specified spend is  ${specifiedAmount}`;\n    super({ code: ERROR_CODES.INVALID_AMOUNT_ERROR, message });\n    this.specifiedAmount = specifiedAmount;\n    this.fees = fees;\n    this.name = 'InvalidAmountError';\n    this.message = message;\n  }\n}\n\n/**\n * @ignore\n */\nexport class LoginFailedError extends BlockstackError {\n  constructor(reason: string) {\n    const message = `Failed to login: ${reason}`;\n    super({ code: ERROR_CODES.LOGIN_FAILED_ERROR, message });\n    this.message = message;\n    this.name = 'LoginFailedError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class SignatureVerificationError extends BlockstackError {\n  constructor(reason: string) {\n    const message = `Failed to verify signature: ${reason}`;\n    super({ code: ERROR_CODES.SIGNATURE_VERIFICATION_ERROR, message });\n    this.message = message;\n    this.name = 'SignatureVerificationError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class FailedDecryptionError extends BlockstackError {\n  constructor(message: string = 'Unable to decrypt cipher object.') {\n    super({ code: ERROR_CODES.FAILED_DECRYPTION_ERROR, message });\n    this.message = message;\n    this.name = 'FailedDecryptionError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class InvalidStateError extends BlockstackError {\n  constructor(message: string) {\n    super({ code: ERROR_CODES.INVALID_STATE, message });\n    this.message = message;\n    this.name = 'InvalidStateError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class NoSessionDataError extends BlockstackError {\n  constructor(message: string) {\n    super({ code: ERROR_CODES.INVALID_STATE, message });\n    this.message = message;\n    this.name = 'NoSessionDataError';\n  }\n}\n\n/**\n * @ignore\n */\nexport interface GaiaHubErrorResponse {\n  status: number;\n  statusText: string;\n  body?: any; // todo: should this be string?\n}\n\nexport interface HubErrorDetails {\n  message?: string;\n  statusCode: number;\n  statusText: string;\n  [prop: string]: any;\n}\n\n/**\n * @ignore\n */\nexport class GaiaHubError extends BlockstackError {\n  hubError?: HubErrorDetails;\n\n  constructor(error: ErrorData, response: GaiaHubErrorResponse) {\n    super(error);\n    if (response) {\n      this.hubError = {\n        statusCode: response.status,\n        statusText: response.statusText,\n      };\n      if (typeof response.body === 'string') {\n        this.hubError.message = response.body;\n      } else if (typeof response.body === 'object') {\n        Object.assign(this.hubError, response.body);\n      }\n    }\n  }\n}\n\n/**\n * @ignore\n */\nexport class DoesNotExist extends GaiaHubError {\n  constructor(message: string, response: GaiaHubErrorResponse) {\n    super({ message, code: ERROR_CODES.DOES_NOT_EXIST }, response);\n    this.name = 'DoesNotExist';\n  }\n}\n\n/**\n * @ignore\n */\nexport class ConflictError extends GaiaHubError {\n  constructor(message: string, response: GaiaHubErrorResponse) {\n    super({ message, code: ERROR_CODES.CONFLICT_ERROR }, response);\n    this.name = 'ConflictError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class NotEnoughProofError extends GaiaHubError {\n  constructor(message: string, response: GaiaHubErrorResponse) {\n    super({ message, code: ERROR_CODES.NOT_ENOUGH_PROOF_ERROR }, response);\n    this.name = 'NotEnoughProofError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class BadPathError extends GaiaHubError {\n  constructor(message: string, response: GaiaHubErrorResponse) {\n    super({ message, code: ERROR_CODES.BAD_PATH_ERROR }, response);\n    this.name = 'BadPathError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class ValidationError extends GaiaHubError {\n  constructor(message: string, response: GaiaHubErrorResponse) {\n    super({ message, code: ERROR_CODES.VALIDATION_ERROR }, response);\n    this.name = 'ValidationError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class PayloadTooLargeError extends GaiaHubError {\n  /** Can be `null` when an oversized payload is detected client-side. */\n  hubError?: HubErrorDetails;\n\n  maxUploadByteSize: number;\n\n  constructor(message: string, response: GaiaHubErrorResponse | null, maxUploadByteSize: number) {\n    super({ message, code: ERROR_CODES.PAYLOAD_TOO_LARGE_ERROR }, response!);\n    this.name = 'PayloadTooLargeError';\n    this.maxUploadByteSize = maxUploadByteSize;\n  }\n}\n\n/**\n * @ignore\n */\nexport class PreconditionFailedError extends GaiaHubError {\n  constructor(message: string, response: GaiaHubErrorResponse) {\n    super({ message, code: ERROR_CODES.PRECONDITION_FAILED_ERROR }, response);\n    this.name = 'PreconditionFailedError';\n  }\n}\n", "import { config } from './config';\n\nconst levels = ['debug', 'info', 'warn', 'error', 'none'];\n\nconst levelToInt: { [level: string]: number } = {};\nconst intToLevel: { [int: number]: string } = {};\n\nfor (let index = 0; index < levels.length; index++) {\n  const level = levels[index];\n  levelToInt[level] = index;\n  intToLevel[index] = level;\n}\n\n/**\n * @ignore\n * @deprecated\n */\nexport class Logger {\n  static error(message: string) {\n    if (!this.shouldLog('error')) return;\n    console.error(this.logMessage('error', message));\n  }\n\n  static warn(message: string) {\n    if (!this.shouldLog('warn')) return;\n    console.warn(this.logMessage('warn', message));\n  }\n\n  static info(message: string) {\n    if (!this.shouldLog('info')) return;\n    console.log(this.logMessage('info', message));\n  }\n\n  static debug(message: string) {\n    if (!this.shouldLog('debug')) return;\n    console.log(this.logMessage('debug', message));\n  }\n\n  static logMessage(level: string, message: string) {\n    return `[${level.toUpperCase()}] ${message}`;\n  }\n\n  static shouldLog(level: string) {\n    const currentLevel = levelToInt[config.logLevel];\n    return currentLevel <= levelToInt[level];\n  }\n}\n", "import { Logger } from './logger';\n\n/**\n *  @ignore\n * @deprecated\n */\nexport const BLOCKSTACK_HANDLER = 'blockstack';\n// todo: `next` get rid of all this blockstack stuff\n\n/**\n * Time\n * @private\n * @ignore\n * @deprecated\n */\nexport function nextYear() {\n  return new Date(new Date().setFullYear(new Date().getFullYear() + 1));\n}\n\n/**\n * Time\n * @private\n * @ignore\n * @deprecated\n */\nexport function nextMonth() {\n  return new Date(new Date().setMonth(new Date().getMonth() + 1));\n}\n\n/**\n * Time\n * @private\n * @ignore\n * @deprecated\n */\nexport function nextHour() {\n  return new Date(new Date().setHours(new Date().getHours() + 1));\n}\n\n/**\n * Converts megabytes to bytes. Returns 0 if the input is not a finite number.\n * @ignore\n * @deprecated\n */\nexport function megabytesToBytes(megabytes: number): number {\n  if (!Number.isFinite(megabytes)) {\n    return 0;\n  }\n  return Math.floor(megabytes * 1024 * 1024);\n}\n\n/**\n * Calculate the AES-CBC ciphertext output byte length a given input length.\n * AES has a fixed block size of 16-bytes regardless key size.\n * @ignore\n * @deprecated\n */\nexport function getAesCbcOutputLength(inputByteLength: number) {\n  // AES-CBC block mode rounds up to the next block size.\n  const cipherTextLength = (Math.floor(inputByteLength / 16) + 1) * 16;\n  return cipherTextLength;\n}\n\n/**\n * Calculate the base64 encoded string length for a given input length.\n * This is equivalent to the byte length when the string is ASCII or UTF8-8\n * encoded.\n * @param number\n * @deprecated\n */\nexport function getBase64OutputLength(inputByteLength: number) {\n  const encodedLength = Math.ceil(inputByteLength / 3) * 4;\n  return encodedLength;\n}\n\n/**\n * Query Strings\n * @private\n * @ignore\n * @deprecated\n */\nexport function updateQueryStringParameter(uri: string, key: string, value: string) {\n  const re = new RegExp(`([?&])${key}=.*?(&|$)`, 'i');\n  const separator = uri.indexOf('?') !== -1 ? '&' : '?';\n  if (uri.match(re)) {\n    return uri.replace(re, `$1${key}=${value}$2`);\n  } else {\n    return `${uri}${separator}${key}=${value}`;\n  }\n}\n\n/**\n * Versioning\n * @param {string} v1 - the left half of the version inequality\n * @param {string} v2 - right half of the version inequality\n * @returns {bool} iff v1 >= v2\n * @private\n * @ignore\n * @deprecated\n */\nexport function isLaterVersion(v1: string, v2: string) {\n  if (v1 === undefined || v1 === '') {\n    v1 = '0.0.0';\n  }\n\n  if (v2 === undefined || v1 === '') {\n    v2 = '0.0.0';\n  }\n\n  const v1tuple = v1.split('.').map(x => parseInt(x, 10));\n  const v2tuple = v2.split('.').map(x => parseInt(x, 10));\n\n  for (let index = 0; index < v2.length; index++) {\n    if (index >= v1.length) {\n      v2tuple.push(0);\n    }\n    if (v1tuple[index] < v2tuple[index]) {\n      return false;\n    }\n  }\n  return true;\n}\n\n/**\n * UUIDs\n * @private\n * @ignore\n * @deprecated\n */\nexport function makeUUID4() {\n  let d = new Date().getTime();\n  if (typeof performance !== 'undefined' && typeof performance.now === 'function') {\n    d += performance.now(); // use high-precision timer if available\n  }\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\n    const r = (d + Math.random() * 16) % 16 | 0;\n    d = Math.floor(d / 16);\n    return (c === 'x' ? r : (r & 0x3) | 0x8).toString(16);\n  });\n}\n\n/**\n * Checks if both urls pass the same origin check & are absolute\n * @param  {[type]}  uri1 first uri to check\n * @param  {[type]}  uri2 second uri to check\n * @return {Boolean} true if they pass the same origin check\n * @private\n * @ignore\n * @deprecated\n */\nexport function isSameOriginAbsoluteUrl(uri1: string, uri2: string) {\n  try {\n    const parsedUri1 = new URL(uri1);\n    const parsedUri2 = new URL(uri2);\n\n    const port1 =\n      parseInt(parsedUri1.port || '0', 10) | 0 || (parsedUri1.protocol === 'https:' ? 443 : 80);\n    const port2 =\n      parseInt(parsedUri2.port || '0', 10) | 0 || (parsedUri2.protocol === 'https:' ? 443 : 80);\n\n    const match = {\n      scheme: parsedUri1.protocol === parsedUri2.protocol,\n      hostname: parsedUri1.hostname === parsedUri2.hostname,\n      port: port1 === port2,\n      absolute:\n        (uri1.includes('http://') || uri1.includes('https://')) &&\n        (uri2.includes('http://') || uri2.includes('https://')),\n    };\n\n    return match.scheme && match.hostname && match.port && match.absolute;\n  } catch (error) {\n    console.log(error);\n    console.log('Parsing error in same URL origin check');\n    // Parse error\n    return false;\n  }\n}\n\n/**\n * Returns the global scope `Window`, `WorkerGlobalScope`, or `NodeJS.Global` if available in the\n * currently executing environment.\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Window/self\n * @see https://developer.mozilla.org/en-US/docs/Web/API/WorkerGlobalScope/self\n * @see https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope\n *\n * This could be switched to `globalThis` once it is standardized and widely available.\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/globalThis\n * @ignore\n */\nexport function getGlobalScope(): Window {\n  if (typeof self !== 'undefined') {\n    return self;\n  }\n  if (typeof window !== 'undefined') {\n    return window;\n  }\n  // This function is meant to be called when accessing APIs that are typically only available in\n  // web-browser/DOM environments, but we also want to support situations where running in Node.js\n  // environment, and a polyfill was added to the Node.js `global` object scope without adding the\n  // `window` global object as well.\n  if (typeof global !== 'undefined') {\n    return global as unknown as Window;\n  }\n  throw new Error(\n    'Unexpected runtime environment - no supported global scope (`window`, `self`, `global`) available'\n  );\n}\n\n/** @deprecated */\nfunction getAPIUsageErrorMessage(\n  scopeObject: unknown,\n  apiName: string,\n  usageDesc?: string\n): string {\n  if (usageDesc) {\n    return `Use of '${usageDesc}' requires \\`${apiName}\\` which is unavailable on the '${scopeObject}' object within the currently executing environment.`;\n  } else {\n    return `\\`${apiName}\\` is unavailable on the '${scopeObject}' object within the currently executing environment.`;\n  }\n}\n\ninterface GetGlobalObjectOptions {\n  /**\n   * Throw an error if the object is not found.\n   * @default false\n   */\n  throwIfUnavailable?: boolean;\n  /**\n   * Additional information to include in an error if thrown.\n   */\n  usageDesc?: string;\n  /**\n   * If the object is not found, return an new empty object instead of undefined.\n   * Requires [[throwIfUnavailable]] to be falsey.\n   * @default false\n   */\n  returnEmptyObject?: boolean;\n}\n\n/**\n * Returns an object from the global scope (`Window` or `WorkerGlobalScope`) if it\n * is available within the currently executing environment.\n * When executing within the Node.js runtime these APIs are unavailable and will be\n * `undefined` unless the API is provided via polyfill.\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Window/self\n * @ignore\n */\nexport function getGlobalObject<K extends Extract<keyof Window, string>>(\n  name: K,\n  { throwIfUnavailable, usageDesc, returnEmptyObject }: GetGlobalObjectOptions = {}\n): Window[K] | undefined {\n  let globalScope: Window | undefined = undefined;\n  try {\n    globalScope = getGlobalScope();\n    if (globalScope) {\n      const obj = globalScope[name];\n      if (obj) {\n        return obj;\n      }\n    }\n  } catch (error) {\n    Logger.error(`Error getting object '${name}' from global scope '${globalScope}': ${error}`);\n  }\n  if (throwIfUnavailable) {\n    const errMsg = getAPIUsageErrorMessage(globalScope, name.toString(), usageDesc);\n    Logger.error(errMsg);\n    throw new Error(errMsg);\n  }\n  if (returnEmptyObject) {\n    return {} as any;\n  }\n  return undefined;\n}\n\n/**\n * Returns a specified subset of objects from the global scope (`Window` or `WorkerGlobalScope`)\n * if they are available within the currently executing environment.\n * When executing within the Node.js runtime these APIs are unavailable will be `undefined`\n * unless the API is provided via polyfill.\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Window/self\n * @ignore\n */\nexport function getGlobalObjects<K extends Extract<keyof Window, string>>(\n  names: K[],\n  { throwIfUnavailable, usageDesc, returnEmptyObject }: GetGlobalObjectOptions = {}\n): Pick<Window, K> {\n  let globalScope: Window | undefined;\n  try {\n    globalScope = getGlobalScope();\n  } catch (error) {\n    Logger.error(`Error getting global scope: ${error}`);\n    if (throwIfUnavailable) {\n      const errMsg = getAPIUsageErrorMessage(globalScope, names[0].toString(), usageDesc);\n      Logger.error(errMsg);\n      throw errMsg;\n    } else if (returnEmptyObject) {\n      globalScope = {} as any;\n    }\n  }\n\n  const result: Pick<Window, K> = {} as any;\n  for (let i = 0; i < names.length; i++) {\n    const name = names[i];\n    try {\n      if (globalScope) {\n        const obj = globalScope[name];\n        if (obj) {\n          result[name] = obj;\n        } else if (throwIfUnavailable) {\n          const errMsg = getAPIUsageErrorMessage(globalScope, name.toString(), usageDesc);\n          Logger.error(errMsg);\n          throw new Error(errMsg);\n        } else if (returnEmptyObject) {\n          result[name] = {} as any;\n        }\n      }\n    } catch (error) {\n      if (throwIfUnavailable) {\n        const errMsg = getAPIUsageErrorMessage(globalScope, name.toString(), usageDesc);\n        Logger.error(errMsg);\n        throw new Error(errMsg);\n      }\n    }\n  }\n  return result;\n}\n\n/** Different Integer representations */\nexport type IntegerType = number | string | bigint | Uint8Array;\n\n/**\n * Converts an integer-compatible value to a Uint8Array (given a byte length)\n * @example\n * ```ts\n * import { intToBytes } from \"@stacks/common\";\n * console.log(intToBytes(560, 4));\n * // Uint8Array(4) [ 0, 0, 2, 48 ]\n * ```\n */\nexport function intToBytes(value: IntegerType, byteLength: number): Uint8Array {\n  return bigIntToBytes(intToBigInt(value), byteLength);\n}\n\n/**\n * Converts an integer-compatible value to a bigint\n * @param value - The value to convert to a bigint\n * @returns The bigint representation of the value\n *\n * @example\n * ```ts\n * intToBigInt(123); // 123n\n * intToBigInt('0xbeef'); // 48879n\n * ```\n */\nexport function intToBigInt(value: IntegerType): bigint {\n  if (typeof value === 'bigint') return value;\n  if (typeof value === 'string') return BigInt(value);\n  if (typeof value === 'number') {\n    if (!Number.isInteger(value)) {\n      throw new RangeError(`Invalid value. Values of type 'number' must be an integer.`);\n    }\n    if (value > Number.MAX_SAFE_INTEGER) {\n      throw new RangeError(\n        `Invalid value. Values of type 'number' must be less than or equal to ${Number.MAX_SAFE_INTEGER}. For larger values, try using a BigInt instead.`\n      );\n    }\n    return BigInt(value);\n  }\n\n  if (isInstance(value, Uint8Array)) return BigInt(`0x${bytesToHex(value)}`);\n\n  throw new TypeError(\n    `intToBigInt: Invalid value type. Must be a number, bigint, BigInt-compatible string, or Uint8Array.`\n  );\n}\n\n/**\n * Adds a `0x` prefix to a string if it does not already have one.\n */\nexport function with0x(value: string): string {\n  return /^0x/i.test(value) // startsWith('0x') case insensitive\n    ? value\n    : `0x${value}`;\n}\n\n/**\n * Removes the `0x` prefix of a string if it has one.\n */\nexport function without0x(value: string): string {\n  return /^0x/i.test(value) // startsWith('0x') case insensitive\n    ? value.slice(2)\n    : value;\n}\n\n/**\n * Converts hex input string to bigint\n * @param hex - hex input string without 0x prefix and in big endian format\n * @example \"6c7cde4d702830c1db34ef7c19e2776f59107afef39084776fc88bc78dbb9656\"\n * @ignore\n */\nexport function hexToBigInt(hex: string): bigint {\n  if (typeof hex !== 'string')\n    throw new TypeError(`hexToBigInt: expected string, got ${typeof hex}`);\n  // Big Endian\n  return BigInt(`0x${hex}`);\n}\n\n/**\n * Converts IntegerType to hex string\n */\nexport function intToHex(integer: IntegerType, byteLength = 8): string {\n  const value = typeof integer === 'bigint' ? integer : intToBigInt(integer);\n  return value.toString(16).padStart(byteLength * 2, '0');\n}\n\n/**\n * Converts hex string to integer\n */\nexport function hexToInt(hex: string): number {\n  return parseInt(hex, 16);\n}\n\n/**\n * Converts bigint to byte array\n * @param value bigint value to be converted\n * @param length byte array optional length\n * @return {Uint8Array} byte array\n */\nexport function bigIntToBytes(value: bigint, length: number = 16): Uint8Array {\n  const hex = intToHex(value, length);\n  return hexToBytes(hex);\n}\n\n/**\n * Converts from signed number to two's complement\n * MIN_VALUE = -(1 << (width - 1))\n * MAX_VALUE =  (1 << (width - 1)) - 1\n * @ignore\n */\nexport function toTwos(value: bigint, width: bigint): bigint {\n  if (\n    value < -(BigInt(1) << (width - BigInt(1))) ||\n    (BigInt(1) << (width - BigInt(1))) - BigInt(1) < value\n  ) {\n    throw `Unable to represent integer in width: ${width}`;\n  }\n  if (value >= BigInt(0)) {\n    return BigInt(value);\n  }\n  return value + (BigInt(1) << width);\n}\n\n/**\n * Returns nth bit (right-to-left, zero-indexed)\n */\nfunction nthBit(value: bigint, n: bigint) {\n  return value & (BigInt(1) << n);\n}\n\n/** @ignore */\nexport function bytesToTwosBigInt(bytes: Uint8Array): bigint {\n  return fromTwos(BigInt(`0x${bytesToHex(bytes)}`), BigInt(bytes.byteLength * 8));\n}\n\n/**\n * Converts from two's complement to signed number\n * @internal\n */\nexport function fromTwos(value: bigint, width: bigint) {\n  if (nthBit(value, width - BigInt(1))) {\n    return value - (BigInt(1) << width);\n  }\n  return value;\n}\n\n// The following methods are based on `@noble/hashes` implementation\n// https://github.com/paulmillr/noble-hashes\n// Copyright (c) 2022 Paul Miller (https://paulmillr.com)\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the “Software”), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\nconst hexes = Array.from({ length: 256 }, (_, i) => i.toString(16).padStart(2, '0'));\n\n/**\n * Converts bytes to the equivalent hex string\n * @example\n * ```\n * bytesToHex(Uint8Array.from([0xde, 0xad, 0xbe, 0xef])) // 'deadbeef'\n * ```\n */\nexport function bytesToHex(uint8a: Uint8Array): string {\n  // pre-caching improves the speed 6x\n  if (!(uint8a instanceof Uint8Array)) throw new Error('Uint8Array expected');\n  let hex = '';\n  for (const u of uint8a) {\n    hex += hexes[u];\n  }\n  return hex;\n}\n\n/**\n * Converts a hex string to the equivalent bytes\n * @example\n * ```\n * hexToBytes('deadbeef') // Uint8Array(4) [ 222, 173, 190, 239 ]\n * hexToBytes('0xdeadbeef') // Uint8Array(4) [ 222, 173, 190, 239 ]\n * ```\n */\nexport function hexToBytes(hex: string): Uint8Array {\n  if (typeof hex !== 'string') {\n    throw new TypeError(`hexToBytes: expected string, got ${typeof hex}`);\n  }\n\n  hex = without0x(hex);\n  hex = hex.length % 2 ? `0${hex}` : hex; // left pad with a zero if odd length\n\n  const array = new Uint8Array(hex.length / 2);\n  for (let i = 0; i < array.length; i++) {\n    const j = i * 2;\n    const hexByte = hex.slice(j, j + 2);\n    const byte = Number.parseInt(hexByte, 16);\n    if (Number.isNaN(byte) || byte < 0) throw new Error('Invalid byte sequence');\n    array[i] = byte;\n  }\n  return array;\n}\n\ndeclare const TextEncoder: any;\ndeclare const TextDecoder: any;\n\n/**\n * Converts a UTF-8 string to the equivalent bytes\n * @example\n * ```\n * utf8ToBytes('stacks Ӿ'); // Uint8Array(9) [ 115, 116, 97, 99, 107, 115, 32, 211, 190 ];\n * ```\n */\nexport function utf8ToBytes(str: string): Uint8Array {\n  return new TextEncoder().encode(str);\n}\n\n/**\n * Converts bytes to the equivalent UTF-8 string\n * @example\n * ```\n * bytesToUtf8(Uint8Array.from([115, 116, 97, 99, 107, 115, 32, 211, 190])); // 'stacks Ӿ'\n * ```\n */\nexport function bytesToUtf8(arr: Uint8Array): string {\n  return new TextDecoder().decode(arr);\n}\n\n/**\n * Converts an ASCII string to the equivalent bytes\n * @example\n * ```\n * asciiToBytes('stacks $'); // Uint8Array(8) [ 115, 116, 97, 99, 107, 115, 32, 36 ]\n * ```\n */\nexport function asciiToBytes(str: string) {\n  const byteArray = [];\n  for (let i = 0; i < str.length; i++) {\n    byteArray.push(str.charCodeAt(i) & 0xff); // ignore second bytes of UTF-16 character\n  }\n  return new Uint8Array(byteArray);\n}\n\n/**\n * Converts bytes to the equivalent ASCII string\n * @example\n * ```\n * bytesToAscii(Uint8Array.from([115, 116, 97, 99, 107, 115, 32, 36])); // 'stacks $'\n * ```\n */\nexport function bytesToAscii(arr: Uint8Array) {\n  return String.fromCharCode.apply(null, arr as any as number[]);\n}\n\nfunction isNotOctet(octet: number) {\n  return !Number.isInteger(octet) || octet < 0 || octet > 255;\n}\n\n/** @ignore */\nexport function octetsToBytes(numbers: number[]) {\n  if (numbers.some(isNotOctet)) throw new Error('Some values are invalid bytes.');\n  return new Uint8Array(numbers);\n}\n\n/**\n * Concats Uint8Array-s into one; like `Buffer.concat([buf1, buf2])`\n * @example concatBytes(buf1, buf2)\n * @ignore\n */\nexport function concatBytes(...arrays: Uint8Array[]): Uint8Array {\n  if (!arrays.every(a => a instanceof Uint8Array)) throw new Error('Uint8Array list expected');\n  if (arrays.length === 1) return arrays[0];\n  const length = arrays.reduce((a, arr) => a + arr.length, 0);\n  const result = new Uint8Array(length);\n  for (let i = 0, pad = 0; i < arrays.length; i++) {\n    const arr = arrays[i];\n    result.set(arr, pad);\n    pad += arr.length;\n  }\n  return result;\n}\n\n/** @ignore */\nexport function concatArray(elements: (Uint8Array | number[] | number)[]) {\n  return concatBytes(\n    ...elements.map(e => {\n      if (typeof e === 'number') return octetsToBytes([e]);\n      if (e instanceof Array) return octetsToBytes(e);\n      return e;\n    })\n  );\n}\n\n/**\n * Better `instanceof` check for types in different environments\n * @ignore\n */\nexport function isInstance<T>(object: any, clazz: { new (...args: any[]): T }): object is T {\n  return object instanceof clazz || object?.constructor?.name?.toLowerCase() === clazz.name;\n}\n\n/**\n * Checks whether a string is a valid hex string, and has a length of 64 characters.\n */\nexport function validateHash256(hex: string): boolean {\n  hex = without0x(hex);\n  if (hex.length !== 64) return false;\n  return /^[0-9a-fA-F]+$/.test(hex);\n}\n", "export const HIRO_MAINNET_URL = 'https://api.mainnet.hiro.so';\nexport const HIRO_TESTNET_URL = 'https://api.testnet.hiro.so';\nexport const DEVNET_URL = 'http://localhost:3999';\n\nexport const GAIA_URL = 'https://hub.blockstack.org';\n\n// todo: deduplicate magic variables\n\n/** @ignore internal */\nexport const PRIVATE_KEY_BYTES_COMPRESSED = 33;\n\n/** @ignore internal */\nexport const PRIVATE_KEY_BYTES_UNCOMPRESSED = 32;\n", "// Define default request options and allow modification using getters, setters\n// Reference: https://developer.mozilla.org/en-US/docs/Web/API/Request/Request\nconst defaultFetchOpts: RequestInit = {\n  // By default referrer value will be client:origin: above reference link\n  // https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Referrer-Policy\n  referrerPolicy: 'origin', // Use origin value for referrer policy\n  headers: {\n    'x-hiro-product': 'stacksjs',\n  },\n};\n\n/**\n * Get fetch options\n * @category Network\n */\nexport const getFetchOptions = () => {\n  return defaultFetchOpts;\n};\n\n/**\n * Sets global fetch options for stacks.js network calls.\n *\n * @example\n * Users can change the default referrer as well as other options when fetch is used internally by stacks.js:\n * ```\n * setFetchOptions({ referrer: 'no-referrer', referrerPolicy: 'no-referrer', ...otherRequestOptions });\n * ```\n * After calling {@link setFetchOptions} all subsequent network calls will use the specified options above.\n *\n * @see MDN Request: https://developer.mozilla.org/en-US/docs/Web/API/Request/Request\n * @returns global fetch options after merging with previous options (or defaults)\n * @category Network\n * @related {@link getFetchOptions}\n */\nexport const setFetchOptions = (ops: RequestInit): RequestInit => {\n  return Object.assign(defaultFetchOpts, ops);\n};\n\n/** @ignore */\nexport async function fetchWrapper(input: RequestInfo, init?: RequestInit): Promise<Response> {\n  const fetchOpts = {};\n  // Use the provided options in request options along with default or user provided values\n  Object.assign(fetchOpts, defaultFetchOpts, init);\n\n  const fetchResult = await fetch(input, fetchOpts);\n  return fetchResult;\n}\n\nexport type FetchFn = (url: string, init?: RequestInit) => Promise<Response>;\n\n/**\n * @ignore Internally used for letting networking functions specify \"API\" options.\n * Should be compatible with the `client`s created by the API and RPC packages.\n */\nexport interface ClientOpts {\n  baseUrl?: string;\n  fetch?: FetchFn;\n}\n\n/** @ignore Internally used for letting networking functions specify \"API\" options */\nexport interface ClientParam {\n  /** Optional API object (for `.baseUrl` and `.fetch`) used for API/Node, defaults to use mainnet */\n  client?: ClientOpts;\n}\n\nexport interface RequestContext {\n  fetch: FetchFn;\n  url: string;\n  init: RequestInit;\n}\n\nexport interface ResponseContext {\n  fetch: FetchFn;\n  url: string;\n  init: RequestInit;\n  response: Response;\n}\n\nexport interface FetchParams {\n  url: string;\n  init: RequestInit;\n}\n\nexport interface FetchMiddleware {\n  pre?: (context: RequestContext) => PromiseLike<FetchParams | void> | FetchParams | void;\n  post?: (context: ResponseContext) => Promise<Response | void> | Response | void;\n}\nexport interface ApiKeyMiddlewareOpts {\n  /** The middleware / API key header will only be added to requests matching this host. */\n  host?: RegExp | string;\n  /** The http header name used for specifying the API key value. */\n  httpHeader?: string;\n  /** The API key string to specify as an http header value. */\n  apiKey: string;\n}\n\n/** @ignore */\nexport function hostMatches(host: string, pattern: string | RegExp) {\n  if (typeof pattern === 'string') return pattern === host;\n  return pattern.exec(host);\n}\n\n/**\n * Creates a new middleware from an API key.\n * @example\n * ```\n * const apiMiddleware = createApiKeyMiddleware(\"example_e8e044a3_41d8b0fe_3dd3988ef302\");\n * const fetchFn = createFetchFn(apiMiddleware);\n * const network = new StacksMainnet({ fetchFn });\n * ```\n * @category Network\n * @related {@link createFetchFn}, {@link StacksNetwork}\n */\nexport function createApiKeyMiddleware({\n  apiKey,\n  host = /(.*)api(.*)(\\.stacks\\.co|\\.hiro\\.so)$/i,\n  httpHeader = 'x-api-key',\n}: ApiKeyMiddlewareOpts): FetchMiddleware {\n  return {\n    pre: context => {\n      const reqUrl = new URL(context.url);\n      if (!hostMatches(reqUrl.host, host)) return; // Skip middleware if host does not match pattern\n\n      const headers =\n        context.init.headers instanceof Headers\n          ? context.init.headers\n          : (context.init.headers = new Headers(context.init.headers));\n      headers.set(httpHeader, apiKey);\n    },\n  };\n}\n\nfunction argsForCreateFetchFn(args: any[]): { fetchLib: FetchFn; middlewares: FetchMiddleware[] } {\n  let fetchLib: FetchFn = fetchWrapper;\n  let middlewares: FetchMiddleware[] = [];\n  if (args.length > 0 && typeof args[0] === 'function') {\n    fetchLib = args.shift();\n  }\n  if (args.length > 0) {\n    middlewares = args; // remaining args\n  }\n  return { fetchLib, middlewares };\n}\n\n/**\n * Creates a new network fetching function, which combines an optional fetch-compatible library with optional middleware.\n * @example\n * ```\n * const customFetch = createFetchFn(someMiddleware)\n * const customFetch = createFetchFn(fetch, someMiddleware)\n * const customFetch = createFetchFn(fetch, middlewareA, middlewareB)\n * ```\n * @category Network\n */\nexport function createFetchFn(fetchLib: FetchFn, ...middleware: FetchMiddleware[]): FetchFn;\nexport function createFetchFn(...middleware: FetchMiddleware[]): FetchFn;\nexport function createFetchFn(...args: any[]): FetchFn {\n  const { fetchLib, middlewares } = argsForCreateFetchFn(args);\n\n  const fetchFn = async (url: string, init?: RequestInit | undefined): Promise<Response> => {\n    let fetchParams = { url, init: init ?? {} };\n\n    for (const middleware of middlewares) {\n      if (typeof middleware.pre === 'function') {\n        const result = await Promise.resolve(\n          middleware.pre({\n            fetch: fetchLib,\n            ...fetchParams,\n          })\n        );\n        fetchParams = result ?? fetchParams;\n      }\n    }\n\n    let response = await fetchLib(fetchParams.url, fetchParams.init);\n\n    for (const middleware of middlewares) {\n      if (typeof middleware.post === 'function') {\n        const result = await Promise.resolve(\n          middleware.post({\n            fetch: fetchLib,\n            url: fetchParams.url,\n            init: fetchParams.init,\n            response: response?.clone() ?? response,\n          })\n        );\n        response = result ?? response;\n      }\n    }\n    return response;\n  };\n  return fetchFn;\n}\n\n// /** @ignore Creates a client-like object, which can be used without circular dependencies */\n// export function defaultClientOpts(opts?: { baseUrl?: string; fetch?: FetchFn }) {\n//   return {\n//     baseUrl: opts?.baseUrl ?? HIRO_MAINNET_URL,\n//     fetch: opts?.fetch ?? createFetchFn(),\n//   };\n// }\n", "import { DEFAULT_SCOPE, DEFAULT_BLOCKSTACK_HOST, AuthScope } from './constants';\nimport { getGlobalObject } from '@stacks/common';\n\n/**\n * Configuration data for the current app.\n *\n * On browser platforms, creating an instance of this\n * class without any arguments will use\n * `window.location.origin` as the app domain.\n * On non-browser platforms, you need to\n * specify an app domain as the second argument.\n *\n */\nexport class AppConfig {\n  /**\n   * Blockstack apps are uniquely identified by their app domain.\n   *\n   */\n  appDomain?: string;\n\n  /**\n   * An array of string representing permissions requested by the app.\n   *\n   */\n  scopes: (AuthScope | string)[];\n\n  /**\n   * Path on app domain to redirect users to after authentication. The\n   * authentication response token will be postpended in a query.\n   *\n   */\n  redirectPath: string;\n\n  /**\n   * Path relative to app domain of app's manifest file.\n   *\n   * This file needs to have CORS headers set so that it can be fetched\n   * from any origin. Typically this means return the header `Access-Control-Allow-Origin: *`.\n   *\n   */\n  manifestPath: string;\n\n  /**\n   * The URL of Blockstack core node to use for this app. If this is\n   * `null`, the core node specified by the user or default core node\n   * will be used.\n   *\n   */\n  coreNode?: string;\n\n  /**\n   * The URL of a web-based Blockstack Authenticator to use in the event\n   * the user doesn't have Blockstack installed on their machine. If this\n   * is not specified, the current default in this library will be used.\n   *\n   */\n  authenticatorURL?: string;\n\n  /**\n   * @param {Array<string>} scopes - permissions this app is requesting\n   * @param {string} appDomain - the app domain\n   * @param {string} redirectPath - path on app domain to redirect users to after authentication\n   * @param {string} manifestPath - path relative to app domain of app's manifest file\n   * @param {string | undefined} coreNode - override the default or user selected core node\n   * @param {string} authenticatorURL - the web-based fall back authenticator\n   * ([[DEFAULT_BLOCKSTACK_HOST]])\n   */\n  constructor(\n    scopes: string[] = DEFAULT_SCOPE.slice(),\n    appDomain: string | undefined = getGlobalObject('location', { returnEmptyObject: true })\n      ?.origin,\n    redirectPath = '',\n    manifestPath = '/manifest.json',\n    coreNode: string | undefined = undefined,\n    authenticatorURL: string = DEFAULT_BLOCKSTACK_HOST\n  ) {\n    this.appDomain = appDomain;\n    this.scopes = scopes;\n    this.redirectPath = redirectPath;\n    this.manifestPath = manifestPath;\n    this.coreNode = coreNode;\n    this.authenticatorURL = authenticatorURL;\n  }\n\n  /**\n   * The location to which the authenticator should\n   * redirect the user.\n   * @returns {string} - URI\n   */\n  redirectURI(): string {\n    return `${this.appDomain}${this.redirectPath}`;\n  }\n\n  /**\n   * The location of the app's manifest file.\n   * @returns {string} - URI\n   */\n  manifestURI(): string {\n    return `${this.appDomain}${this.manifestPath}`;\n  }\n}\n", "/**\n * @ignore\n */\nexport const ERROR_CODES = {\n  MISSING_PARAMETER: 'missing_parameter',\n  REMOTE_SERVICE_ERROR: 'remote_service_error',\n  INVALID_STATE: 'invalid_state',\n  NO_SESSION_DATA: 'no_session_data',\n  DOES_NOT_EXIST: 'does_not_exist',\n  FAILED_DECRYPTION_ERROR: 'failed_decryption_error',\n  INVALID_DID_ERROR: 'invalid_did_error',\n  NOT_ENOUGH_FUNDS_ERROR: 'not_enough_error',\n  INVALID_AMOUNT_ERROR: 'invalid_amount_error',\n  LOGIN_FAILED_ERROR: 'login_failed',\n  SIGNATURE_VERIFICATION_ERROR: 'signature_verification_failure',\n  CONFLICT_ERROR: 'conflict_error',\n  NOT_ENOUGH_PROOF_ERROR: 'not_enough_proof_error',\n  BAD_PATH_ERROR: 'bad_path_error',\n  VALIDATION_ERROR: 'validation_error',\n  PAYLOAD_TOO_LARGE_ERROR: 'payload_too_large_error',\n  PRECONDITION_FAILED_ERROR: 'precondition_failed_error',\n  UNKNOWN: 'unknown',\n};\n\nObject.freeze(ERROR_CODES);\n\n/**\n * @ignore\n */\ntype ErrorData = {\n  code: string;\n  parameter?: string;\n  message: string;\n};\n\n/**\n * @ignore\n */\nexport class BlockstackError extends Error {\n  message: string;\n\n  code: string;\n\n  parameter?: string;\n\n  constructor(error: ErrorData) {\n    super();\n    let message = error.message;\n    let bugDetails = `Error Code: ${error.code}`;\n    let stack = this.stack;\n    if (!stack) {\n      try {\n        throw new Error();\n      } catch (e: any) {\n        stack = e.stack;\n      }\n    } else {\n      bugDetails += `Stack Trace:\\n${stack}`;\n    }\n    message += `\\nIf you believe this exception is caused by a bug in stacks.js,\n      please file a bug report: https://github.com/blockstack/stacks.js/issues\\n\\n${bugDetails}`;\n    this.message = message;\n    this.code = error.code;\n    this.parameter = error.parameter ? error.parameter : undefined;\n  }\n\n  toString() {\n    return `${super.toString()}\n    code: ${this.code} param: ${this.parameter ? this.parameter : 'n/a'}`;\n  }\n}\n\n/**\n * @ignore\n */\nexport class InvalidParameterError extends BlockstackError {\n  constructor(parameter: string, message: string = '') {\n    super({ code: ERROR_CODES.MISSING_PARAMETER, message, parameter });\n    this.name = 'MissingParametersError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class MissingParameterError extends BlockstackError {\n  constructor(parameter: string, message: string = '') {\n    super({ code: ERROR_CODES.MISSING_PARAMETER, message, parameter });\n    this.name = 'MissingParametersError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class RemoteServiceError extends BlockstackError {\n  response: Response;\n\n  constructor(response: Response, message: string = '') {\n    super({ code: ERROR_CODES.REMOTE_SERVICE_ERROR, message });\n    this.response = response;\n  }\n}\n\n/**\n * @ignore\n */\nexport class InvalidDIDError extends BlockstackError {\n  constructor(message: string = '') {\n    super({ code: ERROR_CODES.INVALID_DID_ERROR, message });\n    this.name = 'InvalidDIDError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class NotEnoughFundsError extends BlockstackError {\n  leftToFund: number;\n\n  constructor(leftToFund: number) {\n    const message = `Not enough UTXOs to fund. Left to fund: ${leftToFund}`;\n    super({ code: ERROR_CODES.NOT_ENOUGH_FUNDS_ERROR, message });\n    this.leftToFund = leftToFund;\n    this.name = 'NotEnoughFundsError';\n    this.message = message;\n  }\n}\n\n/**\n * @ignore\n */\nexport class InvalidAmountError extends BlockstackError {\n  fees: number;\n\n  specifiedAmount: number;\n\n  constructor(fees: number, specifiedAmount: number) {\n    const message =\n      `Not enough coin to fund fees transaction fees. Fees would be ${fees},` +\n      ` specified spend is  ${specifiedAmount}`;\n    super({ code: ERROR_CODES.INVALID_AMOUNT_ERROR, message });\n    this.specifiedAmount = specifiedAmount;\n    this.fees = fees;\n    this.name = 'InvalidAmountError';\n    this.message = message;\n  }\n}\n\n/**\n * @ignore\n */\nexport class LoginFailedError extends BlockstackError {\n  constructor(reason: string) {\n    const message = `Failed to login: ${reason}`;\n    super({ code: ERROR_CODES.LOGIN_FAILED_ERROR, message });\n    this.message = message;\n    this.name = 'LoginFailedError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class SignatureVerificationError extends BlockstackError {\n  constructor(reason: string) {\n    const message = `Failed to verify signature: ${reason}`;\n    super({ code: ERROR_CODES.SIGNATURE_VERIFICATION_ERROR, message });\n    this.message = message;\n    this.name = 'SignatureVerificationError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class FailedDecryptionError extends BlockstackError {\n  constructor(message: string = 'Unable to decrypt cipher object.') {\n    super({ code: ERROR_CODES.FAILED_DECRYPTION_ERROR, message });\n    this.message = message;\n    this.name = 'FailedDecryptionError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class InvalidStateError extends BlockstackError {\n  constructor(message: string) {\n    super({ code: ERROR_CODES.INVALID_STATE, message });\n    this.message = message;\n    this.name = 'InvalidStateError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class NoSessionDataError extends BlockstackError {\n  constructor(message: string) {\n    super({ code: ERROR_CODES.INVALID_STATE, message });\n    this.message = message;\n    this.name = 'NoSessionDataError';\n  }\n}\n\n/**\n * @ignore\n */\nexport interface GaiaHubErrorResponse {\n  status: number;\n  statusText: string;\n  body?: any; // todo: should this be string?\n}\n\nexport interface HubErrorDetails {\n  message?: string;\n  statusCode: number;\n  statusText: string;\n  [prop: string]: any;\n}\n\n/**\n * @ignore\n */\nexport class GaiaHubError extends BlockstackError {\n  hubError?: HubErrorDetails;\n\n  constructor(error: ErrorData, response: GaiaHubErrorResponse) {\n    super(error);\n    if (response) {\n      this.hubError = {\n        statusCode: response.status,\n        statusText: response.statusText,\n      };\n      if (typeof response.body === 'string') {\n        this.hubError.message = response.body;\n      } else if (typeof response.body === 'object') {\n        Object.assign(this.hubError, response.body);\n      }\n    }\n  }\n}\n\n/**\n * @ignore\n */\nexport class DoesNotExist extends GaiaHubError {\n  constructor(message: string, response: GaiaHubErrorResponse) {\n    super({ message, code: ERROR_CODES.DOES_NOT_EXIST }, response);\n    this.name = 'DoesNotExist';\n  }\n}\n\n/**\n * @ignore\n */\nexport class ConflictError extends GaiaHubError {\n  constructor(message: string, response: GaiaHubErrorResponse) {\n    super({ message, code: ERROR_CODES.CONFLICT_ERROR }, response);\n    this.name = 'ConflictError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class NotEnoughProofError extends GaiaHubError {\n  constructor(message: string, response: GaiaHubErrorResponse) {\n    super({ message, code: ERROR_CODES.NOT_ENOUGH_PROOF_ERROR }, response);\n    this.name = 'NotEnoughProofError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class BadPathError extends GaiaHubError {\n  constructor(message: string, response: GaiaHubErrorResponse) {\n    super({ message, code: ERROR_CODES.BAD_PATH_ERROR }, response);\n    this.name = 'BadPathError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class ValidationError extends GaiaHubError {\n  constructor(message: string, response: GaiaHubErrorResponse) {\n    super({ message, code: ERROR_CODES.VALIDATION_ERROR }, response);\n    this.name = 'ValidationError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class PayloadTooLargeError extends GaiaHubError {\n  /** Can be `null` when an oversized payload is detected client-side. */\n  hubError?: HubErrorDetails;\n\n  maxUploadByteSize: number;\n\n  constructor(message: string, response: GaiaHubErrorResponse | null, maxUploadByteSize: number) {\n    super({ message, code: ERROR_CODES.PAYLOAD_TOO_LARGE_ERROR }, response!);\n    this.name = 'PayloadTooLargeError';\n    this.maxUploadByteSize = maxUploadByteSize;\n  }\n}\n\n/**\n * @ignore\n */\nexport class PreconditionFailedError extends GaiaHubError {\n  constructor(message: string, response: GaiaHubErrorResponse) {\n    super({ message, code: ERROR_CODES.PRECONDITION_FAILED_ERROR }, response);\n    this.name = 'PreconditionFailedError';\n  }\n}\n", "import { config } from './config';\n\nconst levels = ['debug', 'info', 'warn', 'error', 'none'];\n\nconst levelToInt: { [level: string]: number } = {};\nconst intToLevel: { [int: number]: string } = {};\n\nfor (let index = 0; index < levels.length; index++) {\n  const level = levels[index];\n  levelToInt[level] = index;\n  intToLevel[index] = level;\n}\n\n/**\n * @ignore\n * @deprecated\n */\nexport class Logger {\n  static error(message: string) {\n    if (!this.shouldLog('error')) return;\n    console.error(this.logMessage('error', message));\n  }\n\n  static warn(message: string) {\n    if (!this.shouldLog('warn')) return;\n    console.warn(this.logMessage('warn', message));\n  }\n\n  static info(message: string) {\n    if (!this.shouldLog('info')) return;\n    console.log(this.logMessage('info', message));\n  }\n\n  static debug(message: string) {\n    if (!this.shouldLog('debug')) return;\n    console.log(this.logMessage('debug', message));\n  }\n\n  static logMessage(level: string, message: string) {\n    return `[${level.toUpperCase()}] ${message}`;\n  }\n\n  static shouldLog(level: string) {\n    const currentLevel = levelToInt[config.logLevel];\n    return currentLevel <= levelToInt[level];\n  }\n}\n", "import { Logger } from './logger';\n\n/**\n *  @ignore\n * @deprecated\n */\nexport const BLOCKSTACK_HANDLER = 'blockstack';\n// todo: `next` get rid of all this blockstack stuff\n\n/**\n * Time\n * @private\n * @ignore\n * @deprecated\n */\nexport function nextYear() {\n  return new Date(new Date().setFullYear(new Date().getFullYear() + 1));\n}\n\n/**\n * Time\n * @private\n * @ignore\n * @deprecated\n */\nexport function nextMonth() {\n  return new Date(new Date().setMonth(new Date().getMonth() + 1));\n}\n\n/**\n * Time\n * @private\n * @ignore\n * @deprecated\n */\nexport function nextHour() {\n  return new Date(new Date().setHours(new Date().getHours() + 1));\n}\n\n/**\n * Converts megabytes to bytes. Returns 0 if the input is not a finite number.\n * @ignore\n * @deprecated\n */\nexport function megabytesToBytes(megabytes: number): number {\n  if (!Number.isFinite(megabytes)) {\n    return 0;\n  }\n  return Math.floor(megabytes * 1024 * 1024);\n}\n\n/**\n * Calculate the AES-CBC ciphertext output byte length a given input length.\n * AES has a fixed block size of 16-bytes regardless key size.\n * @ignore\n * @deprecated\n */\nexport function getAesCbcOutputLength(inputByteLength: number) {\n  // AES-CBC block mode rounds up to the next block size.\n  const cipherTextLength = (Math.floor(inputByteLength / 16) + 1) * 16;\n  return cipherTextLength;\n}\n\n/**\n * Calculate the base64 encoded string length for a given input length.\n * This is equivalent to the byte length when the string is ASCII or UTF8-8\n * encoded.\n * @param number\n * @deprecated\n */\nexport function getBase64OutputLength(inputByteLength: number) {\n  const encodedLength = Math.ceil(inputByteLength / 3) * 4;\n  return encodedLength;\n}\n\n/**\n * Query Strings\n * @private\n * @ignore\n * @deprecated\n */\nexport function updateQueryStringParameter(uri: string, key: string, value: string) {\n  const re = new RegExp(`([?&])${key}=.*?(&|$)`, 'i');\n  const separator = uri.indexOf('?') !== -1 ? '&' : '?';\n  if (uri.match(re)) {\n    return uri.replace(re, `$1${key}=${value}$2`);\n  } else {\n    return `${uri}${separator}${key}=${value}`;\n  }\n}\n\n/**\n * Versioning\n * @param {string} v1 - the left half of the version inequality\n * @param {string} v2 - right half of the version inequality\n * @returns {bool} iff v1 >= v2\n * @private\n * @ignore\n * @deprecated\n */\nexport function isLaterVersion(v1: string, v2: string) {\n  if (v1 === undefined || v1 === '') {\n    v1 = '0.0.0';\n  }\n\n  if (v2 === undefined || v1 === '') {\n    v2 = '0.0.0';\n  }\n\n  const v1tuple = v1.split('.').map(x => parseInt(x, 10));\n  const v2tuple = v2.split('.').map(x => parseInt(x, 10));\n\n  for (let index = 0; index < v2.length; index++) {\n    if (index >= v1.length) {\n      v2tuple.push(0);\n    }\n    if (v1tuple[index] < v2tuple[index]) {\n      return false;\n    }\n  }\n  return true;\n}\n\n/**\n * UUIDs\n * @private\n * @ignore\n * @deprecated\n */\nexport function makeUUID4() {\n  let d = new Date().getTime();\n  if (typeof performance !== 'undefined' && typeof performance.now === 'function') {\n    d += performance.now(); // use high-precision timer if available\n  }\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\n    const r = (d + Math.random() * 16) % 16 | 0;\n    d = Math.floor(d / 16);\n    return (c === 'x' ? r : (r & 0x3) | 0x8).toString(16);\n  });\n}\n\n/**\n * Checks if both urls pass the same origin check & are absolute\n * @param  {[type]}  uri1 first uri to check\n * @param  {[type]}  uri2 second uri to check\n * @return {Boolean} true if they pass the same origin check\n * @private\n * @ignore\n * @deprecated\n */\nexport function isSameOriginAbsoluteUrl(uri1: string, uri2: string) {\n  try {\n    const parsedUri1 = new URL(uri1);\n    const parsedUri2 = new URL(uri2);\n\n    const port1 =\n      parseInt(parsedUri1.port || '0', 10) | 0 || (parsedUri1.protocol === 'https:' ? 443 : 80);\n    const port2 =\n      parseInt(parsedUri2.port || '0', 10) | 0 || (parsedUri2.protocol === 'https:' ? 443 : 80);\n\n    const match = {\n      scheme: parsedUri1.protocol === parsedUri2.protocol,\n      hostname: parsedUri1.hostname === parsedUri2.hostname,\n      port: port1 === port2,\n      absolute:\n        (uri1.includes('http://') || uri1.includes('https://')) &&\n        (uri2.includes('http://') || uri2.includes('https://')),\n    };\n\n    return match.scheme && match.hostname && match.port && match.absolute;\n  } catch (error) {\n    console.log(error);\n    console.log('Parsing error in same URL origin check');\n    // Parse error\n    return false;\n  }\n}\n\n/**\n * Returns the global scope `Window`, `WorkerGlobalScope`, or `NodeJS.Global` if available in the\n * currently executing environment.\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Window/self\n * @see https://developer.mozilla.org/en-US/docs/Web/API/WorkerGlobalScope/self\n * @see https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope\n *\n * This could be switched to `globalThis` once it is standardized and widely available.\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/globalThis\n * @ignore\n */\nexport function getGlobalScope(): Window {\n  if (typeof self !== 'undefined') {\n    return self;\n  }\n  if (typeof window !== 'undefined') {\n    return window;\n  }\n  // This function is meant to be called when accessing APIs that are typically only available in\n  // web-browser/DOM environments, but we also want to support situations where running in Node.js\n  // environment, and a polyfill was added to the Node.js `global` object scope without adding the\n  // `window` global object as well.\n  if (typeof global !== 'undefined') {\n    return global as unknown as Window;\n  }\n  throw new Error(\n    'Unexpected runtime environment - no supported global scope (`window`, `self`, `global`) available'\n  );\n}\n\n/** @deprecated */\nfunction getAPIUsageErrorMessage(\n  scopeObject: unknown,\n  apiName: string,\n  usageDesc?: string\n): string {\n  if (usageDesc) {\n    return `Use of '${usageDesc}' requires \\`${apiName}\\` which is unavailable on the '${scopeObject}' object within the currently executing environment.`;\n  } else {\n    return `\\`${apiName}\\` is unavailable on the '${scopeObject}' object within the currently executing environment.`;\n  }\n}\n\ninterface GetGlobalObjectOptions {\n  /**\n   * Throw an error if the object is not found.\n   * @default false\n   */\n  throwIfUnavailable?: boolean;\n  /**\n   * Additional information to include in an error if thrown.\n   */\n  usageDesc?: string;\n  /**\n   * If the object is not found, return an new empty object instead of undefined.\n   * Requires [[throwIfUnavailable]] to be falsey.\n   * @default false\n   */\n  returnEmptyObject?: boolean;\n}\n\n/**\n * Returns an object from the global scope (`Window` or `WorkerGlobalScope`) if it\n * is available within the currently executing environment.\n * When executing within the Node.js runtime these APIs are unavailable and will be\n * `undefined` unless the API is provided via polyfill.\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Window/self\n * @ignore\n */\nexport function getGlobalObject<K extends Extract<keyof Window, string>>(\n  name: K,\n  { throwIfUnavailable, usageDesc, returnEmptyObject }: GetGlobalObjectOptions = {}\n): Window[K] | undefined {\n  let globalScope: Window | undefined = undefined;\n  try {\n    globalScope = getGlobalScope();\n    if (globalScope) {\n      const obj = globalScope[name];\n      if (obj) {\n        return obj;\n      }\n    }\n  } catch (error) {\n    Logger.error(`Error getting object '${name}' from global scope '${globalScope}': ${error}`);\n  }\n  if (throwIfUnavailable) {\n    const errMsg = getAPIUsageErrorMessage(globalScope, name.toString(), usageDesc);\n    Logger.error(errMsg);\n    throw new Error(errMsg);\n  }\n  if (returnEmptyObject) {\n    return {} as any;\n  }\n  return undefined;\n}\n\n/**\n * Returns a specified subset of objects from the global scope (`Window` or `WorkerGlobalScope`)\n * if they are available within the currently executing environment.\n * When executing within the Node.js runtime these APIs are unavailable will be `undefined`\n * unless the API is provided via polyfill.\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Window/self\n * @ignore\n */\nexport function getGlobalObjects<K extends Extract<keyof Window, string>>(\n  names: K[],\n  { throwIfUnavailable, usageDesc, returnEmptyObject }: GetGlobalObjectOptions = {}\n): Pick<Window, K> {\n  let globalScope: Window | undefined;\n  try {\n    globalScope = getGlobalScope();\n  } catch (error) {\n    Logger.error(`Error getting global scope: ${error}`);\n    if (throwIfUnavailable) {\n      const errMsg = getAPIUsageErrorMessage(globalScope, names[0].toString(), usageDesc);\n      Logger.error(errMsg);\n      throw errMsg;\n    } else if (returnEmptyObject) {\n      globalScope = {} as any;\n    }\n  }\n\n  const result: Pick<Window, K> = {} as any;\n  for (let i = 0; i < names.length; i++) {\n    const name = names[i];\n    try {\n      if (globalScope) {\n        const obj = globalScope[name];\n        if (obj) {\n          result[name] = obj;\n        } else if (throwIfUnavailable) {\n          const errMsg = getAPIUsageErrorMessage(globalScope, name.toString(), usageDesc);\n          Logger.error(errMsg);\n          throw new Error(errMsg);\n        } else if (returnEmptyObject) {\n          result[name] = {} as any;\n        }\n      }\n    } catch (error) {\n      if (throwIfUnavailable) {\n        const errMsg = getAPIUsageErrorMessage(globalScope, name.toString(), usageDesc);\n        Logger.error(errMsg);\n        throw new Error(errMsg);\n      }\n    }\n  }\n  return result;\n}\n\n/** Different Integer representations */\nexport type IntegerType = number | string | bigint | Uint8Array;\n\n/**\n * Converts an integer-compatible value to a Uint8Array (given a byte length)\n * @example\n * ```ts\n * import { intToBytes } from \"@stacks/common\";\n * console.log(intToBytes(560, 4));\n * // Uint8Array(4) [ 0, 0, 2, 48 ]\n * ```\n */\nexport function intToBytes(value: IntegerType, byteLength: number): Uint8Array {\n  return bigIntToBytes(intToBigInt(value), byteLength);\n}\n\n/**\n * Converts an integer-compatible value to a bigint\n * @param value - The value to convert to a bigint\n * @returns The bigint representation of the value\n *\n * @example\n * ```ts\n * intToBigInt(123); // 123n\n * intToBigInt('0xbeef'); // 48879n\n * ```\n */\nexport function intToBigInt(value: IntegerType): bigint {\n  if (typeof value === 'bigint') return value;\n  if (typeof value === 'string') return BigInt(value);\n  if (typeof value === 'number') {\n    if (!Number.isInteger(value)) {\n      throw new RangeError(`Invalid value. Values of type 'number' must be an integer.`);\n    }\n    if (value > Number.MAX_SAFE_INTEGER) {\n      throw new RangeError(\n        `Invalid value. Values of type 'number' must be less than or equal to ${Number.MAX_SAFE_INTEGER}. For larger values, try using a BigInt instead.`\n      );\n    }\n    return BigInt(value);\n  }\n\n  if (isInstance(value, Uint8Array)) return BigInt(`0x${bytesToHex(value)}`);\n\n  throw new TypeError(\n    `intToBigInt: Invalid value type. Must be a number, bigint, BigInt-compatible string, or Uint8Array.`\n  );\n}\n\n/**\n * Adds a `0x` prefix to a string if it does not already have one.\n */\nexport function with0x(value: string): string {\n  return /^0x/i.test(value) // startsWith('0x') case insensitive\n    ? value\n    : `0x${value}`;\n}\n\n/**\n * Removes the `0x` prefix of a string if it has one.\n */\nexport function without0x(value: string): string {\n  return /^0x/i.test(value) // startsWith('0x') case insensitive\n    ? value.slice(2)\n    : value;\n}\n\n/**\n * Converts hex input string to bigint\n * @param hex - hex input string without 0x prefix and in big endian format\n * @example \"6c7cde4d702830c1db34ef7c19e2776f59107afef39084776fc88bc78dbb9656\"\n * @ignore\n */\nexport function hexToBigInt(hex: string): bigint {\n  if (typeof hex !== 'string')\n    throw new TypeError(`hexToBigInt: expected string, got ${typeof hex}`);\n  // Big Endian\n  return BigInt(`0x${hex}`);\n}\n\n/**\n * Converts IntegerType to hex string\n */\nexport function intToHex(integer: IntegerType, byteLength = 8): string {\n  const value = typeof integer === 'bigint' ? integer : intToBigInt(integer);\n  return value.toString(16).padStart(byteLength * 2, '0');\n}\n\n/**\n * Converts hex string to integer\n */\nexport function hexToInt(hex: string): number {\n  return parseInt(hex, 16);\n}\n\n/**\n * Converts bigint to byte array\n * @param value bigint value to be converted\n * @param length byte array optional length\n * @return {Uint8Array} byte array\n */\nexport function bigIntToBytes(value: bigint, length: number = 16): Uint8Array {\n  const hex = intToHex(value, length);\n  return hexToBytes(hex);\n}\n\n/**\n * Converts from signed number to two's complement\n * MIN_VALUE = -(1 << (width - 1))\n * MAX_VALUE =  (1 << (width - 1)) - 1\n * @ignore\n */\nexport function toTwos(value: bigint, width: bigint): bigint {\n  if (\n    value < -(BigInt(1) << (width - BigInt(1))) ||\n    (BigInt(1) << (width - BigInt(1))) - BigInt(1) < value\n  ) {\n    throw `Unable to represent integer in width: ${width}`;\n  }\n  if (value >= BigInt(0)) {\n    return BigInt(value);\n  }\n  return value + (BigInt(1) << width);\n}\n\n/**\n * Returns nth bit (right-to-left, zero-indexed)\n */\nfunction nthBit(value: bigint, n: bigint) {\n  return value & (BigInt(1) << n);\n}\n\n/** @ignore */\nexport function bytesToTwosBigInt(bytes: Uint8Array): bigint {\n  return fromTwos(BigInt(`0x${bytesToHex(bytes)}`), BigInt(bytes.byteLength * 8));\n}\n\n/**\n * Converts from two's complement to signed number\n * @internal\n */\nexport function fromTwos(value: bigint, width: bigint) {\n  if (nthBit(value, width - BigInt(1))) {\n    return value - (BigInt(1) << width);\n  }\n  return value;\n}\n\n// The following methods are based on `@noble/hashes` implementation\n// https://github.com/paulmillr/noble-hashes\n// Copyright (c) 2022 Paul Miller (https://paulmillr.com)\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the “Software”), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\nconst hexes = Array.from({ length: 256 }, (_, i) => i.toString(16).padStart(2, '0'));\n\n/**\n * Converts bytes to the equivalent hex string\n * @example\n * ```\n * bytesToHex(Uint8Array.from([0xde, 0xad, 0xbe, 0xef])) // 'deadbeef'\n * ```\n */\nexport function bytesToHex(uint8a: Uint8Array): string {\n  // pre-caching improves the speed 6x\n  if (!(uint8a instanceof Uint8Array)) throw new Error('Uint8Array expected');\n  let hex = '';\n  for (const u of uint8a) {\n    hex += hexes[u];\n  }\n  return hex;\n}\n\n/**\n * Converts a hex string to the equivalent bytes\n * @example\n * ```\n * hexToBytes('deadbeef') // Uint8Array(4) [ 222, 173, 190, 239 ]\n * hexToBytes('0xdeadbeef') // Uint8Array(4) [ 222, 173, 190, 239 ]\n * ```\n */\nexport function hexToBytes(hex: string): Uint8Array {\n  if (typeof hex !== 'string') {\n    throw new TypeError(`hexToBytes: expected string, got ${typeof hex}`);\n  }\n\n  hex = without0x(hex);\n  hex = hex.length % 2 ? `0${hex}` : hex; // left pad with a zero if odd length\n\n  const array = new Uint8Array(hex.length / 2);\n  for (let i = 0; i < array.length; i++) {\n    const j = i * 2;\n    const hexByte = hex.slice(j, j + 2);\n    const byte = Number.parseInt(hexByte, 16);\n    if (Number.isNaN(byte) || byte < 0) throw new Error('Invalid byte sequence');\n    array[i] = byte;\n  }\n  return array;\n}\n\ndeclare const TextEncoder: any;\ndeclare const TextDecoder: any;\n\n/**\n * Converts a UTF-8 string to the equivalent bytes\n * @example\n * ```\n * utf8ToBytes('stacks Ӿ'); // Uint8Array(9) [ 115, 116, 97, 99, 107, 115, 32, 211, 190 ];\n * ```\n */\nexport function utf8ToBytes(str: string): Uint8Array {\n  return new TextEncoder().encode(str);\n}\n\n/**\n * Converts bytes to the equivalent UTF-8 string\n * @example\n * ```\n * bytesToUtf8(Uint8Array.from([115, 116, 97, 99, 107, 115, 32, 211, 190])); // 'stacks Ӿ'\n * ```\n */\nexport function bytesToUtf8(arr: Uint8Array): string {\n  return new TextDecoder().decode(arr);\n}\n\n/**\n * Converts an ASCII string to the equivalent bytes\n * @example\n * ```\n * asciiToBytes('stacks $'); // Uint8Array(8) [ 115, 116, 97, 99, 107, 115, 32, 36 ]\n * ```\n */\nexport function asciiToBytes(str: string) {\n  const byteArray = [];\n  for (let i = 0; i < str.length; i++) {\n    byteArray.push(str.charCodeAt(i) & 0xff); // ignore second bytes of UTF-16 character\n  }\n  return new Uint8Array(byteArray);\n}\n\n/**\n * Converts bytes to the equivalent ASCII string\n * @example\n * ```\n * bytesToAscii(Uint8Array.from([115, 116, 97, 99, 107, 115, 32, 36])); // 'stacks $'\n * ```\n */\nexport function bytesToAscii(arr: Uint8Array) {\n  return String.fromCharCode.apply(null, arr as any as number[]);\n}\n\nfunction isNotOctet(octet: number) {\n  return !Number.isInteger(octet) || octet < 0 || octet > 255;\n}\n\n/** @ignore */\nexport function octetsToBytes(numbers: number[]) {\n  if (numbers.some(isNotOctet)) throw new Error('Some values are invalid bytes.');\n  return new Uint8Array(numbers);\n}\n\n/**\n * Concats Uint8Array-s into one; like `Buffer.concat([buf1, buf2])`\n * @example concatBytes(buf1, buf2)\n * @ignore\n */\nexport function concatBytes(...arrays: Uint8Array[]): Uint8Array {\n  if (!arrays.every(a => a instanceof Uint8Array)) throw new Error('Uint8Array list expected');\n  if (arrays.length === 1) return arrays[0];\n  const length = arrays.reduce((a, arr) => a + arr.length, 0);\n  const result = new Uint8Array(length);\n  for (let i = 0, pad = 0; i < arrays.length; i++) {\n    const arr = arrays[i];\n    result.set(arr, pad);\n    pad += arr.length;\n  }\n  return result;\n}\n\n/** @ignore */\nexport function concatArray(elements: (Uint8Array | number[] | number)[]) {\n  return concatBytes(\n    ...elements.map(e => {\n      if (typeof e === 'number') return octetsToBytes([e]);\n      if (e instanceof Array) return octetsToBytes(e);\n      return e;\n    })\n  );\n}\n\n/**\n * Better `instanceof` check for types in different environments\n * @ignore\n */\nexport function isInstance<T>(object: any, clazz: { new (...args: any[]): T }): object is T {\n  return object instanceof clazz || object?.constructor?.name?.toLowerCase() === clazz.name;\n}\n\n/**\n * Checks whether a string is a valid hex string, and has a length of 64 characters.\n */\nexport function validateHash256(hex: string): boolean {\n  hex = without0x(hex);\n  if (hex.length !== 64) return false;\n  return /^[0-9a-fA-F]+$/.test(hex);\n}\n", "import { hexToBytes } from './utils';\n\nexport type PrivateKey = string | Uint8Array;\nexport type PublicKey = string | Uint8Array;\n\n/**\n * @private\n * @ignore\n */\nexport function privateKeyToBytes(privateKey: PrivateKey): Uint8Array {\n  const privateKeyBuffer = typeof privateKey === 'string' ? hexToBytes(privateKey) : privateKey;\n\n  if (privateKeyBuffer.length != 32 && privateKeyBuffer.length != 33) {\n    throw new Error(\n      `Improperly formatted private-key. Private-key byte length should be 32 or 33. Length provided: ${privateKeyBuffer.length}`\n    );\n  }\n\n  if (privateKeyBuffer.length == 33 && privateKeyBuffer[32] !== 1) {\n    throw new Error(\n      'Improperly formatted private-key. 33 bytes indicate compressed key, but the last byte must be == 01'\n    );\n  }\n\n  return privateKeyBuffer;\n}\n", "import { hmac } from '@noble/hashes/hmac';\nimport { sha256 } from '@noble/hashes/sha256';\nimport {\n  getPublicKey,\n  getSharedSecret,\n  Point,\n  Signature,\n  signSync,\n  utils,\n  verify,\n} from '@noble/secp256k1';\nimport {\n  bigIntToBytes,\n  bytesToHex,\n  bytesToUtf8,\n  concatBytes,\n  FailedDecryptionError,\n  hexToBigInt,\n  hexToBytes,\n  parseRecoverableSignatureVrs,\n  signatureRsvToVrs,\n  utf8ToBytes,\n} from '@stacks/common';\nimport { fromByteArray, toByteArray } from 'base64-js';\nimport { createCipher } from './aesCipher';\nimport { getPublicKeyFromPrivate } from './keys';\nimport { encodeMessage, hashMessage } from './messageSignature';\nimport { hashSha256Sync, hashSha512Sync } from './sha2Hash';\nimport { getAesCbcOutputLength, getBase64OutputLength } from './utils';\n\n/**\n * To use secp256k1.signSync set utils.hmacSha256Sync to a function using noble-hashes\n * secp256k1.signSync is the counter part of secp256k1.sign (async version)\n * secp256k1.signSync is used within signECDSA in this file\n * secp256k1.signSync is used to maintain the semantics of signECDSA while migrating from elliptic lib\n * utils.hmacSha256Sync docs: https://github.com/paulmillr/noble-secp256k1 readme file\n */\nutils.hmacSha256Sync = (key: Uint8Array, ...msgs: Uint8Array[]) => {\n  const h = hmac.create(sha256, key);\n  msgs.forEach(msg => h.update(msg));\n  return h.digest();\n};\n\n/**\n * Controls how the encrypted data bytes will be encoded as a string in the JSON payload.\n * Options:\n *    `hex` -- the legacy default, file size increase 100% (2x).\n *    `base64` -- file size increased ~33%.\n * @ignore\n */\nexport type CipherTextEncoding = 'hex' | 'base64';\n\n/**\n * @ignore\n */\nexport type CipherObject = {\n  iv: string;\n  ephemeralPK: string;\n  cipherText: string;\n  /** If undefined then hex encoding is used for the `cipherText` string. */\n  cipherTextEncoding?: CipherTextEncoding;\n  mac: string;\n  wasString: boolean;\n};\n\n/**\n * @ignore\n */\nexport type SignedCipherObject = {\n  /** Hex encoded DER signature (up to 144 chars) */\n  signature: string;\n  /** Hex encoded public key (66 char length) */\n  publicKey: string;\n  /** The stringified json of a `CipherObject` */\n  cipherText: string;\n};\n\n/**\n * @ignore\n */\nexport enum InvalidPublicKeyReason {\n  InvalidFormat = 'InvalidFormat',\n  IsNotPoint = 'IsNotPoint',\n}\n\n/**\n * @ignore\n */\nexport async function aes256CbcEncrypt(\n  iv: Uint8Array,\n  key: Uint8Array,\n  plaintext: Uint8Array\n): Promise<Uint8Array> {\n  const cipher = await createCipher();\n  return await cipher.encrypt('aes-256-cbc', key, iv, plaintext);\n}\n\n/**\n * @ignore\n */\nasync function aes256CbcDecrypt(\n  iv: Uint8Array,\n  key: Uint8Array,\n  ciphertext: Uint8Array\n): Promise<Uint8Array> {\n  const cipher = await createCipher();\n  return await cipher.decrypt('aes-256-cbc', key, iv, ciphertext);\n}\n\n/**\n * @ignore\n */\nexport function hmacSha256(key: Uint8Array, content: Uint8Array): Uint8Array {\n  return hmac(sha256, key, content);\n}\n\n/**\n * @ignore\n */\nfunction equalsConstTime(a: Uint8Array, b: Uint8Array) {\n  if (a.length !== b.length) {\n    return false;\n  }\n  let res = 0;\n  for (let i = 0; i < a.length; i++) {\n    res |= a[i] ^ b[i];\n  }\n  return res === 0;\n}\n\n/**\n * @ignore\n */\nfunction sharedSecretToKeys(sharedSecret: Uint8Array): {\n  encryptionKey: Uint8Array;\n  hmacKey: Uint8Array;\n} {\n  // generate mac and encryption key from shared secret\n  const hashedSecret = hashSha512Sync(sharedSecret);\n  return {\n    encryptionKey: hashedSecret.slice(0, 32),\n    hmacKey: hashedSecret.slice(32),\n  };\n}\n\n/**\n * @ignore\n */\nfunction allHexChars(maybe: string): boolean {\n  return maybe.match(/^[0-9a-f]+$/i) !== null;\n}\n\n/**\n * @ignore\n */\nfunction isValidPublicKey(pub: string): {\n  result: boolean;\n  reason: string | null;\n  reason_data: string | null;\n} {\n  const invalidFormat = {\n    result: false,\n    reason_data: 'Invalid public key format',\n    reason: InvalidPublicKeyReason.InvalidFormat,\n  };\n  const invalidPoint = {\n    result: false,\n    reason_data: 'Public key is not a point',\n    reason: InvalidPublicKeyReason.IsNotPoint,\n  };\n  if (pub.length !== 66 && pub.length !== 130) return invalidFormat;\n\n  const firstByte = pub.slice(0, 2);\n\n  // uncompressed public key\n  if (pub.length === 130 && firstByte !== '04') return invalidFormat;\n\n  // compressed public key\n  if (pub.length === 66 && firstByte !== '02' && firstByte !== '03') return invalidFormat;\n\n  if (!allHexChars(pub)) return invalidFormat;\n\n  try {\n    // Converts public key to Point\n    const point = Point.fromHex(pub);\n\n    // Verify point on curve is valid if it conforms to equation\n    // Validate the public key\n    // Throws: Point is not on elliptic curve if point is not on curve\n    point.assertValidity();\n\n    // Validation passed\n    return {\n      result: true,\n      reason_data: null,\n      reason: null,\n    };\n  } catch (e) {\n    return invalidPoint;\n  }\n}\n\n/**\n * Hex encodes a 32-byte bigint instance.\n * The result string is zero padded and always 64 characters in length.\n * @ignore @internal @deprecated\n */\nexport function getHexFromBN(bnInput: bigint): string {\n  const hexOut = bnInput.toString(16);\n  if (hexOut.length === 64) {\n    return hexOut;\n  } else if (hexOut.length < 64) {\n    // pad with leading zeros\n    // the padStart function would require node 9\n    const padding = '0'.repeat(64 - hexOut.length);\n    return `${padding}${hexOut}`;\n  } else {\n    throw new Error('Generated a > 32-byte bigint for encryption. Failing.');\n  }\n}\n\n/**\n * Converts to zero padded 32 bytes\n * @ignore @deprecated\n */\nexport function getBytesFromBN(bnInput: bigint): Uint8Array {\n  // todo: remove method?\n  const result = bigIntToBytes(bnInput, 32);\n  if (result.byteLength !== 32) {\n    throw new Error('Failed to generate a 32-byte Uint8Array');\n  }\n  return result;\n}\n\n/**\n * Get details about the JSON envelope size overhead for ciphertext payloads.\n * @ignore\n */\nexport function getCipherObjectWrapper(opts: {\n  wasString: boolean;\n  cipherTextEncoding: CipherTextEncoding;\n}): {\n  /** The stringified JSON string of an empty `CipherObject`. */\n  payloadShell: string;\n  /** Total string length of all the `CipherObject` values that always have constant lengths. */\n  payloadValuesLength: number;\n} {\n  // Placeholder structure of the ciphertext payload, used to determine the\n  // stringified JSON overhead length.\n  const shell: CipherObject = {\n    iv: '',\n    ephemeralPK: '',\n    mac: '',\n    cipherText: '',\n    wasString: !!opts.wasString,\n  };\n  if (opts.cipherTextEncoding === 'base64') {\n    shell.cipherTextEncoding = 'base64';\n  }\n  // Hex encoded 16 bytes.\n  const ivLength = 32;\n  // Hex encoded, compressed EC pubkey of 33 bytes.\n  const ephemeralPKLength = 66;\n  // Hex encoded 32 byte hmac-sha256.\n  const macLength = 64;\n  return {\n    payloadValuesLength: ivLength + ephemeralPKLength + macLength,\n    payloadShell: JSON.stringify(shell),\n  };\n}\n\n/**\n * Get details about the JSON envelope size overhead for signed ciphertext payloads.\n * @param payloadShell - The JSON stringified empty `CipherObject`\n * @ignore\n */\nexport function getSignedCipherObjectWrapper(payloadShell: string): {\n  /** The stringified JSON string of an empty `SignedCipherObject`. */\n  signedPayloadValuesLength: number;\n  /** Total string length of all the `SignedCipherObject` values\n   * that always have constant lengths */\n  signedPayloadShell: string;\n} {\n  // Placeholder structure of the signed ciphertext payload, used to determine the\n  // stringified JSON overhead length.\n  const shell: SignedCipherObject = {\n    signature: '',\n    publicKey: '',\n    cipherText: payloadShell,\n  };\n  // Hex encoded DER signature, up to 72 byte length.\n  const signatureLength = 144;\n  // Hex encoded 33 byte public key.\n  const publicKeyLength = 66;\n  return {\n    signedPayloadValuesLength: signatureLength + publicKeyLength,\n    signedPayloadShell: JSON.stringify(shell),\n  };\n}\n\n/**\n * Fast function that determines the final ASCII string byte length of the\n * JSON stringified ECIES encrypted payload.\n * @ignore\n */\nexport function eciesGetJsonStringLength(opts: {\n  contentLength: number;\n  wasString: boolean;\n  sign: boolean;\n  cipherTextEncoding: CipherTextEncoding;\n}): number {\n  const { payloadShell, payloadValuesLength } = getCipherObjectWrapper(opts);\n\n  // Calculate the AES output length given the input length.\n  const cipherTextLength = getAesCbcOutputLength(opts.contentLength);\n\n  // Get the encoded string length of the cipherText.\n  let encodedCipherTextLength: number;\n  if (!opts.cipherTextEncoding || opts.cipherTextEncoding === 'hex') {\n    encodedCipherTextLength = cipherTextLength * 2;\n  } else if (opts.cipherTextEncoding === 'base64') {\n    encodedCipherTextLength = getBase64OutputLength(cipherTextLength);\n  } else {\n    throw new Error(`Unexpected cipherTextEncoding \"${opts.cipherTextEncoding}\"`);\n  }\n\n  if (!opts.sign) {\n    // Add the length of the JSON envelope, ciphertext length, and length of const values.\n    return payloadShell.length + payloadValuesLength + encodedCipherTextLength;\n  } else {\n    // Get the signed version of the JSON envelope\n    const { signedPayloadShell, signedPayloadValuesLength } =\n      getSignedCipherObjectWrapper(payloadShell);\n    // Add length of the JSON envelope, ciphertext length, and length of the const values.\n    return (\n      signedPayloadShell.length +\n      signedPayloadValuesLength +\n      payloadValuesLength +\n      encodedCipherTextLength\n    );\n  }\n}\n\n// todo: simplify and remove wasstring\n/**\n * Encrypt content to elliptic curve publicKey using ECIES\n * @param publicKey - secp256k1 public key hex string\n * @param content - content to encrypt\n * @return Object containing:\n *  iv (initialization vector, hex encoding),\n *  cipherText (cipher text either hex or base64 encoded),\n *  mac (message authentication code, hex encoded),\n *  ephemeral public key (hex encoded),\n *  wasString (boolean indicating with or not to return a Uint8Array or string on decrypt)\n * @ignore\n */\nexport async function encryptECIES(\n  publicKey: string,\n  content: Uint8Array,\n  wasString: boolean,\n  cipherTextEncoding?: CipherTextEncoding\n): Promise<CipherObject> {\n  const validity = isValidPublicKey(publicKey);\n  if (!validity.result) {\n    throw validity;\n  }\n  const ephemeralPrivateKey = utils.randomPrivateKey();\n  const ephemeralPublicKey = getPublicKey(ephemeralPrivateKey, true);\n  let sharedSecret = getSharedSecret(ephemeralPrivateKey, publicKey, true);\n  // Trim the compressed mode prefix byte\n  sharedSecret = sharedSecret.slice(1);\n  const sharedKeys = sharedSecretToKeys(sharedSecret);\n  const initializationVector = utils.randomBytes(16);\n\n  const cipherText = await aes256CbcEncrypt(\n    initializationVector,\n    sharedKeys.encryptionKey,\n    content\n  );\n\n  const macData = concatBytes(initializationVector, ephemeralPublicKey, cipherText);\n  const mac = hmacSha256(sharedKeys.hmacKey, macData);\n\n  let cipherTextString: string;\n\n  if (!cipherTextEncoding || cipherTextEncoding === 'hex') {\n    cipherTextString = bytesToHex(cipherText);\n  } else if (cipherTextEncoding === 'base64') {\n    cipherTextString = fromByteArray(cipherText);\n  } else {\n    throw new Error(`Unexpected cipherTextEncoding \"${cipherTextEncoding}\"`);\n  }\n\n  const result: CipherObject = {\n    iv: bytesToHex(initializationVector),\n    ephemeralPK: bytesToHex(ephemeralPublicKey),\n    cipherText: cipherTextString,\n    mac: bytesToHex(mac),\n    wasString,\n  };\n  if (cipherTextEncoding && cipherTextEncoding !== 'hex') {\n    result.cipherTextEncoding = cipherTextEncoding;\n  }\n  return result;\n}\n\n/**\n * Decrypt content encrypted using ECIES\n * @param {String} privateKey - secp256k1 private key hex string\n * @param {Object} cipherObject - object to decrypt, should contain:\n *  iv (initialization vector), cipherText (cipher text),\n *  mac (message authentication code), ephemeralPublicKey\n *  wasString (boolean indicating with or not to return bytes or string on decrypt)\n * @return {Uint8Array} plaintext\n * @throws {FailedDecryptionError} if unable to decrypt\n * @ignore\n */\nexport async function decryptECIES(\n  privateKey: string,\n  cipherObject: CipherObject\n): Promise<Uint8Array | string> {\n  if (!cipherObject.ephemeralPK) {\n    throw new FailedDecryptionError(\n      'Unable to get public key from cipher object. ' +\n        'You might be trying to decrypt an unencrypted object.'\n    );\n  }\n  const ephemeralPK = cipherObject.ephemeralPK;\n  let sharedSecret = getSharedSecret(privateKey, ephemeralPK, true);\n  // Trim the compressed mode prefix byte\n  sharedSecret = sharedSecret.slice(1);\n  const sharedKeys = sharedSecretToKeys(sharedSecret);\n  const ivBytes = hexToBytes(cipherObject.iv);\n\n  let cipherTextBytes: Uint8Array;\n\n  if (!cipherObject.cipherTextEncoding || cipherObject.cipherTextEncoding === 'hex') {\n    cipherTextBytes = hexToBytes(cipherObject.cipherText);\n  } else if (cipherObject.cipherTextEncoding === 'base64') {\n    cipherTextBytes = toByteArray(cipherObject.cipherText);\n  } else {\n    throw new Error(`Unexpected cipherTextEncoding \"${cipherObject.cipherText}\"`);\n  }\n\n  const macData = concatBytes(ivBytes, hexToBytes(ephemeralPK), cipherTextBytes);\n  const actualMac = hmacSha256(sharedKeys.hmacKey, macData);\n  const expectedMac = hexToBytes(cipherObject.mac);\n\n  if (!equalsConstTime(expectedMac, actualMac)) {\n    throw new FailedDecryptionError('Decryption failed: failure in MAC check');\n  }\n  const plainText = await aes256CbcDecrypt(ivBytes, sharedKeys.encryptionKey, cipherTextBytes);\n\n  if (cipherObject.wasString) {\n    return bytesToUtf8(plainText);\n  }\n  return plainText;\n}\n\n/**\n * Sign content using ECDSA\n *\n * @param {string} privateKey - secp256k1 private key hex string\n * @param {string | Uint8Array} content - content to sign\n * @return {Object} contains:\n * signature - Hex encoded DER signature\n * public key - Hex encoded private string taken from privateKey\n * @ignore\n */\nexport function signECDSA(\n  privateKey: string,\n  content: string | Uint8Array\n): {\n  publicKey: string;\n  signature: string;\n} {\n  const contentBytes = typeof content === 'string' ? utf8ToBytes(content) : content;\n  const publicKey = getPublicKeyFromPrivate(privateKey);\n  const contentHash = hashSha256Sync(contentBytes);\n  const signature = signSync(contentHash, privateKey);\n\n  return {\n    signature: bytesToHex(signature),\n    publicKey,\n  };\n}\n\n/**\n * Verify content using ECDSA\n * @param {String | Uint8Array} content - Content to verify was signed\n * @param {String} publicKey - secp256k1 private key hex string\n * @param {String} signature - Hex encoded DER signature\n * @return {Boolean} returns true when signature matches publickey + content, false if not\n * @ignore\n */\nexport function verifyECDSA(\n  content: string | Uint8Array,\n  publicKey: string,\n  signature: string\n): boolean {\n  const contentBytes = typeof content === 'string' ? utf8ToBytes(content) : content;\n  const contentHash = hashSha256Sync(contentBytes);\n  // verify() is strict: true by default. High-s signatures are rejected, which mirrors libsecp behavior\n  // Set verify options to strict: false, to support the legacy stacks implementations\n  // Reference: https://github.com/paulmillr/noble-secp256k1/releases/tag/1.4.0\n  return verify(signature, contentHash, publicKey, { strict: false });\n}\n\ninterface VerifyMessageSignatureArgs {\n  signature: string;\n  message: string | Uint8Array;\n  publicKey: string;\n}\n\n/**\n * Verify message signature (VRS format) with recoverable public key\n * @deprecated The Clarity compatible {@link verifyMessageSignatureRsv} is preferred\n */\nexport function verifyMessageSignature({\n  signature,\n  message,\n  publicKey,\n}: VerifyMessageSignatureArgs): boolean {\n  // todo: remove method and pull body to `verifyMessageSignatureRsv`\n  const { r, s } = parseRecoverableSignatureVrs(signature);\n  const sig = new Signature(hexToBigInt(r), hexToBigInt(s));\n  const hashedMsg = typeof message === 'string' ? hashMessage(message) : message;\n  // verify() is strict: true by default. High-s signatures are rejected, which mirrors libsecp behavior\n  // Set verify options to strict: false, to support the legacy stacks implementations\n  // Reference: https://github.com/paulmillr/noble-secp256k1/releases/tag/1.4.0\n  const verificationResult = verify(sig, hashedMsg, publicKey, { strict: false });\n\n  // Additional Check for Legacy Prefix ++++++++++++++++++++++++++++++++++++++++\n  if (verificationResult || typeof message !== 'string') return verificationResult;\n\n  const LEGACY_PREFIX = '\\x18Stacks Message Signing:\\n';\n  const legacyHash = sha256(encodeMessage(message, LEGACY_PREFIX));\n  return verify(sig, legacyHash, publicKey, { strict: false });\n  // +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\n}\n\n/**\n * Verifies a Clarity compatible signed message using a public key. The\n * `signature` option needs to be in RSV format.\n */\nexport function verifyMessageSignatureRsv({\n  signature,\n  message,\n  publicKey,\n}: VerifyMessageSignatureArgs): boolean {\n  return verifyMessageSignature({\n    signature: signatureRsvToVrs(signature),\n    message,\n    publicKey,\n  });\n}\n", "// @ts-ignore\nexport function isSubtleCryptoAvailable(): boolean {\n  return typeof crypto !== 'undefined' && typeof crypto.subtle !== 'undefined';\n}\n\nexport function isNodeCryptoAvailable<T>(\n  withFeature: (nodeCrypto: typeof import('crypto')) => boolean | T\n): false | T;\nexport function isNodeCryptoAvailable<T>(\n  withFeature?: (nodeCrypto: typeof import('crypto')) => boolean | T\n): boolean | T {\n  try {\n    const resolvedResult = require.resolve('crypto');\n    if (!resolvedResult) {\n      return false;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-var-requires\n    const cryptoModule = require('crypto') as typeof import('crypto');\n    if (!cryptoModule) {\n      return false;\n    }\n    if (withFeature) {\n      const features = withFeature(cryptoModule);\n      return features;\n    }\n    return true;\n  } catch (error) {\n    return false;\n  }\n}\n\nexport const NO_CRYPTO_LIB =\n  'Crypto lib not found. Either the WebCrypto \"crypto.subtle\" or Node.js \"crypto\" module must be available.';\n\nexport interface WebCryptoLib {\n  lib: SubtleCrypto;\n  name: 'subtleCrypto';\n}\n\nexport interface NodeCryptoLib {\n  lib: typeof import('crypto');\n  name: 'nodeCrypto';\n}\n\n// Make async for future version which may lazy load.\n// eslint-disable-next-line @typescript-eslint/require-await\nexport async function getCryptoLib(): Promise<WebCryptoLib | NodeCryptoLib> {\n  if (isSubtleCryptoAvailable()) {\n    return {\n      lib: crypto.subtle,\n      name: 'subtleCrypto',\n    };\n  } else {\n    try {\n      // eslint-disable-next-line @typescript-eslint/no-var-requires\n      const nodeCrypto = require('crypto') as typeof import('crypto');\n      return {\n        lib: nodeCrypto,\n        name: 'nodeCrypto',\n      };\n    } catch (error) {\n      throw new Error(NO_CRYPTO_LIB);\n    }\n  }\n}\n", "import { concatBytes } from '@stacks/common';\nimport { getCryptoLib } from './cryptoUtils';\n\ntype NodeCryptoCreateCipher = typeof import('crypto').createCipheriv;\ntype NodeCryptoCreateDecipher = typeof import('crypto').createDecipheriv;\n\nexport type CipherAlgorithm = 'aes-256-cbc' | 'aes-128-cbc';\n\nexport interface AesCipher {\n  encrypt(\n    algorithm: CipherAlgorithm,\n    key: Uint8Array,\n    iv: Uint8Array,\n    data: Uint8Array\n  ): Promise<Uint8Array>;\n\n  decrypt(\n    algorithm: CipherAlgorithm,\n    key: Uint8Array,\n    iv: Uint8Array,\n    data: Uint8Array\n  ): Promise<Uint8Array>;\n}\n\nexport class NodeCryptoAesCipher implements AesCipher {\n  createCipher: NodeCryptoCreateCipher;\n\n  createDecipher: NodeCryptoCreateDecipher;\n\n  constructor(createCipher: NodeCryptoCreateCipher, createDecipher: NodeCryptoCreateDecipher) {\n    this.createCipher = createCipher;\n    this.createDecipher = createDecipher;\n  }\n\n  async encrypt(\n    algorithm: CipherAlgorithm,\n    key: Uint8Array,\n    iv: Uint8Array,\n    data: Uint8Array\n  ): Promise<Uint8Array> {\n    if (algorithm !== 'aes-128-cbc' && algorithm !== 'aes-256-cbc') {\n      throw new Error(`Unsupported cipher algorithm \"${algorithm}\"`);\n    }\n    const cipher = this.createCipher(algorithm, key, iv);\n    const result = new Uint8Array(concatBytes(cipher.update(data), cipher.final()));\n    return Promise.resolve(result);\n  }\n\n  async decrypt(\n    algorithm: CipherAlgorithm,\n    key: Uint8Array,\n    iv: Uint8Array,\n    data: Uint8Array\n  ): Promise<Uint8Array> {\n    if (algorithm !== 'aes-128-cbc' && algorithm !== 'aes-256-cbc') {\n      throw new Error(`Unsupported cipher algorithm \"${algorithm}\"`);\n    }\n    const cipher = this.createDecipher(algorithm, key, iv);\n    const result = new Uint8Array(concatBytes(cipher.update(data), cipher.final()));\n    return Promise.resolve(result);\n  }\n}\n\nexport class WebCryptoAesCipher implements AesCipher {\n  subtleCrypto: SubtleCrypto;\n\n  constructor(subtleCrypto: SubtleCrypto) {\n    this.subtleCrypto = subtleCrypto;\n  }\n\n  async encrypt(\n    algorithm: CipherAlgorithm,\n    key: Uint8Array,\n    iv: Uint8Array,\n    data: Uint8Array\n  ): Promise<Uint8Array> {\n    let algo: string;\n    let length: number;\n    if (algorithm === 'aes-128-cbc') {\n      algo = 'AES-CBC';\n      length = 128;\n    } else if (algorithm === 'aes-256-cbc') {\n      algo = 'AES-CBC';\n      length = 256;\n    } else {\n      throw new Error(`Unsupported cipher algorithm \"${algorithm}\"`);\n    }\n    const cryptoKey = await this.subtleCrypto.importKey('raw', key, { name: algo, length }, false, [\n      'encrypt',\n    ]);\n    const result = await this.subtleCrypto.encrypt({ name: algo, iv }, cryptoKey, data);\n    return new Uint8Array(result);\n  }\n\n  async decrypt(\n    algorithm: CipherAlgorithm,\n    key: Uint8Array,\n    iv: Uint8Array,\n    data: Uint8Array\n  ): Promise<Uint8Array> {\n    let algo: string;\n    let length: number;\n    if (algorithm === 'aes-128-cbc') {\n      algo = 'AES-CBC';\n      length = 128;\n    } else if (algorithm === 'aes-256-cbc') {\n      algo = 'AES-CBC';\n      length = 256;\n    } else {\n      throw new Error(`Unsupported cipher algorithm \"${algorithm}\"`);\n    }\n    const cryptoKey = await this.subtleCrypto.importKey('raw', key, { name: algo, length }, false, [\n      'decrypt',\n    ]);\n    const result = await this.subtleCrypto.decrypt({ name: algo, iv }, cryptoKey, data);\n    return new Uint8Array(result);\n  }\n}\n\nexport async function createCipher(): Promise<AesCipher> {\n  const cryptoLib = await getCryptoLib();\n  if (cryptoLib.name === 'subtleCrypto') {\n    return new WebCryptoAesCipher(cryptoLib.lib);\n  }\n  return new NodeCryptoAesCipher(cryptoLib.lib.createCipheriv, cryptoLib.lib.createDecipheriv);\n}\n", "import { hmac } from '@noble/hashes/hmac';\nimport { sha256 } from '@noble/hashes/sha256';\nimport { getPublicKey as nobleGetPublicKey, signSync, utils } from '@noble/secp256k1';\nimport {\n  PrivateKey,\n  bytesToHex,\n  concatBytes,\n  hexToBytes,\n  privateKeyToBytes,\n  readUInt8,\n} from '@stacks/common';\nimport base58 from 'bs58';\nimport { hashRipemd160 } from './hashRipemd160';\nimport { hashSha256Sync } from './sha2Hash';\n\nconst BITCOIN_PUBKEYHASH = 0x00;\n\n/**\n * To use secp256k1.signSync set utils.hmacSha256Sync to a function using noble-hashes\n * secp256k1.signSync is the counter part of secp256k1.sign (async version)\n * secp256k1.signSync is used within signWithKey in this file\n * secp256k1.signSync is used to maintain the semantics of signWithKey while migrating from elliptic lib\n * utils.hmacSha256Sync docs: https://github.com/paulmillr/noble-secp256k1 readme file\n */\nutils.hmacSha256Sync = (key: Uint8Array, ...msgs: Uint8Array[]) => {\n  const h = hmac.create(sha256, key);\n  msgs.forEach(msg => h.update(msg));\n  return h.digest();\n};\n\n/**\n * @ignore\n * @deprecated Use `randomPrivateKey` instead.\n */\nexport function makeECPrivateKey() {\n  return bytesToHex(utils.randomPrivateKey());\n}\n\n/**\n * Based on bitcoinjs-lib MIT https://github.com/bitcoinjs/bs58check/blob/12b3e700f355c5c49d0be3f8fc29be6c66e753e9/base.js\n * @ignore\n */\nexport function base58CheckDecode(btcAddress: string): {\n  version: number;\n  hash: Uint8Array;\n} {\n  const bytes = base58.decode(btcAddress);\n  const payload = bytes.slice(0, -4);\n  const checksum = bytes.slice(-4);\n  const newChecksum = sha256(sha256(payload));\n\n  if (\n    (checksum[0] ^ newChecksum[0]) |\n    (checksum[1] ^ newChecksum[1]) |\n    (checksum[2] ^ newChecksum[2]) |\n    (checksum[3] ^ newChecksum[3])\n  ) {\n    throw new Error('Invalid checksum');\n  }\n\n  if (payload.length !== 21) throw new TypeError('Invalid address length');\n\n  const version = readUInt8(payload, 0);\n  const hash = payload.slice(1);\n\n  return { version, hash };\n}\n\n/**\n * @ignore\n */\nexport function base58Encode(hash: Uint8Array) {\n  const checksum = sha256(sha256(hash));\n  return base58.encode(concatBytes(hash, checksum).slice(0, hash.length + 4));\n}\n\n/**\n * @ignore\n */\nexport function base58CheckEncode(version: number, hash: Uint8Array) {\n  return base58Encode(concatBytes(new Uint8Array([version]), hash.slice(0, 20)));\n}\n\n/**\n * @ignore\n */\nexport function publicKeyToBtcAddress(\n  publicKey: string | Uint8Array,\n  version: number = BITCOIN_PUBKEYHASH\n) {\n  const publicKeyBytes = typeof publicKey === 'string' ? hexToBytes(publicKey) : publicKey;\n  const publicKeyHash160 = hashRipemd160(hashSha256Sync(publicKeyBytes));\n  return base58CheckEncode(version, publicKeyHash160);\n}\n\n/**\n * @ignore\n * @returns a compressed public key\n */\nexport function getPublicKeyFromPrivate(privateKey: PrivateKey): string {\n  const privateKeyBytes = privateKeyToBytes(privateKey);\n  // for backwards compatibility we always return a compressed public key, regardless of private key mode\n  return bytesToHex(nobleGetPublicKey(privateKeyBytes.slice(0, 32), true));\n}\n\n/**\n * @ignore\n */\nexport function ecSign(messageHash: Uint8Array, privateKey: PrivateKey) {\n  return signSync(messageHash, privateKeyToBytes(privateKey).slice(0, 32), {\n    der: false,\n  });\n}\n", "import { ripemd160 } from '@noble/hashes/ripemd160';\n\nexport function hashRipemd160(data: Uint8Array) {\n  return ripemd160(data);\n}\n", "import { sha256 } from '@noble/hashes/sha256';\nimport { sha512 } from '@noble/hashes/sha512';\nimport { getCryptoLib } from './cryptoUtils';\n\ntype NodeCryptoCreateHash = typeof import('crypto').createHash;\n\nexport interface Sha2Hash {\n  digest(data: Uint8Array, algorithm?: 'sha256' | 'sha512'): Promise<Uint8Array>;\n}\n\nexport class NodeCryptoSha2Hash {\n  createHash: NodeCryptoCreateHash;\n\n  constructor(createHash: NodeCryptoCreateHash) {\n    this.createHash = createHash;\n  }\n\n  async digest(data: Uint8Array, algorithm = 'sha256'): Promise<Uint8Array> {\n    try {\n      const result = this.createHash(algorithm).update(data).digest();\n      return Promise.resolve(result);\n    } catch (error) {\n      console.log(error);\n      console.log(\n        `Error performing ${algorithm} digest with Node.js 'crypto.createHash', falling back to JS implementation.`\n      );\n      return Promise.resolve(algorithm === 'sha256' ? hashSha256Sync(data) : hashSha512Sync(data));\n    }\n  }\n}\n\nexport class WebCryptoSha2Hash implements Sha2Hash {\n  subtleCrypto: SubtleCrypto;\n\n  constructor(subtleCrypto: SubtleCrypto) {\n    this.subtleCrypto = subtleCrypto;\n  }\n\n  async digest(data: Uint8Array, algorithm = 'sha256'): Promise<Uint8Array> {\n    let algo: string;\n    if (algorithm === 'sha256') {\n      algo = 'SHA-256';\n    } else if (algorithm === 'sha512') {\n      algo = 'SHA-512';\n    } else {\n      throw new Error(`Unsupported hash algorithm ${algorithm}`);\n    }\n    try {\n      const hash = await this.subtleCrypto.digest(algo, data);\n      return new Uint8Array(hash);\n    } catch (error) {\n      console.log(error);\n      console.log(\n        `Error performing ${algorithm} digest with WebCrypto, falling back to JS implementation.`\n      );\n      return Promise.resolve(algorithm === 'sha256' ? hashSha256Sync(data) : hashSha512Sync(data));\n    }\n  }\n}\n\nexport async function createSha2Hash(): Promise<Sha2Hash> {\n  const cryptoLib = await getCryptoLib();\n  if (cryptoLib.name === 'subtleCrypto') {\n    return new WebCryptoSha2Hash(cryptoLib.lib);\n  } else {\n    return new NodeCryptoSha2Hash(cryptoLib.lib.createHash);\n  }\n}\n\nexport function hashSha256Sync(data: Uint8Array) {\n  return sha256(data);\n}\n\nexport function hashSha512Sync(data: Uint8Array) {\n  return sha512(data);\n}\n", "import { utf8ToBytes } from '@stacks/common';\nimport {\n  CipherTextEncoding,\n  decryptECIES,\n  encryptECIES,\n  signECDSA,\n  SignedCipherObject,\n} from './ec';\nimport { getPublicKeyFromPrivate } from './keys';\n\nexport interface EncryptionOptions {\n  /**\n   * If set to `true` the data is signed using ECDSA on SHA256 hashes with the user's\n   * app private key. If a string is specified, it is used as the private key instead\n   * of the user's app private key.\n   * @default false\n   */\n  sign?: boolean | string;\n  /**\n   * String encoding format for the cipherText bytes.\n   * Currently defaults to 'hex' for legacy backwards-compatibility.\n   * Only used if the `encrypt` option is also used.\n   * Note: in the future this should default to 'base64' for the significant\n   * file size reduction.\n   */\n  cipherTextEncoding?: CipherTextEncoding;\n  /**\n   * Specifies if the original unencrypted content is a ASCII or UTF-8 string.\n   * For example stringified JSON.\n   * If true, then when the ciphertext is decrypted, it will be returned as\n   * a `string` type variable, otherwise will be returned as bytes.\n   */\n  wasString?: boolean;\n}\n\n/**\n * Specify encryption options, and whether to sign the ciphertext.\n */\nexport interface EncryptContentOptions extends EncryptionOptions {\n  /**\n   * Encrypt the data with this key.\n   */\n  publicKey?: string;\n  /**\n   * Encrypt the data with the public key corresponding to the supplied private key\n   */\n  privateKey?: string;\n}\n\n/**\n * Encrypts the data provided with the app public key.\n * @param {string | Uint8Array} content - data to encrypt\n * @param {Object} [options=null] - options object\n * @param {String} options.publicKey - the hex string of the ECDSA public\n * key to use for encryption. If not provided, will use user's appPublicKey.\n * @return {String} Stringified ciphertext object\n */\nexport async function encryptContent(\n  content: string | Uint8Array,\n  options?: EncryptContentOptions\n): Promise<string> {\n  const opts = Object.assign({}, options);\n  let privateKey: string | undefined;\n  if (!opts.publicKey) {\n    if (!opts.privateKey) {\n      throw new Error('Either public key or private key must be supplied for encryption.');\n    }\n    opts.publicKey = getPublicKeyFromPrivate(opts.privateKey);\n  }\n  const wasString =\n    typeof opts.wasString === 'boolean' ? opts.wasString : typeof content === 'string';\n  const contentBytes = typeof content === 'string' ? utf8ToBytes(content) : content;\n  const cipherObject = await encryptECIES(\n    opts.publicKey,\n    contentBytes,\n    wasString,\n    opts.cipherTextEncoding\n  );\n  let cipherPayload = JSON.stringify(cipherObject);\n  if (opts.sign) {\n    if (typeof opts.sign === 'string') {\n      privateKey = opts.sign;\n    } else if (!privateKey) {\n      privateKey = opts.privateKey;\n    }\n    const signatureObject = signECDSA(privateKey!, cipherPayload);\n    const signedCipherObject: SignedCipherObject = {\n      signature: signatureObject.signature,\n      publicKey: signatureObject.publicKey,\n      cipherText: cipherPayload,\n    };\n    cipherPayload = JSON.stringify(signedCipherObject);\n  }\n  return cipherPayload;\n}\n\n/**\n * Decrypts data encrypted with `encryptContent` with the\n * transit private key.\n * @param {string | Uint8Array} content - encrypted content.\n * @param {Object} [options=null] - options object\n * @param {string} options.privateKey - the hex string of the ECDSA private\n * key to use for decryption. If not provided, will use user's appPrivateKey.\n * @return {string | Uint8Array} decrypted content.\n */\nexport function decryptContent(\n  content: string,\n  options?: {\n    privateKey?: string;\n  }\n): Promise<string | Uint8Array> {\n  const opts = Object.assign({}, options);\n  if (!opts.privateKey) {\n    throw new Error('Private key is required for decryption.');\n  }\n\n  try {\n    const cipherObject = JSON.parse(content);\n    return decryptECIES(opts.privateKey, cipherObject);\n  } catch (err) {\n    if (err instanceof SyntaxError) {\n      throw new Error(\n        'Failed to parse encrypted content JSON. The content may not ' +\n          'be encrypted. If using getFile, try passing { decrypt: false }.'\n      );\n    } else {\n      throw err;\n    }\n  }\n}\n", "import { entropyToMnemonic, mnemonicToEntropy, validateMnemonic } from '@scure/bip39';\n// Word lists not imported by default as that would increase bundle sizes too much as in case of bitcoinjs/bip39\n// Use default english world list similar to bitcoinjs/bip39\n// Backward compatible with bitcoinjs/bip39 dependency\n// Very small in size as compared to bitcoinjs/bip39 wordlist\n// Reference: https://github.com/paulmillr/scure-bip39\nimport { wordlist } from '@scure/bip39/wordlists/english';\nimport { bytesToHex, concatBytes, equals, hexToBytes } from '@stacks/common';\nimport { createCipher } from './aesCipher';\nimport { GetRandomBytes, randomBytes } from './cryptoRandom';\nimport { hmacSha256 } from './ec';\nimport { createPbkdf2 } from './pbkdf2';\nimport { createSha2Hash } from './sha2Hash';\n\n/**\n * Encrypt a raw mnemonic phrase to be password protected\n * @param {string} phrase - Raw mnemonic phrase\n * @param {string} password - Password to encrypt mnemonic with\n * @return {Promise<Uint8Array>} The encrypted phrase\n * @ignore\n * */\nexport async function encryptMnemonic(\n  phrase: string,\n  password: string,\n  opts?: {\n    getRandomBytes?: GetRandomBytes;\n  }\n): Promise<Uint8Array> {\n  // hex encoded mnemonic string\n  let mnemonicEntropy: string;\n  try {\n    // must be bip39 mnemonic\n    // `mnemonicToEntropy` converts mnemonic string to raw entropy in form of byte array\n    const entropyBytes = mnemonicToEntropy(phrase, wordlist);\n    // Convert byte array to hex string\n    mnemonicEntropy = bytesToHex(entropyBytes);\n  } catch (error) {\n    console.error('Invalid mnemonic phrase provided');\n    console.error(error);\n    throw new Error('Not a valid bip39 mnemonic');\n  }\n\n  // normalize plaintext to fixed length byte string\n  const plaintextNormalized = hexToBytes(mnemonicEntropy);\n\n  // AES-128-CBC with SHA256 HMAC\n  const pbkdf2 = await createPbkdf2();\n  const salt = opts?.getRandomBytes ? opts.getRandomBytes(16) : randomBytes(16);\n  const keysAndIV = await pbkdf2.derive(password, salt, 100_000, 48, 'sha512');\n  const encKey = keysAndIV.slice(0, 16);\n  const macKey = keysAndIV.slice(16, 32);\n  const iv = keysAndIV.slice(32, 48);\n\n  const cipher = await createCipher();\n  const cipherText = await cipher.encrypt('aes-128-cbc', encKey, iv, plaintextNormalized);\n\n  const hmacPayload = concatBytes(salt, cipherText);\n  const hmacDigest = hmacSha256(macKey, hmacPayload);\n\n  return concatBytes(salt, hmacDigest, cipherText);\n}\n\n// Used to distinguish bad password during decrypt vs invalid format\nclass PasswordError extends Error {}\n\n/**\n * @ignore\n */\nasync function decryptMnemonicBytes(dataBytes: Uint8Array, password: string): Promise<string> {\n  const salt = dataBytes.slice(0, 16);\n  const hmacSig = dataBytes.slice(16, 48); // 32 bytes\n  const cipherText = dataBytes.slice(48);\n  const hmacPayload = concatBytes(salt, cipherText);\n\n  const pbkdf2 = await createPbkdf2();\n  const keysAndIV = await pbkdf2.derive(password, salt, 100000, 48, 'sha512');\n  const encKey = keysAndIV.slice(0, 16);\n  const macKey = keysAndIV.slice(16, 32);\n  const iv = keysAndIV.slice(32, 48);\n\n  const decipher = await createCipher();\n  const decryptedResult = await decipher.decrypt('aes-128-cbc', encKey, iv, cipherText);\n\n  const hmacDigest = hmacSha256(macKey, hmacPayload);\n\n  // hash both hmacSig and hmacDigest so string comparison time\n  // is uncorrelated to the ciphertext\n  const sha2Hash = await createSha2Hash();\n  const hmacSigHash = await sha2Hash.digest(hmacSig);\n  const hmacDigestHash = await sha2Hash.digest(hmacDigest);\n\n  if (!equals(hmacSigHash, hmacDigestHash)) {\n    // not authentic\n    throw new PasswordError('Wrong password (HMAC mismatch)');\n  }\n\n  let mnemonic: string;\n  try {\n    // Converts raw entropy in form of byte array to mnemonic string\n    mnemonic = entropyToMnemonic(decryptedResult, wordlist);\n  } catch (error) {\n    console.error('Error thrown by `entropyToMnemonic`');\n    console.error(error);\n    throw new PasswordError('Wrong password (invalid plaintext)');\n  }\n  // Validates mnemonic for being 12-24 words contained in `wordlist`\n  if (!validateMnemonic(mnemonic, wordlist)) {\n    throw new PasswordError('Wrong password (invalid plaintext)');\n  }\n\n  return mnemonic;\n}\n\n/**\n * Decrypt an encrypted mnemonic phrase with a password.\n * @param data - Bytes or hex-encoded string of the encrypted mnemonic\n * @param password - Password for data\n * @return {string} the raw mnemonic phrase\n * @ignore\n */\nexport async function decryptMnemonic(\n  data: string | Uint8Array,\n  password: string\n): Promise<string> {\n  const dataBytes = typeof data === 'string' ? hexToBytes(data) : data;\n  return await decryptMnemonicBytes(dataBytes, password);\n}\n", "import {\n  bytesToHex,\n  bytesToUtf8,\n  getGlobalObject,\n  hexToBytes,\n  makeUUID4,\n  nextMonth,\n  utf8ToBytes,\n} from '@stacks/common';\nimport {\n  decryptECIES,\n  encryptECIES,\n  makeECPrivateKey,\n  publicKeyToBtcAddress,\n} from '@stacks/encryption';\nimport { SECP256K1Client, TokenSigner } from 'jsontokens';\nimport { AuthScope, DEFAULT_SCOPE } from './constants';\nimport { makeDIDFromAddress } from './dids';\n\nconst VERSION = '1.4.0';\n\ntype AuthMetadata = {\n  email?: string;\n  profileUrl?: string;\n};\n\n/**\n * Generates a ECDSA keypair to\n * use as the ephemeral app transit private key\n * @param {SessionData} session - session object in which key will be stored\n * @return {String} the hex encoded private key\n * @private\n * @ignore\n */\nexport function generateTransitKey() {\n  const transitKey = makeECPrivateKey();\n  return transitKey;\n}\n\n/** @deprecated {@link makeAuthRequest} was renamed to {@link makeAuthRequestToken} */\nexport const makeAuthRequest = makeAuthRequestToken;\n\n/**\n * Generates an authentication request that can be sent to the Blockstack\n * browser for the user to approve sign in. This authentication request can\n * then be used for sign in by passing it to the `redirectToSignInWithAuthRequest`\n * method.\n *\n * *Note: This method should only be used if you want to roll your own authentication\n * flow. Typically you'd use `redirectToSignIn` which takes care of this\n * under the hood.*\n *\n * @param  {String} transitPrivateKey - hex encoded transit private key\n * @param {String} redirectURI - location to redirect user to after sign in approval\n * @param {String} manifestURI - location of this app's manifest file\n * @param {(AuthScope | string)[]} scopes - the permissions this app is requesting\n * @param {String} appDomain - the origin of this app\n * @param {Number} expiresAt - the time at which this request is no longer valid\n * @param {Object} extraParams - Any extra parameters you'd like to pass to the authenticator.\n * Use this to pass options that aren't part of the Blockstack auth spec, but might be supported\n * by special authenticators.\n * @return {String} the authentication request\n */\nexport function makeAuthRequestToken(\n  transitPrivateKey: string,\n  redirectURI?: string,\n  manifestURI?: string,\n  scopes: (AuthScope | string)[] = DEFAULT_SCOPE.slice(),\n  appDomain?: string,\n  expiresAt: number = nextMonth().getTime(),\n  extraParams: any = {}\n): string {\n  const getWindowOrigin = (paramName: string) => {\n    const location = getGlobalObject('location', {\n      throwIfUnavailable: true,\n      usageDesc: `makeAuthRequest([${paramName}=undefined])`,\n    });\n    return location?.origin;\n  };\n\n  if (!redirectURI) {\n    redirectURI = `${getWindowOrigin('redirectURI')}/`;\n  }\n  if (!manifestURI) {\n    manifestURI = `${getWindowOrigin('manifestURI')}/manifest.json`;\n  }\n  if (!appDomain) {\n    appDomain = getWindowOrigin('appDomain');\n  }\n\n  /* Create the payload */\n  const payload = Object.assign({}, extraParams, {\n    jti: makeUUID4(),\n    iat: Math.floor(new Date().getTime() / 1000), // JWT times are in seconds\n    exp: Math.floor(expiresAt / 1000), // JWT times are in seconds\n    iss: null,\n    public_keys: [],\n    domain_name: appDomain,\n    manifest_uri: manifestURI,\n    redirect_uri: redirectURI,\n    version: VERSION,\n    do_not_include_profile: true,\n    supports_hub_url: true,\n    scopes,\n  });\n\n  // Logger.info(`blockstack.js: generating v${VERSION} auth request`)\n\n  /* Convert the private key to a public key to an issuer */\n  const publicKey = SECP256K1Client.derivePublicKey(transitPrivateKey);\n  payload.public_keys = [publicKey];\n  const address = publicKeyToBtcAddress(publicKey);\n  payload.iss = makeDIDFromAddress(address);\n\n  /* Sign and return the token */\n  const tokenSigner = new TokenSigner('ES256k', transitPrivateKey);\n  const token = tokenSigner.sign(payload);\n\n  return token;\n}\n\n/**\n * Encrypts the private key for decryption by the given\n * public key.\n * @param  {String} publicKey  [description]\n * @param  {String} privateKey [description]\n * @return {String} hex encoded ciphertext\n * @private\n * @ignore\n */\nexport async function encryptPrivateKey(publicKey: string, privateKey: string): Promise<string> {\n  const encryptedObj = await encryptECIES(publicKey, utf8ToBytes(privateKey), true);\n  const encryptedJSON = JSON.stringify(encryptedObj);\n  return bytesToHex(utf8ToBytes(encryptedJSON));\n}\n\n/**\n * Decrypts the hex encrypted private key\n * @param  {String} privateKey  the private key corresponding to the public\n * key for which the ciphertext was encrypted\n * @param  {String} hexedEncrypted the ciphertext\n * @return {String}  the decrypted private key\n * @throws {Error} if unable to decrypt\n *\n * @private\n * @ignore\n */\nexport async function decryptPrivateKey(\n  privateKey: string,\n  hexedEncrypted: string\n): Promise<string | null> {\n  const unhexedString = bytesToUtf8(hexToBytes(hexedEncrypted));\n  const encryptedObj = JSON.parse(unhexedString);\n  const decrypted = await decryptECIES(privateKey, encryptedObj);\n  if (typeof decrypted !== 'string') {\n    throw new Error('Unable to correctly decrypt private key');\n  } else {\n    return decrypted;\n  }\n}\n\n/**\n * Generates a signed authentication response token for an app. This\n * token is sent back to apps which use contents to access the\n * resources and data requested by the app.\n *\n * @param  {String} privateKey the identity key of the Blockstack ID generating\n * the authentication response\n * @param  {Object} profile the profile object for the Blockstack ID\n * @param  {AuthMetadata} metadata an object containing metadata sent as part of the authentication\n * response including `email` if requested and available and a URL to the profile\n * @param  {String} coreToken core session token when responding to a legacy auth request\n * or `null` for current direct to gaia authentication requests\n * @param  {String} appPrivateKey the application private key. This private key is\n * unique and specific for every Blockstack ID and application combination.\n * @param  {Number} expiresAt an integer in the same format as\n * `new Date().getTime()`, milliseconds since the Unix epoch\n * @param {String} transitPublicKey the public key provide by the app\n * in its authentication request with which secrets will be encrypted\n * @param {String} hubUrl URL to the write path of the user's Gaia hub\n * @param {String} blockstackAPIUrl URL to the API endpoint to use\n * @param {String} associationToken JWT that binds the app key to the identity key\n * @return {String} signed and encoded authentication response token\n * @private\n * @ignore\n */\nexport async function makeAuthResponse(\n  privateKey: string,\n  // eslint-disable-next-line @typescript-eslint/ban-types\n  profile: {} = {},\n  metadata: AuthMetadata | null,\n  coreToken: string | null = null,\n  appPrivateKey: string | null = null,\n  expiresAt: number = nextMonth().getTime(),\n  transitPublicKey: string | null = null,\n  hubUrl: string | null = null,\n  blockstackAPIUrl: string | null = null,\n  associationToken: string | null = null,\n  appPrivateKeyFromWalletSalt: string | null = null\n): Promise<string> {\n  /* Convert the private key to a public key to an issuer */\n  const publicKey = SECP256K1Client.derivePublicKey(privateKey);\n  const address = publicKeyToBtcAddress(publicKey);\n\n  /* See if we should encrypt with the transit key */\n  let privateKeyPayload = appPrivateKey;\n  let coreTokenPayload = coreToken;\n  let additionalProperties = {};\n  if (appPrivateKey !== undefined && appPrivateKey !== null) {\n    // Logger.info(`blockstack.js: generating v${VERSION} auth response`)\n    if (transitPublicKey !== undefined && transitPublicKey !== null) {\n      privateKeyPayload = await encryptPrivateKey(transitPublicKey, appPrivateKey);\n      if (coreToken !== undefined && coreToken !== null) {\n        coreTokenPayload = await encryptPrivateKey(transitPublicKey, coreToken);\n      }\n    }\n    additionalProperties = {\n      email: metadata?.email ? metadata.email : null,\n      profile_url: metadata?.profileUrl ? metadata.profileUrl : null,\n      hubUrl,\n      blockstackAPIUrl,\n      associationToken,\n      version: VERSION,\n    };\n  } else {\n    // Logger.info('blockstack.js: generating legacy auth response')\n  }\n\n  /* Create the payload */\n  const payload = Object.assign(\n    {},\n    {\n      jti: makeUUID4(),\n      iat: Math.floor(new Date().getTime() / 1000), // JWT times are in seconds\n      exp: Math.floor(expiresAt / 1000), // JWT times are in seconds\n      iss: makeDIDFromAddress(address),\n      private_key: privateKeyPayload,\n      public_keys: [publicKey],\n      appPrivateKeyFromWalletSalt,\n      profile,\n      core_token: coreTokenPayload,\n    },\n    additionalProperties\n  );\n\n  /* Sign and return the token */\n  const tokenSigner = new TokenSigner('ES256k', privateKey);\n  return tokenSigner.sign(payload);\n}\n", "import { InvalidDIDError } from '@stacks/common';\n\n/**\n * @ignore\n */\nexport function makeDIDFromAddress(address: string) {\n  return `did:btc-addr:${address}`;\n}\n\n/**\n * @ignore\n */\nexport function makeDIDFromPublicKey(publicKey: string) {\n  return `did:ecdsa-pub:${publicKey}`;\n}\n\n/**\n * @ignore\n */\nexport function getDIDType(decentralizedID: string) {\n  const didParts = decentralizedID.split(':');\n\n  if (didParts.length !== 3) {\n    throw new InvalidDIDError('Decentralized IDs must have 3 parts');\n  }\n\n  if (didParts[0].toLowerCase() !== 'did') {\n    throw new InvalidDIDError('Decentralized IDs must start with \"did\"');\n  }\n\n  return didParts[1].toLowerCase();\n}\n\n/**\n * @ignore\n */\nexport function getAddressFromDID(decentralizedID?: string): string | undefined {\n  if (decentralizedID) {\n    const didType = getDIDType(decentralizedID);\n    if (didType === 'btc-addr') {\n      return decentralizedID.split(':')[2];\n    } else {\n      return undefined;\n    }\n  }\n  return undefined;\n}\n\n/*\nexport function getPublicKeyOrAddressFromDID(decentralizedID) {\n  const didParts = decentralizedID.split(':')\n\n  if (didParts.length !== 3) {\n    throw new InvalidDIDError('Decentralized IDs must have 3 parts')\n  }\n\n  if (didParts[0].toLowerCase() !== 'did') {\n    throw new InvalidDIDError('Decentralized IDs must start with \"did\"')\n  }\n\n  if (didParts[1].toLowerCase() === 'ecdsa-pub') {\n    return didParts[2]\n  } else if (didParts[1].toLowerCase() === 'btc-addr') {\n    return didParts[2]\n  } else {\n    throw new InvalidDIDError('Decentralized ID format not supported')\n  }\n}\n*/\n", "import { decodeToken } from 'jsontokens';\nimport { BLOCKSTACK_HANDLER, FetchFn, createFetchFn, getGlobalObject } from '@stacks/common';\n\n/**\n * Retrieves the authentication request from the query string\n * @return {String|null} the authentication request or `null` if\n * the query string parameter `authRequest` is not found\n * @private\n * @ignore\n */\nexport function getAuthRequestFromURL(): string | null {\n  const location = getGlobalObject('location', {\n    throwIfUnavailable: true,\n    usageDesc: 'getAuthRequestFromURL',\n  });\n\n  const params = new URLSearchParams(location?.search);\n  return params.get('authRequest')?.replaceAll(`${BLOCKSTACK_HANDLER}:`, '') ?? null;\n}\n\n/**\n * Fetches the contents of the manifest file specified in the authentication request\n *\n * @param  {String} authRequest encoded and signed authentication request\n * @return {Promise<Object|String>} Returns a `Promise` that resolves to the JSON\n * object manifest file unless there's an error in which case rejects with an error\n * message.\n * @private\n * @ignore\n */\nexport async function fetchAppManifest(\n  authRequest: string,\n  fetchFn: FetchFn = createFetchFn()\n): Promise<any> {\n  if (!authRequest) {\n    throw new Error('Invalid auth request');\n  }\n  const payload = decodeToken(authRequest).payload;\n  if (typeof payload === 'string') {\n    throw new Error('Unexpected token payload type of string');\n  }\n  const manifestURI = payload.manifest_uri as string;\n  try {\n    // Logger.debug(`Fetching manifest from ${manifestURI}`)\n    const response = await fetchFn(manifestURI);\n    const responseText = await response.text();\n    const responseJSON = JSON.parse(responseText);\n    return { ...responseJSON, manifestURI };\n  } catch (error) {\n    console.log(error);\n    throw new Error('Could not fetch manifest.json');\n  }\n}\n", "import { isSameOriginAbsoluteUrl } from '@stacks/common';\nimport { publicKeyToBtcAddress } from '@stacks/encryption';\nimport { decodeToken, TokenVerifier } from 'jsontokens';\nimport { getAddressFromDID } from './dids';\nimport { fetchAppManifest } from './provider';\n\n/**\n * Checks if the ES256k signature on passed `token` match the claimed public key\n * in the payload key `public_keys`.\n *\n * @param  {String} token encoded and signed authentication token\n * @return {Boolean} Returns `true` if the signature matches the claimed public key\n * @throws {Error} if `token` contains multiple public keys\n * @private\n * @ignore\n */\nexport function doSignaturesMatchPublicKeys(token: string): boolean {\n  const payload = decodeToken(token).payload;\n  if (typeof payload === 'string') {\n    throw new Error('Unexpected token payload type of string');\n  }\n  const publicKeys = payload.public_keys as string[];\n  if (publicKeys.length === 1) {\n    const publicKey = publicKeys[0];\n    try {\n      const tokenVerifier = new TokenVerifier('ES256k', publicKey);\n      return tokenVerifier.verify(token);\n    } catch (e) {\n      return false;\n    }\n  } else {\n    throw new Error('Multiple public keys are not supported');\n  }\n}\n\n/**\n * Makes sure that the identity address portion of\n * the decentralized identifier passed in the issuer `iss`\n * key of the token matches the public key\n *\n * @param  {String} token encoded and signed authentication token\n * @return {Boolean} if the identity address and public keys match\n * @throws {Error} if ` token` has multiple public keys\n * @private\n * @ignore\n */\nexport function doPublicKeysMatchIssuer(token: string): boolean {\n  const payload = decodeToken(token).payload;\n  if (typeof payload === 'string') {\n    throw new Error('Unexpected token payload type of string');\n  }\n  const publicKeys = payload.public_keys as string[];\n  const addressFromIssuer = getAddressFromDID(payload.iss);\n\n  if (publicKeys.length === 1) {\n    const addressFromPublicKeys = publicKeyToBtcAddress(publicKeys[0]);\n    if (addressFromPublicKeys === addressFromIssuer) {\n      return true;\n    }\n  } else {\n    throw new Error('Multiple public keys are not supported');\n  }\n\n  return false;\n}\n\n/**\n * Checks if the if the token issuance time and date is after the\n * current time and date.\n *\n * @param  {String}  token encoded and signed authentication token\n * @return {Boolean} `true` if the token was issued after the current time,\n * otherwise returns `false`\n * @private\n * @ignore\n */\nexport function isIssuanceDateValid(token: string) {\n  const payload = decodeToken(token).payload;\n  if (typeof payload === 'string') {\n    throw new Error('Unexpected token payload type of string');\n  }\n  if (payload.iat) {\n    if (typeof payload.iat !== 'number') {\n      return false;\n    }\n    const issuedAt = new Date(payload.iat * 1000); // JWT times are in seconds\n    if (new Date().getTime() < issuedAt.getTime()) {\n      return false;\n    } else {\n      return true;\n    }\n  } else {\n    return true;\n  }\n}\n\n/**\n * Checks if the expiration date of the `token` is before the current time\n * @param  {String}  token encoded and signed authentication token\n * @return {Boolean} `true` if the `token` has not yet expired, `false`\n * if the `token` has expired\n *\n * @private\n * @ignore\n */\nexport function isExpirationDateValid(token: string) {\n  const payload = decodeToken(token).payload;\n  if (typeof payload === 'string') {\n    throw new Error('Unexpected token payload type of string');\n  }\n  if (payload.exp) {\n    if (typeof payload.exp !== 'number') {\n      return false;\n    }\n    const expiresAt = new Date(payload.exp * 1000); // JWT times are in seconds\n    if (new Date().getTime() > expiresAt.getTime()) {\n      return false;\n    } else {\n      return true;\n    }\n  } else {\n    return true;\n  }\n}\n\n/**\n * Makes sure the `manifest_uri` is a same origin absolute URL.\n * @param  {String}  token encoded and signed authentication token\n * @return {Boolean} `true` if valid, otherwise `false`\n * @private\n * @ignore\n */\nexport function isManifestUriValid(token: string) {\n  const payload = decodeToken(token).payload;\n  if (typeof payload === 'string') {\n    throw new Error('Unexpected token payload type of string');\n  }\n  return isSameOriginAbsoluteUrl(payload.domain_name as string, payload.manifest_uri as string);\n}\n\n/**\n * Makes sure the `redirect_uri` is a same origin absolute URL.\n * @param  {String}  token encoded and signed authentication token\n * @return {Boolean} `true` if valid, otherwise `false`\n * @private\n * @ignore\n */\nexport function isRedirectUriValid(token: string) {\n  const payload = decodeToken(token).payload;\n  if (typeof payload === 'string') {\n    throw new Error('Unexpected token payload type of string');\n  }\n  return isSameOriginAbsoluteUrl(payload.domain_name as string, payload.redirect_uri as string);\n}\n\n/**\n * Verify authentication request is valid. This function performs a number\n * of checks on the authentication request token:\n * * Checks that `token` has a valid issuance date & is not expired\n * * Checks that `token` has a valid signature that matches the public key it claims\n * * Checks that both the manifest and redirect URLs are absolute and conform to\n * the same origin policy\n *\n * @param  {String} token encoded and signed authentication request token\n * @return {Promise} that resolves to true if the auth request\n *  is valid and false if it does not. It rejects with a String if the\n *  token is not signed\n * @private\n * @ignore\n */\nexport async function verifyAuthRequest(token: string): Promise<boolean> {\n  if (decodeToken(token).header.alg === 'none') {\n    throw new Error('Token must be signed in order to be verified');\n  }\n  const values = await Promise.all([\n    isExpirationDateValid(token),\n    isIssuanceDateValid(token),\n    doSignaturesMatchPublicKeys(token),\n    doPublicKeysMatchIssuer(token),\n    isManifestUriValid(token),\n    isRedirectUriValid(token),\n  ]);\n  return values.every(val => val);\n}\n\n/**\n * Verify the authentication request is valid and\n * fetch the app manifest file if valid. Otherwise, reject the promise.\n * @param  {String} token encoded and signed authentication request token\n * @return {Promise} that resolves to the app manifest file in JSON format\n * or rejects if the auth request or app manifest file is invalid\n * @private\n * @ignore\n */\nexport async function verifyAuthRequestAndLoadManifest(token: string): Promise<any> {\n  const valid = await verifyAuthRequest(token);\n  if (!valid) {\n    throw new Error('Token is an invalid auth request');\n  }\n  return fetchAppManifest(token);\n}\n\n/**\n * Verify the authentication response is valid.\n * @param {String} token the authentication response token\n * @return {Promise} that resolves to true if auth response\n * is valid and false if it does not\n * @private\n * @ignore\n */\nexport async function verifyAuthResponse(token: string): Promise<boolean> {\n  const conditions = await Promise.all([\n    isExpirationDateValid(token),\n    isIssuanceDateValid(token),\n    doSignaturesMatchPublicKeys(token),\n    doPublicKeysMatchIssuer(token),\n  ]);\n  return conditions.every(val => val);\n}\n", "import { InvalidStateError } from '@stacks/common';\nimport { UserData } from './userData';\n\nconst SESSION_VERSION = '1.0.0';\n\ntype EtagMap = { [key: string]: string };\n\nexport interface SessionOptions {\n  coreNode?: string;\n  userData?: UserData;\n  transitKey?: string;\n  etags?: EtagMap;\n  localStorageKey?: string;\n  storeOptions?: {\n    localStorageKey?: string;\n  };\n}\n\n/**\n * @ignore\n */\nexport class SessionData {\n  version: string;\n\n  transitKey?: string;\n\n  // using this in place of\n  // window.localStorage.setItem(BLOCKSTACK_STORAGE_LABEL, JSON.stringify(userData))\n  userData?: UserData;\n\n  etags?: EtagMap;\n\n  constructor(options: SessionOptions) {\n    this.version = SESSION_VERSION;\n    this.userData = options.userData;\n    this.transitKey = options.transitKey;\n    this.etags = options.etags ? options.etags : {};\n  }\n\n  // getGaiaHubConfig(): GaiaHubConfig {\n  //   return this.userData && this.userData.gaiaHubConfig\n  // }\n\n  // setGaiaHubConfig(config: GaiaHubConfig): void {\n  //   this.userData.gaiaHubConfig = config\n  // }\n\n  static fromJSON(json: any): SessionData {\n    if (json.version !== SESSION_VERSION) {\n      throw new InvalidStateError(`JSON data version ${json.version} not supported by SessionData`);\n    }\n    const options: SessionOptions = {\n      coreNode: json.coreNode,\n      userData: json.userData,\n      transitKey: json.transitKey,\n      etags: json.etags,\n    };\n    return new SessionData(options);\n  }\n\n  toString(): string {\n    return JSON.stringify(this);\n  }\n}\n", "import { SessionData, SessionOptions } from './sessionData';\nimport { LOCALSTORAGE_SESSION_KEY } from './constants';\nimport { NoSessionDataError } from '@stacks/common';\n\n/**\n * An abstract class representing the SessionDataStore interface.\n\n */\nexport class SessionDataStore {\n  constructor(sessionOptions?: SessionOptions) {\n    if (sessionOptions) {\n      const newSessionData = new SessionData(sessionOptions);\n      this.setSessionData(newSessionData);\n    }\n  }\n\n  getSessionData(): SessionData {\n    throw new Error('Abstract class');\n  }\n\n  // TODO: fix, not used?\n  setSessionData(_session: SessionData): boolean {\n    throw new Error('Abstract class');\n  }\n\n  deleteSessionData(): boolean {\n    throw new Error('Abstract class');\n  }\n}\n\n/**\n * Stores session data in the instance of this class.\n * @ignore\n */\nexport class InstanceDataStore extends SessionDataStore {\n  sessionData?: SessionData;\n\n  constructor(sessionOptions?: SessionOptions) {\n    super(sessionOptions);\n    if (!this.sessionData) {\n      this.setSessionData(new SessionData({}));\n    }\n  }\n\n  getSessionData(): SessionData {\n    if (!this.sessionData) {\n      throw new NoSessionDataError('No session data was found.');\n    }\n    return this.sessionData;\n  }\n\n  setSessionData(session: SessionData): boolean {\n    this.sessionData = session;\n    return true;\n  }\n\n  deleteSessionData(): boolean {\n    this.setSessionData(new SessionData({}));\n    return true;\n  }\n}\n\n/**\n * Stores session data in browser a localStorage entry.\n * @ignore\n */\nexport class LocalStorageStore extends SessionDataStore {\n  key: string;\n\n  constructor(sessionOptions?: SessionOptions) {\n    super(sessionOptions);\n    if (\n      sessionOptions &&\n      sessionOptions.storeOptions &&\n      sessionOptions.storeOptions.localStorageKey &&\n      typeof sessionOptions.storeOptions.localStorageKey === 'string'\n    ) {\n      this.key = sessionOptions.storeOptions.localStorageKey;\n    } else {\n      this.key = LOCALSTORAGE_SESSION_KEY;\n    }\n\n    const data = localStorage.getItem(this.key);\n    if (!data) {\n      const sessionData = new SessionData({});\n      this.setSessionData(sessionData);\n    }\n  }\n\n  getSessionData(): SessionData {\n    const data = localStorage.getItem(this.key);\n    if (!data) {\n      throw new NoSessionDataError('No session data was found in localStorage');\n    }\n    const dataJSON = JSON.parse(data);\n    return SessionData.fromJSON(dataJSON);\n  }\n\n  setSessionData(session: SessionData): boolean {\n    localStorage.setItem(this.key, session.toString());\n    return true;\n  }\n\n  deleteSessionData(): boolean {\n    localStorage.removeItem(this.key);\n    this.setSessionData(new SessionData({}));\n    return true;\n  }\n}\n", "/* eslint-disable @typescript-eslint/no-unsafe-declaration-merging */\n// todo: fix eslint rule, rename UserSession?\nimport { AppConfig } from './appConfig';\nimport { SessionOptions } from './sessionData';\nimport { InstanceDataStore, LocalStorageStore, SessionDataStore } from './sessionStore';\nimport { decodeToken } from 'jsontokens';\nimport { verifyAuthResponse } from './verification';\nimport * as authMessages from './messages';\nimport { utils } from '@noble/secp256k1';\nimport { decryptContent, encryptContent, EncryptContentOptions } from '@stacks/encryption';\nimport { getAddressFromDID } from './dids';\nimport {\n  createFetchFn,\n  FetchFn,\n  GAIA_URL,\n  getGlobalObject,\n  HIRO_MAINNET_URL,\n  InvalidStateError,\n  isLaterVersion,\n  Logger,\n  LoginFailedError,\n  MissingParameterError,\n  nextHour,\n} from '@stacks/common';\nimport { extractProfile } from '@stacks/profile';\nimport { AuthScope, DEFAULT_PROFILE } from './constants';\n\nimport { UserData } from './userData';\nimport { protocolEchoReplyDetection } from './protocolEchoDetection';\n\n/**\n *\n * Represents an instance of a signed in user for a particular app.\n *\n * A signed in user has access to two major pieces of information\n * about the user, the user's private key for that app and the location\n * of the user's gaia storage bucket for the app.\n *\n * A user can be signed in either directly through the interactive\n * sign in process or by directly providing the app private key.\n *\n\n *\n */\nexport class UserSession {\n  appConfig: AppConfig;\n\n  store: SessionDataStore;\n\n  /**\n   * Creates a UserSession object\n   *\n   * @param options\n   */\n  constructor(options?: {\n    appConfig?: AppConfig;\n    sessionStore?: SessionDataStore;\n    sessionOptions?: SessionOptions;\n  }) {\n    let runningInBrowser = true;\n\n    if (typeof window === 'undefined' && typeof self === 'undefined') {\n      // Logger.debug('UserSession: not running in browser')\n      runningInBrowser = false;\n    }\n\n    if (options && options.appConfig) {\n      this.appConfig = options.appConfig;\n    } else if (runningInBrowser) {\n      this.appConfig = new AppConfig();\n    } else {\n      throw new MissingParameterError('You need to specify options.appConfig');\n    }\n\n    if (options && options.sessionStore) {\n      this.store = options.sessionStore;\n    } else if (runningInBrowser) {\n      if (options) {\n        this.store = new LocalStorageStore(options.sessionOptions);\n      } else {\n        this.store = new LocalStorageStore();\n      }\n    } else if (options) {\n      this.store = new InstanceDataStore(options.sessionOptions);\n    } else {\n      this.store = new InstanceDataStore();\n    }\n  }\n\n  /**\n   * Generates an authentication request that can be sent to the Blockstack\n   * browser for the user to approve sign in. This authentication request can\n   * then be used for sign in by passing it to the [[redirectToSignInWithAuthRequest]]\n   * method.\n   *\n   * *Note*: This method should only be used if you want to use a customized authentication\n   * flow. Typically, you'd use [[redirectToSignIn]] which is the default sign in method.\n   *\n   * @param transitKey A HEX encoded transit private key.\n   * @param redirectURI Location to redirect the user to after sign in approval.\n   * @param manifestURI Location of this app's manifest file.\n   * @param scopes The permissions this app is requesting. The default is `store_write`.\n   * @param appDomain The origin of the app.\n   * @param expiresAt The time at which this request is no longer valid.\n   * @param extraParams Any extra parameters to pass to the authenticator. Use this to\n   * pass options that aren't part of the Blockstack authentication specification,\n   * but might be supported by special authenticators.\n   *\n   * @returns {String} the authentication request token\n   */\n  makeAuthRequestToken(\n    transitKey?: string,\n    redirectURI?: string,\n    manifestURI?: string,\n    scopes?: (AuthScope | string)[],\n    appDomain?: string,\n    expiresAt: number = nextHour().getTime(),\n    extraParams: any = {}\n  ): string {\n    const appConfig = this.appConfig;\n    if (!appConfig) {\n      throw new InvalidStateError('Missing AppConfig');\n    }\n    transitKey = transitKey || this.generateAndStoreTransitKey();\n    redirectURI = redirectURI || appConfig.redirectURI();\n    manifestURI = manifestURI || appConfig.manifestURI();\n    scopes = scopes || appConfig.scopes;\n    appDomain = appDomain || appConfig.appDomain;\n    return authMessages.makeAuthRequestToken(\n      transitKey,\n      redirectURI,\n      manifestURI,\n      scopes,\n      appDomain,\n      expiresAt,\n      extraParams\n    );\n  }\n\n  /**\n   * Generates a ECDSA keypair to\n   * use as the ephemeral app transit private key\n   * and store in the session.\n   *\n   * @returns {String} the hex encoded private key\n   *\n   */\n  generateAndStoreTransitKey(): string {\n    const sessionData = this.store.getSessionData();\n    const transitKey = authMessages.generateTransitKey();\n    sessionData.transitKey = transitKey;\n    this.store.setSessionData(sessionData);\n    return transitKey;\n  }\n\n  /**\n   * Retrieve the authentication token from the URL query\n   * @return {String} the authentication token if it exists otherwise `null`\n   */\n  getAuthResponseToken(): string {\n    const search = getGlobalObject('location', {\n      throwIfUnavailable: true,\n      usageDesc: 'getAuthResponseToken',\n    })?.search;\n\n    const params = new URLSearchParams(search);\n    return params.get('authResponse') ?? '';\n  }\n\n  /**\n   * Check if there is a authentication request that hasn't been handled.\n   *\n   * Also checks for a protocol echo reply (which if detected then the page\n   * will be automatically redirected after this call).\n   *\n   * @return {Boolean} `true` if there is a pending sign in, otherwise `false`\n   */\n  isSignInPending() {\n    try {\n      const isProtocolEcho = protocolEchoReplyDetection();\n      if (isProtocolEcho) {\n        Logger.info(\n          'protocolEchoReply detected from isSignInPending call, the page is about to redirect.'\n        );\n        return true;\n      }\n    } catch (error) {\n      Logger.error(`Error checking for protocol echo reply isSignInPending: ${error}`);\n    }\n\n    return !!this.getAuthResponseToken();\n  }\n\n  /**\n   * Check if a user is currently signed in.\n   *\n   * @returns {Boolean} `true` if the user is signed in, `false` if not.\n   */\n  isUserSignedIn() {\n    return !!this.store.getSessionData().userData;\n  }\n\n  /**\n   * Try to process any pending sign in request by returning a `Promise` that resolves\n   * to the user data object if the sign in succeeds.\n   *\n   * @param {String} authResponseToken - the signed authentication response token\n   * @returns {Promise} that resolves to the user data object if successful and rejects\n   * if handling the sign in request fails or there was no pending sign in request.\n   */\n  async handlePendingSignIn(\n    authResponseToken: string = this.getAuthResponseToken(),\n    fetchFn: FetchFn = createFetchFn()\n  ): Promise<UserData> {\n    const sessionData = this.store.getSessionData();\n\n    if (sessionData.userData) {\n      throw new LoginFailedError('Existing user session found.');\n    }\n\n    const transitKey = this.store.getSessionData().transitKey;\n\n    // let nameLookupURL;\n    let coreNode = this.appConfig && this.appConfig.coreNode;\n    if (!coreNode) {\n      coreNode = HIRO_MAINNET_URL;\n    }\n\n    const tokenPayload = decodeToken(authResponseToken).payload;\n\n    if (typeof tokenPayload === 'string') {\n      throw new Error('Unexpected token payload type of string');\n    }\n\n    const isValid = await verifyAuthResponse(authResponseToken);\n    if (!isValid) {\n      throw new LoginFailedError('Invalid authentication response.');\n    }\n\n    // TODO: real version handling\n    let appPrivateKey: string = tokenPayload.private_key as string;\n    let coreSessionToken: string = tokenPayload.core_token as string;\n    if (isLaterVersion(tokenPayload.version as string, '1.1.0')) {\n      if (transitKey !== undefined && transitKey != null) {\n        if (tokenPayload.private_key !== undefined && tokenPayload.private_key !== null) {\n          try {\n            appPrivateKey = (await authMessages.decryptPrivateKey(\n              transitKey,\n              tokenPayload.private_key as string\n            )) as string;\n          } catch (e) {\n            Logger.warn('Failed decryption of appPrivateKey, will try to use as given');\n            if (!utils.isValidPrivateKey(tokenPayload.private_key as string)) {\n              throw new LoginFailedError(\n                'Failed decrypting appPrivateKey. Usually means' +\n                  ' that the transit key has changed during login.'\n              );\n            }\n          }\n        }\n        if (coreSessionToken !== undefined && coreSessionToken !== null) {\n          try {\n            coreSessionToken = (await authMessages.decryptPrivateKey(\n              transitKey,\n              coreSessionToken\n            )) as string;\n          } catch (e) {\n            Logger.info('Failed decryption of coreSessionToken, will try to use as given');\n          }\n        }\n      } else {\n        throw new LoginFailedError(\n          'Authenticating with protocol > 1.1.0 requires transit' + ' key, and none found.'\n        );\n      }\n    }\n    let hubUrl = GAIA_URL;\n    let gaiaAssociationToken: string;\n    if (\n      isLaterVersion(tokenPayload.version as string, '1.2.0') &&\n      tokenPayload.hubUrl !== null &&\n      tokenPayload.hubUrl !== undefined\n    ) {\n      hubUrl = tokenPayload.hubUrl as string;\n    }\n    if (\n      isLaterVersion(tokenPayload.version as string, '1.3.0') &&\n      tokenPayload.associationToken !== null &&\n      tokenPayload.associationToken !== undefined\n    ) {\n      gaiaAssociationToken = tokenPayload.associationToken as string;\n    }\n\n    const userData: UserData = {\n      profile: tokenPayload.profile,\n      email: tokenPayload.email as string,\n      decentralizedID: tokenPayload.iss,\n      identityAddress: getAddressFromDID(tokenPayload.iss),\n      appPrivateKey,\n      coreSessionToken,\n      authResponseToken,\n      hubUrl,\n      appPrivateKeyFromWalletSalt: tokenPayload.appPrivateKeyFromWalletSalt as string,\n      coreNode: tokenPayload.blockstackAPIUrl as string,\n      // @ts-expect-error\n      gaiaAssociationToken,\n    };\n    const profileURL = tokenPayload.profile_url as string;\n    if (!userData.profile && profileURL) {\n      const response = await fetchFn(profileURL);\n      if (!response.ok) {\n        // return blank profile if we fail to fetch\n        userData.profile = Object.assign({}, DEFAULT_PROFILE);\n      } else {\n        const responseText = await response.text();\n        const wrappedProfile = JSON.parse(responseText);\n        userData.profile = extractProfile(wrappedProfile[0].token);\n      }\n    } else {\n      userData.profile = tokenPayload.profile;\n    }\n\n    sessionData.userData = userData;\n    this.store.setSessionData(sessionData);\n\n    return userData;\n  }\n\n  /**\n   * Retrieves the user data object. The user's profile is stored in the key [[Profile]].\n   *\n   * @returns {Object} User data object.\n   */\n  loadUserData() {\n    const userData = this.store.getSessionData().userData;\n    if (!userData) {\n      throw new InvalidStateError('No user data found. Did the user sign in?');\n    }\n    return userData;\n  }\n\n  /**\n   * Encrypts the data provided with the app public key.\n   * @param {string | Uint8Array} content  the data to encrypt\n   * @param options\n   * @param {string} options.publicKey the hex string of the ECDSA public\n   * key to use for encryption. If not provided, will use user's appPrivateKey.\n   *\n   * @returns {string} Stringified ciphertext object\n   */\n  encryptContent(content: string | Uint8Array, options?: EncryptContentOptions): Promise<string> {\n    const opts = Object.assign({}, options);\n    if (!opts.privateKey) {\n      opts.privateKey = this.loadUserData().appPrivateKey;\n    }\n    return encryptContent(content, opts);\n  }\n\n  /**\n   * Decrypts data encrypted with `encryptContent` with the\n   * transit private key.\n   * @param {string | Uint8Array} content - encrypted content.\n   * @param options\n   * @param {string} options.privateKey - The hex string of the ECDSA private\n   * key to use for decryption. If not provided, will use user's appPrivateKey.\n   * @returns {string | Uint8Array} decrypted content.\n   */\n  decryptContent(content: string, options?: { privateKey?: string }): Promise<Uint8Array | string> {\n    const opts = Object.assign({}, options);\n    if (!opts.privateKey) {\n      opts.privateKey = this.loadUserData().appPrivateKey;\n    }\n    return decryptContent(content, opts);\n  }\n\n  /**\n   * Sign the user out and optionally redirect to given location.\n   * @param  redirectURL\n   * Location to redirect user to after sign out.\n   * Only used in environments with `window` available\n   */\n\n  signUserOut(\n    redirectURL?: string\n    // TODO: this is not used?\n    // caller?: UserSession\n  ) {\n    this.store.deleteSessionData();\n    if (redirectURL) {\n      if (typeof location !== 'undefined' && location.href) {\n        location.href = redirectURL;\n      }\n      // TODO: Invalid left-hand side in assignment expression\n      // // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n      // // @ts-ignore\n      // getGlobalObject('location', {\n      //   throwIfUnavailable: true,\n      //   usageDesc: 'signUserOut',\n      // })?.href = redirectURL;\n    }\n  }\n}\n\n// Add method aliases for backwards compatibility\nexport interface UserSession {\n  /** @deprecated {@link makeAuthRequest} was renamed to {@link makeAuthRequestToken} */\n  makeAuthRequest(\n    ...args: Parameters<typeof UserSession.prototype.makeAuthRequestToken>\n  ): ReturnType<typeof UserSession.prototype.makeAuthRequestToken>;\n}\n\n// eslint-disable-next-line @typescript-eslint/unbound-method\nUserSession.prototype.makeAuthRequest = UserSession.prototype.makeAuthRequestToken;\n", "import { decodeToken, SECP256K1Client, TokenSigner, TokenVerifier } from 'jsontokens';\nimport { TokenInterface } from 'jsontokens/lib/decode';\nimport { nextYear, makeUUID4 } from '@stacks/common';\nimport { getAddressFromPublicKey } from '@stacks/transactions';\n\n/**\n * Signs a profile token\n * @param {Object} profile - the JSON of the profile to be signed\n * @param {String} privateKey - the signing private key\n * @param {Object} subject - the entity that the information is about\n * @param {Object} issuer - the entity that is issuing the token\n * @param {String} signingAlgorithm - the signing algorithm to use\n * @param {Date} issuedAt - the time of issuance of the token\n * @param {Date} expiresAt - the time of expiration of the token\n * @returns {Object} - the signed profile token\n *\n */\nexport function signProfileToken(\n  profile: any,\n  privateKey: string,\n  subject?: any,\n  issuer?: any,\n  signingAlgorithm = 'ES256K',\n  issuedAt = new Date(),\n  expiresAt = nextYear()\n): string {\n  if (signingAlgorithm !== 'ES256K') {\n    throw new Error('Signing algorithm not supported');\n  }\n\n  const publicKey = SECP256K1Client.derivePublicKey(privateKey);\n\n  if (!subject) {\n    subject = { publicKey };\n  }\n\n  if (!issuer) {\n    issuer = { publicKey };\n  }\n\n  const tokenSigner = new TokenSigner(signingAlgorithm, privateKey);\n\n  const payload = {\n    jti: makeUUID4(),\n    iat: issuedAt.toISOString(),\n    exp: expiresAt.toISOString(),\n    subject,\n    issuer,\n    claim: profile,\n  };\n\n  return tokenSigner.sign(payload);\n}\n\n/**\n * Wraps a token for a profile token file\n * @param {String} token - the token to be wrapped\n * @returns {Object} - including `token` and `decodedToken`\n */\nexport function wrapProfileToken(token: string) {\n  return {\n    token,\n    decodedToken: decodeToken(token),\n  };\n}\n\n/**\n * Verifies a profile token\n * @param {String} token - the token to be verified\n * @param {String} publicKeyOrAddress - the public key or address of the\n *   keypair that is thought to have signed the token\n * @returns {Object} - the verified, decoded profile token\n * @throws {Error} - throws an error if token verification fails\n */\nexport function verifyProfileToken(token: string, publicKeyOrAddress: string): TokenInterface {\n  const decodedToken = decodeToken(token);\n  const payload = decodedToken.payload;\n  if (typeof payload === 'string') {\n    throw new Error('Unexpected token payload type of string');\n  }\n\n  // Inspect and verify the subject\n  if (payload.hasOwnProperty('subject') && payload.subject) {\n    if (!payload.subject.hasOwnProperty('publicKey')) {\n      throw new Error(\"Token doesn't have a subject public key\");\n    }\n  } else {\n    throw new Error(\"Token doesn't have a subject\");\n  }\n\n  // Inspect and verify the issuer\n  if (payload.hasOwnProperty('issuer') && payload.issuer) {\n    if (!payload.issuer.hasOwnProperty('publicKey')) {\n      throw new Error(\"Token doesn't have an issuer public key\");\n    }\n  } else {\n    throw new Error(\"Token doesn't have an issuer\");\n  }\n\n  // Inspect and verify the claim\n  if (!payload.hasOwnProperty('claim')) {\n    throw new Error(\"Token doesn't have a claim\");\n  }\n\n  const issuerPublicKey = (payload.issuer as Record<string, string>).publicKey;\n  const address = getAddressFromPublicKey(issuerPublicKey);\n\n  if (publicKeyOrAddress === issuerPublicKey) {\n    // pass\n  } else if (publicKeyOrAddress === address) {\n    // pass\n  } else {\n    throw new Error('Token issuer public key does not match the verifying value');\n  }\n\n  const tokenVerifier = new TokenVerifier(decodedToken.header.alg as string, issuerPublicKey);\n  if (!tokenVerifier) {\n    throw new Error('Invalid token verifier');\n  }\n\n  const tokenVerified = tokenVerifier.verify(token);\n  if (!tokenVerified) {\n    throw new Error('Token verification failed');\n  }\n\n  return decodedToken;\n}\n\n/**\n * Extracts a profile from an encoded token and optionally verifies it,\n * if `publicKeyOrAddress` is provided.\n * @param {String} token - the token to be extracted\n * @param {String} publicKeyOrAddress - the public key or address of the\n *   keypair that is thought to have signed the token\n * @returns {Object} - the profile extracted from the encoded token\n * @throws {Error} - if the token isn't signed by the provided `publicKeyOrAddress`\n */\nexport function extractProfile(\n  token: string,\n  publicKeyOrAddress: string | null = null\n): Record<string, any> {\n  let decodedToken;\n  if (publicKeyOrAddress) {\n    decodedToken = verifyProfileToken(token, publicKeyOrAddress);\n  } else {\n    decodedToken = decodeToken(token);\n  }\n\n  let profile = {};\n  if (decodedToken.hasOwnProperty('payload')) {\n    const payload = decodedToken.payload;\n    if (typeof payload === 'string') {\n      throw new Error('Unexpected token payload type of string');\n    }\n    if (payload.hasOwnProperty('claim')) {\n      profile = payload.claim as Record<string, any>;\n    }\n  }\n\n  return profile;\n}\n", "/**\n * @ignore\n * todo: remove this file (needed for CLI?)\n */\nconst config = {\n  network: {\n    layer1: 'placeholder',\n  },\n  logLevel: 'debug',\n};\n\nexport { config };\n", "/**\n * @ignore\n */\nexport const ERROR_CODES = {\n  MISSING_PARAMETER: 'missing_parameter',\n  REMOTE_SERVICE_ERROR: 'remote_service_error',\n  INVALID_STATE: 'invalid_state',\n  NO_SESSION_DATA: 'no_session_data',\n  DOES_NOT_EXIST: 'does_not_exist',\n  FAILED_DECRYPTION_ERROR: 'failed_decryption_error',\n  INVALID_DID_ERROR: 'invalid_did_error',\n  NOT_ENOUGH_FUNDS_ERROR: 'not_enough_error',\n  INVALID_AMOUNT_ERROR: 'invalid_amount_error',\n  LOGIN_FAILED_ERROR: 'login_failed',\n  SIGNATURE_VERIFICATION_ERROR: 'signature_verification_failure',\n  CONFLICT_ERROR: 'conflict_error',\n  NOT_ENOUGH_PROOF_ERROR: 'not_enough_proof_error',\n  BAD_PATH_ERROR: 'bad_path_error',\n  VALIDATION_ERROR: 'validation_error',\n  PAYLOAD_TOO_LARGE_ERROR: 'payload_too_large_error',\n  PRECONDITION_FAILED_ERROR: 'precondition_failed_error',\n  UNKNOWN: 'unknown',\n};\n\nObject.freeze(ERROR_CODES);\n\n/**\n * @ignore\n */\ntype ErrorData = {\n  code: string;\n  parameter?: string;\n  message: string;\n};\n\n/**\n * @ignore\n */\nexport class BlockstackError extends Error {\n  message: string;\n\n  code: string;\n\n  parameter?: string;\n\n  constructor(error: ErrorData) {\n    super();\n    let message = error.message;\n    let bugDetails = `Error Code: ${error.code}`;\n    let stack = this.stack;\n    if (!stack) {\n      try {\n        throw new Error();\n      } catch (e: any) {\n        stack = e.stack;\n      }\n    } else {\n      bugDetails += `Stack Trace:\\n${stack}`;\n    }\n    message += `\\nIf you believe this exception is caused by a bug in stacks.js,\n      please file a bug report: https://github.com/blockstack/stacks.js/issues\\n\\n${bugDetails}`;\n    this.message = message;\n    this.code = error.code;\n    this.parameter = error.parameter ? error.parameter : undefined;\n  }\n\n  toString() {\n    return `${super.toString()}\n    code: ${this.code} param: ${this.parameter ? this.parameter : 'n/a'}`;\n  }\n}\n\n/**\n * @ignore\n */\nexport class InvalidParameterError extends BlockstackError {\n  constructor(parameter: string, message: string = '') {\n    super({ code: ERROR_CODES.MISSING_PARAMETER, message, parameter });\n    this.name = 'MissingParametersError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class MissingParameterError extends BlockstackError {\n  constructor(parameter: string, message: string = '') {\n    super({ code: ERROR_CODES.MISSING_PARAMETER, message, parameter });\n    this.name = 'MissingParametersError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class RemoteServiceError extends BlockstackError {\n  response: Response;\n\n  constructor(response: Response, message: string = '') {\n    super({ code: ERROR_CODES.REMOTE_SERVICE_ERROR, message });\n    this.response = response;\n  }\n}\n\n/**\n * @ignore\n */\nexport class InvalidDIDError extends BlockstackError {\n  constructor(message: string = '') {\n    super({ code: ERROR_CODES.INVALID_DID_ERROR, message });\n    this.name = 'InvalidDIDError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class NotEnoughFundsError extends BlockstackError {\n  leftToFund: number;\n\n  constructor(leftToFund: number) {\n    const message = `Not enough UTXOs to fund. Left to fund: ${leftToFund}`;\n    super({ code: ERROR_CODES.NOT_ENOUGH_FUNDS_ERROR, message });\n    this.leftToFund = leftToFund;\n    this.name = 'NotEnoughFundsError';\n    this.message = message;\n  }\n}\n\n/**\n * @ignore\n */\nexport class InvalidAmountError extends BlockstackError {\n  fees: number;\n\n  specifiedAmount: number;\n\n  constructor(fees: number, specifiedAmount: number) {\n    const message =\n      `Not enough coin to fund fees transaction fees. Fees would be ${fees},` +\n      ` specified spend is  ${specifiedAmount}`;\n    super({ code: ERROR_CODES.INVALID_AMOUNT_ERROR, message });\n    this.specifiedAmount = specifiedAmount;\n    this.fees = fees;\n    this.name = 'InvalidAmountError';\n    this.message = message;\n  }\n}\n\n/**\n * @ignore\n */\nexport class LoginFailedError extends BlockstackError {\n  constructor(reason: string) {\n    const message = `Failed to login: ${reason}`;\n    super({ code: ERROR_CODES.LOGIN_FAILED_ERROR, message });\n    this.message = message;\n    this.name = 'LoginFailedError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class SignatureVerificationError extends BlockstackError {\n  constructor(reason: string) {\n    const message = `Failed to verify signature: ${reason}`;\n    super({ code: ERROR_CODES.SIGNATURE_VERIFICATION_ERROR, message });\n    this.message = message;\n    this.name = 'SignatureVerificationError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class FailedDecryptionError extends BlockstackError {\n  constructor(message: string = 'Unable to decrypt cipher object.') {\n    super({ code: ERROR_CODES.FAILED_DECRYPTION_ERROR, message });\n    this.message = message;\n    this.name = 'FailedDecryptionError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class InvalidStateError extends BlockstackError {\n  constructor(message: string) {\n    super({ code: ERROR_CODES.INVALID_STATE, message });\n    this.message = message;\n    this.name = 'InvalidStateError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class NoSessionDataError extends BlockstackError {\n  constructor(message: string) {\n    super({ code: ERROR_CODES.INVALID_STATE, message });\n    this.message = message;\n    this.name = 'NoSessionDataError';\n  }\n}\n\n/**\n * @ignore\n */\nexport interface GaiaHubErrorResponse {\n  status: number;\n  statusText: string;\n  body?: any; // todo: should this be string?\n}\n\nexport interface HubErrorDetails {\n  message?: string;\n  statusCode: number;\n  statusText: string;\n  [prop: string]: any;\n}\n\n/**\n * @ignore\n */\nexport class GaiaHubError extends BlockstackError {\n  hubError?: HubErrorDetails;\n\n  constructor(error: ErrorData, response: GaiaHubErrorResponse) {\n    super(error);\n    if (response) {\n      this.hubError = {\n        statusCode: response.status,\n        statusText: response.statusText,\n      };\n      if (typeof response.body === 'string') {\n        this.hubError.message = response.body;\n      } else if (typeof response.body === 'object') {\n        Object.assign(this.hubError, response.body);\n      }\n    }\n  }\n}\n\n/**\n * @ignore\n */\nexport class DoesNotExist extends GaiaHubError {\n  constructor(message: string, response: GaiaHubErrorResponse) {\n    super({ message, code: ERROR_CODES.DOES_NOT_EXIST }, response);\n    this.name = 'DoesNotExist';\n  }\n}\n\n/**\n * @ignore\n */\nexport class ConflictError extends GaiaHubError {\n  constructor(message: string, response: GaiaHubErrorResponse) {\n    super({ message, code: ERROR_CODES.CONFLICT_ERROR }, response);\n    this.name = 'ConflictError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class NotEnoughProofError extends GaiaHubError {\n  constructor(message: string, response: GaiaHubErrorResponse) {\n    super({ message, code: ERROR_CODES.NOT_ENOUGH_PROOF_ERROR }, response);\n    this.name = 'NotEnoughProofError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class BadPathError extends GaiaHubError {\n  constructor(message: string, response: GaiaHubErrorResponse) {\n    super({ message, code: ERROR_CODES.BAD_PATH_ERROR }, response);\n    this.name = 'BadPathError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class ValidationError extends GaiaHubError {\n  constructor(message: string, response: GaiaHubErrorResponse) {\n    super({ message, code: ERROR_CODES.VALIDATION_ERROR }, response);\n    this.name = 'ValidationError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class PayloadTooLargeError extends GaiaHubError {\n  /** Can be `null` when an oversized payload is detected client-side. */\n  hubError?: HubErrorDetails;\n\n  maxUploadByteSize: number;\n\n  constructor(message: string, response: GaiaHubErrorResponse | null, maxUploadByteSize: number) {\n    super({ message, code: ERROR_CODES.PAYLOAD_TOO_LARGE_ERROR }, response!);\n    this.name = 'PayloadTooLargeError';\n    this.maxUploadByteSize = maxUploadByteSize;\n  }\n}\n\n/**\n * @ignore\n */\nexport class PreconditionFailedError extends GaiaHubError {\n  constructor(message: string, response: GaiaHubErrorResponse) {\n    super({ message, code: ERROR_CODES.PRECONDITION_FAILED_ERROR }, response);\n    this.name = 'PreconditionFailedError';\n  }\n}\n", "import { config } from './config';\n\nconst levels = ['debug', 'info', 'warn', 'error', 'none'];\n\nconst levelToInt: { [level: string]: number } = {};\nconst intToLevel: { [int: number]: string } = {};\n\nfor (let index = 0; index < levels.length; index++) {\n  const level = levels[index];\n  levelToInt[level] = index;\n  intToLevel[index] = level;\n}\n\n/**\n * @ignore\n * @deprecated\n */\nexport class Logger {\n  static error(message: string) {\n    if (!this.shouldLog('error')) return;\n    console.error(this.logMessage('error', message));\n  }\n\n  static warn(message: string) {\n    if (!this.shouldLog('warn')) return;\n    console.warn(this.logMessage('warn', message));\n  }\n\n  static info(message: string) {\n    if (!this.shouldLog('info')) return;\n    console.log(this.logMessage('info', message));\n  }\n\n  static debug(message: string) {\n    if (!this.shouldLog('debug')) return;\n    console.log(this.logMessage('debug', message));\n  }\n\n  static logMessage(level: string, message: string) {\n    return `[${level.toUpperCase()}] ${message}`;\n  }\n\n  static shouldLog(level: string) {\n    const currentLevel = levelToInt[config.logLevel];\n    return currentLevel <= levelToInt[level];\n  }\n}\n", "import { Logger } from './logger';\n\n/**\n *  @ignore\n * @deprecated\n */\nexport const BLOCKSTACK_HANDLER = 'blockstack';\n// todo: `next` get rid of all this blockstack stuff\n\n/**\n * Time\n * @private\n * @ignore\n * @deprecated\n */\nexport function nextYear() {\n  return new Date(new Date().setFullYear(new Date().getFullYear() + 1));\n}\n\n/**\n * Time\n * @private\n * @ignore\n * @deprecated\n */\nexport function nextMonth() {\n  return new Date(new Date().setMonth(new Date().getMonth() + 1));\n}\n\n/**\n * Time\n * @private\n * @ignore\n * @deprecated\n */\nexport function nextHour() {\n  return new Date(new Date().setHours(new Date().getHours() + 1));\n}\n\n/**\n * Converts megabytes to bytes. Returns 0 if the input is not a finite number.\n * @ignore\n * @deprecated\n */\nexport function megabytesToBytes(megabytes: number): number {\n  if (!Number.isFinite(megabytes)) {\n    return 0;\n  }\n  return Math.floor(megabytes * 1024 * 1024);\n}\n\n/**\n * Calculate the AES-CBC ciphertext output byte length a given input length.\n * AES has a fixed block size of 16-bytes regardless key size.\n * @ignore\n * @deprecated\n */\nexport function getAesCbcOutputLength(inputByteLength: number) {\n  // AES-CBC block mode rounds up to the next block size.\n  const cipherTextLength = (Math.floor(inputByteLength / 16) + 1) * 16;\n  return cipherTextLength;\n}\n\n/**\n * Calculate the base64 encoded string length for a given input length.\n * This is equivalent to the byte length when the string is ASCII or UTF8-8\n * encoded.\n * @param number\n * @deprecated\n */\nexport function getBase64OutputLength(inputByteLength: number) {\n  const encodedLength = Math.ceil(inputByteLength / 3) * 4;\n  return encodedLength;\n}\n\n/**\n * Query Strings\n * @private\n * @ignore\n * @deprecated\n */\nexport function updateQueryStringParameter(uri: string, key: string, value: string) {\n  const re = new RegExp(`([?&])${key}=.*?(&|$)`, 'i');\n  const separator = uri.indexOf('?') !== -1 ? '&' : '?';\n  if (uri.match(re)) {\n    return uri.replace(re, `$1${key}=${value}$2`);\n  } else {\n    return `${uri}${separator}${key}=${value}`;\n  }\n}\n\n/**\n * Versioning\n * @param {string} v1 - the left half of the version inequality\n * @param {string} v2 - right half of the version inequality\n * @returns {bool} iff v1 >= v2\n * @private\n * @ignore\n * @deprecated\n */\nexport function isLaterVersion(v1: string, v2: string) {\n  if (v1 === undefined || v1 === '') {\n    v1 = '0.0.0';\n  }\n\n  if (v2 === undefined || v1 === '') {\n    v2 = '0.0.0';\n  }\n\n  const v1tuple = v1.split('.').map(x => parseInt(x, 10));\n  const v2tuple = v2.split('.').map(x => parseInt(x, 10));\n\n  for (let index = 0; index < v2.length; index++) {\n    if (index >= v1.length) {\n      v2tuple.push(0);\n    }\n    if (v1tuple[index] < v2tuple[index]) {\n      return false;\n    }\n  }\n  return true;\n}\n\n/**\n * UUIDs\n * @private\n * @ignore\n * @deprecated\n */\nexport function makeUUID4() {\n  let d = new Date().getTime();\n  if (typeof performance !== 'undefined' && typeof performance.now === 'function') {\n    d += performance.now(); // use high-precision timer if available\n  }\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\n    const r = (d + Math.random() * 16) % 16 | 0;\n    d = Math.floor(d / 16);\n    return (c === 'x' ? r : (r & 0x3) | 0x8).toString(16);\n  });\n}\n\n/**\n * Checks if both urls pass the same origin check & are absolute\n * @param  {[type]}  uri1 first uri to check\n * @param  {[type]}  uri2 second uri to check\n * @return {Boolean} true if they pass the same origin check\n * @private\n * @ignore\n * @deprecated\n */\nexport function isSameOriginAbsoluteUrl(uri1: string, uri2: string) {\n  try {\n    const parsedUri1 = new URL(uri1);\n    const parsedUri2 = new URL(uri2);\n\n    const port1 =\n      parseInt(parsedUri1.port || '0', 10) | 0 || (parsedUri1.protocol === 'https:' ? 443 : 80);\n    const port2 =\n      parseInt(parsedUri2.port || '0', 10) | 0 || (parsedUri2.protocol === 'https:' ? 443 : 80);\n\n    const match = {\n      scheme: parsedUri1.protocol === parsedUri2.protocol,\n      hostname: parsedUri1.hostname === parsedUri2.hostname,\n      port: port1 === port2,\n      absolute:\n        (uri1.includes('http://') || uri1.includes('https://')) &&\n        (uri2.includes('http://') || uri2.includes('https://')),\n    };\n\n    return match.scheme && match.hostname && match.port && match.absolute;\n  } catch (error) {\n    console.log(error);\n    console.log('Parsing error in same URL origin check');\n    // Parse error\n    return false;\n  }\n}\n\n/**\n * Returns the global scope `Window`, `WorkerGlobalScope`, or `NodeJS.Global` if available in the\n * currently executing environment.\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Window/self\n * @see https://developer.mozilla.org/en-US/docs/Web/API/WorkerGlobalScope/self\n * @see https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope\n *\n * This could be switched to `globalThis` once it is standardized and widely available.\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/globalThis\n * @ignore\n */\nexport function getGlobalScope(): Window {\n  if (typeof self !== 'undefined') {\n    return self;\n  }\n  if (typeof window !== 'undefined') {\n    return window;\n  }\n  // This function is meant to be called when accessing APIs that are typically only available in\n  // web-browser/DOM environments, but we also want to support situations where running in Node.js\n  // environment, and a polyfill was added to the Node.js `global` object scope without adding the\n  // `window` global object as well.\n  if (typeof global !== 'undefined') {\n    return global as unknown as Window;\n  }\n  throw new Error(\n    'Unexpected runtime environment - no supported global scope (`window`, `self`, `global`) available'\n  );\n}\n\n/** @deprecated */\nfunction getAPIUsageErrorMessage(\n  scopeObject: unknown,\n  apiName: string,\n  usageDesc?: string\n): string {\n  if (usageDesc) {\n    return `Use of '${usageDesc}' requires \\`${apiName}\\` which is unavailable on the '${scopeObject}' object within the currently executing environment.`;\n  } else {\n    return `\\`${apiName}\\` is unavailable on the '${scopeObject}' object within the currently executing environment.`;\n  }\n}\n\ninterface GetGlobalObjectOptions {\n  /**\n   * Throw an error if the object is not found.\n   * @default false\n   */\n  throwIfUnavailable?: boolean;\n  /**\n   * Additional information to include in an error if thrown.\n   */\n  usageDesc?: string;\n  /**\n   * If the object is not found, return an new empty object instead of undefined.\n   * Requires [[throwIfUnavailable]] to be falsey.\n   * @default false\n   */\n  returnEmptyObject?: boolean;\n}\n\n/**\n * Returns an object from the global scope (`Window` or `WorkerGlobalScope`) if it\n * is available within the currently executing environment.\n * When executing within the Node.js runtime these APIs are unavailable and will be\n * `undefined` unless the API is provided via polyfill.\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Window/self\n * @ignore\n */\nexport function getGlobalObject<K extends Extract<keyof Window, string>>(\n  name: K,\n  { throwIfUnavailable, usageDesc, returnEmptyObject }: GetGlobalObjectOptions = {}\n): Window[K] | undefined {\n  let globalScope: Window | undefined = undefined;\n  try {\n    globalScope = getGlobalScope();\n    if (globalScope) {\n      const obj = globalScope[name];\n      if (obj) {\n        return obj;\n      }\n    }\n  } catch (error) {\n    Logger.error(`Error getting object '${name}' from global scope '${globalScope}': ${error}`);\n  }\n  if (throwIfUnavailable) {\n    const errMsg = getAPIUsageErrorMessage(globalScope, name.toString(), usageDesc);\n    Logger.error(errMsg);\n    throw new Error(errMsg);\n  }\n  if (returnEmptyObject) {\n    return {} as any;\n  }\n  return undefined;\n}\n\n/**\n * Returns a specified subset of objects from the global scope (`Window` or `WorkerGlobalScope`)\n * if they are available within the currently executing environment.\n * When executing within the Node.js runtime these APIs are unavailable will be `undefined`\n * unless the API is provided via polyfill.\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Window/self\n * @ignore\n */\nexport function getGlobalObjects<K extends Extract<keyof Window, string>>(\n  names: K[],\n  { throwIfUnavailable, usageDesc, returnEmptyObject }: GetGlobalObjectOptions = {}\n): Pick<Window, K> {\n  let globalScope: Window | undefined;\n  try {\n    globalScope = getGlobalScope();\n  } catch (error) {\n    Logger.error(`Error getting global scope: ${error}`);\n    if (throwIfUnavailable) {\n      const errMsg = getAPIUsageErrorMessage(globalScope, names[0].toString(), usageDesc);\n      Logger.error(errMsg);\n      throw errMsg;\n    } else if (returnEmptyObject) {\n      globalScope = {} as any;\n    }\n  }\n\n  const result: Pick<Window, K> = {} as any;\n  for (let i = 0; i < names.length; i++) {\n    const name = names[i];\n    try {\n      if (globalScope) {\n        const obj = globalScope[name];\n        if (obj) {\n          result[name] = obj;\n        } else if (throwIfUnavailable) {\n          const errMsg = getAPIUsageErrorMessage(globalScope, name.toString(), usageDesc);\n          Logger.error(errMsg);\n          throw new Error(errMsg);\n        } else if (returnEmptyObject) {\n          result[name] = {} as any;\n        }\n      }\n    } catch (error) {\n      if (throwIfUnavailable) {\n        const errMsg = getAPIUsageErrorMessage(globalScope, name.toString(), usageDesc);\n        Logger.error(errMsg);\n        throw new Error(errMsg);\n      }\n    }\n  }\n  return result;\n}\n\n/** Different Integer representations */\nexport type IntegerType = number | string | bigint | Uint8Array;\n\n/**\n * Converts an integer-compatible value to a Uint8Array (given a byte length)\n * @example\n * ```ts\n * import { intToBytes } from \"@stacks/common\";\n * console.log(intToBytes(560, 4));\n * // Uint8Array(4) [ 0, 0, 2, 48 ]\n * ```\n */\nexport function intToBytes(value: IntegerType, byteLength: number): Uint8Array {\n  return bigIntToBytes(intToBigInt(value), byteLength);\n}\n\n/**\n * Converts an integer-compatible value to a bigint\n * @param value - The value to convert to a bigint\n * @returns The bigint representation of the value\n *\n * @example\n * ```ts\n * intToBigInt(123); // 123n\n * intToBigInt('0xbeef'); // 48879n\n * ```\n */\nexport function intToBigInt(value: IntegerType): bigint {\n  if (typeof value === 'bigint') return value;\n  if (typeof value === 'string') return BigInt(value);\n  if (typeof value === 'number') {\n    if (!Number.isInteger(value)) {\n      throw new RangeError(`Invalid value. Values of type 'number' must be an integer.`);\n    }\n    if (value > Number.MAX_SAFE_INTEGER) {\n      throw new RangeError(\n        `Invalid value. Values of type 'number' must be less than or equal to ${Number.MAX_SAFE_INTEGER}. For larger values, try using a BigInt instead.`\n      );\n    }\n    return BigInt(value);\n  }\n\n  if (isInstance(value, Uint8Array)) return BigInt(`0x${bytesToHex(value)}`);\n\n  throw new TypeError(\n    `intToBigInt: Invalid value type. Must be a number, bigint, BigInt-compatible string, or Uint8Array.`\n  );\n}\n\n/**\n * Adds a `0x` prefix to a string if it does not already have one.\n */\nexport function with0x(value: string): string {\n  return /^0x/i.test(value) // startsWith('0x') case insensitive\n    ? value\n    : `0x${value}`;\n}\n\n/**\n * Removes the `0x` prefix of a string if it has one.\n */\nexport function without0x(value: string): string {\n  return /^0x/i.test(value) // startsWith('0x') case insensitive\n    ? value.slice(2)\n    : value;\n}\n\n/**\n * Converts hex input string to bigint\n * @param hex - hex input string without 0x prefix and in big endian format\n * @example \"6c7cde4d702830c1db34ef7c19e2776f59107afef39084776fc88bc78dbb9656\"\n * @ignore\n */\nexport function hexToBigInt(hex: string): bigint {\n  if (typeof hex !== 'string')\n    throw new TypeError(`hexToBigInt: expected string, got ${typeof hex}`);\n  // Big Endian\n  return BigInt(`0x${hex}`);\n}\n\n/**\n * Converts IntegerType to hex string\n */\nexport function intToHex(integer: IntegerType, byteLength = 8): string {\n  const value = typeof integer === 'bigint' ? integer : intToBigInt(integer);\n  return value.toString(16).padStart(byteLength * 2, '0');\n}\n\n/**\n * Converts hex string to integer\n */\nexport function hexToInt(hex: string): number {\n  return parseInt(hex, 16);\n}\n\n/**\n * Converts bigint to byte array\n * @param value bigint value to be converted\n * @param length byte array optional length\n * @return {Uint8Array} byte array\n */\nexport function bigIntToBytes(value: bigint, length: number = 16): Uint8Array {\n  const hex = intToHex(value, length);\n  return hexToBytes(hex);\n}\n\n/**\n * Converts from signed number to two's complement\n * MIN_VALUE = -(1 << (width - 1))\n * MAX_VALUE =  (1 << (width - 1)) - 1\n * @ignore\n */\nexport function toTwos(value: bigint, width: bigint): bigint {\n  if (\n    value < -(BigInt(1) << (width - BigInt(1))) ||\n    (BigInt(1) << (width - BigInt(1))) - BigInt(1) < value\n  ) {\n    throw `Unable to represent integer in width: ${width}`;\n  }\n  if (value >= BigInt(0)) {\n    return BigInt(value);\n  }\n  return value + (BigInt(1) << width);\n}\n\n/**\n * Returns nth bit (right-to-left, zero-indexed)\n */\nfunction nthBit(value: bigint, n: bigint) {\n  return value & (BigInt(1) << n);\n}\n\n/** @ignore */\nexport function bytesToTwosBigInt(bytes: Uint8Array): bigint {\n  return fromTwos(BigInt(`0x${bytesToHex(bytes)}`), BigInt(bytes.byteLength * 8));\n}\n\n/**\n * Converts from two's complement to signed number\n * @internal\n */\nexport function fromTwos(value: bigint, width: bigint) {\n  if (nthBit(value, width - BigInt(1))) {\n    return value - (BigInt(1) << width);\n  }\n  return value;\n}\n\n// The following methods are based on `@noble/hashes` implementation\n// https://github.com/paulmillr/noble-hashes\n// Copyright (c) 2022 Paul Miller (https://paulmillr.com)\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the “Software”), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\nconst hexes = Array.from({ length: 256 }, (_, i) => i.toString(16).padStart(2, '0'));\n\n/**\n * Converts bytes to the equivalent hex string\n * @example\n * ```\n * bytesToHex(Uint8Array.from([0xde, 0xad, 0xbe, 0xef])) // 'deadbeef'\n * ```\n */\nexport function bytesToHex(uint8a: Uint8Array): string {\n  // pre-caching improves the speed 6x\n  if (!(uint8a instanceof Uint8Array)) throw new Error('Uint8Array expected');\n  let hex = '';\n  for (const u of uint8a) {\n    hex += hexes[u];\n  }\n  return hex;\n}\n\n/**\n * Converts a hex string to the equivalent bytes\n * @example\n * ```\n * hexToBytes('deadbeef') // Uint8Array(4) [ 222, 173, 190, 239 ]\n * hexToBytes('0xdeadbeef') // Uint8Array(4) [ 222, 173, 190, 239 ]\n * ```\n */\nexport function hexToBytes(hex: string): Uint8Array {\n  if (typeof hex !== 'string') {\n    throw new TypeError(`hexToBytes: expected string, got ${typeof hex}`);\n  }\n\n  hex = without0x(hex);\n  hex = hex.length % 2 ? `0${hex}` : hex; // left pad with a zero if odd length\n\n  const array = new Uint8Array(hex.length / 2);\n  for (let i = 0; i < array.length; i++) {\n    const j = i * 2;\n    const hexByte = hex.slice(j, j + 2);\n    const byte = Number.parseInt(hexByte, 16);\n    if (Number.isNaN(byte) || byte < 0) throw new Error('Invalid byte sequence');\n    array[i] = byte;\n  }\n  return array;\n}\n\ndeclare const TextEncoder: any;\ndeclare const TextDecoder: any;\n\n/**\n * Converts a UTF-8 string to the equivalent bytes\n * @example\n * ```\n * utf8ToBytes('stacks Ӿ'); // Uint8Array(9) [ 115, 116, 97, 99, 107, 115, 32, 211, 190 ];\n * ```\n */\nexport function utf8ToBytes(str: string): Uint8Array {\n  return new TextEncoder().encode(str);\n}\n\n/**\n * Converts bytes to the equivalent UTF-8 string\n * @example\n * ```\n * bytesToUtf8(Uint8Array.from([115, 116, 97, 99, 107, 115, 32, 211, 190])); // 'stacks Ӿ'\n * ```\n */\nexport function bytesToUtf8(arr: Uint8Array): string {\n  return new TextDecoder().decode(arr);\n}\n\n/**\n * Converts an ASCII string to the equivalent bytes\n * @example\n * ```\n * asciiToBytes('stacks $'); // Uint8Array(8) [ 115, 116, 97, 99, 107, 115, 32, 36 ]\n * ```\n */\nexport function asciiToBytes(str: string) {\n  const byteArray = [];\n  for (let i = 0; i < str.length; i++) {\n    byteArray.push(str.charCodeAt(i) & 0xff); // ignore second bytes of UTF-16 character\n  }\n  return new Uint8Array(byteArray);\n}\n\n/**\n * Converts bytes to the equivalent ASCII string\n * @example\n * ```\n * bytesToAscii(Uint8Array.from([115, 116, 97, 99, 107, 115, 32, 36])); // 'stacks $'\n * ```\n */\nexport function bytesToAscii(arr: Uint8Array) {\n  return String.fromCharCode.apply(null, arr as any as number[]);\n}\n\nfunction isNotOctet(octet: number) {\n  return !Number.isInteger(octet) || octet < 0 || octet > 255;\n}\n\n/** @ignore */\nexport function octetsToBytes(numbers: number[]) {\n  if (numbers.some(isNotOctet)) throw new Error('Some values are invalid bytes.');\n  return new Uint8Array(numbers);\n}\n\n/**\n * Concats Uint8Array-s into one; like `Buffer.concat([buf1, buf2])`\n * @example concatBytes(buf1, buf2)\n * @ignore\n */\nexport function concatBytes(...arrays: Uint8Array[]): Uint8Array {\n  if (!arrays.every(a => a instanceof Uint8Array)) throw new Error('Uint8Array list expected');\n  if (arrays.length === 1) return arrays[0];\n  const length = arrays.reduce((a, arr) => a + arr.length, 0);\n  const result = new Uint8Array(length);\n  for (let i = 0, pad = 0; i < arrays.length; i++) {\n    const arr = arrays[i];\n    result.set(arr, pad);\n    pad += arr.length;\n  }\n  return result;\n}\n\n/** @ignore */\nexport function concatArray(elements: (Uint8Array | number[] | number)[]) {\n  return concatBytes(\n    ...elements.map(e => {\n      if (typeof e === 'number') return octetsToBytes([e]);\n      if (e instanceof Array) return octetsToBytes(e);\n      return e;\n    })\n  );\n}\n\n/**\n * Better `instanceof` check for types in different environments\n * @ignore\n */\nexport function isInstance<T>(object: any, clazz: { new (...args: any[]): T }): object is T {\n  return object instanceof clazz || object?.constructor?.name?.toLowerCase() === clazz.name;\n}\n\n/**\n * Checks whether a string is a valid hex string, and has a length of 64 characters.\n */\nexport function validateHash256(hex: string): boolean {\n  hex = without0x(hex);\n  if (hex.length !== 64) return false;\n  return /^[0-9a-fA-F]+$/.test(hex);\n}\n", "import { ProfileType } from '../types';\n\n/**\n *\n * @param serviceName\n * @param data\n *\n * @ignore\n */\nfunction formatAccount(serviceName: string, data: any) {\n  let proofUrl;\n  if (data.proof && data.proof.url) {\n    proofUrl = data.proof.url;\n  }\n  return {\n    '@type': 'Account',\n    service: serviceName,\n    identifier: data.username,\n    proofType: 'http',\n    proofUrl,\n  };\n}\n\n/**\n *\n * @param profile\n *\n * @ignore\n */\nexport function getPersonFromLegacyFormat(profile: any) {\n  const profileData: {\n    ['@type']: ProfileType;\n    account?: any[];\n    name?: string;\n    description?: string;\n    address?: {\n      ['@type']: string;\n      addressLocality: string;\n    };\n    image?: any[];\n    website?: {\n      ['@type']: string;\n      url: string;\n    }[];\n  } = {\n    '@type': 'Person',\n  };\n\n  if (profile) {\n    if (profile.name && profile.name.formatted) {\n      profileData.name = profile.name.formatted;\n    }\n\n    if (profile.bio) {\n      profileData.description = profile.bio;\n    }\n\n    if (profile.location && profile.location.formatted) {\n      profileData.address = {\n        '@type': 'PostalAddress',\n        addressLocality: profile.location.formatted,\n      };\n    }\n\n    const images = [];\n    if (profile.avatar && profile.avatar.url) {\n      images.push({\n        '@type': 'ImageObject',\n        name: 'avatar',\n        contentUrl: profile.avatar.url,\n      });\n    }\n    if (profile.cover && profile.cover.url) {\n      images.push({\n        '@type': 'ImageObject',\n        name: 'cover',\n        contentUrl: profile.cover.url,\n      });\n    }\n    if (images.length) {\n      profileData.image = images;\n    }\n\n    if (profile.website) {\n      profileData.website = [\n        {\n          '@type': 'WebSite',\n          url: profile.website,\n        },\n      ];\n    }\n\n    const accounts = [];\n    if (profile.bitcoin && profile.bitcoin.address) {\n      accounts.push({\n        '@type': 'Account',\n        role: 'payment',\n        service: 'bitcoin',\n        identifier: profile.bitcoin.address,\n      });\n    }\n    if (profile.twitter && profile.twitter.username) {\n      accounts.push(formatAccount('twitter', profile.twitter));\n    }\n    if (profile.facebook && profile.facebook.username) {\n      accounts.push(formatAccount('facebook', profile.facebook));\n    }\n    if (profile.github && profile.github.username) {\n      accounts.push(formatAccount('github', profile.github));\n    }\n\n    if (profile.auth) {\n      if (profile.auth.length > 0) {\n        if (profile.auth[0] && profile.auth[0].publicKeychain) {\n          accounts.push({\n            '@type': 'Account',\n            role: 'key',\n            service: 'bip32',\n            identifier: profile.auth[0].publicKeychain,\n          });\n        }\n      }\n    }\n    if (profile.pgp && profile.pgp.url) {\n      accounts.push({\n        '@type': 'Account',\n        role: 'key',\n        service: 'pgp',\n        identifier: profile.pgp.fingerprint,\n        contentUrl: profile.pgp.url,\n      });\n    }\n\n    profileData.account = accounts;\n  }\n\n  return profileData;\n}\n", "import { createFetchFn, FetchFn } from '@stacks/common';\nimport { parseZoneFile } from 'zone-file';\n\nimport { getTokenFileUrl, Person } from '../profile';\nimport { extractProfile } from '../profileTokens';\n\n/**\n *\n * @param zoneFile\n * @param publicKeyOrAddress\n * @param callback\n *\n * @ignore\n */\nexport function resolveZoneFileToPerson(\n  zoneFile: any,\n  publicKeyOrAddress: string,\n  callback: (profile: any) => void,\n  fetchFn: FetchFn = createFetchFn()\n) {\n  let zoneFileJson = null;\n  try {\n    zoneFileJson = parseZoneFile(zoneFile);\n    if (!zoneFileJson.hasOwnProperty('$origin')) {\n      zoneFileJson = null;\n      throw new Error('zone file is missing an origin');\n    }\n  } catch (e) {\n    console.error(e);\n  }\n\n  let tokenFileUrl = null;\n  if (zoneFileJson && Object.keys(zoneFileJson).length > 0) {\n    tokenFileUrl = getTokenFileUrl(zoneFileJson);\n  } else {\n    let profile = null;\n    try {\n      profile = JSON.parse(zoneFile);\n      const person = Person.fromLegacyFormat(profile);\n      profile = person.profile();\n    } catch (error) {\n      console.warn(error);\n    }\n    callback(profile);\n    return;\n  }\n\n  if (tokenFileUrl) {\n    fetchFn(tokenFileUrl)\n      .then((response: any) => response.text())\n      .then((responseText: any) => JSON.parse(responseText))\n      .then((responseJson: any) => {\n        const tokenRecords = responseJson;\n        const token = tokenRecords[0].token;\n        const profile = extractProfile(token, publicKeyOrAddress);\n\n        callback(profile);\n      })\n      .catch((error: any) => {\n        console.warn(error);\n      });\n  } else {\n    console.warn('Token file url not found');\n    callback({});\n  }\n}\n", "export function getName(profile: any) {\n  if (!profile) {\n    return null;\n  }\n\n  let name = null;\n  if (profile.name) {\n    name = profile.name;\n  } else if (profile.givenName || profile.familyName) {\n    name = '';\n    if (profile.givenName) {\n      name = profile.givenName;\n    }\n    if (profile.familyName) {\n      name += ` ${profile.familyName}`;\n    }\n  }\n  return name;\n}\n\n/**\n *\n * @ignore\n */\nexport function getGivenName(profile: any) {\n  if (!profile) {\n    return null;\n  }\n\n  let givenName = null;\n  if (profile.givenName) {\n    givenName = profile.givenName;\n  } else if (profile.name) {\n    const nameParts = profile.name.split(' ');\n    givenName = nameParts.slice(0, -1).join(' ');\n  }\n  return givenName;\n}\n\n/**\n *\n * @ignore\n */\nexport function getFamilyName(profile: any) {\n  if (!profile) {\n    return null;\n  }\n\n  let familyName = null;\n  if (profile.familyName) {\n    familyName = profile.familyName;\n  } else if (profile.name) {\n    const nameParts = profile.name.split(' ');\n    familyName = nameParts.pop();\n  }\n  return familyName;\n}\n\n/**\n *\n * @ignore\n */\nexport function getDescription(profile: any) {\n  if (!profile) {\n    return null;\n  }\n\n  let description = null;\n  if (profile.description) {\n    description = profile.description;\n  }\n  return description;\n}\n\n/**\n *\n * @ignore\n */\nexport function getAvatarUrl(profile: any) {\n  if (!profile) {\n    return null;\n  }\n\n  let avatarContentUrl: string | null = null;\n  if (profile.image) {\n    profile.image.map((image: any) => {\n      if (image.name === 'avatar') {\n        avatarContentUrl = image.contentUrl;\n        return avatarContentUrl;\n      } else {\n        return null;\n      }\n    });\n  }\n  return avatarContentUrl;\n}\n\n/**\n *\n * @ignore\n */\nexport function getVerifiedAccounts(profile: any, verifications?: any[]) {\n  if (!profile) {\n    return null;\n  }\n\n  const filteredAccounts: any[] = [];\n  if (profile.hasOwnProperty('account') && verifications) {\n    profile.account.map((account: any) => {\n      let accountIsValid = false;\n      let proofUrl = null;\n\n      verifications.map(verification => {\n        if (verification.hasOwnProperty('proof_url')) {\n          verification.proofUrl = verification.proof_url;\n        }\n        if (\n          verification.valid &&\n          verification.service === account.service &&\n          verification.identifier === account.identifier &&\n          verification.proofUrl\n        ) {\n          accountIsValid = true;\n          proofUrl = verification.proofUrl;\n          return true;\n        } else {\n          return false;\n        }\n      });\n\n      if (accountIsValid) {\n        account.proofUrl = proofUrl;\n        filteredAccounts.push(account);\n        return account;\n      } else {\n        return null;\n      }\n    });\n  }\n  return filteredAccounts;\n}\n\n/**\n *\n * @ignore\n */\nexport function getOrganizations(profile: any) {\n  if (!profile) {\n    return null;\n  }\n\n  const organizations: any[] = [];\n\n  if (profile.hasOwnProperty('worksFor')) {\n    return profile.worksFor;\n  }\n\n  return organizations;\n}\n\n/**\n *\n * @ignore\n */\nexport function getConnections(profile: any) {\n  if (!profile) {\n    return null;\n  }\n\n  let connections = [];\n\n  if (profile.hasOwnProperty('knows')) {\n    connections = profile.knows;\n  }\n\n  return connections;\n}\n\n/**\n *\n * @ignore\n */\nexport function getAddress(profile: any) {\n  if (!profile) {\n    return null;\n  }\n\n  let addressString = null;\n\n  if (profile.hasOwnProperty('address')) {\n    const addressParts = [];\n\n    if (profile.address.hasOwnProperty('streetAddress')) {\n      addressParts.push(profile.address.streetAddress);\n    }\n    if (profile.address.hasOwnProperty('addressLocality')) {\n      addressParts.push(profile.address.addressLocality);\n    }\n    if (profile.address.hasOwnProperty('postalCode')) {\n      addressParts.push(profile.address.postalCode);\n    }\n    if (profile.address.hasOwnProperty('addressCountry')) {\n      addressParts.push(profile.address.addressCountry);\n    }\n\n    if (addressParts.length) {\n      addressString = addressParts.join(', ');\n    }\n  }\n\n  return addressString;\n}\n\n/**\n *\n * @ignore\n */\nexport function getBirthDate(profile: any) {\n  if (!profile) {\n    return null;\n  }\n\n  const monthNames = [\n    'January',\n    'February',\n    'March',\n    'April',\n    'May',\n    'June',\n    'July',\n    'August',\n    'September',\n    'October',\n    'November',\n    'December',\n  ];\n\n  let birthDateString = null;\n\n  if (profile.hasOwnProperty('birthDate')) {\n    const date = new Date(profile.birthDate);\n    birthDateString = `${monthNames[date.getMonth()]} ${date.getDate()}, ${date.getFullYear()}`;\n  }\n\n  return birthDateString;\n}\n", "import { extractProfile, signProfileToken } from './profileTokens';\n\nimport { getPersonFromLegacyFormat } from './profileSchemas';\nimport {\n  getAddress,\n  getAvatarUrl,\n  getBirthDate,\n  getConnections,\n  getDescription,\n  getFamilyName,\n  getGivenName,\n  getName,\n  getOrganizations,\n  getVerifiedAccounts,\n} from './profileSchemas/personUtils';\n\n// TODO: bring into this monorepo/convert to ts\n// @ts-ignore\nimport { makeZoneFile, parseZoneFile } from 'zone-file';\n\n// Could not find a declaration file for module\n// @ts-ignore\nimport * as inspector from 'schema-inspector';\n\nimport { Logger } from '@stacks/common';\nimport { NetworkClientParam, clientFromNetwork, networkFrom } from '@stacks/network';\nimport { PublicPersonProfile } from './types';\n\nconst schemaDefinition: { [key: string]: any } = {\n  type: 'object',\n  properties: {\n    '@context': { type: 'string', optional: true },\n    '@type': { type: 'string' },\n  },\n};\n\n/**\n * Represents a user profile\n */\nexport class Profile {\n  _profile: { [key: string]: any };\n\n  constructor(profile = {}) {\n    this._profile = Object.assign(\n      {},\n      {\n        '@context': 'http://schema.org/',\n      },\n      profile\n    );\n  }\n\n  toJSON() {\n    return Object.assign({}, this._profile);\n  }\n\n  toToken(privateKey: string): string {\n    return signProfileToken(this.toJSON(), privateKey);\n  }\n\n  static validateSchema(profile: any, strict = false): any {\n    schemaDefinition.strict = strict;\n    return inspector.validate(schemaDefinition, profile);\n  }\n\n  static fromToken(token: string, publicKeyOrAddress: string | null = null): Profile {\n    const profile = extractProfile(token, publicKeyOrAddress);\n    return new Profile(profile);\n  }\n\n  static makeZoneFile(domainName: string, tokenFileURL: string): string {\n    return makeProfileZoneFile(domainName, tokenFileURL);\n  }\n}\n\nconst personSchemaDefinition = {\n  type: 'object',\n  strict: false,\n  properties: {\n    '@context': { type: 'string', optional: true },\n    '@type': { type: 'string' },\n    '@id': { type: 'string', optional: true },\n    name: { type: 'string', optional: true },\n    givenName: { type: 'string', optional: true },\n    familyName: { type: 'string', optional: true },\n    description: { type: 'string', optional: true },\n    image: {\n      type: 'array',\n      optional: true,\n      items: {\n        type: 'object',\n        properties: {\n          '@type': { type: 'string' },\n          name: { type: 'string', optional: true },\n          contentUrl: { type: 'string', optional: true },\n        },\n      },\n    },\n    website: {\n      type: 'array',\n      optional: true,\n      items: {\n        type: 'object',\n        properties: {\n          '@type': { type: 'string' },\n          url: { type: 'string', optional: true },\n        },\n      },\n    },\n    account: {\n      type: 'array',\n      optional: true,\n      items: {\n        type: 'object',\n        properties: {\n          '@type': { type: 'string' },\n          service: { type: 'string', optional: true },\n          identifier: { type: 'string', optional: true },\n          proofType: { type: 'string', optional: true },\n          proofUrl: { type: 'string', optional: true },\n          proofMessage: { type: 'string', optional: true },\n          proofSignature: { type: 'string', optional: true },\n        },\n      },\n    },\n    worksFor: {\n      type: 'array',\n      optional: true,\n      items: {\n        type: 'object',\n        properties: {\n          '@type': { type: 'string' },\n          '@id': { type: 'string', optional: true },\n        },\n      },\n    },\n    knows: {\n      type: 'array',\n      optional: true,\n      items: {\n        type: 'object',\n        properties: {\n          '@type': { type: 'string' },\n          '@id': { type: 'string', optional: true },\n        },\n      },\n    },\n    address: {\n      type: 'object',\n      optional: true,\n      properties: {\n        '@type': { type: 'string' },\n        streetAddress: { type: 'string', optional: true },\n        addressLocality: { type: 'string', optional: true },\n        postalCode: { type: 'string', optional: true },\n        addressCountry: { type: 'string', optional: true },\n      },\n    },\n    birthDate: { type: 'string', optional: true },\n    taxID: { type: 'string', optional: true },\n  },\n};\n\n/**\n * @ignore\n */\nexport class Person extends Profile {\n  constructor(profile: PublicPersonProfile = { '@type': 'Person' }) {\n    super(profile);\n    this._profile = Object.assign(\n      {},\n      {\n        '@type': 'Person',\n      },\n      this._profile\n    );\n  }\n\n  static validateSchema(profile: any, strict = false) {\n    personSchemaDefinition.strict = strict;\n    return inspector.validate(schemaDefinition, profile);\n  }\n\n  static fromToken(token: string, publicKeyOrAddress: string | null = null): Person {\n    const profile = extractProfile(token, publicKeyOrAddress) as PublicPersonProfile;\n    return new Person(profile);\n  }\n\n  static fromLegacyFormat(legacyProfile: any) {\n    const profile = getPersonFromLegacyFormat(legacyProfile);\n    return new Person(profile);\n  }\n\n  toJSON() {\n    return {\n      profile: this.profile(),\n      name: this.name(),\n      givenName: this.givenName(),\n      familyName: this.familyName(),\n      description: this.description(),\n      avatarUrl: this.avatarUrl(),\n      verifiedAccounts: this.verifiedAccounts(),\n      address: this.address(),\n      birthDate: this.birthDate(),\n      connections: this.connections(),\n      organizations: this.organizations(),\n    };\n  }\n\n  profile() {\n    return Object.assign({}, this._profile);\n  }\n\n  name() {\n    return getName(this.profile());\n  }\n\n  givenName() {\n    return getGivenName(this.profile());\n  }\n\n  familyName() {\n    return getFamilyName(this.profile());\n  }\n\n  description() {\n    return getDescription(this.profile());\n  }\n\n  avatarUrl() {\n    return getAvatarUrl(this.profile());\n  }\n\n  verifiedAccounts(verifications?: any[]) {\n    return getVerifiedAccounts(this.profile(), verifications);\n  }\n\n  address() {\n    return getAddress(this.profile());\n  }\n\n  birthDate() {\n    return getBirthDate(this.profile());\n  }\n\n  connections() {\n    return getConnections(this.profile());\n  }\n\n  organizations() {\n    return getOrganizations(this.profile());\n  }\n}\n\n/**\n *\n * @param origin\n * @param tokenFileUrl\n *\n * @ignore\n */\nexport function makeProfileZoneFile(origin: string, tokenFileUrl: string): string {\n  if (!tokenFileUrl.includes('://')) {\n    throw new Error('Invalid token file url');\n  }\n\n  const urlScheme = tokenFileUrl.split('://')[0];\n  const urlParts = tokenFileUrl.split('://')[1].split('/');\n  const domain = urlParts[0];\n  const pathname = `/${urlParts.slice(1).join('/')}`;\n\n  const zoneFile = {\n    $origin: origin,\n    $ttl: 3600,\n    uri: [\n      {\n        name: '_http._tcp',\n        priority: 10,\n        weight: 1,\n        target: `${urlScheme}://${domain}${pathname}`,\n      },\n    ],\n  };\n\n  const zoneFileTemplate = '{$origin}\\n{$ttl}\\n{uri}\\n';\n\n  return makeZoneFile(zoneFile, zoneFileTemplate);\n}\n\n/**\n *\n * @param zoneFileJson\n *\n * @ignore\n */\nexport function getTokenFileUrl(zoneFileJson: any): string | null {\n  if (!zoneFileJson.hasOwnProperty('uri')) {\n    return null;\n  }\n  if (!Array.isArray(zoneFileJson.uri)) {\n    return null;\n  }\n  if (zoneFileJson.uri.length < 1) {\n    return null;\n  }\n\n  const validRecords = zoneFileJson.uri.filter(\n    (record: any) => record.hasOwnProperty('target') && record.name === '_http._tcp'\n  );\n\n  if (validRecords.length < 1) {\n    return null;\n  }\n\n  const firstValidRecord = validRecords[0];\n\n  if (!firstValidRecord.hasOwnProperty('target')) {\n    return null;\n  }\n  let tokenFileUrl = firstValidRecord.target;\n\n  if (tokenFileUrl.startsWith('https')) {\n    // pass\n  } else if (tokenFileUrl.startsWith('http')) {\n    // pass\n  } else {\n    tokenFileUrl = `https://${tokenFileUrl}`;\n  }\n\n  return tokenFileUrl;\n}\n\n/**\n *\n * @param zoneFile\n * @param publicKeyOrAddress\n *\n * @ignore\n */\nexport function resolveZoneFileToProfile(\n  opts: {\n    zoneFile: any;\n    publicKeyOrAddress: string;\n  } & NetworkClientParam\n): Promise<Record<string, any>> {\n  const network = networkFrom(opts.network ?? 'mainnet');\n  const client = Object.assign({}, clientFromNetwork(network), opts.client);\n\n  return new Promise((resolve, reject) => {\n    let zoneFileJson = null;\n    try {\n      zoneFileJson = parseZoneFile(opts.zoneFile);\n      if (!zoneFileJson.hasOwnProperty('$origin')) {\n        zoneFileJson = null;\n      }\n    } catch (e) {\n      reject(e);\n    }\n\n    let tokenFileUrl: string | null = null;\n    if (zoneFileJson && Object.keys(zoneFileJson).length > 0) {\n      tokenFileUrl = getTokenFileUrl(zoneFileJson);\n    } else {\n      try {\n        return resolve(Person.fromLegacyFormat(JSON.parse(opts.zoneFile)).profile());\n      } catch (error) {\n        return reject(error);\n      }\n    }\n\n    if (tokenFileUrl) {\n      client\n        .fetch(tokenFileUrl)\n        .then(response => response.text())\n        .then(responseText => JSON.parse(responseText))\n        .then(responseJson => {\n          const tokenRecords = responseJson;\n          const profile = extractProfile(tokenRecords[0].token, opts.publicKeyOrAddress);\n          resolve(profile);\n        })\n        .catch(error => {\n          Logger.error(\n            `resolveZoneFileToProfile: error fetching token file ${tokenFileUrl}: ${error}`\n          );\n          reject(error);\n        });\n    } else {\n      Logger.debug('Token file url not found. Resolving to blank profile.');\n      resolve({});\n    }\n  });\n}\n", "/**\n * This logic is in a separate file with no dependencies so that it can be\n * loaded and executed as soon as possible to fulfill the purpose of the protocol\n * detection technique. The effectiveness of this is obviously subject to how web\n * apps bundle/consume the blockstack.js lib.\n */\n\nconst GLOBAL_DETECTION_CACHE_KEY = '_blockstackDidCheckEchoReply';\nconst ECHO_REPLY_PARAM = 'echoReply';\nconst AUTH_CONTINUATION_PARAM = 'authContinuation';\n\nfunction getQueryStringParams(query: string): Record<string, string> {\n  if (!query) {\n    return {};\n  }\n  // Trim a starting `?` character if exists\n  const trimmed = /^[?#]/.test(query) ? query.slice(1) : query;\n  return trimmed.split('&').reduce(\n    (params, param) => {\n      const [key, value] = param.split('=');\n      params[key] = value ? decodeURIComponent(value.replace(/\\+/g, ' ')) : '';\n      return params;\n    },\n    {} as Record<string, string>\n  );\n}\n\n/**\n * Checks if the current window location URL contains an 'echoReply' parameter\n * which indicates that this page was only opened to signal back to the originating\n * tab that the protocol handler is installed.\n * If found, then localStorage events are used to notify the other tab,\n * and this page is redirected back to the Blockstack authenticator URL.\n * This function caches its result and will not trigger multiple redirects when\n * invoked multiple times.\n * @returns True if detected and the page will be automatically redirected.\n * @hidden\n */\nexport function protocolEchoReplyDetection(): boolean {\n  // Check that the `window` APIs exist\n  let globalScope: Window;\n  if (typeof self !== 'undefined') {\n    globalScope = self;\n  } else if (typeof window !== 'undefined') {\n    globalScope = window;\n  } else {\n    // Exit detection function - we are not running in a browser environment.\n    return false;\n  }\n\n  if (!globalScope.location || !globalScope.localStorage) {\n    // Exit detection function - we are not running in a browser environment.\n    return false;\n  }\n\n  // Avoid performing the check twice and triggered multiple redirect timers.\n  const existingDetection = (globalScope as any)[GLOBAL_DETECTION_CACHE_KEY];\n  if (typeof existingDetection === 'boolean') {\n    return existingDetection;\n  }\n\n  const searchParams = getQueryStringParams(globalScope.location.search);\n  const echoReplyParam = searchParams[ECHO_REPLY_PARAM];\n  if (echoReplyParam) {\n    (globalScope as any)[GLOBAL_DETECTION_CACHE_KEY] = true;\n\n    // Use localStorage to notify originated tab that protocol handler is available and working.\n    const echoReplyKey = `echo-reply-${echoReplyParam}`;\n\n    // Set the echo-reply result in localStorage for the other window to see.\n    globalScope.localStorage.setItem(echoReplyKey, 'success');\n\n    // Redirect back to the localhost auth url, as opposed to another protocol launch.\n    // This will re-use the same tab rather than creating another useless one.\n    globalScope.setTimeout(() => {\n      const authContinuationParam = searchParams[AUTH_CONTINUATION_PARAM];\n      globalScope.location.href = authContinuationParam;\n    }, 10);\n\n    return true;\n  }\n\n  return false;\n}\n", "import { NetworkClientParam, clientFromNetwork, networkFrom } from '@stacks/network';\nimport { resolveZoneFileToProfile } from '@stacks/profile';\n\nexport interface ProfileLookupOptions {\n  username: string;\n  zoneFileLookupURL?: string;\n}\n\n/**\n * Look up a user profile by blockstack ID\n *\n * @param {string} username - The Blockstack ID of the profile to look up\n * @param {string} [zoneFileLookupURL=null] - The URL\n * to use for zonefile lookup. If falsey, lookupProfile will use the\n * blockstack.js [[getNameInfo]] function.\n * @returns {Promise} that resolves to a profile object\n */\nexport function lookupProfile(\n  options: ProfileLookupOptions & NetworkClientParam\n): Promise<Record<string, any>> {\n  if (!options.username) {\n    return Promise.reject(new Error('No username provided'));\n  }\n\n  const network = networkFrom(options.network ?? 'mainnet');\n  const client = Object.assign({}, clientFromNetwork(network), options.client);\n\n  let lookupPromise;\n  if (options.zoneFileLookupURL) {\n    const url = `${options.zoneFileLookupURL.replace(/\\/$/, '')}/${options.username}`;\n    lookupPromise = client.fetch(url).then(response => response.json());\n  } else {\n    lookupPromise = getNameInfo({ name: options.username });\n  }\n  return lookupPromise.then((responseJSON: any) => {\n    if (responseJSON.hasOwnProperty('zonefile') && responseJSON.hasOwnProperty('address')) {\n      return resolveZoneFileToProfile({\n        zoneFile: responseJSON.zonefile,\n        publicKeyOrAddress: responseJSON.address,\n        client,\n      });\n    } else {\n      throw new Error(\n        'Invalid zonefile lookup response: did not contain `address`' + ' or `zonefile` field'\n      );\n    }\n  });\n}\n\nexport function getNameInfo(\n  opts: {\n    /** Fully qualified name */\n    name: string;\n  } & NetworkClientParam\n) {\n  const network = networkFrom(opts.network ?? 'mainnet');\n  const client = Object.assign({}, clientFromNetwork(network), opts.client);\n\n  const nameLookupURL = `${client.baseUrl}/v1/names/${opts.name}`;\n  return client\n    .fetch(nameLookupURL)\n    .then((resp: any) => {\n      if (resp.status === 404) {\n        throw new Error('Name not found');\n      } else if (resp.status !== 200) {\n        throw new Error(`Bad response status: ${resp.status}`);\n      } else {\n        return resp.json();\n      }\n    })\n    .then((nameInfo: any) => {\n      // the returned address _should_ be in the correct network ---\n      //  stacks node gets into trouble because it tries to coerce back to mainnet\n      //  and the regtest transaction generation libraries want to use testnet addresses\n      if (nameInfo.address) {\n        return Object.assign({}, nameInfo, { address: nameInfo.address });\n      } else {\n        return nameInfo;\n      }\n    });\n}\n", "import 'cross-fetch/polyfill';\n\n// Define a default request options and allow modification using getters, setters\n// Reference: https://developer.mozilla.org/en-US/docs/Web/API/Request/Request\nconst defaultFetchOpts: RequestInit = {\n  // By default referrer value will be client:origin: above reference link\n  // https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Referrer-Policy\n  referrerPolicy: 'origin', // Use origin value for referrer policy\n  headers: {\n    'x-hiro-product': 'stacksjs',\n  },\n};\n\n/**\n * Get fetch options\n * @category Network\n */\nexport const getFetchOptions = () => {\n  return defaultFetchOpts;\n};\n\n/**\n * Sets global fetch options for stacks.js network calls.\n *\n * @example\n * Users can change the default referrer as well as other options when fetch is used internally by stacks.js:\n * ```\n * setFetchOptions({ referrer: 'no-referrer', referrerPolicy: 'no-referrer', ...otherRequestOptions });\n * ```\n * After calling {@link setFetchOptions} all subsequent network calls will use the specified options above.\n *\n * @see MDN Request: https://developer.mozilla.org/en-US/docs/Web/API/Request/Request\n * @returns global fetch options after merging with previous options (or defaults)\n * @category Network\n * @related {@link getFetchOptions}\n */\nexport const setFetchOptions = (ops: RequestInit): RequestInit => {\n  return Object.assign(defaultFetchOpts, ops);\n};\n\n/** @internal */\nexport async function fetchWrapper(input: RequestInfo, init?: RequestInit): Promise<Response> {\n  const fetchOpts = {};\n  // Use the provided options in request options along with default or user provided values\n  Object.assign(fetchOpts, defaultFetchOpts, init);\n\n  const fetchResult = await fetch(input, fetchOpts);\n  return fetchResult;\n}\n\nexport type FetchFn = (url: string, init?: RequestInit) => Promise<Response>;\n\nexport interface RequestContext {\n  fetch: FetchFn;\n  url: string;\n  init: RequestInit;\n}\n\nexport interface ResponseContext {\n  fetch: FetchFn;\n  url: string;\n  init: RequestInit;\n  response: Response;\n}\n\nexport interface FetchParams {\n  url: string;\n  init: RequestInit;\n}\n\nexport interface FetchMiddleware {\n  pre?: (context: RequestContext) => PromiseLike<FetchParams | void> | FetchParams | void;\n  post?: (context: ResponseContext) => Promise<Response | void> | Response | void;\n}\nexport interface ApiKeyMiddlewareOpts {\n  /** The middleware / API key header will only be added to requests matching this host. */\n  host?: RegExp | string;\n  /** The http header name used for specifying the API key value. */\n  httpHeader?: string;\n  /** The API key string to specify as an http header value. */\n  apiKey: string;\n}\n\n/** @internal */\nexport function hostMatches(host: string, pattern: string | RegExp) {\n  if (typeof pattern === 'string') return pattern === host;\n  return pattern.exec(host);\n}\n\n/**\n * Creates a new middleware from an API key.\n * @example\n * ```\n * const apiMiddleware = createApiKeyMiddleware(\"example_e8e044a3_41d8b0fe_3dd3988ef302\");\n * const fetchFn = createFetchFn(apiMiddleware);\n * const network = new StacksMainnet({ fetchFn });\n * ```\n * @category Network\n * @related {@link createFetchFn}, {@link StacksNetwork}\n */\nexport function createApiKeyMiddleware({\n  apiKey,\n  host = /(.*)api(.*)(\\.stacks\\.co|\\.hiro\\.so)$/i,\n  httpHeader = 'x-api-key',\n}: ApiKeyMiddlewareOpts): FetchMiddleware {\n  return {\n    pre: context => {\n      const reqUrl = new URL(context.url);\n      if (!hostMatches(reqUrl.host, host)) return; // Skip middleware if host does not match pattern\n\n      const headers =\n        context.init.headers instanceof Headers\n          ? context.init.headers\n          : (context.init.headers = new Headers(context.init.headers));\n      headers.set(httpHeader, apiKey);\n    },\n  };\n}\n\nfunction argsForCreateFetchFn(args: any[]): { fetchLib: FetchFn; middlewares: FetchMiddleware[] } {\n  let fetchLib: FetchFn = fetchWrapper;\n  let middlewares: FetchMiddleware[] = [];\n  if (args.length > 0 && typeof args[0] === 'function') {\n    fetchLib = args.shift();\n  }\n  if (args.length > 0) {\n    middlewares = args; // remaining args\n  }\n  return { fetchLib, middlewares };\n}\n\n/**\n * Creates a new network fetching function, which combines an optional fetch-compatible library with optional middleware.\n * @example\n * ```\n * const customFetch = createFetchFn(someMiddleware)\n * const customFetch = createFetchFn(fetch, someMiddleware)\n * const customFetch = createFetchFn(fetch, middlewareA, middlewareB)\n * ```\n * @category Network\n */\nexport function createFetchFn(fetchLib: FetchFn, ...middleware: FetchMiddleware[]): FetchFn;\nexport function createFetchFn(...middleware: FetchMiddleware[]): FetchFn;\nexport function createFetchFn(...args: any[]): FetchFn {\n  const { fetchLib, middlewares } = argsForCreateFetchFn(args);\n\n  const fetchFn = async (url: string, init?: RequestInit | undefined): Promise<Response> => {\n    let fetchParams = { url, init: init ?? {} };\n\n    for (const middleware of middlewares) {\n      if (typeof middleware.pre === 'function') {\n        const result = await Promise.resolve(\n          middleware.pre({\n            fetch: fetchLib,\n            ...fetchParams,\n          })\n        );\n        fetchParams = result ?? fetchParams;\n      }\n    }\n\n    let response = await fetchLib(fetchParams.url, fetchParams.init);\n\n    for (const middleware of middlewares) {\n      if (typeof middleware.post === 'function') {\n        const result = await Promise.resolve(\n          middleware.post({\n            fetch: fetchLib,\n            url: fetchParams.url,\n            init: fetchParams.init,\n            response: response?.clone() ?? response,\n          })\n        );\n        response = result ?? response;\n      }\n    }\n    return response;\n  };\n  return fetchFn;\n}\n", "/**\n * @ignore\n */\nexport const ERROR_CODES = {\n  MISSING_PARAMETER: 'missing_parameter',\n  REMOTE_SERVICE_ERROR: 'remote_service_error',\n  INVALID_STATE: 'invalid_state',\n  NO_SESSION_DATA: 'no_session_data',\n  DOES_NOT_EXIST: 'does_not_exist',\n  FAILED_DECRYPTION_ERROR: 'failed_decryption_error',\n  INVALID_DID_ERROR: 'invalid_did_error',\n  NOT_ENOUGH_FUNDS_ERROR: 'not_enough_error',\n  INVALID_AMOUNT_ERROR: 'invalid_amount_error',\n  LOGIN_FAILED_ERROR: 'login_failed',\n  SIGNATURE_VERIFICATION_ERROR: 'signature_verification_failure',\n  CONFLICT_ERROR: 'conflict_error',\n  NOT_ENOUGH_PROOF_ERROR: 'not_enough_proof_error',\n  BAD_PATH_ERROR: 'bad_path_error',\n  VALIDATION_ERROR: 'validation_error',\n  PAYLOAD_TOO_LARGE_ERROR: 'payload_too_large_error',\n  PRECONDITION_FAILED_ERROR: 'precondition_failed_error',\n  UNKNOWN: 'unknown',\n};\n\nObject.freeze(ERROR_CODES);\n\n/**\n * @ignore\n */\ntype ErrorData = {\n  code: string;\n  parameter?: string;\n  message: string;\n};\n\n/**\n * @ignore\n */\nexport class BlockstackError extends Error {\n  message: string;\n\n  code: string;\n\n  parameter?: string;\n\n  constructor(error: ErrorData) {\n    super();\n    let message = error.message;\n    let bugDetails = `Error Code: ${error.code}`;\n    let stack = this.stack;\n    if (!stack) {\n      try {\n        throw new Error();\n      } catch (e: any) {\n        stack = e.stack;\n      }\n    } else {\n      bugDetails += `Stack Trace:\\n${stack}`;\n    }\n    message += `\\nIf you believe this exception is caused by a bug in stacks.js,\n      please file a bug report: https://github.com/blockstack/stacks.js/issues\\n\\n${bugDetails}`;\n    this.message = message;\n    this.code = error.code;\n    this.parameter = error.parameter ? error.parameter : undefined;\n  }\n\n  toString() {\n    return `${super.toString()}\n    code: ${this.code} param: ${this.parameter ? this.parameter : 'n/a'}`;\n  }\n}\n\n/**\n * @ignore\n */\nexport class InvalidParameterError extends BlockstackError {\n  constructor(parameter: string, message: string = '') {\n    super({ code: ERROR_CODES.MISSING_PARAMETER, message, parameter });\n    this.name = 'MissingParametersError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class MissingParameterError extends BlockstackError {\n  constructor(parameter: string, message: string = '') {\n    super({ code: ERROR_CODES.MISSING_PARAMETER, message, parameter });\n    this.name = 'MissingParametersError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class RemoteServiceError extends BlockstackError {\n  response: Response;\n\n  constructor(response: Response, message: string = '') {\n    super({ code: ERROR_CODES.REMOTE_SERVICE_ERROR, message });\n    this.response = response;\n  }\n}\n\n/**\n * @ignore\n */\nexport class InvalidDIDError extends BlockstackError {\n  constructor(message: string = '') {\n    super({ code: ERROR_CODES.INVALID_DID_ERROR, message });\n    this.name = 'InvalidDIDError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class NotEnoughFundsError extends BlockstackError {\n  leftToFund: number;\n\n  constructor(leftToFund: number) {\n    const message = `Not enough UTXOs to fund. Left to fund: ${leftToFund}`;\n    super({ code: ERROR_CODES.NOT_ENOUGH_FUNDS_ERROR, message });\n    this.leftToFund = leftToFund;\n    this.name = 'NotEnoughFundsError';\n    this.message = message;\n  }\n}\n\n/**\n * @ignore\n */\nexport class InvalidAmountError extends BlockstackError {\n  fees: number;\n\n  specifiedAmount: number;\n\n  constructor(fees: number, specifiedAmount: number) {\n    const message =\n      `Not enough coin to fund fees transaction fees. Fees would be ${fees},` +\n      ` specified spend is  ${specifiedAmount}`;\n    super({ code: ERROR_CODES.INVALID_AMOUNT_ERROR, message });\n    this.specifiedAmount = specifiedAmount;\n    this.fees = fees;\n    this.name = 'InvalidAmountError';\n    this.message = message;\n  }\n}\n\n/**\n * @ignore\n */\nexport class LoginFailedError extends BlockstackError {\n  constructor(reason: string) {\n    const message = `Failed to login: ${reason}`;\n    super({ code: ERROR_CODES.LOGIN_FAILED_ERROR, message });\n    this.message = message;\n    this.name = 'LoginFailedError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class SignatureVerificationError extends BlockstackError {\n  constructor(reason: string) {\n    const message = `Failed to verify signature: ${reason}`;\n    super({ code: ERROR_CODES.SIGNATURE_VERIFICATION_ERROR, message });\n    this.message = message;\n    this.name = 'SignatureVerificationError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class FailedDecryptionError extends BlockstackError {\n  constructor(message: string = 'Unable to decrypt cipher object.') {\n    super({ code: ERROR_CODES.FAILED_DECRYPTION_ERROR, message });\n    this.message = message;\n    this.name = 'FailedDecryptionError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class InvalidStateError extends BlockstackError {\n  constructor(message: string) {\n    super({ code: ERROR_CODES.INVALID_STATE, message });\n    this.message = message;\n    this.name = 'InvalidStateError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class NoSessionDataError extends BlockstackError {\n  constructor(message: string) {\n    super({ code: ERROR_CODES.INVALID_STATE, message });\n    this.message = message;\n    this.name = 'NoSessionDataError';\n  }\n}\n\n/**\n * @ignore\n */\nexport interface GaiaHubErrorResponse {\n  status: number;\n  statusText: string;\n  body?: any; // todo: should this be string?\n}\n\nexport interface HubErrorDetails {\n  message?: string;\n  statusCode: number;\n  statusText: string;\n  [prop: string]: any;\n}\n\n/**\n * @ignore\n */\nexport class GaiaHubError extends BlockstackError {\n  hubError?: HubErrorDetails;\n\n  constructor(error: ErrorData, response: GaiaHubErrorResponse) {\n    super(error);\n    if (response) {\n      this.hubError = {\n        statusCode: response.status,\n        statusText: response.statusText,\n      };\n      if (typeof response.body === 'string') {\n        this.hubError.message = response.body;\n      } else if (typeof response.body === 'object') {\n        Object.assign(this.hubError, response.body);\n      }\n    }\n  }\n}\n\n/**\n * @ignore\n */\nexport class DoesNotExist extends GaiaHubError {\n  constructor(message: string, response: GaiaHubErrorResponse) {\n    super({ message, code: ERROR_CODES.DOES_NOT_EXIST }, response);\n    this.name = 'DoesNotExist';\n  }\n}\n\n/**\n * @ignore\n */\nexport class ConflictError extends GaiaHubError {\n  constructor(message: string, response: GaiaHubErrorResponse) {\n    super({ message, code: ERROR_CODES.CONFLICT_ERROR }, response);\n    this.name = 'ConflictError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class NotEnoughProofError extends GaiaHubError {\n  constructor(message: string, response: GaiaHubErrorResponse) {\n    super({ message, code: ERROR_CODES.NOT_ENOUGH_PROOF_ERROR }, response);\n    this.name = 'NotEnoughProofError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class BadPathError extends GaiaHubError {\n  constructor(message: string, response: GaiaHubErrorResponse) {\n    super({ message, code: ERROR_CODES.BAD_PATH_ERROR }, response);\n    this.name = 'BadPathError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class ValidationError extends GaiaHubError {\n  constructor(message: string, response: GaiaHubErrorResponse) {\n    super({ message, code: ERROR_CODES.VALIDATION_ERROR }, response);\n    this.name = 'ValidationError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class PayloadTooLargeError extends GaiaHubError {\n  /** Can be `null` when an oversized payload is detected client-side. */\n  hubError?: HubErrorDetails;\n\n  maxUploadByteSize: number;\n\n  constructor(message: string, response: GaiaHubErrorResponse | null, maxUploadByteSize: number) {\n    super({ message, code: ERROR_CODES.PAYLOAD_TOO_LARGE_ERROR }, response!);\n    this.name = 'PayloadTooLargeError';\n    this.maxUploadByteSize = maxUploadByteSize;\n  }\n}\n\n/**\n * @ignore\n */\nexport class PreconditionFailedError extends GaiaHubError {\n  constructor(message: string, response: GaiaHubErrorResponse) {\n    super({ message, code: ERROR_CODES.PRECONDITION_FAILED_ERROR }, response);\n    this.name = 'PreconditionFailedError';\n  }\n}\n", "import { config } from './config';\n\nconst levels = ['debug', 'info', 'warn', 'error', 'none'];\n\nconst levelToInt: { [level: string]: number } = {};\nconst intToLevel: { [int: number]: string } = {};\n\nfor (let index = 0; index < levels.length; index++) {\n  const level = levels[index];\n  levelToInt[level] = index;\n  intToLevel[index] = level;\n}\n\n/**\n * @ignore\n */\nexport class Logger {\n  static error(message: string) {\n    if (!this.shouldLog('error')) return;\n    console.error(this.logMessage('error', message));\n  }\n\n  static warn(message: string) {\n    if (!this.shouldLog('warn')) return;\n    console.warn(this.logMessage('warn', message));\n  }\n\n  static info(message: string) {\n    if (!this.shouldLog('info')) return;\n    console.log(this.logMessage('info', message));\n  }\n\n  static debug(message: string) {\n    if (!this.shouldLog('debug')) return;\n    console.log(this.logMessage('debug', message));\n  }\n\n  static logMessage(level: string, message: string) {\n    return `[${level.toUpperCase()}] ${message}`;\n  }\n\n  static shouldLog(level: string) {\n    const currentLevel = levelToInt[config.logLevel];\n    return currentLevel <= levelToInt[level];\n  }\n}\n", "import { Logger } from './logger';\n\n/**\n *  @ignore\n */\nexport const BLOCKSTACK_HANDLER = 'blockstack';\n\n/**\n * Time\n * @private\n * @ignore\n */\nexport function nextYear() {\n  return new Date(new Date().setFullYear(new Date().getFullYear() + 1));\n}\n\n/**\n * Time\n * @private\n * @ignore\n */\nexport function nextMonth() {\n  return new Date(new Date().setMonth(new Date().getMonth() + 1));\n}\n\n/**\n * Time\n * @private\n * @ignore\n */\nexport function nextHour() {\n  return new Date(new Date().setHours(new Date().getHours() + 1));\n}\n\n/**\n * Converts megabytes to bytes. Returns 0 if the input is not a finite number.\n * @ignore\n */\nexport function megabytesToBytes(megabytes: number): number {\n  if (!Number.isFinite(megabytes)) {\n    return 0;\n  }\n  return Math.floor(megabytes * 1024 * 1024);\n}\n\n/**\n * Calculate the AES-CBC ciphertext output byte length a given input length.\n * AES has a fixed block size of 16-bytes regardless key size.\n * @ignore\n */\nexport function getAesCbcOutputLength(inputByteLength: number) {\n  // AES-CBC block mode rounds up to the next block size.\n  const cipherTextLength = (Math.floor(inputByteLength / 16) + 1) * 16;\n  return cipherTextLength;\n}\n\n/**\n * Calculate the base64 encoded string length for a given input length.\n * This is equivalent to the byte length when the string is ASCII or UTF8-8\n * encoded.\n * @param number\n */\nexport function getBase64OutputLength(inputByteLength: number) {\n  const encodedLength = Math.ceil(inputByteLength / 3) * 4;\n  return encodedLength;\n}\n\n/**\n * Query Strings\n * @private\n * @ignore\n */\n\nexport function updateQueryStringParameter(uri: string, key: string, value: string) {\n  const re = new RegExp(`([?&])${key}=.*?(&|$)`, 'i');\n  const separator = uri.indexOf('?') !== -1 ? '&' : '?';\n  if (uri.match(re)) {\n    return uri.replace(re, `$1${key}=${value}$2`);\n  } else {\n    return `${uri}${separator}${key}=${value}`;\n  }\n}\n\n/**\n * Versioning\n * @param {string} v1 - the left half of the version inequality\n * @param {string} v2 - right half of the version inequality\n * @returns {bool} iff v1 >= v2\n * @private\n * @ignore\n */\n\nexport function isLaterVersion(v1: string, v2: string) {\n  if (v1 === undefined || v1 === '') {\n    v1 = '0.0.0';\n  }\n\n  if (v2 === undefined || v1 === '') {\n    v2 = '0.0.0';\n  }\n\n  const v1tuple = v1.split('.').map(x => parseInt(x, 10));\n  const v2tuple = v2.split('.').map(x => parseInt(x, 10));\n\n  for (let index = 0; index < v2.length; index++) {\n    if (index >= v1.length) {\n      v2tuple.push(0);\n    }\n    if (v1tuple[index] < v2tuple[index]) {\n      return false;\n    }\n  }\n  return true;\n}\n\n/**\n * UUIDs\n * @private\n * @ignore\n */\nexport function makeUUID4() {\n  let d = new Date().getTime();\n  if (typeof performance !== 'undefined' && typeof performance.now === 'function') {\n    d += performance.now(); // use high-precision timer if available\n  }\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\n    const r = (d + Math.random() * 16) % 16 | 0;\n    d = Math.floor(d / 16);\n    return (c === 'x' ? r : (r & 0x3) | 0x8).toString(16);\n  });\n}\n\n/**\n * Checks if both urls pass the same origin check & are absolute\n * @param  {[type]}  uri1 first uri to check\n * @param  {[type]}  uri2 second uri to check\n * @return {Boolean} true if they pass the same origin check\n * @private\n * @ignore\n */\nexport function isSameOriginAbsoluteUrl(uri1: string, uri2: string) {\n  try {\n    const parsedUri1 = new URL(uri1);\n    const parsedUri2 = new URL(uri2);\n\n    const port1 =\n      parseInt(parsedUri1.port || '0', 10) | 0 || (parsedUri1.protocol === 'https:' ? 443 : 80);\n    const port2 =\n      parseInt(parsedUri2.port || '0', 10) | 0 || (parsedUri2.protocol === 'https:' ? 443 : 80);\n\n    const match = {\n      scheme: parsedUri1.protocol === parsedUri2.protocol,\n      hostname: parsedUri1.hostname === parsedUri2.hostname,\n      port: port1 === port2,\n      absolute:\n        (uri1.includes('http://') || uri1.includes('https://')) &&\n        (uri2.includes('http://') || uri2.includes('https://')),\n    };\n\n    return match.scheme && match.hostname && match.port && match.absolute;\n  } catch (error) {\n    console.log(error);\n    console.log('Parsing error in same URL origin check');\n    // Parse error\n    return false;\n  }\n}\n\n/**\n * Returns the global scope `Window`, `WorkerGlobalScope`, or `NodeJS.Global` if available in the\n * currently executing environment.\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Window/self\n * @see https://developer.mozilla.org/en-US/docs/Web/API/WorkerGlobalScope/self\n * @see https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope\n *\n * This could be switched to `globalThis` once it is standardized and widely available.\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/globalThis\n * @ignore\n */\nexport function getGlobalScope(): Window {\n  if (typeof self !== 'undefined') {\n    return self;\n  }\n  if (typeof window !== 'undefined') {\n    return window;\n  }\n  // This function is meant to be called when accessing APIs that are typically only available in\n  // web-browser/DOM environments, but we also want to support situations where running in Node.js\n  // environment, and a polyfill was added to the Node.js `global` object scope without adding the\n  // `window` global object as well.\n  if (typeof global !== 'undefined') {\n    return global as unknown as Window;\n  }\n  throw new Error(\n    'Unexpected runtime environment - no supported global scope (`window`, `self`, `global`) available'\n  );\n}\n\nfunction getAPIUsageErrorMessage(\n  scopeObject: unknown,\n  apiName: string,\n  usageDesc?: string\n): string {\n  if (usageDesc) {\n    return `Use of '${usageDesc}' requires \\`${apiName}\\` which is unavailable on the '${scopeObject}' object within the currently executing environment.`;\n  } else {\n    return `\\`${apiName}\\` is unavailable on the '${scopeObject}' object within the currently executing environment.`;\n  }\n}\n\ninterface GetGlobalObjectOptions {\n  /**\n   * Throw an error if the object is not found.\n   * @default false\n   */\n  throwIfUnavailable?: boolean;\n  /**\n   * Additional information to include in an error if thrown.\n   */\n  usageDesc?: string;\n  /**\n   * If the object is not found, return an new empty object instead of undefined.\n   * Requires [[throwIfUnavailable]] to be falsey.\n   * @default false\n   */\n  returnEmptyObject?: boolean;\n}\n\n/**\n * Returns an object from the global scope (`Window` or `WorkerGlobalScope`) if it\n * is available within the currently executing environment.\n * When executing within the Node.js runtime these APIs are unavailable and will be\n * `undefined` unless the API is provided via polyfill.\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Window/self\n * @ignore\n */\nexport function getGlobalObject<K extends Extract<keyof Window, string>>(\n  name: K,\n  { throwIfUnavailable, usageDesc, returnEmptyObject }: GetGlobalObjectOptions = {}\n): Window[K] | undefined {\n  let globalScope: Window | undefined = undefined;\n  try {\n    globalScope = getGlobalScope();\n    if (globalScope) {\n      const obj = globalScope[name];\n      if (obj) {\n        return obj;\n      }\n    }\n  } catch (error) {\n    Logger.error(`Error getting object '${name}' from global scope '${globalScope}': ${error}`);\n  }\n  if (throwIfUnavailable) {\n    const errMsg = getAPIUsageErrorMessage(globalScope, name.toString(), usageDesc);\n    Logger.error(errMsg);\n    throw new Error(errMsg);\n  }\n  if (returnEmptyObject) {\n    return {} as any;\n  }\n  return undefined;\n}\n\n/**\n * Returns a specified subset of objects from the global scope (`Window` or `WorkerGlobalScope`)\n * if they are available within the currently executing environment.\n * When executing within the Node.js runtime these APIs are unavailable will be `undefined`\n * unless the API is provided via polyfill.\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Window/self\n * @ignore\n */\nexport function getGlobalObjects<K extends Extract<keyof Window, string>>(\n  names: K[],\n  { throwIfUnavailable, usageDesc, returnEmptyObject }: GetGlobalObjectOptions = {}\n): Pick<Window, K> {\n  let globalScope: Window | undefined;\n  try {\n    globalScope = getGlobalScope();\n  } catch (error) {\n    Logger.error(`Error getting global scope: ${error}`);\n    if (throwIfUnavailable) {\n      const errMsg = getAPIUsageErrorMessage(globalScope, names[0].toString(), usageDesc);\n      Logger.error(errMsg);\n      throw errMsg;\n    } else if (returnEmptyObject) {\n      globalScope = {} as any;\n    }\n  }\n\n  const result: Pick<Window, K> = {} as any;\n  for (let i = 0; i < names.length; i++) {\n    const name = names[i];\n    try {\n      if (globalScope) {\n        const obj = globalScope[name];\n        if (obj) {\n          result[name] = obj;\n        } else if (throwIfUnavailable) {\n          const errMsg = getAPIUsageErrorMessage(globalScope, name.toString(), usageDesc);\n          Logger.error(errMsg);\n          throw new Error(errMsg);\n        } else if (returnEmptyObject) {\n          result[name] = {} as any;\n        }\n      }\n    } catch (error) {\n      if (throwIfUnavailable) {\n        const errMsg = getAPIUsageErrorMessage(globalScope, name.toString(), usageDesc);\n        Logger.error(errMsg);\n        throw new Error(errMsg);\n      }\n    }\n  }\n  return result;\n}\n// After removing bn.js library provide backward compatibility for users passing bn.js instance\ntype BN = import('bn.js'); // Type only import from @types/bn.js\nexport type IntegerType = number | string | bigint | Uint8Array | BN;\n\nexport function intToBytes(value: IntegerType, signed: boolean, byteLength: number): Uint8Array {\n  return bigIntToBytes(intToBigInt(value, signed), byteLength);\n}\n\nexport function intToBigInt(value: IntegerType, signed: boolean): bigint {\n  let parsedValue = value;\n\n  if (typeof parsedValue === 'number') {\n    if (!Number.isInteger(parsedValue)) {\n      throw new RangeError(`Invalid value. Values of type 'number' must be an integer.`);\n    }\n    if (parsedValue > Number.MAX_SAFE_INTEGER) {\n      throw new RangeError(\n        `Invalid value. Values of type 'number' must be less than or equal to ${Number.MAX_SAFE_INTEGER}. For larger values, try using a BigInt instead.`\n      );\n    }\n    return BigInt(parsedValue);\n  }\n  if (typeof parsedValue === 'string') {\n    // If hex string then convert to bytes then fall through to the bytes condition\n    if (parsedValue.toLowerCase().startsWith('0x')) {\n      // Trim '0x' hex-prefix\n      let hex = parsedValue.slice(2);\n\n      // Allow odd-length strings like `0xf` -- some libs output these, or even just `0x${num.toString(16)}`\n      hex = hex.padStart(hex.length + (hex.length % 2), '0');\n\n      parsedValue = hexToBytes(hex);\n    } else {\n      try {\n        return BigInt(parsedValue);\n      } catch (error) {\n        if (error instanceof SyntaxError) {\n          throw new RangeError(`Invalid value. String integer '${parsedValue}' is not finite.`);\n        }\n      }\n    }\n  }\n  if (typeof parsedValue === 'bigint') {\n    return parsedValue;\n  }\n  if (parsedValue instanceof Uint8Array) {\n    if (signed) {\n      // Allow byte arrays smaller than 128-bits to be passed.\n      // This allows positive signed ints like `0x08` (8) or negative signed\n      // ints like `0xf8` (-8) to be passed without having to pad to 16 bytes.\n      const bn = fromTwos(\n        BigInt(`0x${bytesToHex(parsedValue)}`),\n        BigInt(parsedValue.byteLength * 8)\n      );\n      return BigInt(bn.toString());\n    } else {\n      return BigInt(`0x${bytesToHex(parsedValue)}`);\n    }\n  }\n  // After removing bn.js library provide backward compatibility for users passing bn.js instance\n  // For backward compatibility with bn.js check if it's a bn.js instance\n  if (\n    parsedValue != null &&\n    typeof parsedValue === 'object' &&\n    parsedValue.constructor.name === 'BN'\n  ) {\n    return BigInt(parsedValue.toString());\n  }\n  throw new TypeError(\n    `Invalid value type. Must be a number, bigint, integer-string, hex-string, or Uint8Array.`\n  );\n}\n\n/**\n * Adds a `0x` prefix to a string if it does not already have one.\n */\nexport function with0x(value: string): string {\n  return value.startsWith('0x') ? value : `0x${value}`;\n}\n\n/**\n * Converts hex input string to bigint\n * @param hex - hex input string without 0x prefix and in big endian format\n * @example \"6c7cde4d702830c1db34ef7c19e2776f59107afef39084776fc88bc78dbb9656\"\n * @ignore\n */\nexport function hexToBigInt(hex: string): bigint {\n  if (typeof hex !== 'string')\n    throw new TypeError(`hexToBigInt: expected string, got ${typeof hex}`);\n  // Big Endian\n  return BigInt(`0x${hex}`);\n}\n\n/**\n * Converts IntegerType to hex string\n * @ignore\n */\nexport function intToHex(integer: IntegerType, lengthBytes = 8): string {\n  const value = typeof integer === 'bigint' ? integer : intToBigInt(integer, false);\n  return value.toString(16).padStart(lengthBytes * 2, '0');\n}\n\n/**\n * Converts hex string to integer\n * @ignore\n */\nexport function hexToInt(hex: string): number {\n  return parseInt(hex, 16);\n}\n\n/**\n * Converts bigint to byte array\n * @param value bigint value to be converted\n * @param length byte array optional length\n * @return {Uint8Array} byte array\n */\nexport function bigIntToBytes(value: bigint, length: number = 16): Uint8Array {\n  const hex = intToHex(value, length);\n  return hexToBytes(hex);\n}\n\n/**\n * Converts from signed number to two's complement\n * MIN_VALUE = -(1 << (width - 1))\n * MAX_VALUE =  (1 << (width - 1)) - 1\n * @ignore\n */\nexport function toTwos(value: bigint, width: bigint): bigint {\n  if (\n    value < -(BigInt(1) << (width - BigInt(1))) ||\n    (BigInt(1) << (width - BigInt(1))) - BigInt(1) < value\n  ) {\n    throw `Unable to represent integer in width: ${width}`;\n  }\n  if (value >= BigInt(0)) {\n    return BigInt(value);\n  }\n  return value + (BigInt(1) << width);\n}\n\n/**\n * Returns nth bit (right-to-left, zero-indexed)\n */\nfunction nthBit(value: bigint, n: bigint) {\n  return value & (BigInt(1) << n);\n}\n\n/**\n * Converts from two's complement to signed number\n * @ignore\n */\nexport function fromTwos(value: bigint, width: bigint) {\n  if (nthBit(value, width - BigInt(1))) {\n    return value - (BigInt(1) << width);\n  }\n  return value;\n}\n\n// The following methods are based on `@noble/hashes` implementation\n// https://github.com/paulmillr/noble-hashes\n// Copyright (c) 2022 Paul Miller (https://paulmillr.com)\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the “Software”), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\nconst hexes = Array.from({ length: 256 }, (_, i) => i.toString(16).padStart(2, '0'));\n\n/**\n * Converts bytes to the equivalent hex string\n * @example\n * ```\n * bytesToHex(Uint8Array.from([0xde, 0xad, 0xbe, 0xef])) // 'deadbeef'\n * ```\n */\nexport function bytesToHex(uint8a: Uint8Array): string {\n  // pre-caching improves the speed 6x\n  if (!(uint8a instanceof Uint8Array)) throw new Error('Uint8Array expected');\n  let hex = '';\n  for (const u of uint8a) {\n    hex += hexes[u];\n  }\n  return hex;\n}\n\n/**\n * Converts a hex string to the equivalent bytes\n * @example\n * ```\n * hexToBytes('deadbeef') // Uint8Array(4) [ 222, 173, 190, 239 ]\n * hexToBytes('0xdeadbeef') // Uint8Array(4) [ 222, 173, 190, 239 ]\n * ```\n */\nexport function hexToBytes(hex: string): Uint8Array {\n  if (typeof hex !== 'string') {\n    throw new TypeError(`hexToBytes: expected string, got ${typeof hex}`);\n  }\n\n  // todo: add use `without0x` from current `next` to replace duplicate trimming code\n  hex = hex.startsWith('0x') || hex.startsWith('0X') ? hex.slice(2) : hex; // remove 0x prefix\n\n  const paddedHex = hex.length % 2 ? `0${hex}` : hex; // left pad with a zero if odd length\n  const array = new Uint8Array(paddedHex.length / 2);\n  for (let i = 0; i < array.length; i++) {\n    const j = i * 2;\n    const hexByte = paddedHex.slice(j, j + 2);\n    const byte = Number.parseInt(hexByte, 16);\n    if (Number.isNaN(byte) || byte < 0) throw new Error('Invalid byte sequence');\n    array[i] = byte;\n  }\n  return array;\n}\n\ndeclare const TextEncoder: any;\ndeclare const TextDecoder: any;\n\n/**\n * Converts a UTF-8 string to the equivalent bytes\n * @example\n * ```\n * utf8ToBytes('stacks Ӿ'); // Uint8Array(9) [ 115, 116, 97, 99, 107, 115, 32, 211, 190 ];\n * ```\n */\nexport function utf8ToBytes(str: string): Uint8Array {\n  return new TextEncoder().encode(str);\n}\n\n/**\n * Converts bytes to the equivalent UTF-8 string\n * @example\n * ```\n * bytesToUtf8(Uint8Array.from([115, 116, 97, 99, 107, 115, 32, 211, 190])); // 'stacks Ӿ'\n * ```\n */\nexport function bytesToUtf8(arr: Uint8Array): string {\n  return new TextDecoder().decode(arr);\n}\n\n/**\n * Converts an ASCII string to the equivalent bytes\n * @example\n * ```\n * asciiToBytes('stacks $'); // Uint8Array(8) [ 115, 116, 97, 99, 107, 115, 32, 36 ]\n * ```\n */\nexport function asciiToBytes(str: string) {\n  const byteArray = [];\n  for (let i = 0; i < str.length; i++) {\n    byteArray.push(str.charCodeAt(i) & 0xff); // ignore second bytes of UTF-16 character\n  }\n  return new Uint8Array(byteArray);\n}\n\n/**\n * Converts bytes to the equivalent ASCII string\n * @example\n * ```\n * bytesToAscii(Uint8Array.from([115, 116, 97, 99, 107, 115, 32, 36])); // 'stacks $'\n * ```\n */\nexport function bytesToAscii(arr: Uint8Array) {\n  return String.fromCharCode.apply(null, arr as any as number[]);\n}\n\nfunction isNotOctet(octet: number) {\n  return !Number.isInteger(octet) || octet < 0 || octet > 255;\n}\n\n/** @ignore */\nexport function octetsToBytes(numbers: number[]) {\n  if (numbers.some(isNotOctet)) throw new Error('Some values are invalid bytes.');\n  return new Uint8Array(numbers);\n}\n\n/**\n * Concats Uint8Array-s into one; like `Buffer.concat([buf1, buf2])`\n * @example concatBytes(buf1, buf2)\n * @ignore\n */\nexport function concatBytes(...arrays: Uint8Array[]): Uint8Array {\n  if (!arrays.every(a => a instanceof Uint8Array)) throw new Error('Uint8Array list expected');\n  if (arrays.length === 1) return arrays[0];\n  const length = arrays.reduce((a, arr) => a + arr.length, 0);\n  const result = new Uint8Array(length);\n  for (let i = 0, pad = 0; i < arrays.length; i++) {\n    const arr = arrays[i];\n    result.set(arr, pad);\n    pad += arr.length;\n  }\n  return result;\n}\n\n/** @ignore */\nexport function concatArray(elements: (Uint8Array | number[] | number)[]) {\n  return concatBytes(\n    ...elements.map(e => {\n      if (typeof e === 'number') return octetsToBytes([e]);\n      if (e instanceof Array) return octetsToBytes(e);\n      return e;\n    })\n  );\n}\n\n/**\n * Better `instanceof` check for types in different environments\n * @ignore\n */\nexport function isInstance(object: any, type: any) {\n  return object instanceof type || object?.constructor?.name?.toLowerCase() === type.name;\n}\n", "/**\n * The **chain** ID.\n * Is used for signing, so transactions can't be replayed on other chains.\n */\nexport enum ChainID {\n  Testnet = 0x80000000,\n  Mainnet = 0x00000001,\n}\n\n/**\n * The **transaction** version.\n * Is used for signing, so transactions can't be replayed on other networks.\n */\nexport enum TransactionVersion {\n  Mainnet = 0x00,\n  Testnet = 0x80,\n}\n\n/**\n * The **peer** network ID.\n * Typically not used in signing, but used for broadcasting to the P2P network.\n * It can also be used to determine the parent of a subnet.\n *\n * **Attention:**\n * For mainnet/testnet the v2/info response `.network_id` refers to the chain ID.\n * For subnets the v2/info response `.network_id` refers to the peer network ID and the chain ID (they are the same for subnets).\n * The `.parent_network_id` refers to the actual peer network ID (of the parent) in both cases.\n */\nexport enum PeerNetworkID {\n  Mainnet = 0x17000000,\n  Testnet = 0xff000000,\n}\n\n/** @ignore internal */\nexport const PRIVATE_KEY_COMPRESSED_LENGTH = 33;\n// todo: `next` make length consts more consistent in naming\n\n/** @ignore internal */\nexport const PRIVATE_KEY_UNCOMPRESSED_LENGTH = 32;\n\n/** @ignore internal */\nexport const BLOCKSTACK_DEFAULT_GAIA_HUB_URL = 'https://hub.blockstack.org';\n", "/** @ignore */\nexport function equals(a: Uint8Array, b: Uint8Array) {\n  if (a.byteLength !== b.byteLength) return false;\n  for (let i = 0; i < a.byteLength; i++) {\n    if (a[i] !== b[i]) return false;\n  }\n  return true;\n}\n\n/**\n * @ignore\n * TODO: maybe remove and use string repeat\n */\nexport function alloc(length: number, value: number) {\n  const a = new Uint8Array(length);\n  for (let i = 0; i < length; i++) {\n    a[i] = value;\n  }\n  return a;\n}\n\n/** @ignore */\nexport function readUInt16BE(source: Uint8Array, offset: number): number {\n  return ((source[offset + 0] << 8) | source[offset + 1]) >>> 0;\n}\n\n/** @ignore */\nexport function writeUInt16BE(destination: Uint8Array, value: number, offset = 0): Uint8Array {\n  destination[offset + 0] = value >>> 8;\n  destination[offset + 1] = value >>> 0;\n  return destination;\n}\n\n// The following methods are based on `microsoft/vscode` implementation\n// https://github.com/microsoft/vscode/blob/1e6ac12df197fc3e5d1c1bdb25702125cccb135a/src/vs/base/common/buffer.ts\n\n// Copyright (c) 2015 - present Microsoft Corporation\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the “Software”), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n\n/** @ignore */\nexport function readUInt8(source: Uint8Array, offset: number): number {\n  return source[offset];\n}\n\n/** @ignore */\nexport function writeUInt8(destination: Uint8Array, value: number, offset = 0): Uint8Array {\n  destination[offset] = value;\n  return destination;\n}\n\n/** @ignore */\nexport function readUInt16LE(source: Uint8Array, offset: number): number {\n  return ((source[offset + 0] << 0) >>> 0) | ((source[offset + 1] << 8) >>> 0);\n}\n\n/** @ignore */\nexport function writeUInt16LE(destination: Uint8Array, value: number, offset = 0): Uint8Array {\n  destination[offset + 0] = value & 0b1111_1111;\n  value >>>= 8;\n  destination[offset + 1] = value & 0b1111_1111;\n  return destination;\n}\n\n/** @ignore */\nexport function readUInt32BE(source: Uint8Array, offset: number): number {\n  return (\n    source[offset] * 2 ** 24 +\n    source[offset + 1] * 2 ** 16 +\n    source[offset + 2] * 2 ** 8 +\n    source[offset + 3]\n  );\n}\n\n/** @ignore */\nexport function writeUInt32BE(destination: Uint8Array, value: number, offset = 0): Uint8Array {\n  destination[offset + 3] = value;\n  value >>>= 8;\n  destination[offset + 2] = value;\n  value >>>= 8;\n  destination[offset + 1] = value;\n  value >>>= 8;\n  destination[offset] = value;\n  return destination;\n}\n\n/** @ignore */\nexport function readUInt32LE(source: Uint8Array, offset: number): number {\n  return (\n    ((source[offset + 0] << 0) >>> 0) |\n    ((source[offset + 1] << 8) >>> 0) |\n    ((source[offset + 2] << 16) >>> 0) |\n    ((source[offset + 3] << 24) >>> 0)\n  );\n}\n\n/** @ignore */\nexport function writeUInt32LE(destination: Uint8Array, value: number, offset = 0): Uint8Array {\n  destination[offset + 0] = value & 0b1111_1111;\n  value >>>= 8;\n  destination[offset + 1] = value & 0b1111_1111;\n  value >>>= 8;\n  destination[offset + 2] = value & 0b1111_1111;\n  value >>>= 8;\n  destination[offset + 3] = value & 0b1111_1111;\n  return destination;\n}\n", "import { TransactionVersion, ChainID } from '@stacks/common';\nimport { createFetchFn, FetchFn } from './fetch';\n\nexport const HIRO_MAINNET_DEFAULT = 'https://api.mainnet.hiro.so';\nexport const HIRO_TESTNET_DEFAULT = 'https://api.testnet.hiro.so';\nexport const HIRO_MOCKNET_DEFAULT = 'http://localhost:3999';\n\n/**\n * Used for constructing Network instances\n * @related {@link StacksNetwork}, {@link StacksMainnet}, {@link StacksTestnet}, {@link StacksDevnet}, {@link StacksMocknet}\n */\nexport interface NetworkConfig {\n  /** The base API/node URL for the network fetch calls */\n  url: string;\n  /** An optional custom fetch function to override default behaviors */\n  fetchFn?: FetchFn;\n}\n\n/** @ignore internal */\nexport const StacksNetworks = ['mainnet', 'testnet', 'devnet', 'mocknet'] as const;\n/** The enum-style names of different common Stacks networks */\nexport type StacksNetworkName = (typeof StacksNetworks)[number];\n\n/**\n * The base class for Stacks networks. Typically used via its subclasses.\n * @related {@link StacksMainnet}, {@link StacksTestnet}, {@link StacksDevnet}, {@link StacksMocknet}\n */\nexport class StacksNetwork {\n  version: TransactionVersion = TransactionVersion.Mainnet;\n  chainId: ChainID = ChainID.Mainnet;\n  bnsLookupUrl = 'https://api.mainnet.hiro.so';\n  broadcastEndpoint = '/v2/transactions';\n  transferFeeEstimateEndpoint = '/v2/fees/transfer';\n  transactionFeeEstimateEndpoint = '/v2/fees/transaction';\n  accountEndpoint = '/v2/accounts';\n  contractAbiEndpoint = '/v2/contracts/interface';\n  readOnlyFunctionCallEndpoint = '/v2/contracts/call-read';\n\n  readonly coreApiUrl: string;\n\n  fetchFn: FetchFn;\n\n  constructor(networkConfig: NetworkConfig) {\n    this.coreApiUrl = networkConfig.url;\n    this.fetchFn = networkConfig.fetchFn ?? createFetchFn();\n  }\n\n  /** A static network constructor from a network name */\n  static fromName = (networkName: StacksNetworkName): StacksNetwork => {\n    switch (networkName) {\n      case 'mainnet':\n        return new StacksMainnet();\n      case 'testnet':\n        return new StacksTestnet();\n      case 'devnet':\n        return new StacksDevnet();\n      case 'mocknet':\n        return new StacksMocknet();\n      default:\n        throw new Error(\n          `Invalid network name provided. Must be one of the following: ${StacksNetworks.join(\n            ', '\n          )}`\n        );\n    }\n  };\n\n  /** @ignore internal */\n  static fromNameOrNetwork = (network: StacksNetworkName | StacksNetwork) => {\n    if (typeof network !== 'string' && 'version' in network) {\n      return network;\n    }\n\n    return StacksNetwork.fromName(network);\n  };\n\n  /** Returns `true` if the network is configured to 'mainnet', based on the TransactionVersion */\n  isMainnet = () => this.version === TransactionVersion.Mainnet;\n  getBroadcastApiUrl = () => `${this.coreApiUrl}${this.broadcastEndpoint}`;\n  getTransferFeeEstimateApiUrl = () => `${this.coreApiUrl}${this.transferFeeEstimateEndpoint}`;\n  getTransactionFeeEstimateApiUrl = () =>\n    `${this.coreApiUrl}${this.transactionFeeEstimateEndpoint}`;\n  getAccountApiUrl = (address: string) =>\n    `${this.coreApiUrl}${this.accountEndpoint}/${address}?proof=0`;\n  getAccountExtendedBalancesApiUrl = (address: string) =>\n    `${this.coreApiUrl}/extended/v1/address/${address}/balances`;\n  getAbiApiUrl = (address: string, contract: string) =>\n    `${this.coreApiUrl}${this.contractAbiEndpoint}/${address}/${contract}`;\n  getReadOnlyFunctionCallApiUrl = (\n    contractAddress: string,\n    contractName: string,\n    functionName: string\n  ) =>\n    `${this.coreApiUrl}${\n      this.readOnlyFunctionCallEndpoint\n    }/${contractAddress}/${contractName}/${encodeURIComponent(functionName)}`;\n  getInfoUrl = () => `${this.coreApiUrl}/v2/info`;\n  getBlockTimeInfoUrl = () => `${this.coreApiUrl}/extended/v1/info/network_block_times`;\n  getPoxInfoUrl = () => `${this.coreApiUrl}/v2/pox`;\n  getRewardsUrl = (address: string, options?: any) => {\n    let url = `${this.coreApiUrl}/extended/v1/burnchain/rewards/${address}`;\n    if (options) {\n      url = `${url}?limit=${options.limit}&offset=${options.offset}`;\n    }\n    return url;\n  };\n  getRewardsTotalUrl = (address: string) =>\n    `${this.coreApiUrl}/extended/v1/burnchain/rewards/${address}/total`;\n  getRewardHoldersUrl = (address: string, options?: any) => {\n    let url = `${this.coreApiUrl}/extended/v1/burnchain/reward_slot_holders/${address}`;\n    if (options) {\n      url = `${url}?limit=${options.limit}&offset=${options.offset}`;\n    }\n    return url;\n  };\n  getStackerInfoUrl = (contractAddress: string, contractName: string) =>\n    `${this.coreApiUrl}${this.readOnlyFunctionCallEndpoint}\n    ${contractAddress}/${contractName}/get-stacker-info`;\n  getDataVarUrl = (contractAddress: string, contractName: string, dataVarName: string) =>\n    `${this.coreApiUrl}/v2/data_var/${contractAddress}/${contractName}/${dataVarName}?proof=0`;\n  getMapEntryUrl = (contractAddress: string, contractName: string, mapName: string) =>\n    `${this.coreApiUrl}/v2/map_entry/${contractAddress}/${contractName}/${mapName}?proof=0`;\n  getNameInfo(fullyQualifiedName: string) {\n    /*\n      TODO: Update to v2 API URL for name lookups\n    */\n    const nameLookupURL = `${this.bnsLookupUrl}/v1/names/${fullyQualifiedName}`;\n    return this.fetchFn(nameLookupURL)\n      .then(resp => {\n        if (resp.status === 404) {\n          throw new Error('Name not found');\n        } else if (resp.status !== 200) {\n          throw new Error(`Bad response status: ${resp.status}`);\n        } else {\n          return resp.json();\n        }\n      })\n      .then(nameInfo => {\n        // the returned address _should_ be in the correct network ---\n        //  stacks node gets into trouble because it tries to coerce back to mainnet\n        //  and the regtest transaction generation libraries want to use testnet addresses\n        if (nameInfo.address) {\n          return Object.assign({}, nameInfo, { address: nameInfo.address });\n        } else {\n          return nameInfo;\n        }\n      });\n  }\n}\n\n/**\n * A {@link StacksNetwork} with the parameters for the Stacks mainnet.\n * Pass a `url` option to override the default Hiro hosted Stacks node API.\n * Pass a `fetchFn` option to customize the default networking functions.\n * @example\n * ```\n * const network = new StacksMainnet();\n * const network = new StacksMainnet({ url: \"https://api.mainnet.hiro.so\" });\n * const network = new StacksMainnet({ fetch: createFetchFn() });\n * ```\n * @related {@link createFetchFn}, {@link createApiKeyMiddleware}\n */\nexport class StacksMainnet extends StacksNetwork {\n  version = TransactionVersion.Mainnet;\n  chainId = ChainID.Mainnet;\n\n  constructor(opts?: Partial<NetworkConfig>) {\n    super({\n      url: opts?.url ?? HIRO_MAINNET_DEFAULT,\n      fetchFn: opts?.fetchFn,\n    });\n  }\n}\n\n/**\n * A {@link StacksNetwork} with the parameters for the Stacks testnet.\n * Pass a `url` option to override the default Hiro hosted Stacks node API.\n * Pass a `fetchFn` option to customize the default networking functions.\n * @example\n * ```\n * const network = new StacksTestnet();\n * const network = new StacksTestnet({ url: \"https://api.testnet.hiro.so\" });\n * const network = new StacksTestnet({ fetch: createFetchFn() });\n * ```\n * @related {@link createFetchFn}, {@link createApiKeyMiddleware}\n */\nexport class StacksTestnet extends StacksNetwork {\n  version = TransactionVersion.Testnet;\n  chainId = ChainID.Testnet;\n\n  constructor(opts?: Partial<NetworkConfig>) {\n    super({\n      url: opts?.url ?? HIRO_TESTNET_DEFAULT,\n      fetchFn: opts?.fetchFn,\n    });\n  }\n}\n\n/**\n * A {@link StacksNetwork} using the testnet parameters, but `localhost:3999` as the API URL.\n */\nexport class StacksMocknet extends StacksNetwork {\n  version = TransactionVersion.Testnet;\n  chainId = ChainID.Testnet;\n\n  constructor(opts?: Partial<NetworkConfig>) {\n    super({\n      url: opts?.url ?? HIRO_MOCKNET_DEFAULT,\n      fetchFn: opts?.fetchFn,\n    });\n  }\n}\n\n/** Alias for {@link StacksMocknet} */\nexport const StacksDevnet = StacksMocknet;\n", "/**\n * @ignore\n */\nexport const ERROR_CODES = {\n  MISSING_PARAMETER: 'missing_parameter',\n  REMOTE_SERVICE_ERROR: 'remote_service_error',\n  INVALID_STATE: 'invalid_state',\n  NO_SESSION_DATA: 'no_session_data',\n  DOES_NOT_EXIST: 'does_not_exist',\n  FAILED_DECRYPTION_ERROR: 'failed_decryption_error',\n  INVALID_DID_ERROR: 'invalid_did_error',\n  NOT_ENOUGH_FUNDS_ERROR: 'not_enough_error',\n  INVALID_AMOUNT_ERROR: 'invalid_amount_error',\n  LOGIN_FAILED_ERROR: 'login_failed',\n  SIGNATURE_VERIFICATION_ERROR: 'signature_verification_failure',\n  CONFLICT_ERROR: 'conflict_error',\n  NOT_ENOUGH_PROOF_ERROR: 'not_enough_proof_error',\n  BAD_PATH_ERROR: 'bad_path_error',\n  VALIDATION_ERROR: 'validation_error',\n  PAYLOAD_TOO_LARGE_ERROR: 'payload_too_large_error',\n  PRECONDITION_FAILED_ERROR: 'precondition_failed_error',\n  UNKNOWN: 'unknown',\n};\n\nObject.freeze(ERROR_CODES);\n\n/**\n * @ignore\n */\ntype ErrorData = {\n  code: string;\n  parameter?: string;\n  message: string;\n};\n\n/**\n * @ignore\n */\nexport class BlockstackError extends Error {\n  message: string;\n\n  code: string;\n\n  parameter?: string;\n\n  constructor(error: ErrorData) {\n    super();\n    let message = error.message;\n    let bugDetails = `Error Code: ${error.code}`;\n    let stack = this.stack;\n    if (!stack) {\n      try {\n        throw new Error();\n      } catch (e: any) {\n        stack = e.stack;\n      }\n    } else {\n      bugDetails += `Stack Trace:\\n${stack}`;\n    }\n    message += `\\nIf you believe this exception is caused by a bug in stacks.js,\n      please file a bug report: https://github.com/blockstack/stacks.js/issues\\n\\n${bugDetails}`;\n    this.message = message;\n    this.code = error.code;\n    this.parameter = error.parameter ? error.parameter : undefined;\n  }\n\n  toString() {\n    return `${super.toString()}\n    code: ${this.code} param: ${this.parameter ? this.parameter : 'n/a'}`;\n  }\n}\n\n/**\n * @ignore\n */\nexport class InvalidParameterError extends BlockstackError {\n  constructor(parameter: string, message: string = '') {\n    super({ code: ERROR_CODES.MISSING_PARAMETER, message, parameter });\n    this.name = 'MissingParametersError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class MissingParameterError extends BlockstackError {\n  constructor(parameter: string, message: string = '') {\n    super({ code: ERROR_CODES.MISSING_PARAMETER, message, parameter });\n    this.name = 'MissingParametersError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class RemoteServiceError extends BlockstackError {\n  response: Response;\n\n  constructor(response: Response, message: string = '') {\n    super({ code: ERROR_CODES.REMOTE_SERVICE_ERROR, message });\n    this.response = response;\n  }\n}\n\n/**\n * @ignore\n */\nexport class InvalidDIDError extends BlockstackError {\n  constructor(message: string = '') {\n    super({ code: ERROR_CODES.INVALID_DID_ERROR, message });\n    this.name = 'InvalidDIDError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class NotEnoughFundsError extends BlockstackError {\n  leftToFund: number;\n\n  constructor(leftToFund: number) {\n    const message = `Not enough UTXOs to fund. Left to fund: ${leftToFund}`;\n    super({ code: ERROR_CODES.NOT_ENOUGH_FUNDS_ERROR, message });\n    this.leftToFund = leftToFund;\n    this.name = 'NotEnoughFundsError';\n    this.message = message;\n  }\n}\n\n/**\n * @ignore\n */\nexport class InvalidAmountError extends BlockstackError {\n  fees: number;\n\n  specifiedAmount: number;\n\n  constructor(fees: number, specifiedAmount: number) {\n    const message =\n      `Not enough coin to fund fees transaction fees. Fees would be ${fees},` +\n      ` specified spend is  ${specifiedAmount}`;\n    super({ code: ERROR_CODES.INVALID_AMOUNT_ERROR, message });\n    this.specifiedAmount = specifiedAmount;\n    this.fees = fees;\n    this.name = 'InvalidAmountError';\n    this.message = message;\n  }\n}\n\n/**\n * @ignore\n */\nexport class LoginFailedError extends BlockstackError {\n  constructor(reason: string) {\n    const message = `Failed to login: ${reason}`;\n    super({ code: ERROR_CODES.LOGIN_FAILED_ERROR, message });\n    this.message = message;\n    this.name = 'LoginFailedError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class SignatureVerificationError extends BlockstackError {\n  constructor(reason: string) {\n    const message = `Failed to verify signature: ${reason}`;\n    super({ code: ERROR_CODES.SIGNATURE_VERIFICATION_ERROR, message });\n    this.message = message;\n    this.name = 'SignatureVerificationError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class FailedDecryptionError extends BlockstackError {\n  constructor(message: string = 'Unable to decrypt cipher object.') {\n    super({ code: ERROR_CODES.FAILED_DECRYPTION_ERROR, message });\n    this.message = message;\n    this.name = 'FailedDecryptionError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class InvalidStateError extends BlockstackError {\n  constructor(message: string) {\n    super({ code: ERROR_CODES.INVALID_STATE, message });\n    this.message = message;\n    this.name = 'InvalidStateError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class NoSessionDataError extends BlockstackError {\n  constructor(message: string) {\n    super({ code: ERROR_CODES.INVALID_STATE, message });\n    this.message = message;\n    this.name = 'NoSessionDataError';\n  }\n}\n\n/**\n * @ignore\n */\nexport interface GaiaHubErrorResponse {\n  status: number;\n  statusText: string;\n  body?: any; // todo: should this be string?\n}\n\nexport interface HubErrorDetails {\n  message?: string;\n  statusCode: number;\n  statusText: string;\n  [prop: string]: any;\n}\n\n/**\n * @ignore\n */\nexport class GaiaHubError extends BlockstackError {\n  hubError?: HubErrorDetails;\n\n  constructor(error: ErrorData, response: GaiaHubErrorResponse) {\n    super(error);\n    if (response) {\n      this.hubError = {\n        statusCode: response.status,\n        statusText: response.statusText,\n      };\n      if (typeof response.body === 'string') {\n        this.hubError.message = response.body;\n      } else if (typeof response.body === 'object') {\n        Object.assign(this.hubError, response.body);\n      }\n    }\n  }\n}\n\n/**\n * @ignore\n */\nexport class DoesNotExist extends GaiaHubError {\n  constructor(message: string, response: GaiaHubErrorResponse) {\n    super({ message, code: ERROR_CODES.DOES_NOT_EXIST }, response);\n    this.name = 'DoesNotExist';\n  }\n}\n\n/**\n * @ignore\n */\nexport class ConflictError extends GaiaHubError {\n  constructor(message: string, response: GaiaHubErrorResponse) {\n    super({ message, code: ERROR_CODES.CONFLICT_ERROR }, response);\n    this.name = 'ConflictError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class NotEnoughProofError extends GaiaHubError {\n  constructor(message: string, response: GaiaHubErrorResponse) {\n    super({ message, code: ERROR_CODES.NOT_ENOUGH_PROOF_ERROR }, response);\n    this.name = 'NotEnoughProofError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class BadPathError extends GaiaHubError {\n  constructor(message: string, response: GaiaHubErrorResponse) {\n    super({ message, code: ERROR_CODES.BAD_PATH_ERROR }, response);\n    this.name = 'BadPathError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class ValidationError extends GaiaHubError {\n  constructor(message: string, response: GaiaHubErrorResponse) {\n    super({ message, code: ERROR_CODES.VALIDATION_ERROR }, response);\n    this.name = 'ValidationError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class PayloadTooLargeError extends GaiaHubError {\n  /** Can be `null` when an oversized payload is detected client-side. */\n  hubError?: HubErrorDetails;\n\n  maxUploadByteSize: number;\n\n  constructor(message: string, response: GaiaHubErrorResponse | null, maxUploadByteSize: number) {\n    super({ message, code: ERROR_CODES.PAYLOAD_TOO_LARGE_ERROR }, response!);\n    this.name = 'PayloadTooLargeError';\n    this.maxUploadByteSize = maxUploadByteSize;\n  }\n}\n\n/**\n * @ignore\n */\nexport class PreconditionFailedError extends GaiaHubError {\n  constructor(message: string, response: GaiaHubErrorResponse) {\n    super({ message, code: ERROR_CODES.PRECONDITION_FAILED_ERROR }, response);\n    this.name = 'PreconditionFailedError';\n  }\n}\n", "import { config } from './config';\n\nconst levels = ['debug', 'info', 'warn', 'error', 'none'];\n\nconst levelToInt: { [level: string]: number } = {};\nconst intToLevel: { [int: number]: string } = {};\n\nfor (let index = 0; index < levels.length; index++) {\n  const level = levels[index];\n  levelToInt[level] = index;\n  intToLevel[index] = level;\n}\n\n/**\n * @ignore\n * @deprecated\n */\nexport class Logger {\n  static error(message: string) {\n    if (!this.shouldLog('error')) return;\n    console.error(this.logMessage('error', message));\n  }\n\n  static warn(message: string) {\n    if (!this.shouldLog('warn')) return;\n    console.warn(this.logMessage('warn', message));\n  }\n\n  static info(message: string) {\n    if (!this.shouldLog('info')) return;\n    console.log(this.logMessage('info', message));\n  }\n\n  static debug(message: string) {\n    if (!this.shouldLog('debug')) return;\n    console.log(this.logMessage('debug', message));\n  }\n\n  static logMessage(level: string, message: string) {\n    return `[${level.toUpperCase()}] ${message}`;\n  }\n\n  static shouldLog(level: string) {\n    const currentLevel = levelToInt[config.logLevel];\n    return currentLevel <= levelToInt[level];\n  }\n}\n", "import { Logger } from './logger';\n\n/**\n *  @ignore\n * @deprecated\n */\nexport const BLOCKSTACK_HANDLER = 'blockstack';\n// todo: `next` get rid of all this blockstack stuff\n\n/**\n * Time\n * @private\n * @ignore\n * @deprecated\n */\nexport function nextYear() {\n  return new Date(new Date().setFullYear(new Date().getFullYear() + 1));\n}\n\n/**\n * Time\n * @private\n * @ignore\n * @deprecated\n */\nexport function nextMonth() {\n  return new Date(new Date().setMonth(new Date().getMonth() + 1));\n}\n\n/**\n * Time\n * @private\n * @ignore\n * @deprecated\n */\nexport function nextHour() {\n  return new Date(new Date().setHours(new Date().getHours() + 1));\n}\n\n/**\n * Converts megabytes to bytes. Returns 0 if the input is not a finite number.\n * @ignore\n * @deprecated\n */\nexport function megabytesToBytes(megabytes: number): number {\n  if (!Number.isFinite(megabytes)) {\n    return 0;\n  }\n  return Math.floor(megabytes * 1024 * 1024);\n}\n\n/**\n * Calculate the AES-CBC ciphertext output byte length a given input length.\n * AES has a fixed block size of 16-bytes regardless key size.\n * @ignore\n * @deprecated\n */\nexport function getAesCbcOutputLength(inputByteLength: number) {\n  // AES-CBC block mode rounds up to the next block size.\n  const cipherTextLength = (Math.floor(inputByteLength / 16) + 1) * 16;\n  return cipherTextLength;\n}\n\n/**\n * Calculate the base64 encoded string length for a given input length.\n * This is equivalent to the byte length when the string is ASCII or UTF8-8\n * encoded.\n * @param number\n * @deprecated\n */\nexport function getBase64OutputLength(inputByteLength: number) {\n  const encodedLength = Math.ceil(inputByteLength / 3) * 4;\n  return encodedLength;\n}\n\n/**\n * Query Strings\n * @private\n * @ignore\n * @deprecated\n */\nexport function updateQueryStringParameter(uri: string, key: string, value: string) {\n  const re = new RegExp(`([?&])${key}=.*?(&|$)`, 'i');\n  const separator = uri.indexOf('?') !== -1 ? '&' : '?';\n  if (uri.match(re)) {\n    return uri.replace(re, `$1${key}=${value}$2`);\n  } else {\n    return `${uri}${separator}${key}=${value}`;\n  }\n}\n\n/**\n * Versioning\n * @param {string} v1 - the left half of the version inequality\n * @param {string} v2 - right half of the version inequality\n * @returns {bool} iff v1 >= v2\n * @private\n * @ignore\n * @deprecated\n */\nexport function isLaterVersion(v1: string, v2: string) {\n  if (v1 === undefined || v1 === '') {\n    v1 = '0.0.0';\n  }\n\n  if (v2 === undefined || v1 === '') {\n    v2 = '0.0.0';\n  }\n\n  const v1tuple = v1.split('.').map(x => parseInt(x, 10));\n  const v2tuple = v2.split('.').map(x => parseInt(x, 10));\n\n  for (let index = 0; index < v2.length; index++) {\n    if (index >= v1.length) {\n      v2tuple.push(0);\n    }\n    if (v1tuple[index] < v2tuple[index]) {\n      return false;\n    }\n  }\n  return true;\n}\n\n/**\n * UUIDs\n * @private\n * @ignore\n * @deprecated\n */\nexport function makeUUID4() {\n  let d = new Date().getTime();\n  if (typeof performance !== 'undefined' && typeof performance.now === 'function') {\n    d += performance.now(); // use high-precision timer if available\n  }\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\n    const r = (d + Math.random() * 16) % 16 | 0;\n    d = Math.floor(d / 16);\n    return (c === 'x' ? r : (r & 0x3) | 0x8).toString(16);\n  });\n}\n\n/**\n * Checks if both urls pass the same origin check & are absolute\n * @param  {[type]}  uri1 first uri to check\n * @param  {[type]}  uri2 second uri to check\n * @return {Boolean} true if they pass the same origin check\n * @private\n * @ignore\n * @deprecated\n */\nexport function isSameOriginAbsoluteUrl(uri1: string, uri2: string) {\n  try {\n    const parsedUri1 = new URL(uri1);\n    const parsedUri2 = new URL(uri2);\n\n    const port1 =\n      parseInt(parsedUri1.port || '0', 10) | 0 || (parsedUri1.protocol === 'https:' ? 443 : 80);\n    const port2 =\n      parseInt(parsedUri2.port || '0', 10) | 0 || (parsedUri2.protocol === 'https:' ? 443 : 80);\n\n    const match = {\n      scheme: parsedUri1.protocol === parsedUri2.protocol,\n      hostname: parsedUri1.hostname === parsedUri2.hostname,\n      port: port1 === port2,\n      absolute:\n        (uri1.includes('http://') || uri1.includes('https://')) &&\n        (uri2.includes('http://') || uri2.includes('https://')),\n    };\n\n    return match.scheme && match.hostname && match.port && match.absolute;\n  } catch (error) {\n    console.log(error);\n    console.log('Parsing error in same URL origin check');\n    // Parse error\n    return false;\n  }\n}\n\n/**\n * Returns the global scope `Window`, `WorkerGlobalScope`, or `NodeJS.Global` if available in the\n * currently executing environment.\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Window/self\n * @see https://developer.mozilla.org/en-US/docs/Web/API/WorkerGlobalScope/self\n * @see https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope\n *\n * This could be switched to `globalThis` once it is standardized and widely available.\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/globalThis\n * @ignore\n */\nexport function getGlobalScope(): Window {\n  if (typeof self !== 'undefined') {\n    return self;\n  }\n  if (typeof window !== 'undefined') {\n    return window;\n  }\n  // This function is meant to be called when accessing APIs that are typically only available in\n  // web-browser/DOM environments, but we also want to support situations where running in Node.js\n  // environment, and a polyfill was added to the Node.js `global` object scope without adding the\n  // `window` global object as well.\n  if (typeof global !== 'undefined') {\n    return global as unknown as Window;\n  }\n  throw new Error(\n    'Unexpected runtime environment - no supported global scope (`window`, `self`, `global`) available'\n  );\n}\n\n/** @deprecated */\nfunction getAPIUsageErrorMessage(\n  scopeObject: unknown,\n  apiName: string,\n  usageDesc?: string\n): string {\n  if (usageDesc) {\n    return `Use of '${usageDesc}' requires \\`${apiName}\\` which is unavailable on the '${scopeObject}' object within the currently executing environment.`;\n  } else {\n    return `\\`${apiName}\\` is unavailable on the '${scopeObject}' object within the currently executing environment.`;\n  }\n}\n\ninterface GetGlobalObjectOptions {\n  /**\n   * Throw an error if the object is not found.\n   * @default false\n   */\n  throwIfUnavailable?: boolean;\n  /**\n   * Additional information to include in an error if thrown.\n   */\n  usageDesc?: string;\n  /**\n   * If the object is not found, return an new empty object instead of undefined.\n   * Requires [[throwIfUnavailable]] to be falsey.\n   * @default false\n   */\n  returnEmptyObject?: boolean;\n}\n\n/**\n * Returns an object from the global scope (`Window` or `WorkerGlobalScope`) if it\n * is available within the currently executing environment.\n * When executing within the Node.js runtime these APIs are unavailable and will be\n * `undefined` unless the API is provided via polyfill.\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Window/self\n * @ignore\n */\nexport function getGlobalObject<K extends Extract<keyof Window, string>>(\n  name: K,\n  { throwIfUnavailable, usageDesc, returnEmptyObject }: GetGlobalObjectOptions = {}\n): Window[K] | undefined {\n  let globalScope: Window | undefined = undefined;\n  try {\n    globalScope = getGlobalScope();\n    if (globalScope) {\n      const obj = globalScope[name];\n      if (obj) {\n        return obj;\n      }\n    }\n  } catch (error) {\n    Logger.error(`Error getting object '${name}' from global scope '${globalScope}': ${error}`);\n  }\n  if (throwIfUnavailable) {\n    const errMsg = getAPIUsageErrorMessage(globalScope, name.toString(), usageDesc);\n    Logger.error(errMsg);\n    throw new Error(errMsg);\n  }\n  if (returnEmptyObject) {\n    return {} as any;\n  }\n  return undefined;\n}\n\n/**\n * Returns a specified subset of objects from the global scope (`Window` or `WorkerGlobalScope`)\n * if they are available within the currently executing environment.\n * When executing within the Node.js runtime these APIs are unavailable will be `undefined`\n * unless the API is provided via polyfill.\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Window/self\n * @ignore\n */\nexport function getGlobalObjects<K extends Extract<keyof Window, string>>(\n  names: K[],\n  { throwIfUnavailable, usageDesc, returnEmptyObject }: GetGlobalObjectOptions = {}\n): Pick<Window, K> {\n  let globalScope: Window | undefined;\n  try {\n    globalScope = getGlobalScope();\n  } catch (error) {\n    Logger.error(`Error getting global scope: ${error}`);\n    if (throwIfUnavailable) {\n      const errMsg = getAPIUsageErrorMessage(globalScope, names[0].toString(), usageDesc);\n      Logger.error(errMsg);\n      throw errMsg;\n    } else if (returnEmptyObject) {\n      globalScope = {} as any;\n    }\n  }\n\n  const result: Pick<Window, K> = {} as any;\n  for (let i = 0; i < names.length; i++) {\n    const name = names[i];\n    try {\n      if (globalScope) {\n        const obj = globalScope[name];\n        if (obj) {\n          result[name] = obj;\n        } else if (throwIfUnavailable) {\n          const errMsg = getAPIUsageErrorMessage(globalScope, name.toString(), usageDesc);\n          Logger.error(errMsg);\n          throw new Error(errMsg);\n        } else if (returnEmptyObject) {\n          result[name] = {} as any;\n        }\n      }\n    } catch (error) {\n      if (throwIfUnavailable) {\n        const errMsg = getAPIUsageErrorMessage(globalScope, name.toString(), usageDesc);\n        Logger.error(errMsg);\n        throw new Error(errMsg);\n      }\n    }\n  }\n  return result;\n}\n\n/** Different Integer representations */\nexport type IntegerType = number | string | bigint | Uint8Array;\n\n/**\n * Converts an integer-compatible value to a Uint8Array (given a byte length)\n * @example\n * ```ts\n * import { intToBytes } from \"@stacks/common\";\n * console.log(intToBytes(560, 4));\n * // Uint8Array(4) [ 0, 0, 2, 48 ]\n * ```\n */\nexport function intToBytes(value: IntegerType, byteLength: number): Uint8Array {\n  return bigIntToBytes(intToBigInt(value), byteLength);\n}\n\n/**\n * Converts an integer-compatible value to a bigint\n * @param value - The value to convert to a bigint\n * @returns The bigint representation of the value\n *\n * @example\n * ```ts\n * intToBigInt(123); // 123n\n * intToBigInt('0xbeef'); // 48879n\n * ```\n */\nexport function intToBigInt(value: IntegerType): bigint {\n  if (typeof value === 'bigint') return value;\n  if (typeof value === 'string') return BigInt(value);\n  if (typeof value === 'number') {\n    if (!Number.isInteger(value)) {\n      throw new RangeError(`Invalid value. Values of type 'number' must be an integer.`);\n    }\n    if (value > Number.MAX_SAFE_INTEGER) {\n      throw new RangeError(\n        `Invalid value. Values of type 'number' must be less than or equal to ${Number.MAX_SAFE_INTEGER}. For larger values, try using a BigInt instead.`\n      );\n    }\n    return BigInt(value);\n  }\n\n  if (isInstance(value, Uint8Array)) return BigInt(`0x${bytesToHex(value)}`);\n\n  throw new TypeError(\n    `intToBigInt: Invalid value type. Must be a number, bigint, BigInt-compatible string, or Uint8Array.`\n  );\n}\n\n/**\n * Adds a `0x` prefix to a string if it does not already have one.\n */\nexport function with0x(value: string): string {\n  return /^0x/i.test(value) // startsWith('0x') case insensitive\n    ? value\n    : `0x${value}`;\n}\n\n/**\n * Removes the `0x` prefix of a string if it has one.\n */\nexport function without0x(value: string): string {\n  return /^0x/i.test(value) // startsWith('0x') case insensitive\n    ? value.slice(2)\n    : value;\n}\n\n/**\n * Converts hex input string to bigint\n * @param hex - hex input string without 0x prefix and in big endian format\n * @example \"6c7cde4d702830c1db34ef7c19e2776f59107afef39084776fc88bc78dbb9656\"\n * @ignore\n */\nexport function hexToBigInt(hex: string): bigint {\n  if (typeof hex !== 'string')\n    throw new TypeError(`hexToBigInt: expected string, got ${typeof hex}`);\n  // Big Endian\n  return BigInt(`0x${hex}`);\n}\n\n/**\n * Converts IntegerType to hex string\n */\nexport function intToHex(integer: IntegerType, byteLength = 8): string {\n  const value = typeof integer === 'bigint' ? integer : intToBigInt(integer);\n  return value.toString(16).padStart(byteLength * 2, '0');\n}\n\n/**\n * Converts hex string to integer\n */\nexport function hexToInt(hex: string): number {\n  return parseInt(hex, 16);\n}\n\n/**\n * Converts bigint to byte array\n * @param value bigint value to be converted\n * @param length byte array optional length\n * @return {Uint8Array} byte array\n */\nexport function bigIntToBytes(value: bigint, length: number = 16): Uint8Array {\n  const hex = intToHex(value, length);\n  return hexToBytes(hex);\n}\n\n/**\n * Converts from signed number to two's complement\n * MIN_VALUE = -(1 << (width - 1))\n * MAX_VALUE =  (1 << (width - 1)) - 1\n * @ignore\n */\nexport function toTwos(value: bigint, width: bigint): bigint {\n  if (\n    value < -(BigInt(1) << (width - BigInt(1))) ||\n    (BigInt(1) << (width - BigInt(1))) - BigInt(1) < value\n  ) {\n    throw `Unable to represent integer in width: ${width}`;\n  }\n  if (value >= BigInt(0)) {\n    return BigInt(value);\n  }\n  return value + (BigInt(1) << width);\n}\n\n/**\n * Returns nth bit (right-to-left, zero-indexed)\n */\nfunction nthBit(value: bigint, n: bigint) {\n  return value & (BigInt(1) << n);\n}\n\n/** @ignore */\nexport function bytesToTwosBigInt(bytes: Uint8Array): bigint {\n  return fromTwos(BigInt(`0x${bytesToHex(bytes)}`), BigInt(bytes.byteLength * 8));\n}\n\n/**\n * Converts from two's complement to signed number\n * @internal\n */\nexport function fromTwos(value: bigint, width: bigint) {\n  if (nthBit(value, width - BigInt(1))) {\n    return value - (BigInt(1) << width);\n  }\n  return value;\n}\n\n// The following methods are based on `@noble/hashes` implementation\n// https://github.com/paulmillr/noble-hashes\n// Copyright (c) 2022 Paul Miller (https://paulmillr.com)\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the “Software”), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\nconst hexes = Array.from({ length: 256 }, (_, i) => i.toString(16).padStart(2, '0'));\n\n/**\n * Converts bytes to the equivalent hex string\n * @example\n * ```\n * bytesToHex(Uint8Array.from([0xde, 0xad, 0xbe, 0xef])) // 'deadbeef'\n * ```\n */\nexport function bytesToHex(uint8a: Uint8Array): string {\n  // pre-caching improves the speed 6x\n  if (!(uint8a instanceof Uint8Array)) throw new Error('Uint8Array expected');\n  let hex = '';\n  for (const u of uint8a) {\n    hex += hexes[u];\n  }\n  return hex;\n}\n\n/**\n * Converts a hex string to the equivalent bytes\n * @example\n * ```\n * hexToBytes('deadbeef') // Uint8Array(4) [ 222, 173, 190, 239 ]\n * hexToBytes('0xdeadbeef') // Uint8Array(4) [ 222, 173, 190, 239 ]\n * ```\n */\nexport function hexToBytes(hex: string): Uint8Array {\n  if (typeof hex !== 'string') {\n    throw new TypeError(`hexToBytes: expected string, got ${typeof hex}`);\n  }\n\n  hex = without0x(hex);\n  hex = hex.length % 2 ? `0${hex}` : hex; // left pad with a zero if odd length\n\n  const array = new Uint8Array(hex.length / 2);\n  for (let i = 0; i < array.length; i++) {\n    const j = i * 2;\n    const hexByte = hex.slice(j, j + 2);\n    const byte = Number.parseInt(hexByte, 16);\n    if (Number.isNaN(byte) || byte < 0) throw new Error('Invalid byte sequence');\n    array[i] = byte;\n  }\n  return array;\n}\n\ndeclare const TextEncoder: any;\ndeclare const TextDecoder: any;\n\n/**\n * Converts a UTF-8 string to the equivalent bytes\n * @example\n * ```\n * utf8ToBytes('stacks Ӿ'); // Uint8Array(9) [ 115, 116, 97, 99, 107, 115, 32, 211, 190 ];\n * ```\n */\nexport function utf8ToBytes(str: string): Uint8Array {\n  return new TextEncoder().encode(str);\n}\n\n/**\n * Converts bytes to the equivalent UTF-8 string\n * @example\n * ```\n * bytesToUtf8(Uint8Array.from([115, 116, 97, 99, 107, 115, 32, 211, 190])); // 'stacks Ӿ'\n * ```\n */\nexport function bytesToUtf8(arr: Uint8Array): string {\n  return new TextDecoder().decode(arr);\n}\n\n/**\n * Converts an ASCII string to the equivalent bytes\n * @example\n * ```\n * asciiToBytes('stacks $'); // Uint8Array(8) [ 115, 116, 97, 99, 107, 115, 32, 36 ]\n * ```\n */\nexport function asciiToBytes(str: string) {\n  const byteArray = [];\n  for (let i = 0; i < str.length; i++) {\n    byteArray.push(str.charCodeAt(i) & 0xff); // ignore second bytes of UTF-16 character\n  }\n  return new Uint8Array(byteArray);\n}\n\n/**\n * Converts bytes to the equivalent ASCII string\n * @example\n * ```\n * bytesToAscii(Uint8Array.from([115, 116, 97, 99, 107, 115, 32, 36])); // 'stacks $'\n * ```\n */\nexport function bytesToAscii(arr: Uint8Array) {\n  return String.fromCharCode.apply(null, arr as any as number[]);\n}\n\nfunction isNotOctet(octet: number) {\n  return !Number.isInteger(octet) || octet < 0 || octet > 255;\n}\n\n/** @ignore */\nexport function octetsToBytes(numbers: number[]) {\n  if (numbers.some(isNotOctet)) throw new Error('Some values are invalid bytes.');\n  return new Uint8Array(numbers);\n}\n\n/**\n * Concats Uint8Array-s into one; like `Buffer.concat([buf1, buf2])`\n * @example concatBytes(buf1, buf2)\n * @ignore\n */\nexport function concatBytes(...arrays: Uint8Array[]): Uint8Array {\n  if (!arrays.every(a => a instanceof Uint8Array)) throw new Error('Uint8Array list expected');\n  if (arrays.length === 1) return arrays[0];\n  const length = arrays.reduce((a, arr) => a + arr.length, 0);\n  const result = new Uint8Array(length);\n  for (let i = 0, pad = 0; i < arrays.length; i++) {\n    const arr = arrays[i];\n    result.set(arr, pad);\n    pad += arr.length;\n  }\n  return result;\n}\n\n/** @ignore */\nexport function concatArray(elements: (Uint8Array | number[] | number)[]) {\n  return concatBytes(\n    ...elements.map(e => {\n      if (typeof e === 'number') return octetsToBytes([e]);\n      if (e instanceof Array) return octetsToBytes(e);\n      return e;\n    })\n  );\n}\n\n/**\n * Better `instanceof` check for types in different environments\n * @ignore\n */\nexport function isInstance<T>(object: any, clazz: { new (...args: any[]): T }): object is T {\n  return object instanceof clazz || object?.constructor?.name?.toLowerCase() === clazz.name;\n}\n\n/**\n * Checks whether a string is a valid hex string, and has a length of 64 characters.\n */\nexport function validateHash256(hex: string): boolean {\n  hex = without0x(hex);\n  if (hex.length !== 64) return false;\n  return /^[0-9a-fA-F]+$/.test(hex);\n}\n", "/**\n * The chain ID (unsigned 32-bit integer), used so transactions can't be replayed on other chains.\n * Similar to the {@link TransactionVersion}.\n */\nexport enum ChainID {\n  Testnet = 0x80000000,\n  Mainnet = 0x00000001,\n}\n\nexport const DEFAULT_CHAIN_ID = ChainID.Mainnet;\nexport const MAX_STRING_LENGTH_BYTES = 128;\nexport const CLARITY_INT_SIZE = 128;\nexport const CLARITY_INT_BYTE_SIZE = 16;\nexport const COINBASE_BYTES_LENGTH = 32;\nexport const VRF_PROOF_BYTES_LENGTH = 80;\nexport const RECOVERABLE_ECDSA_SIG_LENGTH_BYTES = 65;\nexport const COMPRESSED_PUBKEY_LENGTH_BYTES = 32;\nexport const UNCOMPRESSED_PUBKEY_LENGTH_BYTES = 64;\nexport const MEMO_MAX_LENGTH_BYTES = 34;\nexport const DEFAULT_CORE_NODE_API_URL = 'https://api.mainnet.hiro.so';\n\n// todo: add explicit enum values\n/**\n * The type of message that is being serialized.\n * Used internally for serializing and deserializing messages.\n */\nexport enum StacksMessageType {\n  Address,\n  Principal,\n  LengthPrefixedString,\n  MemoString,\n  AssetInfo,\n  PostCondition,\n  PublicKey,\n  LengthPrefixedList,\n  Payload,\n  MessageSignature,\n  StructuredDataSignature,\n  TransactionAuthField,\n}\n\ntype WhenMessageTypeMap<T> = Record<StacksMessageType, T>;\n\nexport function whenMessageType(messageType: StacksMessageType) {\n  return <T>(messageTypeMap: WhenMessageTypeMap<T>): T => messageTypeMap[messageType];\n}\n\n/**\n * The type of transaction (payload) that is being serialized.\n * Used internally for serializing and deserializing transactions.\n */\nexport enum PayloadType {\n  TokenTransfer = 0x00,\n  SmartContract = 0x01,\n  VersionedSmartContract = 0x06,\n  ContractCall = 0x02,\n  PoisonMicroblock = 0x03,\n  Coinbase = 0x04,\n  CoinbaseToAltRecipient = 0x05,\n  TenureChange = 0x7,\n  NakamotoCoinbase = 0x08,\n}\n\n/**\n * The version of Clarity used to deploy a smart contract.\n * Most methods will default to the latest available version of Clarity.\n */\nexport enum ClarityVersion {\n  Clarity1 = 1,\n  Clarity2 = 2,\n  Clarity3 = 3,\n}\n\n/**\n * How a transaction should get appended to the Stacks blockchain.\n *\n * In the Stacks blockchain, there are two kinds of blocks: anchored\n * blocks and streaming microblocks. A transactions AnchorMode specifies\n * which kind of block it should be included in.\n *\n * For more information about the kinds of Stacks blocks and the various\n * AnchorModes, check out {@link https://github.com/stacksgov/sips/blob/main/sips/sip-001/sip-001-burn-election.md SIP 001} and\n * {@link https://github.com/stacksgov/sips/blob/main/sips/sip-005/sip-005-blocks-and-transactions.md SIP 005}\n */\nexport enum AnchorMode {\n  /** The transaction MUST be included in an anchored block */\n  OnChainOnly = 0x01,\n  /** The transaction MUST be included in a microblock */\n  OffChainOnly = 0x02,\n  /** The leader can choose where to include the transaction (anchored block or microblock)*/\n  Any = 0x03,\n}\n\nexport const AnchorModeNames = ['onChainOnly', 'offChainOnly', 'any'] as const;\nexport type AnchorModeName = (typeof AnchorModeNames)[number];\n\nconst AnchorModeMap = {\n  [AnchorModeNames[0]]: AnchorMode.OnChainOnly,\n  [AnchorModeNames[1]]: AnchorMode.OffChainOnly,\n  [AnchorModeNames[2]]: AnchorMode.Any,\n  [AnchorMode.OnChainOnly]: AnchorMode.OnChainOnly,\n  [AnchorMode.OffChainOnly]: AnchorMode.OffChainOnly,\n  [AnchorMode.Any]: AnchorMode.Any,\n};\n\n/** @ignore */\nexport function anchorModeFromNameOrValue(mode: AnchorModeName | AnchorMode): AnchorMode {\n  if (mode in AnchorModeMap) return AnchorModeMap[mode];\n  throw new Error(`Invalid anchor mode \"${mode}\", must be one of: ${AnchorModeNames.join(', ')}`);\n}\n\n/**\n * The transaction version, used so transactions can't be replayed on other networks.\n * Similar to the {@link ChainID}.\n * Used internally for serializing and deserializing transactions.\n */\nexport enum TransactionVersion {\n  Mainnet = 0x00,\n  Testnet = 0x80,\n}\n\nexport const DEFAULT_TRANSACTION_VERSION = TransactionVersion.Mainnet;\n\n/**\n * How to treat unspecified transfers of a transaction.\n * Used for creating transactions.\n *\n * Post-conditions are **always** be validated by nodes, regardless of the {@link PostConditionMode}.\n * `PostConditionMode.Allow` will allow additional (aka unspecified) transfers, while `PostConditionMode.Deny` will not.\n */\nexport enum PostConditionMode {\n  /** `Allow` — Allow unspecified transfers */\n  Allow = 0x01,\n  /** `Deny` — Do not allow unspecified transfers */\n  Deny = 0x02,\n}\n\n/**\n * The type of asset a post-condition is referring to.\n * Used for serializing post-conditions.\n */\nexport enum PostConditionType {\n  STX = 0x00,\n  Fungible = 0x01,\n  NonFungible = 0x02,\n}\n\n/**\n * The sponsorship mode of a transaction.\n *\n * Specifies whether a transaction is sponsored or not.\n */\nexport enum AuthType {\n  /** `Standard` (not sponsored) — The transaction is not sponsored. The sender will need to spend fees. */\n  Standard = 0x04,\n  /** `Sponsored` — The transaction is sponsored. The sponsor will spend fees on behalf of the sender. */\n  Sponsored = 0x05,\n}\n\n/**\n * Serialization modes for public keys to addresses.\n * Four different modes are supported due to legacy compatibility with Stacks v1 addresses.\n */\nexport enum AddressHashMode {\n  /** `SingleSigHashMode` — hash160(public-key), same as bitcoin's p2pkh */\n  SerializeP2PKH = 0x00,\n  /** Legacy `MultiSigHashMode` — hash160(multisig-redeem-script), same as bitcoin's multisig p2sh */\n  SerializeP2SH = 0x01,\n  /** `SingleSigHashMode` — hash160(segwit-program-00(p2pkh)), same as bitcoin's p2sh-p2wpkh */\n  SerializeP2WPKH = 0x02,\n  /** Legacy `MultiSigHashMode` — hash160(segwit-program-00(public-keys)), same as bitcoin's p2sh-p2wsh */\n  SerializeP2WSH = 0x03,\n  /** Non-Sequential `MultiSigHashMode` — hash160(multisig-redeem-script), same as bitcoin's multisig p2sh */\n  SerializeP2SHNonSequential = 0x05,\n  /** Non-Sequential `MultiSigHashMode` — hash160(segwit-program-00(public-keys)), same as bitcoin's p2sh-p2wsh */\n  SerializeP2WSHNonSequential = 0x07,\n\n  // todo: `next` rename to remove the `Serialize` prefix?\n  // todo: `next` rename to remove `NonSequential` and add `Legacy` to sequential mutlisig\n}\n\nexport type SingleSigHashMode = AddressHashMode.SerializeP2PKH | AddressHashMode.SerializeP2WPKH;\nexport type MultiSigHashMode =\n  | AddressHashMode.SerializeP2SH\n  | AddressHashMode.SerializeP2WSH\n  | AddressHashMode.SerializeP2SHNonSequential\n  | AddressHashMode.SerializeP2WSHNonSequential;\n\n/**\n * Address versions for identifying address types in an encoded Stacks address.\n * The address version is a single byte, indicating the address type.\n * Every Stacks address starts with `S` followed by a single character indicating the address version.\n * The second character is the c32-encoded AddressVersion byte.\n */\nexport enum AddressVersion {\n  /** `P` — A single-sig address for mainnet (starting with `SP`) */\n  MainnetSingleSig = 22,\n  /** `M` — A multi-sig address for mainnet (starting with `SM`) */\n  MainnetMultiSig = 20,\n  /** `T` — A single-sig address for testnet (starting with `ST`) */\n  TestnetSingleSig = 26,\n  /** `N` — A multi-sig address for testnet (starting with `SN`) */\n  TestnetMultiSig = 21,\n}\n\n// todo: try to remove this\nexport enum PubKeyEncoding {\n  Compressed = 0x00,\n  Uncompressed = 0x01,\n}\n\n/**\n * The type of fungible token post-condition comparison.\n * Used for serializing post-conditions.\n */\nexport enum FungibleConditionCode {\n  Equal = 0x01,\n  Greater = 0x02,\n  GreaterEqual = 0x03,\n  Less = 0x04,\n  LessEqual = 0x05,\n}\n\n/**\n * The type of non-fungible token post-condition comparison.\n * Used for serializing post-conditions.\n */\nexport enum NonFungibleConditionCode {\n  Sends = 0x10,\n  DoesNotSend = 0x11,\n}\n\n/**\n * The type of sender for a post-condition.\n */\nexport enum PostConditionPrincipalID {\n  Origin = 0x01,\n  Standard = 0x02,\n  Contract = 0x03,\n}\n\n/**\n * The type of asset used in a post-condition.\n */\nexport enum AssetType {\n  STX = 0x00,\n  Fungible = 0x01,\n  NonFungible = 0x02,\n}\n\n// todo: refactor this, if only used in one place, just use a string\n/** @ignore */\nexport enum TxRejectedReason {\n  Serialization = 'Serialization',\n  Deserialization = 'Deserialization',\n  SignatureValidation = 'SignatureValidation',\n  FeeTooLow = 'FeeTooLow',\n  BadNonce = 'BadNonce',\n  NotEnoughFunds = 'NotEnoughFunds',\n  NoSuchContract = 'NoSuchContract',\n  NoSuchPublicFunction = 'NoSuchPublicFunction',\n  BadFunctionArgument = 'BadFunctionArgument',\n  ContractAlreadyExists = 'ContractAlreadyExists',\n  PoisonMicroblocksDoNotConflict = 'PoisonMicroblocksDoNotConflict',\n  PoisonMicroblockHasUnknownPubKeyHash = 'PoisonMicroblockHasUnknownPubKeyHash',\n  PoisonMicroblockIsInvalid = 'PoisonMicroblockIsInvalid',\n  BadAddressVersionByte = 'BadAddressVersionByte',\n  NoCoinbaseViaMempool = 'NoCoinbaseViaMempool',\n  ServerFailureNoSuchChainTip = 'ServerFailureNoSuchChainTip',\n  TooMuchChaining = 'TooMuchChaining',\n  ConflictingNonceInMempool = 'ConflictingNonceInMempool',\n  BadTransactionVersion = 'BadTransactionVersion',\n  TransferRecipientCannotEqualSender = 'TransferRecipientCannotEqualSender',\n  TransferAmountMustBePositive = 'TransferAmountMustBePositive',\n  ServerFailureDatabase = 'ServerFailureDatabase',\n  EstimatorError = 'EstimatorError',\n  TemporarilyBlacklisted = 'TemporarilyBlacklisted',\n  ServerFailureOther = 'ServerFailureOther',\n}\n", "import { ripemd160 } from '@noble/hashes/ripemd160';\nimport { sha256 } from '@noble/hashes/sha256';\nimport { sha512_256 } from '@noble/hashes/sha512';\nimport { utils } from '@noble/secp256k1';\nimport { bytesToHex, concatArray, concatBytes, utf8ToBytes, with0x } from '@stacks/common';\nimport { c32addressDecode } from 'c32check';\nimport lodashCloneDeep from 'lodash.clonedeep';\nimport { ClarityValue, deserializeCV, serializeCV } from './clarity';\n\n// Export verify as utility method for signature verification\nexport { verify as verifySignature } from '@noble/secp256k1';\n\n/**\n * Use utils.randomBytes to replace randombytes dependency\n * Generates random bytes of given length\n * @param {number} bytesLength an optional bytes length, default is 32 bytes\n */\nexport const randomBytes = (bytesLength?: number): Uint8Array => utils.randomBytes(bytesLength);\n\nexport const leftPadHex = (hexString: string): string =>\n  hexString.length % 2 == 0 ? hexString : `0${hexString}`;\n\nexport const leftPadHexToLength = (hexString: string, length: number): string =>\n  hexString.padStart(length, '0');\n\nexport const rightPadHexToLength = (hexString: string, length: number): string =>\n  hexString.padEnd(length, '0');\n\nexport const exceedsMaxLengthBytes = (string: string, maxLengthBytes: number): boolean =>\n  string ? utf8ToBytes(string).length > maxLengthBytes : false;\n\n/** @ignore */\nexport function cloneDeep<T>(obj: T): T {\n  return lodashCloneDeep(obj);\n}\n\n// todo: remove this function and instead delete param without clone (if possible)?\nexport function omit<T, K extends keyof any>(obj: T, prop: K): Omit<T, K> {\n  const clone = cloneDeep(obj);\n  // @ts-expect-error\n  delete clone[prop];\n  return clone;\n}\n\nexport const hash160 = (input: Uint8Array): Uint8Array => {\n  return ripemd160(sha256(input));\n};\n\n/** @deprecated renamed to {@link txidFromBytes} */\nexport const txidFromData = (data: Uint8Array): string => {\n  return bytesToHex(sha512_256(data));\n};\n\n/**\n * Computes the transaction ID of the bytes from a serialized transaction (or any other bytes using the same hash function).\n */\nexport const txidFromBytes = txidFromData;\n\n// Internally, the Stacks blockchain encodes address the same as Bitcoin\n// single-sig address (p2pkh)\n/** @ignore */\nexport const hashP2PKH = (input: Uint8Array): string => {\n  return bytesToHex(hash160(input));\n};\n\n// Internally, the Stacks blockchain encodes address the same as Bitcoin\n// single-sig address over p2sh (p2h-p2wpkh)\n/** @ignore */\nexport const hashP2WPKH = (input: Uint8Array): string => {\n  const keyHash = hash160(input);\n  const redeemScript = concatBytes(new Uint8Array([0]), new Uint8Array([keyHash.length]), keyHash);\n  const redeemScriptHash = hash160(redeemScript);\n  return bytesToHex(redeemScriptHash);\n};\n\n// Internally, the Stacks blockchain encodes address the same as Bitcoin\n// multi-sig address (p2sh)\n/** @ignore */\nexport const hashP2SH = (numSigs: number, pubKeys: Uint8Array[]): string => {\n  if (numSigs > 15 || pubKeys.length > 15) {\n    throw Error('P2SH multisig address can only contain up to 15 public keys');\n  }\n\n  // construct P2SH script\n  const bytesArray = [];\n  // OP_n\n  bytesArray.push(80 + numSigs);\n  // public keys prepended by their length\n  pubKeys.forEach(pubKey => {\n    bytesArray.push(pubKey.length);\n    bytesArray.push(pubKey);\n  });\n  // OP_m\n  bytesArray.push(80 + pubKeys.length);\n  // OP_CHECKMULTISIG\n  bytesArray.push(174);\n\n  const redeemScript = concatArray(bytesArray);\n  const redeemScriptHash = hash160(redeemScript);\n  return bytesToHex(redeemScriptHash);\n};\n\n// Internally, the Stacks blockchain encodes address the same as Bitcoin\n// multisig address over p2sh (p2sh-p2wsh)\n/** @ignore */\nexport const hashP2WSH = (numSigs: number, pubKeys: Uint8Array[]): string => {\n  if (numSigs > 15 || pubKeys.length > 15) {\n    throw Error('P2WSH multisig address can only contain up to 15 public keys');\n  }\n\n  // construct P2SH script\n  const scriptArray = [];\n  // OP_n\n  scriptArray.push(80 + numSigs);\n  // public keys prepended by their length\n  pubKeys.forEach(pubKey => {\n    scriptArray.push(pubKey.length);\n    scriptArray.push(pubKey);\n  });\n  // OP_m\n  scriptArray.push(80 + pubKeys.length);\n  // OP_CHECKMULTISIG\n  scriptArray.push(174);\n\n  const script = concatArray(scriptArray);\n  const digest = sha256(script);\n\n  const bytesArray = [];\n  bytesArray.push(0);\n  bytesArray.push(digest.length);\n  bytesArray.push(digest);\n\n  const redeemScript = concatArray(bytesArray);\n  const redeemScriptHash = hash160(redeemScript);\n  return bytesToHex(redeemScriptHash);\n};\n\nexport function isClarityName(name: string) {\n  const regex = /^[a-zA-Z]([a-zA-Z0-9]|[-_!?+<>=/*])*$|^[-+=/*]$|^[<>]=?$/;\n  return regex.test(name) && name.length < 128;\n}\n\n/**\n * Converts a clarity value to a hex encoded string with `0x` prefix\n * @param {ClarityValue} cv  - the clarity value to convert\n */\nexport function cvToHex(cv: ClarityValue) {\n  const serialized = serializeCV(cv);\n  return `0x${bytesToHex(serialized)}`;\n}\n\n/**\n * Converts a hex encoded string to a clarity value\n * @param {string} hex - the hex encoded string with or without `0x` prefix\n */\nexport function hexToCV(hex: string) {\n  return deserializeCV(hex);\n}\n/**\n * Read only function response object\n *\n * @param {Boolean} okay - the status of the response\n * @param {string} result - serialized hex clarity value\n */\n\nexport interface ReadOnlyFunctionSuccessResponse {\n  okay: true;\n  result: string;\n}\n\nexport interface ReadOnlyFunctionErrorResponse {\n  okay: false;\n  cause: string;\n}\n\nexport type ReadOnlyFunctionResponse =\n  | ReadOnlyFunctionSuccessResponse\n  | ReadOnlyFunctionErrorResponse;\n\n/**\n * Converts the response of a read-only function call into its Clarity Value\n * @param param\n */\nexport const parseReadOnlyResponse = (response: ReadOnlyFunctionResponse): ClarityValue => {\n  if (response.okay) return hexToCV(response.result);\n  throw new Error(response.cause);\n};\n\nexport const validateStacksAddress = (stacksAddress: string): boolean => {\n  try {\n    c32addressDecode(stacksAddress);\n    return true;\n  } catch (e) {\n    return false;\n  }\n};\n\nexport const validateTxId = (txid: string): boolean => {\n  if (txid === 'success') return true; // Bypass fetchMock tests // todo: move this line into mocks in test files\n  const value = with0x(txid).toLowerCase();\n  if (value.length !== 66) return false;\n  return with0x(BigInt(value).toString(16).padStart(64, '0')) === value;\n};\n", "import {\n  AddressHashMode,\n  AddressVersion,\n  RECOVERABLE_ECDSA_SIG_LENGTH_BYTES,\n  StacksMessageType,\n  TransactionVersion,\n} from './constants';\n\nimport { c32address } from 'c32check';\nimport { hexToBytes } from '@stacks/common';\n\nexport interface Address {\n  readonly type: StacksMessageType.Address;\n  readonly version: AddressVersion;\n  readonly hash160: string;\n}\n\nexport interface MessageSignature {\n  readonly type: StacksMessageType.MessageSignature;\n  data: string;\n}\n\nexport function createMessageSignature(signature: string): MessageSignature {\n  const length = hexToBytes(signature).byteLength;\n  if (length != RECOVERABLE_ECDSA_SIG_LENGTH_BYTES) {\n    throw Error('Invalid signature');\n  }\n\n  return {\n    type: StacksMessageType.MessageSignature,\n    data: signature,\n  };\n}\n\n/**\n * Translates the tx auth hash mode to the corresponding address version.\n * @see https://github.com/blockstack/stacks-blockchain/blob/master/sip/sip-005-blocks-and-transactions.md#transaction-authorization\n */\nexport function addressHashModeToVersion(\n  hashMode: AddressHashMode,\n  txVersion: TransactionVersion\n): AddressVersion {\n  // todo: `next` refacto with network param\n  switch (hashMode) {\n    case AddressHashMode.SerializeP2PKH:\n      switch (txVersion) {\n        case TransactionVersion.Mainnet:\n          return AddressVersion.MainnetSingleSig;\n        case TransactionVersion.Testnet:\n          return AddressVersion.TestnetSingleSig;\n        default:\n          throw new Error(\n            `Unexpected txVersion ${JSON.stringify(txVersion)} for hashMode ${hashMode}`\n          );\n      }\n    case AddressHashMode.SerializeP2SH:\n    case AddressHashMode.SerializeP2SHNonSequential:\n    case AddressHashMode.SerializeP2WPKH:\n    case AddressHashMode.SerializeP2WSH:\n    case AddressHashMode.SerializeP2WSHNonSequential:\n      switch (txVersion) {\n        case TransactionVersion.Mainnet:\n          return AddressVersion.MainnetMultiSig;\n        case TransactionVersion.Testnet:\n          return AddressVersion.TestnetMultiSig;\n        default:\n          throw new Error(\n            `Unexpected txVersion ${JSON.stringify(txVersion)} for hashMode ${hashMode}`\n          );\n      }\n    default:\n      throw new Error(`Unexpected hashMode ${JSON.stringify(hashMode)}`);\n  }\n}\n\nexport function addressFromVersionHash(version: AddressVersion, hash: string): Address {\n  return { type: StacksMessageType.Address, version, hash160: hash };\n}\n\nexport function addressToString(address: Address): string {\n  return c32address(address.version, address.hash160);\n}\n", "import {\n  FungibleConditionCode,\n  MAX_STRING_LENGTH_BYTES,\n  NonFungibleConditionCode,\n  PostConditionPrincipalID,\n  PostConditionType,\n  StacksMessageType,\n} from './constants';\nimport { c32addressDecode } from 'c32check';\nimport { Address } from './common';\nimport { ClarityValue } from './clarity';\nimport { exceedsMaxLengthBytes } from './utils';\n\nexport interface StandardPrincipal {\n  readonly type: StacksMessageType.Principal;\n  readonly prefix: PostConditionPrincipalID.Standard;\n  readonly address: Address;\n}\n\nexport interface ContractPrincipal {\n  readonly type: StacksMessageType.Principal;\n  readonly prefix: PostConditionPrincipalID.Contract;\n  readonly address: Address;\n  readonly contractName: LengthPrefixedString;\n}\n\nexport interface LengthPrefixedString {\n  readonly type: StacksMessageType.LengthPrefixedString;\n  readonly content: string;\n  readonly lengthPrefixBytes: number;\n  readonly maxLengthBytes: number;\n}\n\nexport interface AssetInfo {\n  readonly type: StacksMessageType.AssetInfo;\n  readonly address: Address;\n  readonly contractName: LengthPrefixedString;\n  readonly assetName: LengthPrefixedString;\n}\n\nexport interface STXPostCondition {\n  readonly type: StacksMessageType.PostCondition;\n  readonly conditionType: PostConditionType.STX;\n  readonly principal: PostConditionPrincipal;\n  readonly conditionCode: FungibleConditionCode;\n  readonly amount: bigint;\n}\n\nexport interface FungiblePostCondition {\n  readonly type: StacksMessageType.PostCondition;\n  readonly conditionType: PostConditionType.Fungible;\n  readonly principal: PostConditionPrincipal;\n  readonly conditionCode: FungibleConditionCode;\n  readonly amount: bigint;\n  readonly assetInfo: AssetInfo;\n}\n\nexport interface NonFungiblePostCondition {\n  readonly type: StacksMessageType.PostCondition;\n  readonly conditionType: PostConditionType.NonFungible;\n  readonly principal: PostConditionPrincipal;\n  readonly conditionCode: NonFungibleConditionCode;\n  /** Structure that identifies the token type. */\n  readonly assetInfo: AssetInfo;\n  /** The Clarity value that names the token instance. */\n  readonly assetName: ClarityValue;\n}\n\nexport function parseAssetInfoString(id: string): AssetInfo {\n  const [assetAddress, assetContractName, assetTokenName] = id.split(/\\.|::/);\n  const assetInfo = createAssetInfo(assetAddress, assetContractName, assetTokenName);\n  return assetInfo;\n}\n\nexport function createLPString(content: string): LengthPrefixedString;\nexport function createLPString(content: string, lengthPrefixBytes: number): LengthPrefixedString;\nexport function createLPString(\n  content: string,\n  lengthPrefixBytes: number,\n  maxLengthBytes: number\n): LengthPrefixedString;\nexport function createLPString(\n  content: string,\n  lengthPrefixBytes?: number,\n  maxLengthBytes?: number\n): LengthPrefixedString {\n  const prefixLength = lengthPrefixBytes || 1;\n  const maxLength = maxLengthBytes || MAX_STRING_LENGTH_BYTES;\n  if (exceedsMaxLengthBytes(content, maxLength)) {\n    throw new Error(`String length exceeds maximum bytes ${maxLength}`);\n  }\n  return {\n    type: StacksMessageType.LengthPrefixedString,\n    content,\n    lengthPrefixBytes: prefixLength,\n    maxLengthBytes: maxLength,\n  };\n}\n\nexport function createAssetInfo(\n  addressString: string,\n  contractName: string,\n  assetName: string\n): AssetInfo {\n  return {\n    type: StacksMessageType.AssetInfo,\n    address: createAddress(addressString),\n    contractName: createLPString(contractName),\n    assetName: createLPString(assetName),\n  };\n}\n\nexport function createAddress(c32AddressString: string): Address {\n  const addressData = c32addressDecode(c32AddressString);\n  return {\n    type: StacksMessageType.Address,\n    version: addressData[0],\n    hash160: addressData[1],\n  };\n}\n\n/**\n * Parses a principal string for either a standard principal or contract principal.\n * @param principalString - String in the format `{address}.{contractName}`\n * @example \"SP13N5TE1FBBGRZD1FCM49QDGN32WAXM2E5F8WT2G.example-contract\"\n * @example \"SP13N5TE1FBBGRZD1FCM49QDGN32WAXM2E5F8WT2G\"\n */\nexport function parsePrincipalString(\n  principalString: string\n): StandardPrincipal | ContractPrincipal {\n  if (principalString.includes('.')) {\n    const [address, contractName] = principalString.split('.');\n    return createContractPrincipal(address, contractName);\n  } else {\n    return createStandardPrincipal(principalString);\n  }\n}\n\nexport function createContractPrincipal(\n  addressString: string,\n  contractName: string\n): ContractPrincipal {\n  const addr = createAddress(addressString);\n  const name = createLPString(contractName);\n  return {\n    type: StacksMessageType.Principal,\n    prefix: PostConditionPrincipalID.Contract,\n    address: addr,\n    contractName: name,\n  };\n}\n\nexport function createStandardPrincipal(addressString: string): StandardPrincipal {\n  const addr = createAddress(addressString);\n  return {\n    type: StacksMessageType.Principal,\n    prefix: PostConditionPrincipalID.Standard,\n    address: addr,\n  };\n}\n\nexport type PostCondition = STXPostCondition | FungiblePostCondition | NonFungiblePostCondition;\n\nexport type PostConditionPrincipal = StandardPrincipal | ContractPrincipal;\n", "/**\n * Type IDs corresponding to each of the Clarity value types as described here:\n * {@link https://github.com/blockstack/blockstack-core/blob/sip/sip-005/sip/sip-005-blocks-and-transactions.md#clarity-value-representation}\n */\nexport enum ClarityType {\n  Int = 0x00,\n  UInt = 0x01,\n  Buffer = 0x02,\n  BoolTrue = 0x03,\n  BoolFalse = 0x04,\n  PrincipalStandard = 0x05,\n  PrincipalContract = 0x06,\n  ResponseOk = 0x07,\n  ResponseErr = 0x08,\n  OptionalNone = 0x09,\n  OptionalSome = 0x0a,\n  List = 0x0b,\n  Tuple = 0x0c,\n  StringASCII = 0x0d,\n  StringUTF8 = 0x0e,\n}\n", "import { IntegerType, intToBigInt } from '@stacks/common';\nimport { ClarityType } from '../constants';\n\nconst MAX_U128 = BigInt('0xffffffffffffffffffffffffffffffff'); // (2 ** 128 - 1)\nconst MIN_U128 = BigInt(0);\nconst MAX_I128 = BigInt('0x7fffffffffffffffffffffffffffffff'); // (2 ** 127 - 1)\n// no signed (negative) hex support in bigint constructor\nconst MIN_I128 = BigInt('-170141183460469231731687303715884105728'); // (-2 ** 127)\n\ninterface IntCV {\n  readonly type: ClarityType.Int;\n  readonly value: bigint;\n}\n\n/**\n * Converts IntegerType in to IntCV clarity type\n *\n * @param {value} integer value to be converted to IntCV clarity type\n *\n * @returns {IntCV} returns instance of type IntCV\n *\n * @example\n * ```\n *  import { intCV } from '@stacks/transactions';\n *\n *  const value = intCV('100'); // parameter any of type: number | string | bigint | Uint8Array | BN\n *  // { type: 0, value: 100n }\n * ```\n *\n * @see\n * {@link https://github.com/hirosystems/stacks.js/blob/main/packages/transactions/tests/clarity.test.ts | clarity test cases for more examples}\n */\nconst intCV = (value: IntegerType): IntCV => {\n  const bigInt = intToBigInt(value, true);\n  if (bigInt > MAX_I128) {\n    throw new RangeError(`Cannot construct clarity integer from value greater than ${MAX_I128}`);\n  } else if (bigInt < MIN_I128) {\n    throw new RangeError(`Cannot construct clarity integer form value less than ${MIN_I128}`);\n  }\n  return { type: ClarityType.Int, value: bigInt };\n};\n\ninterface UIntCV {\n  readonly type: ClarityType.UInt;\n  readonly value: bigint;\n}\n\n/**\n * Converts IntegerType in to IntCV clarity type\n *\n * @param {value} integer value to be converted to UIntCV clarity type (Only unsigned integer is allowed otherwise throws exception)\n *\n * @returns {UIntCV} returns instance of type UIntCV\n *\n * @example\n * ```\n *  import { uintCV } from '@stacks/transactions';\n *\n *  const value = uintCV('100'); // parameter any of type: number | string | bigint | Uint8Array | BN\n *  // { type: 1, value: 100n }\n * ```\n *\n * @see\n * {@link https://github.com/hirosystems/stacks.js/blob/main/packages/transactions/tests/clarity.test.ts | clarity test cases for more examples}\n */\nconst uintCV = (value: IntegerType): UIntCV => {\n  const bigInt = intToBigInt(value, false);\n  if (bigInt < MIN_U128) {\n    throw new RangeError('Cannot construct unsigned clarity integer from negative value');\n  } else if (bigInt > MAX_U128) {\n    throw new RangeError(`Cannot construct unsigned clarity integer greater than ${MAX_U128}`);\n  }\n  return { type: ClarityType.UInt, value: bigInt };\n};\n\nexport { IntCV, UIntCV, intCV, uintCV };\n", "import { hmac } from '@noble/hashes/hmac';\nimport { sha256 } from '@noble/hashes/sha256';\nimport {\n  getPublicKey as nobleGetPublicKey,\n  Point,\n  Signature,\n  signSync,\n  utils,\n} from '@noble/secp256k1';\nimport {\n  bytesToHex,\n  concatArray,\n  hexToBigInt,\n  hexToBytes,\n  intToHex,\n  parseRecoverableSignatureVrs,\n  privateKeyToBytes,\n  PRIVATE_KEY_COMPRESSED_LENGTH,\n  signatureRsvToVrs,\n  signatureVrsToRsv,\n} from '@stacks/common';\nimport { c32address } from 'c32check';\nimport { BytesReader } from './bytesReader';\nimport {\n  addressFromVersionHash,\n  addressHashModeToVersion,\n  addressToString,\n  createMessageSignature,\n  MessageSignature,\n} from './common';\nimport {\n  AddressHashMode,\n  AddressVersion,\n  COMPRESSED_PUBKEY_LENGTH_BYTES,\n  PubKeyEncoding,\n  StacksMessageType,\n  TransactionVersion,\n  UNCOMPRESSED_PUBKEY_LENGTH_BYTES,\n} from './constants';\nimport { hash160, hashP2PKH } from './utils';\nimport { StructuredDataSignature } from './message-types';\n\n/**\n * To use secp256k1.signSync set utils.hmacSha256Sync to a function using noble-hashes\n * secp256k1.signSync is the counter part of secp256k1.sign (async version)\n * secp256k1.signSync is used within signWithKey in this file\n * secp256k1.signSync is used to maintain the semantics of signWithKey while migrating from elliptic lib\n * utils.hmacSha256Sync docs: https://github.com/paulmillr/noble-secp256k1 readme file\n */\nutils.hmacSha256Sync = (key: Uint8Array, ...msgs: Uint8Array[]) => {\n  const h = hmac.create(sha256, key);\n  msgs.forEach(msg => h.update(msg));\n  return h.digest();\n};\n\nexport interface StacksPublicKey {\n  readonly type: StacksMessageType.PublicKey;\n  readonly data: Uint8Array;\n}\n\n/** Creates a P2PKH address string from the given private key and tx version. */\nexport function getAddressFromPrivateKey(\n  /** Private key bytes or hex string */\n  privateKey: string | Uint8Array,\n  transactionVersion = TransactionVersion.Mainnet\n): string {\n  const pubKey = pubKeyfromPrivKey(privateKey);\n  return getAddressFromPublicKey(pubKey.data, transactionVersion);\n}\n\n/** Creates a P2PKH address string from the given public key and tx version. */\nexport function getAddressFromPublicKey(\n  /** Public key bytes or hex string */\n  publicKey: string | Uint8Array,\n  transactionVersion = TransactionVersion.Mainnet\n): string {\n  publicKey = typeof publicKey === 'string' ? publicKey : bytesToHex(publicKey);\n  const addrVer = addressHashModeToVersion(AddressHashMode.SerializeP2PKH, transactionVersion);\n  const addr = addressFromVersionHash(addrVer, hashP2PKH(hexToBytes(publicKey)));\n  const addrString = addressToString(addr);\n  return addrString;\n}\n\nexport function createStacksPublicKey(key: string): StacksPublicKey {\n  return {\n    type: StacksMessageType.PublicKey,\n    data: hexToBytes(key),\n  };\n}\n\nexport function publicKeyFromSignatureVrs(\n  messageHash: string,\n  messageSignature: MessageSignature | StructuredDataSignature,\n  pubKeyEncoding = PubKeyEncoding.Compressed\n): string {\n  const parsedSignature = parseRecoverableSignatureVrs(messageSignature.data);\n  const signature = new Signature(hexToBigInt(parsedSignature.r), hexToBigInt(parsedSignature.s));\n  const point = Point.fromSignature(messageHash, signature, parsedSignature.recoveryId);\n  const compressed = pubKeyEncoding === PubKeyEncoding.Compressed;\n  return point.toHex(compressed);\n}\n\nexport function publicKeyFromSignatureRsv(\n  messageHash: string,\n  messageSignature: MessageSignature | StructuredDataSignature,\n  pubKeyEncoding = PubKeyEncoding.Compressed\n): string {\n  return publicKeyFromSignatureVrs(\n    messageHash,\n    { ...messageSignature, data: signatureRsvToVrs(messageSignature.data) },\n    pubKeyEncoding\n  );\n}\n\nexport function publicKeyFromBytes(data: Uint8Array): StacksPublicKey {\n  return { type: StacksMessageType.PublicKey, data };\n}\n\nexport function isCompressed(key: StacksPublicKey): boolean {\n  return !bytesToHex(key.data).startsWith('04');\n}\n\nexport function publicKeyToString(key: StacksPublicKey): string {\n  return bytesToHex(key.data);\n}\n\nexport function serializePublicKey(key: StacksPublicKey): Uint8Array {\n  return key.data.slice();\n}\n\nexport function pubKeyfromPrivKey(privateKey: string | Uint8Array): StacksPublicKey {\n  const privKey = createStacksPrivateKey(privateKey);\n  const publicKey = nobleGetPublicKey(privKey.data.slice(0, 32), privKey.compressed);\n  return createStacksPublicKey(bytesToHex(publicKey));\n}\n\nexport function compressPublicKey(publicKey: string | Uint8Array): StacksPublicKey {\n  const hex = typeof publicKey === 'string' ? publicKey : bytesToHex(publicKey);\n  const compressed = Point.fromHex(hex).toHex(true);\n  return createStacksPublicKey(compressed);\n}\n\nexport function uncompressPublicKey(publicKey: string | Uint8Array): StacksPublicKey {\n  const hex = typeof publicKey === 'string' ? publicKey : bytesToHex(publicKey);\n  const compressed = Point.fromHex(hex).toHex(false);\n  return createStacksPublicKey(compressed);\n}\n\nexport function deserializePublicKey(bytesReader: BytesReader): StacksPublicKey {\n  const fieldId = bytesReader.readUInt8();\n  const keyLength =\n    fieldId === 4 ? UNCOMPRESSED_PUBKEY_LENGTH_BYTES : COMPRESSED_PUBKEY_LENGTH_BYTES;\n  return publicKeyFromBytes(concatArray([fieldId, bytesReader.readBytes(keyLength)]));\n}\n\nexport interface StacksPrivateKey {\n  // \"compressed\" private key is a misnomer: https://web.archive.org/web/20220131144208/https://www.oreilly.com/library/view/mastering-bitcoin/9781491902639/ch04.html#comp_priv\n  // it actually means: should public keys be generated as \"compressed\" or \"uncompressed\" from this private key\n  compressed: boolean;\n  data: Uint8Array;\n}\n\nexport function createStacksPrivateKey(key: string | Uint8Array): StacksPrivateKey {\n  const data = privateKeyToBytes(key);\n  const compressed = data.length == PRIVATE_KEY_COMPRESSED_LENGTH;\n  return { data, compressed };\n}\n\nexport function makeRandomPrivKey(): StacksPrivateKey {\n  // todo: `next` default to compressed private key\n  return createStacksPrivateKey(utils.randomPrivateKey());\n}\n\n/**\n * @deprecated The Clarity compatible {@link signMessageHashRsv} is preferred, but differs in signature format\n * @returns A recoverable signature (in VRS order)\n */\nexport function signWithKey(privateKey: StacksPrivateKey, messageHash: string): MessageSignature {\n  const [rawSignature, recoveryId] = signSync(messageHash, privateKey.data.slice(0, 32), {\n    canonical: true,\n    recovered: true,\n  });\n  if (recoveryId == null) {\n    throw new Error('No signature recoveryId received');\n  }\n  const recoveryIdHex = intToHex(recoveryId, 1);\n  const recoverableSignatureString = recoveryIdHex + Signature.fromHex(rawSignature).toCompactHex(); // V + RS\n  return createMessageSignature(recoverableSignatureString);\n}\n\n/**\n * Signs a message using a private key. The resulting signature along with the\n * original message can be verified using {@link verifyMessageSignatureRsv}\n * @returns A recoverable signature (in RSV order)\n */\nexport function signMessageHashRsv({\n  messageHash,\n  privateKey,\n}: {\n  messageHash: string;\n  privateKey: StacksPrivateKey;\n}): MessageSignature {\n  const messageSignature = signWithKey(privateKey, messageHash);\n  return { ...messageSignature, data: signatureVrsToRsv(messageSignature.data) };\n}\n\nexport function getPublicKey(privateKey: StacksPrivateKey): StacksPublicKey {\n  return pubKeyfromPrivKey(privateKey.data);\n}\n\nexport function privateKeyToString(privateKey: StacksPrivateKey): string {\n  return bytesToHex(privateKey.data);\n}\n\nexport function publicKeyToAddress(version: AddressVersion, publicKey: StacksPublicKey): string {\n  return c32address(version, bytesToHex(hash160(publicKey.data)));\n}\n", "import {\n  bytesToHex,\n  concatArray,\n  hexToBytes,\n  IntegerType,\n  intToBigInt,\n  intToBytes,\n  writeUInt32BE,\n  writeUInt8,\n} from '@stacks/common';\nimport { BytesReader } from './bytesReader';\nimport {\n  ClarityType,\n  ClarityValue,\n  deserializeCV,\n  noneCV,\n  OptionalCV,\n  serializeCV,\n  someCV,\n} from './clarity/';\nimport { PrincipalCV, principalCV } from './clarity/types/principalCV';\nimport { Address } from './common';\nimport {\n  ClarityVersion,\n  COINBASE_BYTES_LENGTH,\n  PayloadType,\n  StacksMessageType,\n  VRF_PROOF_BYTES_LENGTH,\n} from './constants';\nimport { createAddress, createLPString, LengthPrefixedString } from './postcondition-types';\nimport {\n  codeBodyString,\n  createMemoString,\n  deserializeAddress,\n  deserializeLPString,\n  deserializeMemoString,\n  MemoString,\n  serializeStacksMessage,\n} from './types';\n\nexport type Payload =\n  | TokenTransferPayload\n  | ContractCallPayload\n  | SmartContractPayload\n  | VersionedSmartContractPayload\n  | PoisonPayload\n  | CoinbasePayload\n  | CoinbasePayloadToAltRecipient\n  | NakamotoCoinbasePayload\n  | TenureChangePayload;\n\nexport function isTokenTransferPayload(p: Payload): p is TokenTransferPayload {\n  return p.payloadType === PayloadType.TokenTransfer;\n}\nexport function isContractCallPayload(p: Payload): p is ContractCallPayload {\n  return p.payloadType === PayloadType.ContractCall;\n}\nexport function isSmartContractPayload(p: Payload): p is SmartContractPayload {\n  return p.payloadType === PayloadType.SmartContract;\n}\nexport function isPoisonPayload(p: Payload): p is PoisonPayload {\n  return p.payloadType === PayloadType.PoisonMicroblock;\n}\nexport function isCoinbasePayload(p: Payload): p is CoinbasePayload {\n  return p.payloadType === PayloadType.Coinbase;\n}\n\nexport interface TokenTransferPayload {\n  readonly type: StacksMessageType.Payload;\n  readonly payloadType: PayloadType.TokenTransfer;\n  readonly recipient: PrincipalCV;\n  readonly amount: bigint;\n  readonly memo: MemoString;\n}\n\nexport type PayloadInput =\n  | (TokenTransferPayload | (Omit<TokenTransferPayload, 'amount'> & { amount: IntegerType }))\n  | ContractCallPayload\n  | SmartContractPayload\n  | VersionedSmartContractPayload\n  | PoisonPayload\n  | CoinbasePayload\n  | CoinbasePayloadToAltRecipient\n  | NakamotoCoinbasePayload\n  | TenureChangePayload;\n\nexport function createTokenTransferPayload(\n  recipient: string | PrincipalCV,\n  amount: IntegerType,\n  memo?: string | MemoString\n): TokenTransferPayload {\n  if (typeof recipient === 'string') {\n    recipient = principalCV(recipient);\n  }\n  if (typeof memo === 'string') {\n    memo = createMemoString(memo);\n  }\n\n  return {\n    type: StacksMessageType.Payload,\n    payloadType: PayloadType.TokenTransfer,\n    recipient,\n    amount: intToBigInt(amount, false),\n    memo: memo ?? createMemoString(''),\n  };\n}\n\nexport interface ContractCallPayload {\n  readonly type: StacksMessageType.Payload;\n  readonly payloadType: PayloadType.ContractCall;\n  readonly contractAddress: Address;\n  readonly contractName: LengthPrefixedString;\n  readonly functionName: LengthPrefixedString;\n  readonly functionArgs: ClarityValue[];\n}\n\nexport function createContractCallPayload(\n  contractAddress: string | Address,\n  contractName: string | LengthPrefixedString,\n  functionName: string | LengthPrefixedString,\n  functionArgs: ClarityValue[]\n): ContractCallPayload {\n  if (typeof contractAddress === 'string') {\n    contractAddress = createAddress(contractAddress);\n  }\n  if (typeof contractName === 'string') {\n    contractName = createLPString(contractName);\n  }\n  if (typeof functionName === 'string') {\n    functionName = createLPString(functionName);\n  }\n\n  return {\n    type: StacksMessageType.Payload,\n    payloadType: PayloadType.ContractCall,\n    contractAddress,\n    contractName,\n    functionName,\n    functionArgs,\n  };\n}\n\nexport interface SmartContractPayload {\n  readonly type: StacksMessageType.Payload;\n  readonly payloadType: PayloadType.SmartContract;\n  readonly contractName: LengthPrefixedString;\n  readonly codeBody: LengthPrefixedString;\n}\n\nexport interface VersionedSmartContractPayload {\n  readonly type: StacksMessageType.Payload;\n  readonly payloadType: PayloadType.VersionedSmartContract;\n  readonly clarityVersion: ClarityVersion;\n  readonly contractName: LengthPrefixedString;\n  readonly codeBody: LengthPrefixedString;\n}\n\nexport function createSmartContractPayload(\n  contractName: string | LengthPrefixedString,\n  codeBody: string | LengthPrefixedString,\n  clarityVersion?: ClarityVersion\n): SmartContractPayload | VersionedSmartContractPayload {\n  if (typeof contractName === 'string') {\n    contractName = createLPString(contractName);\n  }\n  if (typeof codeBody === 'string') {\n    codeBody = codeBodyString(codeBody);\n  }\n\n  if (typeof clarityVersion === 'number') {\n    return {\n      type: StacksMessageType.Payload,\n      payloadType: PayloadType.VersionedSmartContract,\n      clarityVersion,\n      contractName,\n      codeBody,\n    };\n  }\n  return {\n    type: StacksMessageType.Payload,\n    payloadType: PayloadType.SmartContract,\n    contractName,\n    codeBody,\n  };\n}\n\nexport interface PoisonPayload {\n  readonly type: StacksMessageType.Payload;\n  readonly payloadType: PayloadType.PoisonMicroblock;\n}\n\nexport function createPoisonPayload(): PoisonPayload {\n  return { type: StacksMessageType.Payload, payloadType: PayloadType.PoisonMicroblock };\n}\n\nexport interface CoinbasePayload {\n  readonly type: StacksMessageType.Payload;\n  readonly payloadType: PayloadType.Coinbase;\n  readonly coinbaseBytes: Uint8Array;\n}\n\nexport interface CoinbasePayloadToAltRecipient {\n  readonly type: StacksMessageType.Payload;\n  readonly payloadType: PayloadType.CoinbaseToAltRecipient;\n  readonly coinbaseBytes: Uint8Array;\n  readonly recipient: PrincipalCV;\n}\n\nexport function createCoinbasePayload(\n  coinbaseBytes: Uint8Array,\n  altRecipient?: PrincipalCV\n): CoinbasePayload | CoinbasePayloadToAltRecipient {\n  if (coinbaseBytes.byteLength != COINBASE_BYTES_LENGTH) {\n    throw Error(`Coinbase buffer size must be ${COINBASE_BYTES_LENGTH} bytes`);\n  }\n\n  if (altRecipient != undefined) {\n    return {\n      type: StacksMessageType.Payload,\n      payloadType: PayloadType.CoinbaseToAltRecipient,\n      coinbaseBytes,\n      recipient: altRecipient,\n    };\n  }\n  return {\n    type: StacksMessageType.Payload,\n    payloadType: PayloadType.Coinbase,\n    coinbaseBytes,\n  };\n}\n\nexport interface NakamotoCoinbasePayload {\n  readonly type: StacksMessageType.Payload;\n  readonly payloadType: PayloadType.NakamotoCoinbase;\n  readonly coinbaseBytes: Uint8Array;\n  readonly recipient?: PrincipalCV;\n  readonly vrfProof: Uint8Array;\n}\n\nexport function createNakamotoCoinbasePayload(\n  coinbaseBytes: Uint8Array,\n  recipient: OptionalCV<PrincipalCV>,\n  vrfProof: Uint8Array\n): NakamotoCoinbasePayload {\n  if (coinbaseBytes.byteLength != COINBASE_BYTES_LENGTH) {\n    throw Error(`Coinbase buffer size must be ${COINBASE_BYTES_LENGTH} bytes`);\n  }\n\n  if (vrfProof.byteLength != VRF_PROOF_BYTES_LENGTH) {\n    throw Error(`VRF proof buffer size must be ${VRF_PROOF_BYTES_LENGTH} bytes`);\n  }\n\n  return {\n    type: StacksMessageType.Payload,\n    payloadType: PayloadType.NakamotoCoinbase,\n    coinbaseBytes,\n    recipient: recipient.type === ClarityType.OptionalSome ? recipient.value : undefined,\n    vrfProof,\n  };\n}\n\nexport enum TenureChangeCause {\n  /** A valid winning block-commit */\n  BlockFound = 0,\n  /** The next burnchain block is taking too long, so extend the runtime budget */\n  Extended = 1,\n}\n\nexport interface TenureChangePayload {\n  readonly type: StacksMessageType.Payload;\n  readonly payloadType: PayloadType.TenureChange;\n  /**\n   * The consensus hash of this tenure (hex string). Corresponds to the\n   * sortition in which the miner of this block was chosen. It may be the case\n   * that this miner's tenure gets _extended_ acrosssubsequent sortitions; if\n   * this happens, then this `consensus_hash` value _remains the same _as the\n   * sortition in which the winning block-commit was mined.\n   */\n  readonly tenureHash: string;\n  /**\n   * The consensus hash (hex string) of the previous tenure.  Corresponds to the\n   * sortition of the previous winning block-commit.\n   */\n  readonly previousTenureHash: string;\n  /**\n   * Current consensus hash (hex string) on the underlying burnchain.\n   * Corresponds to the last-seen sortition.\n   */\n  readonly burnViewHash: string;\n  /** Stacks block hash (hex string) */\n  readonly previousTenureEnd: string;\n  /** The number of blocks produced since the last sortition-linked tenure */\n  readonly previousTenureBlocks: number;\n  /** The cause of change in mining tenure */\n  readonly cause: TenureChangeCause;\n  /** The public key hash of the current tenure (hex string) */\n  readonly publicKeyHash: string;\n}\n\nexport function createTenureChangePayload(\n  tenureHash: string,\n  previousTenureHash: string,\n  burnViewHash: string,\n  previousTenureEnd: string,\n  previousTenureBlocks: number,\n  cause: TenureChangeCause,\n  publicKeyHash: string\n): TenureChangePayload {\n  return {\n    type: StacksMessageType.Payload,\n    payloadType: PayloadType.TenureChange,\n    tenureHash,\n    previousTenureHash,\n    burnViewHash,\n    previousTenureEnd,\n    previousTenureBlocks,\n    cause,\n    publicKeyHash,\n  };\n}\n\nexport function serializePayload(payload: PayloadInput): Uint8Array {\n  const bytesArray = [];\n  bytesArray.push(payload.payloadType);\n\n  switch (payload.payloadType) {\n    case PayloadType.TokenTransfer:\n      bytesArray.push(serializeCV(payload.recipient));\n      bytesArray.push(intToBytes(payload.amount, false, 8));\n      bytesArray.push(serializeStacksMessage(payload.memo));\n      break;\n    case PayloadType.ContractCall:\n      bytesArray.push(serializeStacksMessage(payload.contractAddress));\n      bytesArray.push(serializeStacksMessage(payload.contractName));\n      bytesArray.push(serializeStacksMessage(payload.functionName));\n      const numArgs = new Uint8Array(4);\n      writeUInt32BE(numArgs, payload.functionArgs.length, 0);\n      bytesArray.push(numArgs);\n      payload.functionArgs.forEach(arg => {\n        bytesArray.push(serializeCV(arg));\n      });\n      break;\n    case PayloadType.SmartContract:\n      bytesArray.push(serializeStacksMessage(payload.contractName));\n      bytesArray.push(serializeStacksMessage(payload.codeBody));\n      break;\n    case PayloadType.VersionedSmartContract:\n      bytesArray.push(payload.clarityVersion);\n      bytesArray.push(serializeStacksMessage(payload.contractName));\n      bytesArray.push(serializeStacksMessage(payload.codeBody));\n      break;\n    case PayloadType.PoisonMicroblock:\n      // TODO: implement\n      break;\n    case PayloadType.Coinbase:\n      bytesArray.push(payload.coinbaseBytes);\n      break;\n    case PayloadType.CoinbaseToAltRecipient:\n      bytesArray.push(payload.coinbaseBytes);\n      bytesArray.push(serializeCV(payload.recipient));\n      break;\n    case PayloadType.NakamotoCoinbase:\n      bytesArray.push(payload.coinbaseBytes);\n      bytesArray.push(serializeCV(payload.recipient ? someCV(payload.recipient) : noneCV()));\n      bytesArray.push(payload.vrfProof);\n      break;\n    case PayloadType.TenureChange:\n      bytesArray.push(hexToBytes(payload.tenureHash));\n      bytesArray.push(hexToBytes(payload.previousTenureHash));\n      bytesArray.push(hexToBytes(payload.burnViewHash));\n      bytesArray.push(hexToBytes(payload.previousTenureEnd));\n      bytesArray.push(writeUInt32BE(new Uint8Array(4), payload.previousTenureBlocks));\n      bytesArray.push(writeUInt8(new Uint8Array(1), payload.cause));\n      bytesArray.push(hexToBytes(payload.publicKeyHash));\n      break;\n  }\n\n  return concatArray(bytesArray);\n}\n\nexport function deserializePayload(bytesReader: BytesReader): Payload {\n  const payloadType = bytesReader.readUInt8Enum(PayloadType, n => {\n    throw new Error(`Cannot recognize PayloadType: ${n}`);\n  });\n\n  switch (payloadType) {\n    case PayloadType.TokenTransfer:\n      const recipient = deserializeCV(bytesReader) as PrincipalCV;\n      const amount = intToBigInt(bytesReader.readBytes(8), false);\n      const memo = deserializeMemoString(bytesReader);\n      return createTokenTransferPayload(recipient, amount, memo);\n    case PayloadType.ContractCall:\n      const contractAddress = deserializeAddress(bytesReader);\n      const contractCallName = deserializeLPString(bytesReader);\n      const functionName = deserializeLPString(bytesReader);\n      const functionArgs: ClarityValue[] = [];\n      const numberOfArgs = bytesReader.readUInt32BE();\n      for (let i = 0; i < numberOfArgs; i++) {\n        const clarityValue = deserializeCV(bytesReader);\n        functionArgs.push(clarityValue);\n      }\n      return createContractCallPayload(\n        contractAddress,\n        contractCallName,\n        functionName,\n        functionArgs\n      );\n    case PayloadType.SmartContract:\n      const smartContractName = deserializeLPString(bytesReader);\n      const codeBody = deserializeLPString(bytesReader, 4, 100_000);\n      return createSmartContractPayload(smartContractName, codeBody);\n\n    case PayloadType.VersionedSmartContract: {\n      const clarityVersion = bytesReader.readUInt8Enum(ClarityVersion, n => {\n        throw new Error(`Cannot recognize ClarityVersion: ${n}`);\n      });\n      const smartContractName = deserializeLPString(bytesReader);\n      const codeBody = deserializeLPString(bytesReader, 4, 100_000);\n      return createSmartContractPayload(smartContractName, codeBody, clarityVersion);\n    }\n    case PayloadType.PoisonMicroblock:\n      // TODO: implement\n      return createPoisonPayload();\n    case PayloadType.Coinbase: {\n      const coinbaseBytes = bytesReader.readBytes(COINBASE_BYTES_LENGTH);\n      return createCoinbasePayload(coinbaseBytes);\n    }\n    case PayloadType.CoinbaseToAltRecipient: {\n      const coinbaseBytes = bytesReader.readBytes(COINBASE_BYTES_LENGTH);\n      const altRecipient = deserializeCV(bytesReader) as PrincipalCV;\n      return createCoinbasePayload(coinbaseBytes, altRecipient);\n    }\n    case PayloadType.NakamotoCoinbase: {\n      const coinbaseBytes = bytesReader.readBytes(COINBASE_BYTES_LENGTH);\n      const recipient = deserializeCV(bytesReader) as OptionalCV<PrincipalCV>;\n      const vrfProof = bytesReader.readBytes(VRF_PROOF_BYTES_LENGTH);\n      return createNakamotoCoinbasePayload(coinbaseBytes, recipient, vrfProof);\n    }\n    case PayloadType.TenureChange:\n      const tenureHash = bytesToHex(bytesReader.readBytes(20));\n      const previousTenureHash = bytesToHex(bytesReader.readBytes(20));\n      const burnViewHash = bytesToHex(bytesReader.readBytes(20));\n      const previousTenureEnd = bytesToHex(bytesReader.readBytes(32));\n      const previousTenureBlocks = bytesReader.readUInt32BE();\n      const cause = bytesReader.readUInt8Enum(TenureChangeCause, n => {\n        throw new Error(`Cannot recognize TenureChangeCause: ${n}`);\n      });\n      const publicKeyHash = bytesToHex(bytesReader.readBytes(20));\n      return createTenureChangePayload(\n        tenureHash,\n        previousTenureHash,\n        burnViewHash,\n        previousTenureEnd,\n        previousTenureBlocks,\n        cause,\n        publicKeyHash\n      );\n  }\n}\n", "class TransactionError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.message = message;\n    this.name = this.constructor.name;\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, this.constructor);\n    }\n  }\n}\n\nexport class SerializationError extends TransactionError {\n  constructor(message: string) {\n    super(message);\n  }\n}\n\nexport class DeserializationError extends TransactionError {\n  constructor(message: string) {\n    super(message);\n  }\n}\n\n/**\n * Thrown when `NoEstimateAvailable` is received as an error reason from a\n * Stacks node. The Stacks node has not seen this kind of contract-call before,\n * and it cannot provide an estimate yet.\n * @see https://docs.hiro.so/api#tag/Fees/operation/post_fee_transaction\n */\nexport class NoEstimateAvailableError extends TransactionError {\n  constructor(message: string) {\n    super(message);\n  }\n}\n\nexport class NotImplementedError extends TransactionError {\n  constructor(message: string) {\n    super(message);\n  }\n}\n\nexport class SigningError extends TransactionError {\n  constructor(message: string) {\n    super(message);\n  }\n}\n\nexport class VerificationError extends TransactionError {\n  constructor(message: string) {\n    super(message);\n  }\n}\n", "import { BytesReader } from './bytesReader';\nimport { DeserializationError } from './errors';\nimport { PubKeyEncoding, RECOVERABLE_ECDSA_SIG_LENGTH_BYTES, StacksMessageType } from './constants';\nimport {\n  compressPublicKey,\n  deserializePublicKey,\n  serializePublicKey,\n  StacksPublicKey,\n  uncompressPublicKey,\n} from './keys';\n\nimport { createMessageSignature, MessageSignature } from './common';\n\n// @ts-ignore\nimport { bytesToHex, concatArray, hexToBytes } from '@stacks/common';\n\nexport enum AuthFieldType {\n  PublicKeyCompressed = 0x00,\n  PublicKeyUncompressed = 0x01,\n  SignatureCompressed = 0x02,\n  SignatureUncompressed = 0x03,\n}\n\nexport interface TransactionAuthField {\n  type: StacksMessageType.TransactionAuthField;\n  pubKeyEncoding: PubKeyEncoding;\n  contents: TransactionAuthFieldContents;\n}\n\nexport type TransactionAuthFieldContents = StacksPublicKey | MessageSignature;\n\nexport function deserializeMessageSignature(bytesReader: BytesReader): MessageSignature {\n  return createMessageSignature(\n    bytesToHex(bytesReader.readBytes(RECOVERABLE_ECDSA_SIG_LENGTH_BYTES))\n  );\n}\n\n// todo: `next` refactor to match wire format more precisely eg https://github.com/jbencin/sips/blob/sip-02x-non-sequential-multisig-transactions/sips/sip-02x/sip-02x-non-sequential-multisig-transactions.md\n//  \"A spending authorization field is encoded as follows:\" ...\nexport interface TransactionAuthField {\n  type: StacksMessageType.TransactionAuthField;\n  pubKeyEncoding: PubKeyEncoding;\n  contents: TransactionAuthFieldContents;\n}\n\nexport function createTransactionAuthField(\n  pubKeyEncoding: PubKeyEncoding,\n  contents: TransactionAuthFieldContents\n): TransactionAuthField {\n  return {\n    pubKeyEncoding,\n    type: StacksMessageType.TransactionAuthField,\n    contents,\n  };\n}\n\nexport function deserializeTransactionAuthField(bytesReader: BytesReader): TransactionAuthField {\n  const authFieldType = bytesReader.readUInt8Enum(AuthFieldType, n => {\n    throw new DeserializationError(`Could not read ${n} as AuthFieldType`);\n  });\n\n  switch (authFieldType) {\n    case AuthFieldType.PublicKeyCompressed:\n      return createTransactionAuthField(\n        PubKeyEncoding.Compressed,\n        deserializePublicKey(bytesReader)\n      );\n    case AuthFieldType.PublicKeyUncompressed:\n      return createTransactionAuthField(\n        PubKeyEncoding.Uncompressed,\n        uncompressPublicKey(deserializePublicKey(bytesReader).data)\n      );\n    case AuthFieldType.SignatureCompressed:\n      return createTransactionAuthField(\n        PubKeyEncoding.Compressed,\n        deserializeMessageSignature(bytesReader)\n      );\n    case AuthFieldType.SignatureUncompressed:\n      return createTransactionAuthField(\n        PubKeyEncoding.Uncompressed,\n        deserializeMessageSignature(bytesReader)\n      );\n    default:\n      throw new Error(`Unknown auth field type: ${JSON.stringify(authFieldType)}`);\n  }\n}\n\nexport function serializeMessageSignature(messageSignature: MessageSignature): Uint8Array {\n  return hexToBytes(messageSignature.data);\n}\n\nexport function serializeTransactionAuthField(field: TransactionAuthField): Uint8Array {\n  const bytesArray = [];\n\n  switch (field.contents.type) {\n    case StacksMessageType.PublicKey:\n      bytesArray.push(\n        field.pubKeyEncoding === PubKeyEncoding.Compressed\n          ? AuthFieldType.PublicKeyCompressed\n          : AuthFieldType.PublicKeyUncompressed\n      );\n      bytesArray.push(serializePublicKey(compressPublicKey(field.contents.data)));\n      break;\n    case StacksMessageType.MessageSignature:\n      bytesArray.push(\n        field.pubKeyEncoding === PubKeyEncoding.Compressed\n          ? AuthFieldType.SignatureCompressed\n          : AuthFieldType.SignatureUncompressed\n      );\n      bytesArray.push(serializeMessageSignature(field.contents));\n      break;\n  }\n\n  return concatArray(bytesArray);\n}\n", "import {\n  bytesToHex,\n  bytesToUtf8,\n  concatArray,\n  hexToBytes,\n  hexToInt,\n  intToBytes,\n  intToHex,\n  utf8ToBytes,\n} from '@stacks/common';\nimport {\n  MEMO_MAX_LENGTH_BYTES,\n  AddressHashMode,\n  AddressVersion,\n  TransactionVersion,\n  StacksMessageType,\n  PostConditionPrincipalID,\n  PostConditionType,\n  FungibleConditionCode,\n  NonFungibleConditionCode,\n} from './constants';\n\nimport { StacksPublicKey, serializePublicKey, deserializePublicKey, isCompressed } from './keys';\n\nimport {\n  exceedsMaxLengthBytes,\n  hashP2PKH,\n  rightPadHexToLength,\n  hashP2SH,\n  hashP2WSH,\n  hashP2WPKH,\n} from './utils';\n\nimport { BytesReader } from './bytesReader';\nimport {\n  PostCondition,\n  StandardPrincipal,\n  ContractPrincipal,\n  PostConditionPrincipal,\n  LengthPrefixedString,\n  AssetInfo,\n  createLPString,\n} from './postcondition-types';\nimport { Payload, deserializePayload, serializePayload } from './payload';\nimport { DeserializationError, SerializationError } from './errors';\nimport {\n  deserializeTransactionAuthField,\n  deserializeMessageSignature,\n  serializeMessageSignature,\n  serializeTransactionAuthField,\n  TransactionAuthField,\n} from './signature';\nimport {\n  MessageSignature,\n  Address,\n  addressHashModeToVersion,\n  addressFromVersionHash,\n} from './common';\nimport { deserializeCV, serializeCV } from './clarity';\nexport type StacksMessage =\n  | Address\n  | PostConditionPrincipal\n  | LengthPrefixedString\n  | LengthPrefixedList\n  | Payload\n  | MemoString\n  | AssetInfo\n  | PostCondition\n  | StacksPublicKey\n  | TransactionAuthField\n  | MessageSignature;\n\nexport function serializeStacksMessage(message: StacksMessage): Uint8Array {\n  switch (message.type) {\n    case StacksMessageType.Address:\n      return serializeAddress(message);\n    case StacksMessageType.Principal:\n      return serializePrincipal(message);\n    case StacksMessageType.LengthPrefixedString:\n      return serializeLPString(message);\n    case StacksMessageType.MemoString:\n      return serializeMemoString(message);\n    case StacksMessageType.AssetInfo:\n      return serializeAssetInfo(message);\n    case StacksMessageType.PostCondition:\n      return serializePostCondition(message);\n    case StacksMessageType.PublicKey:\n      return serializePublicKey(message);\n    case StacksMessageType.LengthPrefixedList:\n      return serializeLPList(message);\n    case StacksMessageType.Payload:\n      return serializePayload(message);\n    case StacksMessageType.TransactionAuthField:\n      return serializeTransactionAuthField(message);\n    case StacksMessageType.MessageSignature:\n      return serializeMessageSignature(message);\n  }\n}\n\nexport function deserializeStacksMessage(\n  bytesReader: BytesReader,\n  type: StacksMessageType,\n  listType?: StacksMessageType\n): StacksMessage {\n  switch (type) {\n    case StacksMessageType.Address:\n      return deserializeAddress(bytesReader);\n    case StacksMessageType.Principal:\n      return deserializePrincipal(bytesReader);\n    case StacksMessageType.LengthPrefixedString:\n      return deserializeLPString(bytesReader);\n    case StacksMessageType.MemoString:\n      return deserializeMemoString(bytesReader);\n    case StacksMessageType.AssetInfo:\n      return deserializeAssetInfo(bytesReader);\n    case StacksMessageType.PostCondition:\n      return deserializePostCondition(bytesReader);\n    case StacksMessageType.PublicKey:\n      return deserializePublicKey(bytesReader);\n    case StacksMessageType.Payload:\n      return deserializePayload(bytesReader);\n    case StacksMessageType.LengthPrefixedList:\n      if (!listType) {\n        throw new DeserializationError('No List Type specified');\n      }\n      return deserializeLPList(bytesReader, listType);\n    case StacksMessageType.MessageSignature:\n      return deserializeMessageSignature(bytesReader);\n    default:\n      throw new Error('Could not recognize StacksMessageType');\n  }\n}\n\nexport function createEmptyAddress(): Address {\n  return {\n    type: StacksMessageType.Address,\n    version: AddressVersion.MainnetSingleSig,\n    hash160: '0'.repeat(40),\n  };\n}\n\nexport function addressFromHashMode(\n  hashMode: AddressHashMode,\n  txVersion: TransactionVersion,\n  data: string\n): Address {\n  const version = addressHashModeToVersion(hashMode, txVersion);\n  return addressFromVersionHash(version, data);\n}\n\nexport function addressFromPublicKeys(\n  version: AddressVersion,\n  hashMode: AddressHashMode,\n  numSigs: number,\n  publicKeys: StacksPublicKey[]\n): Address {\n  // todo: `next` refactor to `requiredSignatures`, and opts object\n  if (publicKeys.length === 0) {\n    throw Error('Invalid number of public keys');\n  }\n\n  if (hashMode === AddressHashMode.SerializeP2PKH || hashMode === AddressHashMode.SerializeP2WPKH) {\n    if (publicKeys.length !== 1 || numSigs !== 1) {\n      throw Error('Invalid number of public keys or signatures');\n    }\n  }\n\n  if (\n    hashMode === AddressHashMode.SerializeP2WPKH ||\n    hashMode === AddressHashMode.SerializeP2WSH ||\n    hashMode === AddressHashMode.SerializeP2WSHNonSequential\n  ) {\n    if (!publicKeys.every(isCompressed)) {\n      throw Error('Public keys must be compressed for segwit');\n    }\n  }\n\n  switch (hashMode) {\n    case AddressHashMode.SerializeP2PKH:\n      return addressFromVersionHash(version, hashP2PKH(publicKeys[0].data));\n    case AddressHashMode.SerializeP2WPKH:\n      return addressFromVersionHash(version, hashP2WPKH(publicKeys[0].data));\n    case AddressHashMode.SerializeP2SH:\n    case AddressHashMode.SerializeP2SHNonSequential:\n      return addressFromVersionHash(version, hashP2SH(numSigs, publicKeys.map(serializePublicKey)));\n    case AddressHashMode.SerializeP2WSH:\n    case AddressHashMode.SerializeP2WSHNonSequential:\n      return addressFromVersionHash(\n        version,\n        hashP2WSH(numSigs, publicKeys.map(serializePublicKey))\n      );\n  }\n}\n\nexport function serializeAddress(address: Address): Uint8Array {\n  const bytesArray = [];\n  bytesArray.push(hexToBytes(intToHex(address.version, 1)));\n  bytesArray.push(hexToBytes(address.hash160));\n  return concatArray(bytesArray);\n}\n\nexport function deserializeAddress(bytesReader: BytesReader): Address {\n  const version = hexToInt(bytesToHex(bytesReader.readBytes(1)));\n  const data = bytesToHex(bytesReader.readBytes(20));\n\n  return { type: StacksMessageType.Address, version, hash160: data };\n}\n\nexport function serializePrincipal(principal: PostConditionPrincipal): Uint8Array {\n  const bytesArray = [];\n  bytesArray.push(principal.prefix);\n  bytesArray.push(serializeAddress(principal.address));\n  if (principal.prefix === PostConditionPrincipalID.Contract) {\n    bytesArray.push(serializeLPString(principal.contractName));\n  }\n  return concatArray(bytesArray);\n}\n\nexport function deserializePrincipal(bytesReader: BytesReader): PostConditionPrincipal {\n  const prefix = bytesReader.readUInt8Enum(PostConditionPrincipalID, n => {\n    throw new DeserializationError(`Unexpected Principal payload type: ${n}`);\n  });\n  const address = deserializeAddress(bytesReader);\n  if (prefix === PostConditionPrincipalID.Standard) {\n    return { type: StacksMessageType.Principal, prefix, address } as StandardPrincipal;\n  }\n  const contractName = deserializeLPString(bytesReader);\n  return {\n    type: StacksMessageType.Principal,\n    prefix,\n    address,\n    contractName,\n  } as ContractPrincipal;\n}\n\nexport function serializeLPString(lps: LengthPrefixedString) {\n  const bytesArray = [];\n  const contentBytes = utf8ToBytes(lps.content);\n  const length = contentBytes.byteLength;\n  bytesArray.push(hexToBytes(intToHex(length, lps.lengthPrefixBytes)));\n  bytesArray.push(contentBytes);\n  return concatArray(bytesArray);\n}\n\nexport function deserializeLPString(\n  bytesReader: BytesReader,\n  prefixBytes?: number,\n  maxLength?: number\n): LengthPrefixedString {\n  prefixBytes = prefixBytes ? prefixBytes : 1;\n  const length = hexToInt(bytesToHex(bytesReader.readBytes(prefixBytes)));\n  const content = bytesToUtf8(bytesReader.readBytes(length));\n  return createLPString(content, prefixBytes, maxLength ?? 128);\n}\n\nexport function codeBodyString(content: string): LengthPrefixedString {\n  return createLPString(content, 4, 100_000);\n}\n\nexport interface MemoString {\n  readonly type: StacksMessageType.MemoString;\n  readonly content: string;\n}\n\nexport function createMemoString(content: string): MemoString {\n  if (content && exceedsMaxLengthBytes(content, MEMO_MAX_LENGTH_BYTES)) {\n    throw new Error(`Memo exceeds maximum length of ${MEMO_MAX_LENGTH_BYTES} bytes`);\n  }\n  return { type: StacksMessageType.MemoString, content };\n}\n\nexport function serializeMemoString(memoString: MemoString): Uint8Array {\n  const bytesArray = [];\n  const contentBytes = utf8ToBytes(memoString.content);\n  const paddedContent = rightPadHexToLength(bytesToHex(contentBytes), MEMO_MAX_LENGTH_BYTES * 2);\n  bytesArray.push(hexToBytes(paddedContent));\n  return concatArray(bytesArray);\n}\n\nexport function deserializeMemoString(bytesReader: BytesReader): MemoString {\n  let content = bytesToUtf8(bytesReader.readBytes(MEMO_MAX_LENGTH_BYTES));\n  content = content.replace(/\\u0000*$/, ''); // remove all trailing unicode null characters\n  return { type: StacksMessageType.MemoString, content };\n}\n\nexport function serializeAssetInfo(info: AssetInfo): Uint8Array {\n  const bytesArray = [];\n  bytesArray.push(serializeAddress(info.address));\n  bytesArray.push(serializeLPString(info.contractName));\n  bytesArray.push(serializeLPString(info.assetName));\n  return concatArray(bytesArray);\n}\n\nexport function deserializeAssetInfo(bytesReader: BytesReader): AssetInfo {\n  return {\n    type: StacksMessageType.AssetInfo,\n    address: deserializeAddress(bytesReader),\n    contractName: deserializeLPString(bytesReader),\n    assetName: deserializeLPString(bytesReader),\n  };\n}\n\nexport interface LengthPrefixedList {\n  readonly type: StacksMessageType.LengthPrefixedList;\n  readonly lengthPrefixBytes: number;\n  readonly values: StacksMessage[];\n}\n\nexport function createLPList<T extends StacksMessage>(\n  values: T[],\n  lengthPrefixBytes?: number\n): LengthPrefixedList {\n  return {\n    type: StacksMessageType.LengthPrefixedList,\n    lengthPrefixBytes: lengthPrefixBytes || 4,\n    values,\n  };\n}\n\nexport function serializeLPList(lpList: LengthPrefixedList): Uint8Array {\n  const list = lpList.values;\n  const bytesArray = [];\n  bytesArray.push(hexToBytes(intToHex(list.length, lpList.lengthPrefixBytes)));\n  for (const l of list) {\n    bytesArray.push(serializeStacksMessage(l));\n  }\n  return concatArray(bytesArray);\n}\n\n// todo: `next` refactor for inversion of control\nexport function deserializeLPList(\n  bytesReader: BytesReader,\n  type: StacksMessageType,\n  lengthPrefixBytes?: number\n): LengthPrefixedList {\n  const length = hexToInt(bytesToHex(bytesReader.readBytes(lengthPrefixBytes || 4)));\n\n  const l: StacksMessage[] = [];\n  for (let index = 0; index < length; index++) {\n    switch (type) {\n      case StacksMessageType.Address:\n        l.push(deserializeAddress(bytesReader));\n        break;\n      case StacksMessageType.LengthPrefixedString:\n        l.push(deserializeLPString(bytesReader));\n        break;\n      case StacksMessageType.MemoString:\n        l.push(deserializeMemoString(bytesReader));\n        break;\n      case StacksMessageType.AssetInfo:\n        l.push(deserializeAssetInfo(bytesReader));\n        break;\n      case StacksMessageType.PostCondition:\n        l.push(deserializePostCondition(bytesReader));\n        break;\n      case StacksMessageType.PublicKey:\n        l.push(deserializePublicKey(bytesReader));\n        break;\n      case StacksMessageType.TransactionAuthField:\n        l.push(deserializeTransactionAuthField(bytesReader));\n        break;\n    }\n  }\n  return createLPList(l, lengthPrefixBytes);\n}\n\nexport function serializePostCondition(postCondition: PostCondition): Uint8Array {\n  const bytesArray = [];\n  bytesArray.push(postCondition.conditionType);\n  bytesArray.push(serializePrincipal(postCondition.principal));\n\n  if (\n    postCondition.conditionType === PostConditionType.Fungible ||\n    postCondition.conditionType === PostConditionType.NonFungible\n  ) {\n    bytesArray.push(serializeAssetInfo(postCondition.assetInfo));\n  }\n\n  if (postCondition.conditionType === PostConditionType.NonFungible) {\n    bytesArray.push(serializeCV(postCondition.assetName));\n  }\n\n  bytesArray.push(postCondition.conditionCode);\n\n  if (\n    postCondition.conditionType === PostConditionType.STX ||\n    postCondition.conditionType === PostConditionType.Fungible\n  ) {\n    // SIP-005: Maximal length of amount is 8 bytes\n    if (postCondition.amount > BigInt('0xffffffffffffffff'))\n      throw new SerializationError('The post-condition amount may not be larger than 8 bytes');\n    bytesArray.push(intToBytes(postCondition.amount, false, 8));\n  }\n\n  return concatArray(bytesArray);\n}\n\nexport function deserializePostCondition(bytesReader: BytesReader): PostCondition {\n  const postConditionType = bytesReader.readUInt8Enum(PostConditionType, n => {\n    throw new DeserializationError(`Could not read ${n} as PostConditionType`);\n  });\n\n  const principal = deserializePrincipal(bytesReader);\n\n  let conditionCode;\n  let assetInfo;\n  let amount: bigint;\n  switch (postConditionType) {\n    case PostConditionType.STX:\n      conditionCode = bytesReader.readUInt8Enum(FungibleConditionCode, n => {\n        throw new DeserializationError(`Could not read ${n} as FungibleConditionCode`);\n      });\n      amount = BigInt(`0x${bytesToHex(bytesReader.readBytes(8))}`);\n      return {\n        type: StacksMessageType.PostCondition,\n        conditionType: PostConditionType.STX,\n        principal,\n        conditionCode,\n        amount,\n      };\n    case PostConditionType.Fungible:\n      assetInfo = deserializeAssetInfo(bytesReader);\n      conditionCode = bytesReader.readUInt8Enum(FungibleConditionCode, n => {\n        throw new DeserializationError(`Could not read ${n} as FungibleConditionCode`);\n      });\n      amount = BigInt(`0x${bytesToHex(bytesReader.readBytes(8))}`);\n      return {\n        type: StacksMessageType.PostCondition,\n        conditionType: PostConditionType.Fungible,\n        principal,\n        conditionCode,\n        amount,\n        assetInfo,\n      };\n    case PostConditionType.NonFungible:\n      assetInfo = deserializeAssetInfo(bytesReader);\n      const assetName = deserializeCV(bytesReader);\n      conditionCode = bytesReader.readUInt8Enum(NonFungibleConditionCode, n => {\n        throw new DeserializationError(`Could not read ${n} as FungibleConditionCode`);\n      });\n      return {\n        type: StacksMessageType.PostCondition,\n        conditionType: PostConditionType.NonFungible,\n        principal,\n        conditionCode,\n        assetInfo,\n        assetName,\n      };\n  }\n}\n", "import {\n  concatArray,\n  concatBytes,\n  bigIntToBytes,\n  toTwos,\n  writeUInt32BE,\n  utf8ToBytes,\n  asciiToBytes,\n} from '@stacks/common';\nimport { serializeAddress, serializeLPString } from '../types';\nimport { createLPString } from '../postcondition-types';\nimport {\n  BooleanCV,\n  OptionalCV,\n  BufferCV,\n  IntCV,\n  UIntCV,\n  StandardPrincipalCV,\n  ContractPrincipalCV,\n  ResponseCV,\n  ListCV,\n  TupleCV,\n  ClarityValue,\n} from '.';\nimport { ClarityType } from './constants';\n\nimport { SerializationError } from '../errors';\nimport { StringAsciiCV, StringUtf8CV } from './types/stringCV';\nimport { CLARITY_INT_BYTE_SIZE, CLARITY_INT_SIZE } from '../constants';\n\nfunction bytesWithTypeID(typeId: ClarityType, bytes: Uint8Array): Uint8Array {\n  return concatArray([typeId, bytes]);\n}\n\nfunction serializeBoolCV(value: BooleanCV): Uint8Array {\n  return new Uint8Array([value.type]);\n}\n\nfunction serializeOptionalCV(cv: OptionalCV): Uint8Array {\n  if (cv.type === ClarityType.OptionalNone) {\n    return new Uint8Array([cv.type]);\n  } else {\n    return bytesWithTypeID(cv.type, serializeCV(cv.value));\n  }\n}\n\nfunction serializeBufferCV(cv: BufferCV): Uint8Array {\n  const length = new Uint8Array(4);\n  writeUInt32BE(length, cv.buffer.length, 0);\n  return bytesWithTypeID(cv.type, concatBytes(length, cv.buffer));\n}\n\nfunction serializeIntCV(cv: IntCV): Uint8Array {\n  const bytes = bigIntToBytes(toTwos(cv.value, BigInt(CLARITY_INT_SIZE)), CLARITY_INT_BYTE_SIZE);\n  return bytesWithTypeID(cv.type, bytes);\n}\n\nfunction serializeUIntCV(cv: UIntCV): Uint8Array {\n  const bytes = bigIntToBytes(cv.value, CLARITY_INT_BYTE_SIZE);\n  return bytesWithTypeID(cv.type, bytes);\n}\n\nfunction serializeStandardPrincipalCV(cv: StandardPrincipalCV): Uint8Array {\n  return bytesWithTypeID(cv.type, serializeAddress(cv.address));\n}\n\nfunction serializeContractPrincipalCV(cv: ContractPrincipalCV): Uint8Array {\n  return bytesWithTypeID(\n    cv.type,\n    concatBytes(serializeAddress(cv.address), serializeLPString(cv.contractName))\n  );\n}\n\nfunction serializeResponseCV(cv: ResponseCV) {\n  return bytesWithTypeID(cv.type, serializeCV(cv.value));\n}\n\nfunction serializeListCV(cv: ListCV) {\n  const bytesArray = [];\n\n  const length = new Uint8Array(4);\n  writeUInt32BE(length, cv.list.length, 0);\n  bytesArray.push(length);\n\n  for (const value of cv.list) {\n    const serializedValue = serializeCV(value);\n    bytesArray.push(serializedValue);\n  }\n\n  return bytesWithTypeID(cv.type, concatArray(bytesArray));\n}\n\nfunction serializeTupleCV(cv: TupleCV) {\n  const bytesArray = [];\n\n  const length = new Uint8Array(4);\n  writeUInt32BE(length, Object.keys(cv.data).length, 0);\n  bytesArray.push(length);\n\n  const lexicographicOrder = Object.keys(cv.data).sort((a, b) => a.localeCompare(b));\n\n  for (const key of lexicographicOrder) {\n    const nameWithLength = createLPString(key);\n    bytesArray.push(serializeLPString(nameWithLength));\n\n    const serializedValue = serializeCV(cv.data[key]);\n    bytesArray.push(serializedValue);\n  }\n\n  return bytesWithTypeID(cv.type, concatArray(bytesArray));\n}\n\nfunction serializeStringCV(cv: StringAsciiCV | StringUtf8CV, encoding: 'ascii' | 'utf8') {\n  const bytesArray = [];\n\n  const str = encoding == 'ascii' ? asciiToBytes(cv.data) : utf8ToBytes(cv.data);\n  const len = new Uint8Array(4);\n  writeUInt32BE(len, str.length, 0);\n\n  bytesArray.push(len);\n  bytesArray.push(str);\n\n  return bytesWithTypeID(cv.type, concatArray(bytesArray));\n}\n\nfunction serializeStringAsciiCV(cv: StringAsciiCV) {\n  return serializeStringCV(cv, 'ascii');\n}\n\nfunction serializeStringUtf8CV(cv: StringUtf8CV) {\n  return serializeStringCV(cv, 'utf8');\n}\n\n/**\n * Serializes clarity value to Uint8Array\n *\n * @param {ClarityValue} value to be converted to bytes\n *\n * @returns {Uint8Array} returns the bytes\n *\n * @example\n * ```\n *  import { intCV, serializeCV } from '@stacks/transactions';\n *\n *  const serialized = serializeCV(intCV(100)); // Similarly works for other clarity types as well like listCV, booleanCV ...\n *\n *  // <Uint8Array 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 64>\n * ```\n *\n * @see\n * {@link https://github.com/hirosystems/stacks.js/blob/main/packages/transactions/tests/clarity.test.ts | clarity test cases for more examples}\n */\nexport function serializeCV(value: ClarityValue): Uint8Array {\n  switch (value.type) {\n    case ClarityType.BoolTrue:\n    case ClarityType.BoolFalse:\n      return serializeBoolCV(value);\n    case ClarityType.OptionalNone:\n    case ClarityType.OptionalSome:\n      return serializeOptionalCV(value);\n    case ClarityType.Buffer:\n      return serializeBufferCV(value);\n    case ClarityType.UInt:\n      return serializeUIntCV(value);\n    case ClarityType.Int:\n      return serializeIntCV(value);\n    case ClarityType.PrincipalStandard:\n      return serializeStandardPrincipalCV(value);\n    case ClarityType.PrincipalContract:\n      return serializeContractPrincipalCV(value);\n    case ClarityType.ResponseOk:\n    case ClarityType.ResponseErr:\n      return serializeResponseCV(value);\n    case ClarityType.List:\n      return serializeListCV(value);\n    case ClarityType.Tuple:\n      return serializeTupleCV(value);\n    case ClarityType.StringASCII:\n      return serializeStringAsciiCV(value);\n    case ClarityType.StringUTF8:\n      return serializeStringUtf8CV(value);\n    default:\n      throw new SerializationError('Unable to serialize. Invalid Clarity Value.');\n  }\n}\n", "import 'cross-fetch/polyfill';\n\n// Define a default request options and allow modification using getters, setters\n// Reference: https://developer.mozilla.org/en-US/docs/Web/API/Request/Request\nconst defaultFetchOpts: RequestInit = {\n  // By default referrer value will be client:origin: above reference link\n  // https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Referrer-Policy\n  referrerPolicy: 'origin', // Use origin value for referrer policy\n  headers: {\n    'x-hiro-product': 'stacksjs',\n  },\n};\n\n/**\n * Get fetch options\n * @category Network\n */\nexport const getFetchOptions = () => {\n  return defaultFetchOpts;\n};\n\n/**\n * Sets global fetch options for stacks.js network calls.\n *\n * @example\n * Users can change the default referrer as well as other options when fetch is used internally by stacks.js:\n * ```\n * setFetchOptions({ referrer: 'no-referrer', referrerPolicy: 'no-referrer', ...otherRequestOptions });\n * ```\n * After calling {@link setFetchOptions} all subsequent network calls will use the specified options above.\n *\n * @see MDN Request: https://developer.mozilla.org/en-US/docs/Web/API/Request/Request\n * @returns global fetch options after merging with previous options (or defaults)\n * @category Network\n * @related {@link getFetchOptions}\n */\nexport const setFetchOptions = (ops: RequestInit): RequestInit => {\n  return Object.assign(defaultFetchOpts, ops);\n};\n\n/** @internal */\nexport async function fetchWrapper(input: RequestInfo, init?: RequestInit): Promise<Response> {\n  const fetchOpts = {};\n  // Use the provided options in request options along with default or user provided values\n  Object.assign(fetchOpts, defaultFetchOpts, init);\n\n  const fetchResult = await fetch(input, fetchOpts);\n  return fetchResult;\n}\n\nexport type FetchFn = (url: string, init?: RequestInit) => Promise<Response>;\n\nexport interface RequestContext {\n  fetch: FetchFn;\n  url: string;\n  init: RequestInit;\n}\n\nexport interface ResponseContext {\n  fetch: FetchFn;\n  url: string;\n  init: RequestInit;\n  response: Response;\n}\n\nexport interface FetchParams {\n  url: string;\n  init: RequestInit;\n}\n\nexport interface FetchMiddleware {\n  pre?: (context: RequestContext) => PromiseLike<FetchParams | void> | FetchParams | void;\n  post?: (context: ResponseContext) => Promise<Response | void> | Response | void;\n}\nexport interface ApiKeyMiddlewareOpts {\n  /** The middleware / API key header will only be added to requests matching this host. */\n  host?: RegExp | string;\n  /** The http header name used for specifying the API key value. */\n  httpHeader?: string;\n  /** The API key string to specify as an http header value. */\n  apiKey: string;\n}\n\n/** @internal */\nexport function hostMatches(host: string, pattern: string | RegExp) {\n  if (typeof pattern === 'string') return pattern === host;\n  return pattern.exec(host);\n}\n\n/**\n * Creates a new middleware from an API key.\n * @example\n * ```\n * const apiMiddleware = createApiKeyMiddleware(\"example_e8e044a3_41d8b0fe_3dd3988ef302\");\n * const fetchFn = createFetchFn(apiMiddleware);\n * const network = new StacksMainnet({ fetchFn });\n * ```\n * @category Network\n * @related {@link createFetchFn}, {@link StacksNetwork}\n */\nexport function createApiKeyMiddleware({\n  apiKey,\n  host = /(.*)api(.*)(\\.stacks\\.co|\\.hiro\\.so)$/i,\n  httpHeader = 'x-api-key',\n}: ApiKeyMiddlewareOpts): FetchMiddleware {\n  return {\n    pre: context => {\n      const reqUrl = new URL(context.url);\n      if (!hostMatches(reqUrl.host, host)) return; // Skip middleware if host does not match pattern\n\n      const headers =\n        context.init.headers instanceof Headers\n          ? context.init.headers\n          : (context.init.headers = new Headers(context.init.headers));\n      headers.set(httpHeader, apiKey);\n    },\n  };\n}\n\nfunction argsForCreateFetchFn(args: any[]): { fetchLib: FetchFn; middlewares: FetchMiddleware[] } {\n  let fetchLib: FetchFn = fetchWrapper;\n  let middlewares: FetchMiddleware[] = [];\n  if (args.length > 0 && typeof args[0] === 'function') {\n    fetchLib = args.shift();\n  }\n  if (args.length > 0) {\n    middlewares = args; // remaining args\n  }\n  return { fetchLib, middlewares };\n}\n\n/**\n * Creates a new network fetching function, which combines an optional fetch-compatible library with optional middleware.\n * @example\n * ```\n * const customFetch = createFetchFn(someMiddleware)\n * const customFetch = createFetchFn(fetch, someMiddleware)\n * const customFetch = createFetchFn(fetch, middlewareA, middlewareB)\n * ```\n * @category Network\n */\nexport function createFetchFn(fetchLib: FetchFn, ...middleware: FetchMiddleware[]): FetchFn;\nexport function createFetchFn(...middleware: FetchMiddleware[]): FetchFn;\nexport function createFetchFn(...args: any[]): FetchFn {\n  const { fetchLib, middlewares } = argsForCreateFetchFn(args);\n\n  const fetchFn = async (url: string, init?: RequestInit | undefined): Promise<Response> => {\n    let fetchParams = { url, init: init ?? {} };\n\n    for (const middleware of middlewares) {\n      if (typeof middleware.pre === 'function') {\n        const result = await Promise.resolve(\n          middleware.pre({\n            fetch: fetchLib,\n            ...fetchParams,\n          })\n        );\n        fetchParams = result ?? fetchParams;\n      }\n    }\n\n    let response = await fetchLib(fetchParams.url, fetchParams.init);\n\n    for (const middleware of middlewares) {\n      if (typeof middleware.post === 'function') {\n        const result = await Promise.resolve(\n          middleware.post({\n            fetch: fetchLib,\n            url: fetchParams.url,\n            init: fetchParams.init,\n            response: response?.clone() ?? response,\n          })\n        );\n        response = result ?? response;\n      }\n    }\n    return response;\n  };\n  return fetchFn;\n}\n", "import { TransactionVersion, ChainID } from '@stacks/common';\nimport { createFetchFn, FetchFn } from './fetch';\n\nexport const HIRO_MAINNET_DEFAULT = 'https://api.mainnet.hiro.so';\nexport const HIRO_TESTNET_DEFAULT = 'https://api.testnet.hiro.so';\nexport const HIRO_MOCKNET_DEFAULT = 'http://localhost:3999';\n\n/**\n * Used for constructing Network instances\n * @related {@link StacksNetwork}, {@link StacksMainnet}, {@link StacksTestnet}, {@link StacksDevnet}, {@link StacksMocknet}\n */\nexport interface NetworkConfig {\n  /** The base API/node URL for the network fetch calls */\n  url: string;\n  /** An optional custom fetch function to override default behaviors */\n  fetchFn?: FetchFn;\n}\n\n/** @ignore internal */\nexport const StacksNetworks = ['mainnet', 'testnet', 'devnet', 'mocknet'] as const;\n/** The enum-style names of different common Stacks networks */\nexport type StacksNetworkName = (typeof StacksNetworks)[number];\n\n/**\n * The base class for Stacks networks. Typically used via its subclasses.\n * @related {@link StacksMainnet}, {@link StacksTestnet}, {@link StacksDevnet}, {@link StacksMocknet}\n */\nexport class StacksNetwork {\n  version: TransactionVersion = TransactionVersion.Mainnet;\n  chainId: ChainID = ChainID.Mainnet;\n  bnsLookupUrl = 'https://api.mainnet.hiro.so';\n  broadcastEndpoint = '/v2/transactions';\n  transferFeeEstimateEndpoint = '/v2/fees/transfer';\n  transactionFeeEstimateEndpoint = '/v2/fees/transaction';\n  accountEndpoint = '/v2/accounts';\n  contractAbiEndpoint = '/v2/contracts/interface';\n  readOnlyFunctionCallEndpoint = '/v2/contracts/call-read';\n\n  readonly coreApiUrl: string;\n\n  fetchFn: FetchFn;\n\n  constructor(networkConfig: NetworkConfig) {\n    this.coreApiUrl = networkConfig.url;\n    this.fetchFn = networkConfig.fetchFn ?? createFetchFn();\n  }\n\n  /** A static network constructor from a network name */\n  static fromName = (networkName: StacksNetworkName): StacksNetwork => {\n    switch (networkName) {\n      case 'mainnet':\n        return new StacksMainnet();\n      case 'testnet':\n        return new StacksTestnet();\n      case 'devnet':\n        return new StacksDevnet();\n      case 'mocknet':\n        return new StacksMocknet();\n      default:\n        throw new Error(\n          `Invalid network name provided. Must be one of the following: ${StacksNetworks.join(\n            ', '\n          )}`\n        );\n    }\n  };\n\n  /** @ignore internal */\n  static fromNameOrNetwork = (network: StacksNetworkName | StacksNetwork) => {\n    if (typeof network !== 'string' && 'version' in network) {\n      return network;\n    }\n\n    return StacksNetwork.fromName(network);\n  };\n\n  /** Returns `true` if the network is configured to 'mainnet', based on the TransactionVersion */\n  isMainnet = () => this.version === TransactionVersion.Mainnet;\n  getBroadcastApiUrl = () => `${this.coreApiUrl}${this.broadcastEndpoint}`;\n  getTransferFeeEstimateApiUrl = () => `${this.coreApiUrl}${this.transferFeeEstimateEndpoint}`;\n  getTransactionFeeEstimateApiUrl = () =>\n    `${this.coreApiUrl}${this.transactionFeeEstimateEndpoint}`;\n  getAccountApiUrl = (address: string) =>\n    `${this.coreApiUrl}${this.accountEndpoint}/${address}?proof=0`;\n  getAccountExtendedBalancesApiUrl = (address: string) =>\n    `${this.coreApiUrl}/extended/v1/address/${address}/balances`;\n  getAbiApiUrl = (address: string, contract: string) =>\n    `${this.coreApiUrl}${this.contractAbiEndpoint}/${address}/${contract}`;\n  getReadOnlyFunctionCallApiUrl = (\n    contractAddress: string,\n    contractName: string,\n    functionName: string\n  ) =>\n    `${this.coreApiUrl}${\n      this.readOnlyFunctionCallEndpoint\n    }/${contractAddress}/${contractName}/${encodeURIComponent(functionName)}`;\n  getInfoUrl = () => `${this.coreApiUrl}/v2/info`;\n  getBlockTimeInfoUrl = () => `${this.coreApiUrl}/extended/v1/info/network_block_times`;\n  getPoxInfoUrl = () => `${this.coreApiUrl}/v2/pox`;\n  getRewardsUrl = (address: string, options?: any) => {\n    let url = `${this.coreApiUrl}/extended/v1/burnchain/rewards/${address}`;\n    if (options) {\n      url = `${url}?limit=${options.limit}&offset=${options.offset}`;\n    }\n    return url;\n  };\n  getRewardsTotalUrl = (address: string) =>\n    `${this.coreApiUrl}/extended/v1/burnchain/rewards/${address}/total`;\n  getRewardHoldersUrl = (address: string, options?: any) => {\n    let url = `${this.coreApiUrl}/extended/v1/burnchain/reward_slot_holders/${address}`;\n    if (options) {\n      url = `${url}?limit=${options.limit}&offset=${options.offset}`;\n    }\n    return url;\n  };\n  getStackerInfoUrl = (contractAddress: string, contractName: string) =>\n    `${this.coreApiUrl}${this.readOnlyFunctionCallEndpoint}\n    ${contractAddress}/${contractName}/get-stacker-info`;\n  getDataVarUrl = (contractAddress: string, contractName: string, dataVarName: string) =>\n    `${this.coreApiUrl}/v2/data_var/${contractAddress}/${contractName}/${dataVarName}?proof=0`;\n  getMapEntryUrl = (contractAddress: string, contractName: string, mapName: string) =>\n    `${this.coreApiUrl}/v2/map_entry/${contractAddress}/${contractName}/${mapName}?proof=0`;\n  getNameInfo(fullyQualifiedName: string) {\n    /*\n      TODO: Update to v2 API URL for name lookups\n    */\n    const nameLookupURL = `${this.bnsLookupUrl}/v1/names/${fullyQualifiedName}`;\n    return this.fetchFn(nameLookupURL)\n      .then(resp => {\n        if (resp.status === 404) {\n          throw new Error('Name not found');\n        } else if (resp.status !== 200) {\n          throw new Error(`Bad response status: ${resp.status}`);\n        } else {\n          return resp.json();\n        }\n      })\n      .then(nameInfo => {\n        // the returned address _should_ be in the correct network ---\n        //  stacks node gets into trouble because it tries to coerce back to mainnet\n        //  and the regtest transaction generation libraries want to use testnet addresses\n        if (nameInfo.address) {\n          return Object.assign({}, nameInfo, { address: nameInfo.address });\n        } else {\n          return nameInfo;\n        }\n      });\n  }\n}\n\n/**\n * A {@link StacksNetwork} with the parameters for the Stacks mainnet.\n * Pass a `url` option to override the default Hiro hosted Stacks node API.\n * Pass a `fetchFn` option to customize the default networking functions.\n * @example\n * ```\n * const network = new StacksMainnet();\n * const network = new StacksMainnet({ url: \"https://api.mainnet.hiro.so\" });\n * const network = new StacksMainnet({ fetch: createFetchFn() });\n * ```\n * @related {@link createFetchFn}, {@link createApiKeyMiddleware}\n */\nexport class StacksMainnet extends StacksNetwork {\n  version = TransactionVersion.Mainnet;\n  chainId = ChainID.Mainnet;\n\n  constructor(opts?: Partial<NetworkConfig>) {\n    super({\n      url: opts?.url ?? HIRO_MAINNET_DEFAULT,\n      fetchFn: opts?.fetchFn,\n    });\n  }\n}\n\n/**\n * A {@link StacksNetwork} with the parameters for the Stacks testnet.\n * Pass a `url` option to override the default Hiro hosted Stacks node API.\n * Pass a `fetchFn` option to customize the default networking functions.\n * @example\n * ```\n * const network = new StacksTestnet();\n * const network = new StacksTestnet({ url: \"https://api.testnet.hiro.so\" });\n * const network = new StacksTestnet({ fetch: createFetchFn() });\n * ```\n * @related {@link createFetchFn}, {@link createApiKeyMiddleware}\n */\nexport class StacksTestnet extends StacksNetwork {\n  version = TransactionVersion.Testnet;\n  chainId = ChainID.Testnet;\n\n  constructor(opts?: Partial<NetworkConfig>) {\n    super({\n      url: opts?.url ?? HIRO_TESTNET_DEFAULT,\n      fetchFn: opts?.fetchFn,\n    });\n  }\n}\n\n/**\n * A {@link StacksNetwork} using the testnet parameters, but `localhost:3999` as the API URL.\n */\nexport class StacksMocknet extends StacksNetwork {\n  version = TransactionVersion.Testnet;\n  chainId = ChainID.Testnet;\n\n  constructor(opts?: Partial<NetworkConfig>) {\n    super({\n      url: opts?.url ?? HIRO_MOCKNET_DEFAULT,\n      fetchFn: opts?.fetchFn,\n    });\n  }\n}\n\n/** Alias for {@link StacksMocknet} */\nexport const StacksDevnet = StacksMocknet;\n", "import { bytesToHex, hexToBytes, IntegerType, intToBigInt } from '@stacks/common';\nimport {\n  StacksNetwork,\n  StacksMainnet,\n  StacksNetworkName,\n  StacksTestnet,\n  FetchFn,\n  createFetchFn,\n} from '@stacks/network';\nimport { c32address } from 'c32check';\nimport {\n  Authorization,\n  createMultiSigSpendingCondition,\n  createSingleSigSpendingCondition,\n  createSponsoredAuth,\n  createStandardAuth,\n  SpendingCondition,\n  MultiSigSpendingCondition,\n  isSingleSig,\n} from './authorization';\nimport { ClarityValue, deserializeCV, NoneCV, PrincipalCV, serializeCV } from './clarity';\nimport {\n  AddressHashMode,\n  AddressVersion,\n  AnchorMode,\n  FungibleConditionCode,\n  NonFungibleConditionCode,\n  PayloadType,\n  PostConditionMode,\n  SingleSigHashMode,\n  TransactionVersion,\n  TxRejectedReason,\n  RECOVERABLE_ECDSA_SIG_LENGTH_BYTES,\n  StacksMessageType,\n  ClarityVersion,\n  AnchorModeName,\n  MultiSigHashMode,\n} from './constants';\nimport { ClarityAbi, validateContractCall } from './contract-abi';\nimport { NoEstimateAvailableError } from './errors';\nimport {\n  createStacksPrivateKey,\n  createStacksPublicKey,\n  getPublicKey,\n  pubKeyfromPrivKey,\n  publicKeyFromBytes,\n  publicKeyToAddress,\n  publicKeyToString,\n} from './keys';\nimport {\n  createContractCallPayload,\n  createSmartContractPayload,\n  createTokenTransferPayload,\n  Payload,\n  serializePayload,\n} from './payload';\nimport {\n  createFungiblePostCondition,\n  createNonFungiblePostCondition,\n  createSTXPostCondition,\n} from './postcondition';\nimport {\n  AssetInfo,\n  createAddress,\n  createContractPrincipal,\n  createStandardPrincipal,\n  FungiblePostCondition,\n  NonFungiblePostCondition,\n  PostCondition,\n  STXPostCondition,\n} from './postcondition-types';\nimport { TransactionSigner } from './signer';\nimport { StacksTransaction } from './transaction';\nimport { addressFromPublicKeys, createLPList } from './types';\nimport { cvToHex, omit, parseReadOnlyResponse, validateTxId } from './utils';\n\n/** @internal */\nasync function _getNonceApi(address: string, network: StacksNetwork): Promise<bigint> {\n  const url = `${network.coreApiUrl}/extended/v1/address/${address}/nonces`;\n  const response = await network.fetchFn(url);\n  const result = await response.json();\n  return BigInt(result.possible_next_nonce);\n}\n\n/**\n * Lookup the nonce for an address from an API or core node\n * @return a promise that resolves to a bigint\n */\nexport async function getNonce(\n  /** The Stacks (c32check) address to look up */\n  address: string,\n  /** The Stacks network to look up the address on */\n  network?: StacksNetworkName | StacksNetwork\n): Promise<bigint> {\n  const derivedNetwork = StacksNetwork.fromNameOrNetwork(network ?? new StacksMainnet());\n  const url = derivedNetwork.getAccountApiUrl(address);\n\n  // Try API first\n  try {\n    return await _getNonceApi(address, derivedNetwork);\n  } catch (e) {}\n\n  // Try node if API endpoint isn't available\n  const response = await derivedNetwork.fetchFn(url);\n  if (!response.ok) {\n    let msg = '';\n    try {\n      msg = await response.text();\n    } catch (error) {}\n    throw new Error(\n      `Error fetching nonce. Response ${response.status}: ${response.statusText}. Attempted to fetch ${url} and failed with the message: \"${msg}\"`\n    );\n  }\n  const responseText = await response.text();\n  const result = JSON.parse(responseText) as { nonce: string };\n  return BigInt(result.nonce);\n}\n\n/**\n * @deprecated Use the new {@link estimateTransaction} function instead.\n *\n * Estimate the total transaction fee in microstacks for a token transfer\n *\n * @param {StacksTransaction} transaction - the token transfer transaction to estimate fees for\n * @param {StacksNetworkName | StacksNetwork} network - the Stacks network to estimate transaction for\n *\n * @return a promise that resolves to number of microstacks per byte\n */\nexport async function estimateTransfer(\n  transaction: StacksTransaction,\n  network?: StacksNetworkName | StacksNetwork\n): Promise<bigint> {\n  if (transaction.payload.payloadType !== PayloadType.TokenTransfer) {\n    throw new Error(\n      `Transaction fee estimation only possible with ${\n        PayloadType[PayloadType.TokenTransfer]\n      } transactions. Invoked with: ${PayloadType[transaction.payload.payloadType]}`\n    );\n  }\n\n  return estimateTransferUnsafe(transaction, network);\n}\n\n/**\n * @deprecated Use the new {@link estimateTransaction} function instead.\n * @internal\n */\nexport async function estimateTransferUnsafe(\n  transaction: StacksTransaction,\n  network?: StacksNetworkName | StacksNetwork\n): Promise<bigint> {\n  const requestHeaders = {\n    Accept: 'application/text',\n  };\n\n  const fetchOptions = {\n    method: 'GET',\n    headers: requestHeaders,\n  };\n\n  const derivedNetwork = StacksNetwork.fromNameOrNetwork(network ?? deriveNetwork(transaction));\n  const url = derivedNetwork.getTransferFeeEstimateApiUrl();\n\n  const response = await derivedNetwork.fetchFn(url, fetchOptions);\n  if (!response.ok) {\n    let msg = '';\n    try {\n      msg = await response.text();\n    } catch (error) {}\n    throw new Error(\n      `Error estimating transaction fee. Response ${response.status}: ${response.statusText}. Attempted to fetch ${url} and failed with the message: \"${msg}\"`\n    );\n  }\n  const feeRateResult = await response.text();\n  const txBytes = BigInt(transaction.serialize().byteLength);\n  const feeRate = BigInt(feeRateResult);\n  return feeRate * txBytes;\n}\n\ninterface FeeEstimation {\n  fee: number;\n  fee_rate: number;\n}\ninterface FeeEstimateResponse {\n  cost_scalar_change_by_byte: bigint;\n  estimated_cost: {\n    read_count: bigint;\n    read_length: bigint;\n    runtime: bigint;\n    write_count: bigint;\n    write_length: bigint;\n  };\n  estimated_cost_scalar: bigint;\n  estimations: [FeeEstimation, FeeEstimation, FeeEstimation];\n}\n\n/**\n * Estimate the total transaction fee in microstacks for a Stacks transaction\n *\n * @param {StacksTransaction} transaction - the transaction to estimate fees for\n * @param {number} estimatedLen - is an optional argument that provides the endpoint with an\n * estimation of the final length (in bytes) of the transaction, including any post-conditions\n * and signatures\n * @param {StacksNetworkName | StacksNetwork} network - the Stacks network to estimate transaction fees for\n *\n * @return a promise that resolves to FeeEstimate\n */\nexport async function estimateTransaction(\n  transactionPayload: Payload,\n  estimatedLen?: number,\n  network?: StacksNetworkName | StacksNetwork\n): Promise<[FeeEstimation, FeeEstimation, FeeEstimation]> {\n  const options = {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify({\n      transaction_payload: bytesToHex(serializePayload(transactionPayload)),\n      ...(estimatedLen ? { estimated_len: estimatedLen } : {}),\n    }),\n  };\n\n  const derivedNetwork = StacksNetwork.fromNameOrNetwork(network ?? new StacksMainnet());\n  const url = derivedNetwork.getTransactionFeeEstimateApiUrl();\n\n  const response = await derivedNetwork.fetchFn(url, options);\n\n  if (!response.ok) {\n    const body = await response.text().then(str => {\n      try {\n        return JSON.parse(str);\n      } catch (error) {\n        return str;\n      }\n    });\n\n    if (\n      body?.reason === 'NoEstimateAvailable' ||\n      (typeof body === 'string' && body.includes('NoEstimateAvailable'))\n    ) {\n      throw new NoEstimateAvailableError(body?.reason_data?.message ?? '');\n    }\n\n    throw new Error(\n      `Error estimating transaction fee. Response ${response.status}: ${response.statusText}. Attempted to fetch ${url} and failed with the message: \"${body}\"`\n    );\n  }\n\n  const data: FeeEstimateResponse = await response.json();\n  return data.estimations;\n}\n\nexport type SerializationRejection = {\n  error: string;\n  reason: TxRejectedReason.Serialization;\n  reason_data: {\n    message: string;\n  };\n  txid: string;\n};\n\nexport type DeserializationRejection = {\n  error: string;\n  reason: TxRejectedReason.Deserialization;\n  reason_data: {\n    message: string;\n  };\n  txid: string;\n};\n\nexport type SignatureValidationRejection = {\n  error: string;\n  reason: TxRejectedReason.SignatureValidation;\n  reason_data: {\n    message: string;\n  };\n  txid: string;\n};\n\nexport type BadNonceRejection = {\n  error: string;\n  reason: TxRejectedReason.BadNonce;\n  reason_data: {\n    expected: number;\n    actual: number;\n    is_origin: boolean;\n    principal: boolean;\n  };\n  txid: string;\n};\n\nexport type FeeTooLowRejection = {\n  error: string;\n  reason: TxRejectedReason.FeeTooLow;\n  reason_data: {\n    expected: number;\n    actual: number;\n  };\n  txid: string;\n};\n\nexport type NotEnoughFundsRejection = {\n  error: string;\n  reason: TxRejectedReason.NotEnoughFunds;\n  reason_data: {\n    expected: string;\n    actual: string;\n  };\n  txid: string;\n};\n\nexport type NoSuchContractRejection = {\n  error: string;\n  reason: TxRejectedReason.NoSuchContract;\n  reason_data?: undefined;\n  txid: string;\n};\n\nexport type NoSuchPublicFunctionRejection = {\n  error: string;\n  reason: TxRejectedReason.NoSuchPublicFunction;\n  reason_data?: undefined;\n  txid: string;\n};\n\nexport type BadFunctionArgumentRejection = {\n  error: string;\n  reason: TxRejectedReason.BadFunctionArgument;\n  reason_data: {\n    message: string;\n  };\n  txid: string;\n};\n\nexport type ContractAlreadyExistsRejection = {\n  error: string;\n  reason: TxRejectedReason.ContractAlreadyExists;\n  reason_data: {\n    contract_identifier: string;\n  };\n  txid: string;\n};\n\nexport type PoisonMicroblocksDoNotConflictRejection = {\n  error: string;\n  reason: TxRejectedReason.PoisonMicroblocksDoNotConflict;\n  reason_data?: undefined;\n  txid: string;\n};\n\nexport type PoisonMicroblockHasUnknownPubKeyHashRejection = {\n  error: string;\n  reason: TxRejectedReason.PoisonMicroblockHasUnknownPubKeyHash;\n  reason_data?: undefined;\n  txid: string;\n};\n\nexport type PoisonMicroblockIsInvalidRejection = {\n  error: string;\n  reason: TxRejectedReason.PoisonMicroblockIsInvalid;\n  reason_data?: undefined;\n  txid: string;\n};\n\nexport type BadAddressVersionByteRejection = {\n  error: string;\n  reason: TxRejectedReason.BadAddressVersionByte;\n  reason_data?: undefined;\n  txid: string;\n};\n\nexport type NoCoinbaseViaMempoolRejection = {\n  error: string;\n  reason: TxRejectedReason.NoCoinbaseViaMempool;\n  reason_data?: undefined;\n  txid: string;\n};\n\nexport type ServerFailureNoSuchChainTipRejection = {\n  error: string;\n  reason: TxRejectedReason.ServerFailureNoSuchChainTip;\n  reason_data?: undefined;\n  txid: string;\n};\n\nexport type TooMuchChainingRejection = {\n  error: string;\n  reason: TxRejectedReason.TooMuchChaining;\n  reason_data: {\n    actual: number;\n    expected: number;\n    is_origin: boolean;\n    message: string;\n    principal: string;\n  };\n  txid: string;\n};\n\nexport type ConflictingNonceInMempoolRejection = {\n  error: string;\n  reason: TxRejectedReason.ConflictingNonceInMempool;\n  reason_data?: undefined;\n  txid: string;\n};\n\nexport type BadTransactionVersionRejection = {\n  error: string;\n  reason: TxRejectedReason.BadTransactionVersion;\n  reason_data?: undefined;\n  txid: string;\n};\n\nexport type TransferRecipientCannotEqualSenderRejection = {\n  error: string;\n  reason: TxRejectedReason.TransferRecipientCannotEqualSender;\n  reason_data: {\n    recipient: string;\n  };\n  txid: string;\n};\n\nexport type TransferAmountMustBePositiveRejection = {\n  error: string;\n  reason: TxRejectedReason.TransferAmountMustBePositive;\n  reason_data?: undefined;\n  txid: string;\n};\n\nexport type ServerFailureDatabaseRejection = {\n  error: string;\n  reason: TxRejectedReason.ServerFailureDatabase;\n  reason_data: {\n    message: string;\n  };\n  txid: string;\n};\n\nexport type EstimatorErrorRejection = {\n  error: string;\n  reason: TxRejectedReason.EstimatorError;\n  reason_data: {\n    message: string;\n  };\n  txid: string;\n};\n\nexport type TemporarilyBlacklistedRejection = {\n  error: string;\n  reason: TxRejectedReason.TemporarilyBlacklisted;\n  reason_data?: undefined;\n  txid: string;\n};\n\nexport type ServerFailureOtherRejection = {\n  error: string;\n  reason: TxRejectedReason.ServerFailureOther;\n  reason_data: {\n    message: string;\n  };\n  txid: string;\n};\n\nexport type TxBroadcastResultOk = {\n  txid: string;\n  error?: undefined;\n  reason?: undefined;\n  reason_data?: undefined;\n};\n\nexport type TxBroadcastResultRejected =\n  | SerializationRejection\n  | DeserializationRejection\n  | SignatureValidationRejection\n  | BadNonceRejection\n  | FeeTooLowRejection\n  | NotEnoughFundsRejection\n  | NoSuchContractRejection\n  | NoSuchPublicFunctionRejection\n  | BadFunctionArgumentRejection\n  | ContractAlreadyExistsRejection\n  | PoisonMicroblocksDoNotConflictRejection\n  | PoisonMicroblockHasUnknownPubKeyHashRejection\n  | PoisonMicroblockIsInvalidRejection\n  | BadAddressVersionByteRejection\n  | NoCoinbaseViaMempoolRejection\n  | ServerFailureNoSuchChainTipRejection\n  | TooMuchChainingRejection\n  | ConflictingNonceInMempoolRejection\n  | BadTransactionVersionRejection\n  | TransferRecipientCannotEqualSenderRejection\n  | TransferAmountMustBePositiveRejection\n  | ServerFailureDatabaseRejection\n  | EstimatorErrorRejection\n  | TemporarilyBlacklistedRejection\n  | ServerFailureOtherRejection;\n\nexport type TxBroadcastResult = TxBroadcastResultOk | TxBroadcastResultRejected;\n\n/**\n * Broadcast the signed transaction to a core node\n *\n * @param {StacksTransaction} transaction - the token transfer transaction to broadcast\n * @param {StacksNetworkName | StacksNetwork} network - the Stacks network to broadcast transaction to\n *\n * @returns {Promise} that resolves to a response if the operation succeeds\n */\nexport async function broadcastTransaction(\n  transaction: StacksTransaction,\n  network?: StacksNetworkName | StacksNetwork,\n  attachment?: Uint8Array\n): Promise<TxBroadcastResult> {\n  const rawTx = transaction.serialize();\n  const derivedNetwork = StacksNetwork.fromNameOrNetwork(network ?? deriveNetwork(transaction));\n  const url = derivedNetwork.getBroadcastApiUrl();\n\n  return broadcastRawTransaction(rawTx, url, attachment, derivedNetwork.fetchFn);\n}\n\n/**\n * Broadcast the signed transaction to a core node\n *\n * @param {Uint8Array} rawTx - the raw serialized transaction bytes to broadcast\n * @param {string} url - the broadcast endpoint URL\n *\n * @returns {Promise} that resolves to a response if the operation succeeds\n */\nexport async function broadcastRawTransaction(\n  rawTx: Uint8Array,\n  url: string,\n  attachment?: Uint8Array,\n  fetchFn: FetchFn = createFetchFn()\n): Promise<TxBroadcastResult> {\n  const options = {\n    method: 'POST',\n    headers: { 'Content-Type': attachment ? 'application/json' : 'application/octet-stream' },\n    body: attachment\n      ? JSON.stringify({\n          tx: bytesToHex(rawTx),\n          attachment: bytesToHex(attachment),\n        })\n      : rawTx,\n  };\n\n  const response = await fetchFn(url, options);\n  if (!response.ok) {\n    try {\n      return (await response.json()) as TxBroadcastResult;\n    } catch (e) {\n      throw Error(`Failed to broadcast transaction: ${(e as Error).message}`);\n    }\n  }\n\n  const text = await response.text();\n  // Replace extra quotes around txid string\n  const txid = text.replace(/[\"]+/g, '');\n  if (!validateTxId(txid)) throw new Error(text);\n  return { txid } as TxBroadcastResult;\n}\n\n/**\n * Fetch a contract's ABI\n *\n * @param {string} address - the contracts address\n * @param {string} contractName - the contracts name\n * @param {StacksNetworkName | StacksNetwork} network - the Stacks network to broadcast transaction to\n *\n * @returns {Promise} that resolves to a ClarityAbi if the operation succeeds\n */\nexport async function getAbi(\n  address: string,\n  contractName: string,\n  network: StacksNetworkName | StacksNetwork\n): Promise<ClarityAbi> {\n  const options = {\n    method: 'GET',\n  };\n\n  const derivedNetwork = StacksNetwork.fromNameOrNetwork(network);\n  const url = derivedNetwork.getAbiApiUrl(address, contractName);\n\n  const response = await derivedNetwork.fetchFn(url, options);\n  if (!response.ok) {\n    const msg = await response.text().catch(() => '');\n    throw new Error(\n      `Error fetching contract ABI for contract \"${contractName}\" at address ${address}. Response ${response.status}: ${response.statusText}. Attempted to fetch ${url} and failed with the message: \"${msg}\"`\n    );\n  }\n\n  return JSON.parse(await response.text()) as ClarityAbi;\n}\n\nfunction deriveNetwork(transaction: StacksTransaction) {\n  switch (transaction.version) {\n    case TransactionVersion.Mainnet:\n      return new StacksMainnet();\n    case TransactionVersion.Testnet:\n      return new StacksTestnet();\n  }\n}\n\n/** @deprecated Not used internally */\nexport interface MultiSigOptions {\n  numSignatures: number;\n  publicKeys: string[];\n  signerKeys?: string[];\n}\n\nexport interface UnsignedMultiSigOptions {\n  /** The minimum required signatures N (in a N of M multi-sig) */\n  numSignatures: number;\n  /** The M public-keys (in a N of M multi-sig), which together form the address of the multi-sig account */\n  publicKeys: string[];\n  /**\n   * The `address` of the multi-sig account.\n   * - If NOT provided, the public-key order is taken AS IS.\n   * - If provided, the address will be checked against the order of the public-keys (either AS IS or SORTED).\n   * The default is to SORT the public-keys (only if the `address` is provided).\n   */\n  address?: string;\n  /** @experimental Use newer non-sequential multi-sig hashmode for transaction. Future releases may make this the default. */\n  useNonSequentialMultiSig?: boolean;\n}\n\nexport type SignedMultiSigOptions = UnsignedMultiSigOptions & {\n  signerKeys: string[];\n};\n\n/**\n * STX token transfer transaction options\n */\nexport interface TokenTransferOptions {\n  /** the address of the recipient of the token transfer */\n  recipient: string | PrincipalCV;\n  /** the amount to be transfered in microstacks */\n  amount: IntegerType;\n  /** the transaction fee in microstacks */\n  fee?: IntegerType;\n  /** the transaction nonce, which must be increased monotonically with each new transaction */\n  nonce?: IntegerType;\n  /** the network that the transaction will ultimately be broadcast to */\n  network?: StacksNetworkName | StacksNetwork;\n  /** the transaction anchorMode, which specifies whether it should be\n   * included in an anchor block or a microblock */\n  anchorMode: AnchorModeName | AnchorMode;\n  /** an arbitrary string to include in the transaction, must be less than 34 bytes */\n  memo?: string;\n  /** set to true if another account is sponsoring the transaction (covering the transaction fee) */\n  sponsored?: boolean;\n}\n\nexport interface UnsignedTokenTransferOptions extends TokenTransferOptions {\n  publicKey: string;\n}\n\nexport interface SignedTokenTransferOptions extends TokenTransferOptions {\n  senderKey: string;\n}\n\nexport type UnsignedMultiSigTokenTransferOptions = TokenTransferOptions & UnsignedMultiSigOptions;\n\nexport type SignedMultiSigTokenTransferOptions = TokenTransferOptions & SignedMultiSigOptions;\n\n/**\n * Generates an unsigned Stacks token transfer transaction\n *\n * Returns a Stacks token transfer transaction.\n *\n * @param {UnsignedTokenTransferOptions | UnsignedMultiSigTokenTransferOptions} txOptions - an options object for the token transfer\n *\n * @return {Promise<StacksTransaction>}\n */\nexport async function makeUnsignedSTXTokenTransfer(\n  txOptions: UnsignedTokenTransferOptions | UnsignedMultiSigTokenTransferOptions\n): Promise<StacksTransaction> {\n  const defaultOptions = {\n    fee: BigInt(0),\n    nonce: BigInt(0),\n    network: new StacksMainnet(),\n    memo: '',\n    sponsored: false,\n  };\n\n  const options = Object.assign(defaultOptions, txOptions);\n\n  const payload = createTokenTransferPayload(options.recipient, options.amount, options.memo);\n\n  let authorization: Authorization | null = null;\n  let spendingCondition: SpendingCondition | null = null;\n\n  if ('publicKey' in options) {\n    // single-sig\n    spendingCondition = createSingleSigSpendingCondition(\n      AddressHashMode.SerializeP2PKH,\n      options.publicKey,\n      options.nonce,\n      options.fee\n    );\n  } else {\n    // multi-sig\n    const hashMode = options.useNonSequentialMultiSig\n      ? AddressHashMode.SerializeP2SHNonSequential\n      : AddressHashMode.SerializeP2SH;\n\n    const publicKeys = options.address\n      ? sortPublicKeysForAddress(\n          options.publicKeys,\n          options.numSignatures,\n          hashMode,\n          createAddress(options.address).hash160\n        )\n      : options.publicKeys;\n\n    spendingCondition = createMultiSigSpendingCondition(\n      hashMode,\n      options.numSignatures,\n      publicKeys,\n      options.nonce,\n      options.fee\n    );\n  }\n\n  if (options.sponsored) {\n    authorization = createSponsoredAuth(spendingCondition);\n  } else {\n    authorization = createStandardAuth(spendingCondition);\n  }\n\n  const network = StacksNetwork.fromNameOrNetwork(options.network);\n\n  const transaction = new StacksTransaction(\n    network.version,\n    authorization,\n    payload,\n    undefined, // no post conditions on STX transfers (see SIP-005)\n    undefined, // no post conditions on STX transfers (see SIP-005)\n    options.anchorMode,\n    network.chainId\n  );\n\n  if (txOptions.fee === undefined || txOptions.fee === null) {\n    const fee = await estimateTransactionFeeWithFallback(transaction, network);\n    transaction.setFee(fee);\n  }\n\n  if (txOptions.nonce === undefined || txOptions.nonce === null) {\n    const addressVersion =\n      options.network.version === TransactionVersion.Mainnet\n        ? AddressVersion.MainnetSingleSig\n        : AddressVersion.TestnetSingleSig;\n    const senderAddress = c32address(addressVersion, transaction.auth.spendingCondition!.signer);\n    const txNonce = await getNonce(senderAddress, options.network);\n    transaction.setNonce(txNonce);\n  }\n\n  return transaction;\n}\n\n/**\n * Generates a signed Stacks token transfer transaction\n *\n * Returns a signed Stacks token transfer transaction.\n *\n * @param {SignedTokenTransferOptions | SignedMultiSigTokenTransferOptions} txOptions - an options object for the token transfer\n *\n * @return {StacksTransaction}\n */\nexport async function makeSTXTokenTransfer(\n  txOptions: SignedTokenTransferOptions | SignedMultiSigTokenTransferOptions\n): Promise<StacksTransaction> {\n  if ('senderKey' in txOptions) {\n    // single-sig\n    const publicKey = publicKeyToString(getPublicKey(createStacksPrivateKey(txOptions.senderKey)));\n    const options = omit(txOptions, 'senderKey');\n    const transaction = await makeUnsignedSTXTokenTransfer({ publicKey, ...options });\n\n    const privKey = createStacksPrivateKey(txOptions.senderKey);\n    const signer = new TransactionSigner(transaction);\n    signer.signOrigin(privKey);\n\n    return transaction;\n  } else {\n    // multi-sig\n    const options = omit(txOptions, 'signerKeys');\n    const transaction = await makeUnsignedSTXTokenTransfer(options);\n\n    mutatingSignAppendMultiSig(\n      transaction,\n      txOptions.publicKeys.slice(),\n      txOptions.signerKeys,\n      txOptions.address\n    );\n\n    return transaction;\n  }\n}\n\n/**\n * Contract deploy transaction options\n */\nexport interface BaseContractDeployOptions {\n  clarityVersion?: ClarityVersion;\n  contractName: string;\n  /** the Clarity code to be deployed */\n  codeBody: string;\n  /** transaction fee in microstacks */\n  fee?: IntegerType;\n  /** the transaction nonce, which must be increased monotonically with each new transaction */\n  nonce?: IntegerType;\n  /** the network that the transaction will ultimately be broadcast to */\n  network?: StacksNetworkName | StacksNetwork;\n  /** the transaction anchorMode, which specifies whether it should be\n   * included in an anchor block or a microblock */\n  anchorMode: AnchorModeName | AnchorMode;\n  /** the post condition mode, specifying whether or not post-conditions must fully cover all\n   * transfered assets */\n  postConditionMode?: PostConditionMode;\n  /** a list of post conditions to add to the transaction */\n  postConditions?: PostCondition[];\n  /** set to true if another account is sponsoring the transaction (covering the transaction fee) */\n  sponsored?: boolean;\n}\n\nexport interface UnsignedContractDeployOptions extends BaseContractDeployOptions {\n  /** a hex string of the public key of the transaction sender */\n  publicKey: string;\n}\n\nexport interface SignedContractDeployOptions extends BaseContractDeployOptions {\n  senderKey: string;\n}\n\n/** @deprecated Use {@link SignedContractDeployOptions} or {@link UnsignedContractDeployOptions} instead. */\nexport interface ContractDeployOptions extends SignedContractDeployOptions {}\n\nexport type UnsignedMultiSigContractDeployOptions = BaseContractDeployOptions &\n  UnsignedMultiSigOptions;\n\nexport type SignedMultiSigContractDeployOptions = BaseContractDeployOptions & SignedMultiSigOptions;\n\n/**\n * @deprecated Use the new {@link estimateTransaction} function insterad.\n *\n * Estimate the total transaction fee in microstacks for a contract deploy\n *\n * @param {StacksTransaction} transaction - the token transfer transaction to estimate fees for\n * @param {StacksNetworkName | StacksNetwork} network - the Stacks network to estimate transaction for\n *\n * @return a promise that resolves to number of microstacks per byte\n */\nexport async function estimateContractDeploy(\n  transaction: StacksTransaction,\n  network?: StacksNetworkName | StacksNetwork\n): Promise<bigint> {\n  if (\n    transaction.payload.payloadType !== PayloadType.SmartContract &&\n    transaction.payload.payloadType !== PayloadType.VersionedSmartContract\n  ) {\n    throw new Error(\n      `Contract deploy fee estimation only possible with ${\n        PayloadType[PayloadType.SmartContract]\n      } transactions. Invoked with: ${PayloadType[transaction.payload.payloadType]}`\n    );\n  }\n\n  const requestHeaders = {\n    Accept: 'application/text',\n  };\n\n  const fetchOptions = {\n    method: 'GET',\n    headers: requestHeaders,\n  };\n\n  // Place holder estimate until contract deploy fee estimation is fully implemented on Stacks\n  // blockchain core\n  const derivedNetwork = StacksNetwork.fromNameOrNetwork(network ?? deriveNetwork(transaction));\n  const url = derivedNetwork.getTransferFeeEstimateApiUrl();\n\n  const response = await derivedNetwork.fetchFn(url, fetchOptions);\n  if (!response.ok) {\n    const msg = await response.text().catch(() => '');\n    throw new Error(\n      `Error estimating contract deploy fee. Response ${response.status}: ${response.statusText}. Attempted to fetch ${url} and failed with the message: \"${msg}\"`\n    );\n  }\n  const feeRateResult = await response.text();\n  const txBytes = intToBigInt(transaction.serialize().byteLength, false);\n  const feeRate = intToBigInt(feeRateResult, false);\n  return feeRate * txBytes;\n}\n\n/**\n * Generates a Clarity smart contract deploy transaction\n *\n * @param {SignedContractDeployOptions | SignedMultiSigContractDeployOptions} txOptions - an options object for the contract deploy\n *\n * Returns a signed Stacks smart contract deploy transaction.\n *\n * @return {StacksTransaction}\n */\nexport async function makeContractDeploy(\n  txOptions: SignedContractDeployOptions | SignedMultiSigContractDeployOptions\n): Promise<StacksTransaction> {\n  if ('senderKey' in txOptions) {\n    // single-sig\n    const publicKey = publicKeyToString(getPublicKey(createStacksPrivateKey(txOptions.senderKey)));\n    const options = omit(txOptions, 'senderKey');\n    const transaction = await makeUnsignedContractDeploy({ publicKey, ...options });\n\n    const privKey = createStacksPrivateKey(txOptions.senderKey);\n    const signer = new TransactionSigner(transaction);\n    signer.signOrigin(privKey);\n\n    return transaction;\n  } else {\n    // multi-sig\n    const options = omit(txOptions, 'signerKeys');\n    const transaction = await makeUnsignedContractDeploy(options);\n\n    mutatingSignAppendMultiSig(\n      transaction,\n      txOptions.publicKeys.slice(),\n      txOptions.signerKeys,\n      txOptions.address\n    );\n\n    return transaction;\n  }\n}\n\nexport async function makeUnsignedContractDeploy(\n  txOptions: UnsignedContractDeployOptions | UnsignedMultiSigContractDeployOptions\n): Promise<StacksTransaction> {\n  const defaultOptions = {\n    fee: BigInt(0),\n    nonce: BigInt(0),\n    network: new StacksMainnet(),\n    postConditionMode: PostConditionMode.Deny,\n    sponsored: false,\n    clarityVersion: ClarityVersion.Clarity2,\n  };\n\n  const options = Object.assign(defaultOptions, txOptions);\n\n  const payload = createSmartContractPayload(\n    options.contractName,\n    options.codeBody,\n    options.clarityVersion\n  );\n\n  let authorization: Authorization | null = null;\n\n  let spendingCondition: SpendingCondition | null = null;\n\n  if ('publicKey' in options) {\n    // single-sig\n    spendingCondition = createSingleSigSpendingCondition(\n      AddressHashMode.SerializeP2PKH,\n      options.publicKey,\n      options.nonce,\n      options.fee\n    );\n  } else {\n    // multi-sig\n    const hashMode = options.useNonSequentialMultiSig\n      ? AddressHashMode.SerializeP2SHNonSequential\n      : AddressHashMode.SerializeP2SH;\n\n    const publicKeys = options.address\n      ? sortPublicKeysForAddress(\n          options.publicKeys,\n          options.numSignatures,\n          hashMode,\n          createAddress(options.address).hash160\n        )\n      : options.publicKeys;\n\n    spendingCondition = createMultiSigSpendingCondition(\n      hashMode,\n      options.numSignatures,\n      publicKeys,\n      options.nonce,\n      options.fee\n    );\n  }\n\n  if (options.sponsored) {\n    authorization = createSponsoredAuth(spendingCondition);\n  } else {\n    authorization = createStandardAuth(spendingCondition);\n  }\n\n  const network = StacksNetwork.fromNameOrNetwork(options.network);\n\n  const postConditions: PostCondition[] = [];\n  if (options.postConditions && options.postConditions.length > 0) {\n    options.postConditions.forEach(postCondition => {\n      postConditions.push(postCondition);\n    });\n  }\n  const lpPostConditions = createLPList(postConditions);\n\n  const transaction = new StacksTransaction(\n    network.version,\n    authorization,\n    payload,\n    lpPostConditions,\n    options.postConditionMode,\n    options.anchorMode,\n    network.chainId\n  );\n\n  if (txOptions.fee === undefined || txOptions.fee === null) {\n    const fee = await estimateTransactionFeeWithFallback(transaction, network);\n    transaction.setFee(fee);\n  }\n\n  if (txOptions.nonce === undefined || txOptions.nonce === null) {\n    const addressVersion =\n      options.network.version === TransactionVersion.Mainnet\n        ? AddressVersion.MainnetSingleSig\n        : AddressVersion.TestnetSingleSig;\n    const senderAddress = c32address(addressVersion, transaction.auth.spendingCondition!.signer);\n    const txNonce = await getNonce(senderAddress, options.network);\n    transaction.setNonce(txNonce);\n  }\n\n  return transaction;\n}\n\n/**\n * Contract function call transaction options\n */\nexport interface ContractCallOptions {\n  /** the Stacks address of the contract */\n  contractAddress: string;\n  contractName: string;\n  functionName: string;\n  functionArgs: ClarityValue[];\n  /** transaction fee in microstacks */\n  fee?: IntegerType;\n  feeEstimateApiUrl?: string;\n  /** the transaction nonce, which must be increased monotonically with each new transaction */\n  nonce?: IntegerType;\n  /** the Stacks blockchain network that will ultimately be used to broadcast this transaction */\n  network?: StacksNetworkName | StacksNetwork;\n  /** the transaction anchorMode, which specifies whether it should be\n   * included in an anchor block or a microblock */\n  anchorMode: AnchorModeName | AnchorMode;\n  /** the post condition mode, specifying whether or not post-conditions must fully cover all\n   * transfered assets */\n  postConditionMode?: PostConditionMode;\n  /** a list of post conditions to add to the transaction */\n  postConditions?: PostCondition[];\n  /** set to true to validate that the supplied function args match those specified in\n   * the published contract */\n  validateWithAbi?: boolean | ClarityAbi;\n  /** set to true if another account is sponsoring the transaction (covering the transaction fee) */\n  sponsored?: boolean;\n}\n\nexport interface UnsignedContractCallOptions extends ContractCallOptions {\n  publicKey: string;\n}\n\nexport interface SignedContractCallOptions extends ContractCallOptions {\n  senderKey: string;\n}\n\nexport type UnsignedMultiSigContractCallOptions = ContractCallOptions & UnsignedMultiSigOptions;\n\nexport type SignedMultiSigContractCallOptions = ContractCallOptions & SignedMultiSigOptions;\n\n/**\n * @deprecated Use the new {@link estimateTransaction} function insterad.\n *\n * Estimate the total transaction fee in microstacks for a contract function call\n *\n * @param {StacksTransaction} transaction - the token transfer transaction to estimate fees for\n * @param {StacksNetworkName | StacksNetwork} network - the Stacks network to estimate transaction for\n *\n * @return a promise that resolves to number of microstacks per byte\n */\nexport async function estimateContractFunctionCall(\n  transaction: StacksTransaction,\n  network?: StacksNetworkName | StacksNetwork\n): Promise<bigint> {\n  if (transaction.payload.payloadType !== PayloadType.ContractCall) {\n    throw new Error(\n      `Contract call fee estimation only possible with ${\n        PayloadType[PayloadType.ContractCall]\n      } transactions. Invoked with: ${PayloadType[transaction.payload.payloadType]}`\n    );\n  }\n\n  const requestHeaders = {\n    Accept: 'application/text',\n  };\n\n  const fetchOptions = {\n    method: 'GET',\n    headers: requestHeaders,\n  };\n\n  // Place holder estimate until contract call fee estimation is fully implemented on Stacks\n  // blockchain core\n  const derivedNetwork = StacksNetwork.fromNameOrNetwork(network ?? deriveNetwork(transaction));\n  const url = derivedNetwork.getTransferFeeEstimateApiUrl();\n\n  const response = await derivedNetwork.fetchFn(url, fetchOptions);\n  if (!response.ok) {\n    const msg = await response.text().catch(() => '');\n    throw new Error(\n      `Error estimating contract call fee. Response ${response.status}: ${response.statusText}. Attempted to fetch ${url} and failed with the message: \"${msg}\"`\n    );\n  }\n  const feeRateResult = await response.text();\n  const txBytes = intToBigInt(transaction.serialize().byteLength, false);\n  const feeRate = intToBigInt(feeRateResult, false);\n  return feeRate * txBytes;\n}\n\n/**\n * Generates an unsigned Clarity smart contract function call transaction\n *\n * @param {UnsignedContractCallOptions | UnsignedMultiSigContractCallOptions} txOptions - an options object for the contract call\n *\n * @returns {Promise<StacksTransaction>}\n */\nexport async function makeUnsignedContractCall(\n  txOptions: UnsignedContractCallOptions | UnsignedMultiSigContractCallOptions\n): Promise<StacksTransaction> {\n  const defaultOptions = {\n    fee: BigInt(0),\n    nonce: BigInt(0),\n    network: new StacksMainnet(),\n    postConditionMode: PostConditionMode.Deny,\n    sponsored: false,\n  };\n\n  const options = Object.assign(defaultOptions, txOptions);\n\n  const payload = createContractCallPayload(\n    options.contractAddress,\n    options.contractName,\n    options.functionName,\n    options.functionArgs\n  );\n\n  if (options?.validateWithAbi) {\n    let abi: ClarityAbi;\n    if (typeof options.validateWithAbi === 'boolean') {\n      if (options?.network) {\n        abi = await getAbi(options.contractAddress, options.contractName, options.network);\n      } else {\n        throw new Error('Network option must be provided in order to validate with ABI');\n      }\n    } else {\n      abi = options.validateWithAbi;\n    }\n\n    validateContractCall(payload, abi);\n  }\n\n  let spendingCondition: SpendingCondition | null = null;\n  let authorization: Authorization | null = null;\n\n  if ('publicKey' in options) {\n    // single-sig\n    spendingCondition = createSingleSigSpendingCondition(\n      AddressHashMode.SerializeP2PKH,\n      options.publicKey,\n      options.nonce,\n      options.fee\n    );\n  } else {\n    // multi-sig\n    const hashMode = options.useNonSequentialMultiSig\n      ? AddressHashMode.SerializeP2SHNonSequential\n      : AddressHashMode.SerializeP2SH;\n\n    const publicKeys = options.address\n      ? sortPublicKeysForAddress(\n          options.publicKeys,\n          options.numSignatures,\n          hashMode,\n          createAddress(options.address).hash160\n        )\n      : options.publicKeys;\n\n    spendingCondition = createMultiSigSpendingCondition(\n      hashMode,\n      options.numSignatures,\n      publicKeys,\n      options.nonce,\n      options.fee\n    );\n  }\n\n  if (options.sponsored) {\n    authorization = createSponsoredAuth(spendingCondition);\n  } else {\n    authorization = createStandardAuth(spendingCondition);\n  }\n\n  const network = StacksNetwork.fromNameOrNetwork(options.network);\n\n  const postConditions: PostCondition[] = [];\n  if (options.postConditions && options.postConditions.length > 0) {\n    options.postConditions.forEach(postCondition => {\n      postConditions.push(postCondition);\n    });\n  }\n\n  const lpPostConditions = createLPList(postConditions);\n  const transaction = new StacksTransaction(\n    network.version,\n    authorization,\n    payload,\n    lpPostConditions,\n    options.postConditionMode,\n    options.anchorMode,\n    network.chainId\n  );\n\n  if (txOptions.fee === undefined || txOptions.fee === null) {\n    const fee = await estimateTransactionFeeWithFallback(transaction, network);\n    transaction.setFee(fee);\n  }\n\n  if (txOptions.nonce === undefined || txOptions.nonce === null) {\n    const addressVersion =\n      network.version === TransactionVersion.Mainnet\n        ? AddressVersion.MainnetSingleSig\n        : AddressVersion.TestnetSingleSig;\n    const senderAddress = c32address(addressVersion, transaction.auth.spendingCondition!.signer);\n    const txNonce = await getNonce(senderAddress, network);\n    transaction.setNonce(txNonce);\n  }\n\n  return transaction;\n}\n\n/**\n * Generates a Clarity smart contract function call transaction\n *\n * @param {SignedContractCallOptions | SignedMultiSigContractCallOptions} txOptions - an options object for the contract function call\n *\n * Returns a signed Stacks smart contract function call transaction.\n *\n * @return {StacksTransaction}\n */\nexport async function makeContractCall(\n  txOptions: SignedContractCallOptions | SignedMultiSigContractCallOptions\n): Promise<StacksTransaction> {\n  if ('senderKey' in txOptions) {\n    // single-sig\n    const publicKey = publicKeyToString(getPublicKey(createStacksPrivateKey(txOptions.senderKey)));\n    const options = omit(txOptions, 'senderKey');\n    const transaction = await makeUnsignedContractCall({ publicKey, ...options });\n\n    const privKey = createStacksPrivateKey(txOptions.senderKey);\n    const signer = new TransactionSigner(transaction);\n    signer.signOrigin(privKey);\n\n    return transaction;\n  } else {\n    // multi-sig\n    const options = omit(txOptions, 'signerKeys');\n    const transaction = await makeUnsignedContractCall(options);\n\n    mutatingSignAppendMultiSig(\n      transaction,\n      txOptions.publicKeys.slice(),\n      txOptions.signerKeys,\n      txOptions.address\n    );\n\n    return transaction;\n  }\n}\n\n/**\n * Generates a STX post condition with a standard principal\n *\n * Returns a STX post condition object\n *\n * @param address - the c32check address\n * @param conditionCode - the condition code\n * @param amount - the amount of STX tokens (denoted in micro-STX)\n */\nexport function makeStandardSTXPostCondition(\n  address: string,\n  conditionCode: FungibleConditionCode,\n  amount: IntegerType\n): STXPostCondition {\n  return createSTXPostCondition(createStandardPrincipal(address), conditionCode, amount);\n}\n\n/**\n * Generates a STX post condition with a contract principal\n *\n * Returns a STX post condition object\n *\n * @param address - the c32check address of the contract\n * @param contractName - the name of the contract\n * @param conditionCode - the condition code\n * @param amount - the amount of STX tokens (denoted in micro-STX)\n *\n * @return {STXPostCondition}\n */\nexport function makeContractSTXPostCondition(\n  address: string,\n  contractName: string,\n  conditionCode: FungibleConditionCode,\n  amount: IntegerType\n): STXPostCondition {\n  return createSTXPostCondition(\n    createContractPrincipal(address, contractName),\n    conditionCode,\n    amount\n  );\n}\n\n/**\n * Generates a fungible token post condition with a standard principal\n *\n * Returns a fungible token post condition object\n *\n * @param address - the c32check address\n * @param conditionCode - the condition code\n * @param amount - the amount of fungible tokens (in their respective base unit)\n * @param assetInfo - asset info describing the fungible token\n */\nexport function makeStandardFungiblePostCondition(\n  address: string,\n  conditionCode: FungibleConditionCode,\n  amount: IntegerType,\n  assetInfo: string | AssetInfo\n): FungiblePostCondition {\n  return createFungiblePostCondition(\n    createStandardPrincipal(address),\n    conditionCode,\n    amount,\n    assetInfo\n  );\n}\n\n/**\n * Generates a fungible token post condition with a contract principal\n *\n * Returns a fungible token post condition object\n *\n * @param address - the c32check address\n * @param contractName - the name of the contract\n * @param conditionCode - the condition code\n * @param amount - the amount of fungible tokens (in their respective base unit)\n * @param assetInfo - asset info describing the fungible token\n */\nexport function makeContractFungiblePostCondition(\n  address: string,\n  contractName: string,\n  conditionCode: FungibleConditionCode,\n  amount: IntegerType,\n  assetInfo: string | AssetInfo\n): FungiblePostCondition {\n  return createFungiblePostCondition(\n    createContractPrincipal(address, contractName),\n    conditionCode,\n    amount,\n    assetInfo\n  );\n}\n\n/**\n * Generates a non-fungible token post condition with a standard principal\n *\n * Returns a non-fungible token post condition object\n *\n * @param {String} address - the c32check address\n * @param {FungibleConditionCode} conditionCode - the condition code\n * @param {AssetInfo} assetInfo - asset info describing the non-fungible token\n * @param {ClarityValue} assetId - asset identifier of the nft instance (typically a uint/buffer/string)\n *\n * @return {NonFungiblePostCondition}\n */\nexport function makeStandardNonFungiblePostCondition(\n  address: string,\n  conditionCode: NonFungibleConditionCode,\n  assetInfo: string | AssetInfo,\n  assetId: ClarityValue\n): NonFungiblePostCondition {\n  return createNonFungiblePostCondition(\n    createStandardPrincipal(address),\n    conditionCode,\n    assetInfo,\n    assetId\n  );\n}\n\n/**\n * Generates a non-fungible token post condition with a contract principal\n *\n * Returns a non-fungible token post condition object\n *\n * @param {String} address - the c32check address\n * @param {String} contractName - the name of the contract\n * @param {FungibleConditionCode} conditionCode - the condition code\n * @param {AssetInfo} assetInfo - asset info describing the non-fungible token\n * @param {ClarityValue} assetId - asset identifier of the nft instance (typically a uint/buffer/string)\n *\n * @return {NonFungiblePostCondition}\n */\nexport function makeContractNonFungiblePostCondition(\n  address: string,\n  contractName: string,\n  conditionCode: NonFungibleConditionCode,\n  assetInfo: string | AssetInfo,\n  assetId: ClarityValue\n): NonFungiblePostCondition {\n  return createNonFungiblePostCondition(\n    createContractPrincipal(address, contractName),\n    conditionCode,\n    assetInfo,\n    assetId\n  );\n}\n\n/**\n * Read only function options\n *\n * @param {String} contractAddress - the c32check address of the contract\n * @param {String} contractName - the contract name\n * @param {String} functionName - name of the function to be called\n * @param {[ClarityValue]} functionArgs - an array of Clarity values as arguments to the function call\n * @param {StacksNetwork} network - the Stacks blockchain network this transaction is destined for\n * @param {String} senderAddress - the c32check address of the sender\n */\n\nexport interface ReadOnlyFunctionOptions {\n  contractName: string;\n  contractAddress: string;\n  functionName: string;\n  functionArgs: ClarityValue[];\n  /** the network that the contract which contains the function is deployed to */\n  network?: StacksNetworkName | StacksNetwork;\n  /** address of the sender */\n  senderAddress: string;\n}\n\n/**\n * Calls a function as read-only from a contract interface\n * It is not necessary that the function is defined as read-only in the contract\n *\n * @param {ReadOnlyFunctionOptions} readOnlyFunctionOptions - the options object\n *\n * Returns an object with a status bool (okay) and a result string that is a serialized clarity value in hex format.\n *\n * @return {ClarityValue}\n */\nexport async function callReadOnlyFunction(\n  readOnlyFunctionOptions: ReadOnlyFunctionOptions\n): Promise<ClarityValue> {\n  const defaultOptions = {\n    network: new StacksMainnet(),\n  };\n\n  const options = Object.assign(defaultOptions, readOnlyFunctionOptions);\n\n  const { contractName, contractAddress, functionName, functionArgs, senderAddress } = options;\n\n  const network = StacksNetwork.fromNameOrNetwork(options.network);\n  const url = network.getReadOnlyFunctionCallApiUrl(contractAddress, contractName, functionName);\n\n  const args = functionArgs.map(arg => cvToHex(arg));\n\n  const body = JSON.stringify({\n    sender: senderAddress,\n    arguments: args,\n  });\n\n  const response = await network.fetchFn(url, {\n    method: 'POST',\n    body,\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  });\n\n  if (!response.ok) {\n    const msg = await response.text().catch(() => '');\n    throw new Error(\n      `Error calling read-only function. Response ${response.status}: ${response.statusText}. Attempted to fetch ${url} and failed with the message: \"${msg}\"`\n    );\n  }\n\n  return response.json().then(responseJson => parseReadOnlyResponse(responseJson));\n}\n\nexport interface GetContractMapEntryOptions {\n  /** the contracts address */\n  contractAddress: string;\n  /** the contracts name */\n  contractName: string;\n  /** the map name */\n  mapName: string;\n  /** key to lookup in the map */\n  mapKey: ClarityValue;\n  /** the network that has the contract */\n  network?: StacksNetworkName | StacksNetwork;\n}\n\n/**\n * Fetch data from a contract data map.\n * @param getContractMapEntryOptions - the options object\n * @returns\n * Promise that resolves to a ClarityValue if the operation succeeds.\n * Resolves to NoneCV if the map does not contain the given key, if the map does not exist, or if the contract prinicipal does not exist\n */\nexport async function getContractMapEntry<T extends ClarityValue = ClarityValue>(\n  getContractMapEntryOptions: GetContractMapEntryOptions\n): Promise<T | NoneCV> {\n  const defaultOptions = {\n    network: new StacksMainnet(),\n  };\n  const { contractAddress, contractName, mapName, mapKey, network } = Object.assign(\n    defaultOptions,\n    getContractMapEntryOptions\n  );\n\n  const derivedNetwork = StacksNetwork.fromNameOrNetwork(network);\n  const url = derivedNetwork.getMapEntryUrl(contractAddress, contractName, mapName);\n\n  const serializedKeyBytes = serializeCV(mapKey);\n  const serializedKeyHex = '0x' + bytesToHex(serializedKeyBytes);\n\n  const fetchOptions: RequestInit = {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      Accept: 'application/json',\n    },\n    body: JSON.stringify(serializedKeyHex), // endpoint expects a JSON string atom (quote wrapped string)\n  };\n\n  const response = await derivedNetwork.fetchFn(url, fetchOptions);\n  if (!response.ok) {\n    const msg = await response.text().catch(() => '');\n    throw new Error(\n      `Error fetching map entry for map \"${mapName}\" in contract \"${contractName}\" at address ${contractAddress}, using map key \"${serializedKeyHex}\". Response ${response.status}: ${response.statusText}. Attempted to fetch ${url} and failed with the message: \"${msg}\"`\n    );\n  }\n  const responseBody = await response.text();\n  const responseJson: { data?: string } = JSON.parse(responseBody);\n  if (!responseJson.data) {\n    throw new Error(\n      `Error fetching map entry for map \"${mapName}\" in contract \"${contractName}\" at address ${contractAddress}, using map key \"${serializedKeyHex}\". Response ${response.status}: ${response.statusText}. Attempted to fetch ${url} and failed with the response: \"${responseBody}\"`\n    );\n  }\n  let deserializedCv: T;\n  try {\n    deserializedCv = deserializeCV<T>(responseJson.data);\n  } catch (error) {\n    throw new Error(`Error deserializing Clarity value \"${responseJson.data}\": ${error}`);\n  }\n  return deserializedCv;\n}\n\n/**\n * Sponsored transaction options\n */\nexport interface SponsorOptionsOpts {\n  /** the origin-signed transaction */\n  transaction: StacksTransaction;\n  /** the sponsor's private key */\n  sponsorPrivateKey: string;\n  /** the transaction fee amount to sponsor */\n  fee?: IntegerType;\n  /** the nonce of the sponsor account */\n  sponsorNonce?: IntegerType;\n  /** the hashmode of the sponsor's address */\n  sponsorAddressHashmode?: AddressHashMode;\n  /** the Stacks blockchain network that this transaction will ultimately be broadcast to */\n  network?: StacksNetworkName | StacksNetwork;\n}\n\n/**\n * Constructs and signs a sponsored transaction as the sponsor\n *\n * @param {SponsorOptionsOpts} sponsorOptions - the sponsor options object\n *\n * Returns a signed sponsored transaction.\n *\n * @return {ClarityValue}\n */\nexport async function sponsorTransaction(\n  sponsorOptions: SponsorOptionsOpts\n): Promise<StacksTransaction> {\n  const defaultOptions = {\n    fee: 0 as IntegerType,\n    sponsorNonce: 0 as IntegerType,\n    sponsorAddressHashmode: AddressHashMode.SerializeP2PKH as SingleSigHashMode,\n    network:\n      sponsorOptions.transaction.version === TransactionVersion.Mainnet\n        ? new StacksMainnet()\n        : new StacksTestnet(),\n  };\n\n  const options = Object.assign(defaultOptions, sponsorOptions);\n\n  const network = StacksNetwork.fromNameOrNetwork(options.network);\n  const sponsorPubKey = pubKeyfromPrivKey(options.sponsorPrivateKey);\n\n  if (sponsorOptions.fee === undefined || sponsorOptions.fee === null) {\n    let txFee = 0;\n    switch (options.transaction.payload.payloadType) {\n      case PayloadType.TokenTransfer:\n      case PayloadType.SmartContract:\n      case PayloadType.VersionedSmartContract:\n      case PayloadType.ContractCall:\n        const estimatedLen = estimateTransactionByteLength(options.transaction);\n        try {\n          txFee = (await estimateTransaction(options.transaction.payload, estimatedLen, network))[1]\n            .fee;\n        } catch (e) {\n          throw e;\n        }\n        break;\n      default:\n        throw new Error(\n          `Sponsored transactions not supported for transaction type ${\n            PayloadType[options.transaction.payload.payloadType]\n          }`\n        );\n    }\n    options.transaction.setFee(txFee);\n    options.fee = txFee;\n  }\n\n  if (sponsorOptions.sponsorNonce === undefined || sponsorOptions.sponsorNonce === null) {\n    const addressVersion =\n      network.version === TransactionVersion.Mainnet\n        ? AddressVersion.MainnetSingleSig\n        : AddressVersion.TestnetSingleSig;\n\n    const senderAddress = publicKeyToAddress(addressVersion, sponsorPubKey);\n    const sponsorNonce = await getNonce(senderAddress, network);\n    options.sponsorNonce = sponsorNonce;\n  }\n\n  const sponsorSpendingCondition = createSingleSigSpendingCondition(\n    options.sponsorAddressHashmode,\n    publicKeyToString(sponsorPubKey),\n    options.sponsorNonce,\n    options.fee\n  );\n\n  options.transaction.setSponsor(sponsorSpendingCondition);\n\n  const privKey = createStacksPrivateKey(options.sponsorPrivateKey);\n  const signer = TransactionSigner.createSponsorSigner(\n    options.transaction,\n    sponsorSpendingCondition\n  );\n  signer.signSponsor(privKey);\n\n  return signer.transaction;\n}\n\n/**\n * Estimates transaction byte length\n * Context:\n * 1) Multi-sig transaction byte length increases by adding signatures\n *    which causes the incorrect fee estimation because the fee value is set while creating unsigned transaction\n * 2) Single-sig transaction byte length remain same due to empty message signature which allocates the space for signature\n * @param {transaction} - StacksTransaction object to be estimated\n * @return {number} Estimated transaction byte length\n */\nexport function estimateTransactionByteLength(transaction: StacksTransaction): number {\n  const hashMode = transaction.auth.spendingCondition.hashMode;\n  // List of Multi-sig transaction hash modes\n  const multiSigHashModes = [AddressHashMode.SerializeP2SH, AddressHashMode.SerializeP2WSH];\n\n  // Check if its a Multi-sig transaction\n  if (multiSigHashModes.includes(hashMode)) {\n    const multiSigSpendingCondition: MultiSigSpendingCondition = transaction.auth\n      .spendingCondition as MultiSigSpendingCondition;\n\n    // Find number of existing signatures if the transaction is signed or partially signed\n    const existingSignatures = multiSigSpendingCondition.fields.filter(\n      field => field.contents.type === StacksMessageType.MessageSignature\n    ).length; // existingSignatures will be 0 if its a unsigned transaction\n\n    // Estimate total signature bytes size required for this multi-sig transaction\n    // Formula: totalSignatureLength = (signaturesRequired - existingSignatures) * (SIG_LEN_BYTES + 1 byte of type of signature)\n    const totalSignatureLength =\n      (multiSigSpendingCondition.signaturesRequired - existingSignatures) *\n      (RECOVERABLE_ECDSA_SIG_LENGTH_BYTES + 1);\n\n    return transaction.serialize().byteLength + totalSignatureLength;\n  } else {\n    // Single-sig transaction\n    // Signature space already allocated by empty message signature\n    return transaction.serialize().byteLength;\n  }\n}\n\n/**\n * Estimates the fee using {@link estimateTransfer} as a fallback if\n * {@link estimateTransaction} does not get an estimation due to the\n * {@link NoEstimateAvailableError} error.\n */\nexport async function estimateTransactionFeeWithFallback(\n  transaction: StacksTransaction,\n  network: StacksNetwork\n): Promise<bigint | number> {\n  try {\n    const estimatedLen = estimateTransactionByteLength(transaction);\n    return (await estimateTransaction(transaction.payload, estimatedLen, network))[1].fee;\n  } catch (error) {\n    if (error instanceof NoEstimateAvailableError) {\n      return await estimateTransferUnsafe(transaction, network);\n    }\n    throw error;\n  }\n}\n\n/** @internal multi-sig signing re-use */\nfunction mutatingSignAppendMultiSig(\n  /** **Warning:** method mutates `transaction` */\n  transaction: StacksTransaction,\n  publicKeys: string[],\n  signerKeys: string[],\n  address?: string\n) {\n  if (isSingleSig(transaction.auth.spendingCondition)) {\n    throw new Error('Transaction is not a multi-sig transaction');\n  }\n\n  const signer = new TransactionSigner(transaction);\n\n  const pubs = address\n    ? sortPublicKeysForAddress(\n        publicKeys,\n        transaction.auth.spendingCondition.signaturesRequired,\n        transaction.auth.spendingCondition.hashMode,\n        createAddress(address).hash160\n      )\n    : publicKeys;\n\n  // sign in order of public keys\n  for (const publicKey of pubs) {\n    const signerKey = signerKeys.find(key => bytesToHex(pubKeyfromPrivKey(key).data) === publicKey);\n    if (signerKey) {\n      // either sign and append message signature (which allows for recovering the public key)\n      signer.signOrigin(createStacksPrivateKey(signerKey));\n    } else {\n      // or append the public key (which did not sign here)\n      signer.appendOrigin(publicKeyFromBytes(hexToBytes(publicKey)));\n    }\n  }\n}\n\n/** @internal Get the matching public-keys array for a multi-sig address */\nfunction sortPublicKeysForAddress(\n  publicKeys: string[],\n  numSigs: number,\n  hashMode: MultiSigHashMode,\n  hash: string\n): string[] {\n  // unsorted\n  const hashUnsorted = addressFromPublicKeys(\n    0 as any, // only used for hash, so version doesn't matter\n    hashMode,\n    numSigs,\n    publicKeys.map(createStacksPublicKey)\n  ).hash160;\n\n  if (hashUnsorted === hash) return publicKeys;\n\n  // sorted\n  const publicKeysSorted = publicKeys.slice().sort();\n  const hashSorted = addressFromPublicKeys(\n    0 as any, // only used for hash, so version doesn't matter\n    hashMode,\n    numSigs,\n    publicKeysSorted.map(createStacksPublicKey)\n  ).hash160;\n\n  if (hashSorted === hash) return publicKeysSorted;\n\n  throw new Error('Failed to find matching multi-sig address given public-keys.');\n}\n", "import { hexToBytes, utf8ToBytes } from '@stacks/common';\nimport {\n  ClarityType,\n  ClarityValue,\n  bufferCV,\n  bufferCVFromString,\n  contractPrincipalCV,\n  falseCV,\n  getCVTypeString,\n  intCV,\n  noneCV,\n  someCV,\n  standardPrincipalCV,\n  trueCV,\n  uintCV,\n} from './clarity';\nimport { stringAsciiCV, stringUtf8CV } from './clarity/types/stringCV';\nimport { NotImplementedError } from './errors';\nimport { ContractCallPayload } from './payload';\nimport { cloneDeep } from './utils';\n\n// From https://github.com/blockstack/stacks-blockchain-sidecar/blob/master/src/event-stream/contract-abi.ts\n\nexport type ClarityAbiTypeBuffer = { buffer: { length: number } };\nexport type ClarityAbiTypeStringAscii = { 'string-ascii': { length: number } };\nexport type ClarityAbiTypeStringUtf8 = { 'string-utf8': { length: number } };\nexport type ClarityAbiTypeResponse = { response: { ok: ClarityAbiType; error: ClarityAbiType } };\nexport type ClarityAbiTypeOptional = { optional: ClarityAbiType };\nexport type ClarityAbiTypeTuple = { tuple: { name: string; type: ClarityAbiType }[] };\nexport type ClarityAbiTypeList = { list: { type: ClarityAbiType; length: number } };\n\nexport type ClarityAbiTypeUInt128 = 'uint128';\nexport type ClarityAbiTypeInt128 = 'int128';\nexport type ClarityAbiTypeBool = 'bool';\nexport type ClarityAbiTypePrincipal = 'principal';\nexport type ClarityAbiTypeTraitReference = 'trait_reference';\nexport type ClarityAbiTypeNone = 'none';\n\nexport type ClarityAbiTypePrimitive =\n  | ClarityAbiTypeUInt128\n  | ClarityAbiTypeInt128\n  | ClarityAbiTypeBool\n  | ClarityAbiTypePrincipal\n  | ClarityAbiTypeTraitReference\n  | ClarityAbiTypeNone;\n\nexport type ClarityAbiType =\n  | ClarityAbiTypePrimitive\n  | ClarityAbiTypeBuffer\n  | ClarityAbiTypeResponse\n  | ClarityAbiTypeOptional\n  | ClarityAbiTypeTuple\n  | ClarityAbiTypeList\n  | ClarityAbiTypeStringAscii\n  | ClarityAbiTypeStringUtf8\n  | ClarityAbiTypeTraitReference;\n\nexport enum ClarityAbiTypeId {\n  ClarityAbiTypeUInt128 = 1,\n  ClarityAbiTypeInt128 = 2,\n  ClarityAbiTypeBool = 3,\n  ClarityAbiTypePrincipal = 4,\n  ClarityAbiTypeNone = 5,\n  ClarityAbiTypeBuffer = 6,\n  ClarityAbiTypeResponse = 7,\n  ClarityAbiTypeOptional = 8,\n  ClarityAbiTypeTuple = 9,\n  ClarityAbiTypeList = 10,\n  ClarityAbiTypeStringAscii = 11,\n  ClarityAbiTypeStringUtf8 = 12,\n  ClarityAbiTypeTraitReference = 13,\n}\n\nexport const isClarityAbiPrimitive = (val: ClarityAbiType): val is ClarityAbiTypePrimitive =>\n  typeof val === 'string';\nexport const isClarityAbiBuffer = (val: ClarityAbiType): val is ClarityAbiTypeBuffer =>\n  (val as ClarityAbiTypeBuffer).buffer !== undefined;\nexport const isClarityAbiStringAscii = (val: ClarityAbiType): val is ClarityAbiTypeStringAscii =>\n  (val as ClarityAbiTypeStringAscii)['string-ascii'] !== undefined;\nexport const isClarityAbiStringUtf8 = (val: ClarityAbiType): val is ClarityAbiTypeStringUtf8 =>\n  (val as ClarityAbiTypeStringUtf8)['string-utf8'] !== undefined;\nexport const isClarityAbiResponse = (val: ClarityAbiType): val is ClarityAbiTypeResponse =>\n  (val as ClarityAbiTypeResponse).response !== undefined;\nexport const isClarityAbiOptional = (val: ClarityAbiType): val is ClarityAbiTypeOptional =>\n  (val as ClarityAbiTypeOptional).optional !== undefined;\nexport const isClarityAbiTuple = (val: ClarityAbiType): val is ClarityAbiTypeTuple =>\n  (val as ClarityAbiTypeTuple).tuple !== undefined;\nexport const isClarityAbiList = (val: ClarityAbiType): val is ClarityAbiTypeList =>\n  (val as ClarityAbiTypeList).list !== undefined;\n\nexport type ClarityAbiTypeUnion =\n  | { id: ClarityAbiTypeId.ClarityAbiTypeUInt128; type: ClarityAbiTypeUInt128 }\n  | { id: ClarityAbiTypeId.ClarityAbiTypeInt128; type: ClarityAbiTypeInt128 }\n  | { id: ClarityAbiTypeId.ClarityAbiTypeBool; type: ClarityAbiTypeBool }\n  | { id: ClarityAbiTypeId.ClarityAbiTypePrincipal; type: ClarityAbiTypePrincipal }\n  | { id: ClarityAbiTypeId.ClarityAbiTypeTraitReference; type: ClarityAbiTypeTraitReference }\n  | { id: ClarityAbiTypeId.ClarityAbiTypeNone; type: ClarityAbiTypeNone }\n  | { id: ClarityAbiTypeId.ClarityAbiTypeBuffer; type: ClarityAbiTypeBuffer }\n  | { id: ClarityAbiTypeId.ClarityAbiTypeResponse; type: ClarityAbiTypeResponse }\n  | { id: ClarityAbiTypeId.ClarityAbiTypeOptional; type: ClarityAbiTypeOptional }\n  | { id: ClarityAbiTypeId.ClarityAbiTypeTuple; type: ClarityAbiTypeTuple }\n  | { id: ClarityAbiTypeId.ClarityAbiTypeList; type: ClarityAbiTypeList }\n  | { id: ClarityAbiTypeId.ClarityAbiTypeStringAscii; type: ClarityAbiTypeStringAscii }\n  | { id: ClarityAbiTypeId.ClarityAbiTypeStringUtf8; type: ClarityAbiTypeStringUtf8 };\n\nexport function getTypeUnion(val: ClarityAbiType): ClarityAbiTypeUnion {\n  if (isClarityAbiPrimitive(val)) {\n    if (val === 'uint128') {\n      return { id: ClarityAbiTypeId.ClarityAbiTypeUInt128, type: val };\n    } else if (val === 'int128') {\n      return { id: ClarityAbiTypeId.ClarityAbiTypeInt128, type: val };\n    } else if (val === 'bool') {\n      return { id: ClarityAbiTypeId.ClarityAbiTypeBool, type: val };\n    } else if (val === 'principal') {\n      return { id: ClarityAbiTypeId.ClarityAbiTypePrincipal, type: val };\n    } else if (val === 'trait_reference') {\n      return { id: ClarityAbiTypeId.ClarityAbiTypeTraitReference, type: val };\n    } else if (val === 'none') {\n      return { id: ClarityAbiTypeId.ClarityAbiTypeNone, type: val };\n    } else {\n      throw new Error(`Unexpected Clarity ABI type primitive: ${JSON.stringify(val)}`);\n    }\n  } else if (isClarityAbiBuffer(val)) {\n    return { id: ClarityAbiTypeId.ClarityAbiTypeBuffer, type: val };\n  } else if (isClarityAbiResponse(val)) {\n    return { id: ClarityAbiTypeId.ClarityAbiTypeResponse, type: val };\n  } else if (isClarityAbiOptional(val)) {\n    return { id: ClarityAbiTypeId.ClarityAbiTypeOptional, type: val };\n  } else if (isClarityAbiTuple(val)) {\n    return { id: ClarityAbiTypeId.ClarityAbiTypeTuple, type: val };\n  } else if (isClarityAbiList(val)) {\n    return { id: ClarityAbiTypeId.ClarityAbiTypeList, type: val };\n  } else if (isClarityAbiStringAscii(val)) {\n    return { id: ClarityAbiTypeId.ClarityAbiTypeStringAscii, type: val };\n  } else if (isClarityAbiStringUtf8(val)) {\n    return { id: ClarityAbiTypeId.ClarityAbiTypeStringUtf8, type: val };\n  } else {\n    throw new Error(`Unexpected Clarity ABI type: ${JSON.stringify(val)}`);\n  }\n}\n\n/**\n * Convert a string to a Clarity value based on the ABI type.\n *\n * Currently does NOT support some nested Clarity ABI types:\n * - ClarityAbiTypeResponse\n * - ClarityAbiTypeTuple\n * - ClarityAbiTypeList\n */\nexport function encodeAbiClarityValue(\n  value: string,\n  type: ClarityAbiType | ClarityAbiTypeUnion\n): ClarityValue {\n  const union = (type as ClarityAbiTypeUnion).id\n    ? (type as ClarityAbiTypeUnion)\n    : getTypeUnion(type as ClarityAbiType);\n  switch (union.id) {\n    case ClarityAbiTypeId.ClarityAbiTypeUInt128:\n      return uintCV(value);\n    case ClarityAbiTypeId.ClarityAbiTypeInt128:\n      return intCV(value);\n    case ClarityAbiTypeId.ClarityAbiTypeBool:\n      if (value === 'false' || value === '0') return falseCV();\n      else if (value === 'true' || value === '1') return trueCV();\n      else throw new Error(`Unexpected Clarity bool value: ${JSON.stringify(value)}`);\n    case ClarityAbiTypeId.ClarityAbiTypePrincipal:\n      if (value.includes('.')) {\n        const [addr, name] = value.split('.');\n        return contractPrincipalCV(addr, name);\n      } else {\n        return standardPrincipalCV(value);\n      }\n    case ClarityAbiTypeId.ClarityAbiTypeTraitReference:\n      const [addr, name] = value.split('.');\n      return contractPrincipalCV(addr, name);\n    case ClarityAbiTypeId.ClarityAbiTypeNone:\n      return noneCV();\n    case ClarityAbiTypeId.ClarityAbiTypeBuffer:\n      return bufferCV(hexToBytes(value));\n    case ClarityAbiTypeId.ClarityAbiTypeStringAscii:\n      return stringAsciiCV(value);\n    case ClarityAbiTypeId.ClarityAbiTypeStringUtf8:\n      return stringUtf8CV(value);\n    case ClarityAbiTypeId.ClarityAbiTypeOptional:\n      return someCV(encodeAbiClarityValue(value, union.type.optional));\n    case ClarityAbiTypeId.ClarityAbiTypeResponse:\n    case ClarityAbiTypeId.ClarityAbiTypeTuple:\n    case ClarityAbiTypeId.ClarityAbiTypeList:\n      throw new NotImplementedError(`Unsupported encoding for Clarity type: ${union.id}`);\n    default:\n      throw new Error(`Unexpected Clarity type ID: ${JSON.stringify(union)}`);\n  }\n}\n\n/** @deprecated due to a breaking bug for the buffer encoding case, this was fixed and renamed to {@link clarityAbiStringToCV} */\nexport function encodeClarityValue(type: ClarityAbiType, value: string): ClarityValue;\nexport function encodeClarityValue(type: ClarityAbiTypeUnion, value: string): ClarityValue;\nexport function encodeClarityValue(\n  type: ClarityAbiTypeUnion | ClarityAbiType,\n  value: string\n): ClarityValue {\n  const union = (type as ClarityAbiTypeUnion).id\n    ? (type as ClarityAbiTypeUnion)\n    : getTypeUnion(type as ClarityAbiType);\n\n  if (union.id === ClarityAbiTypeId.ClarityAbiTypeBuffer) {\n    return bufferCV(utf8ToBytes(value)); // legacy behavior\n  }\n\n  return encodeAbiClarityValue(value, union);\n}\n\nexport function getTypeString(val: ClarityAbiType): string {\n  if (isClarityAbiPrimitive(val)) {\n    if (val === 'int128') {\n      return 'int';\n    } else if (val === 'uint128') {\n      return 'uint';\n    }\n    return val;\n  } else if (isClarityAbiBuffer(val)) {\n    return `(buff ${val.buffer.length})`;\n  } else if (isClarityAbiStringAscii(val)) {\n    return `(string-ascii ${val['string-ascii'].length})`;\n  } else if (isClarityAbiStringUtf8(val)) {\n    return `(string-utf8 ${val['string-utf8'].length})`;\n  } else if (isClarityAbiResponse(val)) {\n    return `(response ${getTypeString(val.response.ok)} ${getTypeString(val.response.error)})`;\n  } else if (isClarityAbiOptional(val)) {\n    return `(optional ${getTypeString(val.optional)})`;\n  } else if (isClarityAbiTuple(val)) {\n    return `(tuple ${val.tuple.map(t => `(${t.name} ${getTypeString(t.type)})`).join(' ')})`;\n  } else if (isClarityAbiList(val)) {\n    return `(list ${val.list.length} ${getTypeString(val.list.type)})`;\n  } else {\n    throw new Error(`Type string unsupported for Clarity type: ${JSON.stringify(val)}`);\n  }\n}\n\nexport interface ClarityAbiFunction {\n  name: string;\n  access: 'private' | 'public' | 'read_only';\n  args: {\n    name: string;\n    type: ClarityAbiType;\n  }[];\n  outputs: {\n    type: ClarityAbiType;\n  };\n}\n\nexport function abiFunctionToString(func: ClarityAbiFunction): string {\n  const access = func.access === 'read_only' ? 'read-only' : func.access;\n  return `(define-${access} (${func.name} ${func.args\n    .map(arg => `(${arg.name} ${getTypeString(arg.type)})`)\n    .join(' ')}))`;\n}\n\nexport interface ClarityAbiVariable {\n  name: string;\n  access: 'variable' | 'constant';\n  type: ClarityAbiType;\n}\n\nexport interface ClarityAbiMap {\n  name: string;\n  key: ClarityAbiType;\n  value: ClarityAbiType;\n}\n\nexport interface ClarityAbiTypeFungibleToken {\n  name: string;\n}\n\nexport interface ClarityAbiTypeNonFungibleToken {\n  name: string;\n  type: ClarityAbiType;\n}\n\nexport interface ClarityAbi {\n  functions: ClarityAbiFunction[];\n  variables: ClarityAbiVariable[];\n  maps: ClarityAbiMap[];\n  fungible_tokens: ClarityAbiTypeFungibleToken[];\n  non_fungible_tokens: ClarityAbiTypeNonFungibleToken[];\n}\n\nfunction matchType(cv: ClarityValue, abiType: ClarityAbiType): boolean {\n  const union = getTypeUnion(abiType);\n\n  switch (cv.type) {\n    case ClarityType.BoolTrue:\n    case ClarityType.BoolFalse:\n      return union.id === ClarityAbiTypeId.ClarityAbiTypeBool;\n    case ClarityType.Int:\n      return union.id === ClarityAbiTypeId.ClarityAbiTypeInt128;\n    case ClarityType.UInt:\n      return union.id === ClarityAbiTypeId.ClarityAbiTypeUInt128;\n    case ClarityType.Buffer:\n      return (\n        union.id === ClarityAbiTypeId.ClarityAbiTypeBuffer &&\n        union.type.buffer.length >= cv.buffer.length\n      );\n    case ClarityType.StringASCII:\n      return (\n        union.id === ClarityAbiTypeId.ClarityAbiTypeStringAscii &&\n        union.type['string-ascii'].length >= cv.data.length\n      );\n    case ClarityType.StringUTF8:\n      return (\n        union.id === ClarityAbiTypeId.ClarityAbiTypeStringUtf8 &&\n        union.type['string-utf8'].length >= cv.data.length\n      );\n    case ClarityType.OptionalNone:\n      return (\n        union.id === ClarityAbiTypeId.ClarityAbiTypeNone ||\n        union.id === ClarityAbiTypeId.ClarityAbiTypeOptional\n      );\n    case ClarityType.OptionalSome:\n      return (\n        union.id === ClarityAbiTypeId.ClarityAbiTypeOptional &&\n        matchType(cv.value, union.type.optional)\n      );\n    case ClarityType.ResponseErr:\n      return (\n        union.id === ClarityAbiTypeId.ClarityAbiTypeResponse &&\n        matchType(cv.value, union.type.response.error)\n      );\n    case ClarityType.ResponseOk:\n      return (\n        union.id === ClarityAbiTypeId.ClarityAbiTypeResponse &&\n        matchType(cv.value, union.type.response.ok)\n      );\n    case ClarityType.PrincipalContract:\n      return (\n        union.id === ClarityAbiTypeId.ClarityAbiTypePrincipal ||\n        union.id === ClarityAbiTypeId.ClarityAbiTypeTraitReference\n      );\n    case ClarityType.PrincipalStandard:\n      return union.id === ClarityAbiTypeId.ClarityAbiTypePrincipal;\n    case ClarityType.List:\n      return (\n        union.id == ClarityAbiTypeId.ClarityAbiTypeList &&\n        union.type.list.length >= cv.list.length &&\n        cv.list.every(val => matchType(val, union.type.list.type))\n      );\n    case ClarityType.Tuple:\n      if (union.id == ClarityAbiTypeId.ClarityAbiTypeTuple) {\n        const tuple = cloneDeep(cv.data);\n        for (let i = 0; i < union.type.tuple.length; i++) {\n          const abiTupleEntry = union.type.tuple[i];\n          const key = abiTupleEntry.name;\n          const val = tuple[key];\n\n          // if key exists in cv tuple, check if its type matches the abi\n          // return false if key doesn't exist\n          if (val) {\n            if (!matchType(val, abiTupleEntry.type)) {\n              return false;\n            }\n            delete tuple[key];\n          } else {\n            return false;\n          }\n        }\n        return true;\n      } else {\n        return false;\n      }\n    default:\n      return false;\n  }\n}\n\n/**\n * Validates a contract-call payload with a contract ABI\n *\n * @param {ContractCallPayload} payload - a contract-call payload\n * @param {ClarityAbi} abi - a contract ABI\n *\n * @returns {boolean} true if the payloads functionArgs type check against those in the ABI\n */\nexport function validateContractCall(payload: ContractCallPayload, abi: ClarityAbi): boolean {\n  const filtered = abi.functions.filter(fn => fn.name === payload.functionName.content);\n  if (filtered.length === 1) {\n    const abiFunc = filtered[0];\n    const abiArgs = abiFunc.args;\n\n    if (payload.functionArgs.length !== abiArgs.length) {\n      throw new Error(\n        `Clarity function expects ${abiArgs.length} argument(s) but received ${payload.functionArgs.length}`\n      );\n    }\n\n    for (let i = 0; i < payload.functionArgs.length; i++) {\n      const payloadArg = payload.functionArgs[i];\n      const abiArg = abiArgs[i];\n\n      if (!matchType(payloadArg, abiArg.type)) {\n        const argNum = i + 1;\n        throw new Error(\n          `Clarity function \\`${\n            payload.functionName.content\n          }\\` expects argument ${argNum} to be of type ${getTypeString(\n            abiArg.type\n          )}, not ${getCVTypeString(payloadArg)}`\n        );\n      }\n    }\n\n    return true;\n  } else if (filtered.length === 0) {\n    throw new Error(`ABI doesn't contain a function with the name ${payload.functionName.content}`);\n  } else {\n    throw new Error(\n      `Malformed ABI. Contains multiple functions with the name ${payload.functionName.content}`\n    );\n  }\n}\n\n/**\n * Convert string input to Clarity value based on contract ABI data. Only handles Clarity\n * primitives and buffers. Responses, optionals, tuples and lists are not supported.\n *\n * @param {string} input - string to be parsed into Clarity value\n * @param {ClarityAbiType} type - the contract function argument object\n *\n * @returns {ClarityValue} returns a Clarity value\n */\nexport function parseToCV(input: string, type: ClarityAbiType): ClarityValue {\n  const typeString = getTypeString(type);\n  if (isClarityAbiPrimitive(type)) {\n    if (type === 'uint128') {\n      return uintCV(input);\n    } else if (type === 'int128') {\n      return intCV(input);\n    } else if (type === 'bool') {\n      if (input.toLowerCase() === 'true') {\n        return trueCV();\n      } else if (input.toLowerCase() === 'false') {\n        return falseCV();\n      } else {\n        throw new Error(`Invalid bool value: ${input}`);\n      }\n    } else if (type === 'principal') {\n      if (input.includes('.')) {\n        const [address, contractName] = input.split('.');\n        return contractPrincipalCV(address, contractName);\n      } else {\n        return standardPrincipalCV(input);\n      }\n    } else {\n      throw new Error(`Contract function contains unsupported Clarity ABI type: ${typeString}`);\n    }\n  } else if (isClarityAbiBuffer(type)) {\n    const inputLength = utf8ToBytes(input).byteLength;\n    if (inputLength > type.buffer.length) {\n      throw new Error(`Input exceeds specified buffer length limit of ${type.buffer.length}`);\n    }\n    return bufferCVFromString(input);\n  } else if (isClarityAbiResponse(type)) {\n    throw new Error(`Contract function contains unsupported Clarity ABI type: ${typeString}`);\n  } else if (isClarityAbiOptional(type)) {\n    throw new Error(`Contract function contains unsupported Clarity ABI type: ${typeString}`);\n  } else if (isClarityAbiTuple(type)) {\n    throw new Error(`Contract function contains unsupported Clarity ABI type: ${typeString}`);\n  } else if (isClarityAbiList(type)) {\n    throw new Error(`Contract function contains unsupported Clarity ABI type: ${typeString}`);\n  } else {\n    throw new Error(`Contract function contains unsupported Clarity ABI type: ${typeString}`);\n  }\n}\n", "import { sha256 } from '@noble/hashes/sha256';\nimport { bytesToHex, concatBytes, utf8ToBytes } from '@stacks/common';\n\nimport { ClarityType, ClarityValue, serializeCV } from './clarity';\nimport { StacksMessageType } from './constants';\nimport { signMessageHashRsv, StacksPrivateKey } from './keys';\nimport { StructuredDataSignature } from './message-types';\n\n// Refer to SIP018 https://github.com/stacksgov/sips/\n// > asciiToBytes('SIP018')\nexport const STRUCTURED_DATA_PREFIX = new Uint8Array([0x53, 0x49, 0x50, 0x30, 0x31, 0x38]);\n\nexport function hashStructuredData(structuredData: ClarityValue): Uint8Array {\n  return sha256(serializeCV(structuredData));\n}\n\nconst hash256BytesLength = 32;\n\nfunction isDomain(value: ClarityValue): boolean {\n  if (value.type !== ClarityType.Tuple) return false;\n  // Check that the tuple has at least 'name', 'version' and 'chain-id'\n  if (!['name', 'version', 'chain-id'].every(key => key in value.data)) return false;\n  // Check each key is of the right type\n  if (!['name', 'version'].every(key => value.data[key].type === ClarityType.StringASCII))\n    return false;\n\n  if (value.data['chain-id'].type !== ClarityType.UInt) return false;\n  return true;\n}\n\nexport function encodeStructuredData({\n  message,\n  domain,\n}: {\n  message: ClarityValue;\n  domain: ClarityValue;\n}): Uint8Array {\n  const structuredDataHash: Uint8Array = hashStructuredData(message);\n  if (!isDomain(domain)) {\n    throw new Error(\n      \"domain parameter must be a valid domain of type TupleCV with keys 'name', 'version', 'chain-id' with respective types StringASCII, StringASCII, UInt\"\n    );\n  }\n  const domainHash: Uint8Array = hashStructuredData(domain);\n\n  return concatBytes(STRUCTURED_DATA_PREFIX, domainHash, structuredDataHash);\n}\n\nexport type DecodedStructuredData = {\n  domainHash: Uint8Array;\n  messageHash: Uint8Array;\n};\n\nexport function decodeStructuredDataSignature(\n  signature: string | Uint8Array\n): DecodedStructuredData {\n  const encodedMessageBytes: Uint8Array =\n    typeof signature === 'string' ? utf8ToBytes(signature) : signature;\n  const domainHash = encodedMessageBytes.slice(\n    STRUCTURED_DATA_PREFIX.length,\n    STRUCTURED_DATA_PREFIX.length + hash256BytesLength\n  );\n  const messageHash = encodedMessageBytes.slice(STRUCTURED_DATA_PREFIX.length + hash256BytesLength);\n  return {\n    domainHash,\n    messageHash,\n  };\n}\n\n/**\n * Signs a structured message (ClarityValue) and a domain (ClarityValue) using a private key.\n * The resulting signature along with the original message can be verified using {@link verifyMessageSignature}\n * @returns A recoverable signature (in RSV order)\n */\nexport function signStructuredData({\n  message,\n  domain,\n  privateKey,\n}: {\n  message: ClarityValue;\n  domain: ClarityValue;\n  privateKey: StacksPrivateKey;\n}): StructuredDataSignature {\n  const structuredDataHash: string = bytesToHex(sha256(encodeStructuredData({ message, domain })));\n\n  const { data } = signMessageHashRsv({\n    messageHash: structuredDataHash,\n    privateKey,\n  });\n  return {\n    data,\n    type: StacksMessageType.StructuredDataSignature,\n  };\n}\n", "import { p as promiseResolve, b as bootstrapLazy } from './index-f9076013.js';\nexport { s as setNonce } from './index-f9076013.js';\n\n/*\n Stencil Client Patch Esm v2.22.3 | MIT Licensed | https://stenciljs.com\n */\nconst patchEsm = () => {\n    return promiseResolve();\n};\n\nconst defineCustomElements = (win, options) => {\n  if (typeof window === 'undefined') return Promise.resolve();\n  return patchEsm().then(() => {\n  return bootstrapLazy([[\"connect-modal\",[[1,\"connect-modal\",{\"defaultProviders\":[16],\"installedProviders\":[16],\"persistSelection\":[4,\"persist-selection\"],\"callback\":[16],\"cancelCallback\":[16]}]]]], options);\n  });\n};\n\nexport { defineCustomElements };\n", "\n(function(){if(\"undefined\"!==typeof window&&void 0!==window.Reflect&&void 0!==window.customElements){var a=HTMLElement;window.HTMLElement=function(){return Reflect.construct(a,[],this.constructor)};HTMLElement.prototype=a.prototype;HTMLElement.prototype.constructor=HTMLElement;Object.setPrototypeOf(HTMLElement,a)}})();\nexport * from '../dist/esm/polyfills/index.js';\nexport * from '../dist/esm/loader.js';\n", "import { AppConfig, UserSession } from '@stacks/auth';\nimport { decodeToken } from 'jsontokens';\nimport type { AuthOptions, AuthResponsePayload, StacksProvider } from './types';\n\nimport { getStacksProvider } from './utils';\n\nexport const defaultAuthURL = 'https://app.blockstack.org';\n\nif (typeof window !== 'undefined') {\n  window.__CONNECT_VERSION__ = '__VERSION__'; // replaced via tsup esbuildOptions\n}\n\nexport const isMobile = () => {\n  const ua = navigator.userAgent;\n  if (/android/i.test(ua)) {\n    return true;\n  }\n  if (/iPad|iPhone|iPod/.test(ua)) {\n    return true;\n  }\n  return /windows phone/i.test(ua);\n};\n\n/**\n * mobile should not use a 'popup' type of window.\n */\nexport const shouldUsePopup = () => {\n  return !isMobile();\n};\n\nexport const getOrCreateUserSession = (userSession?: UserSession): UserSession => {\n  if (!userSession) {\n    const appConfig = new AppConfig(['store_write'], document.location.href);\n    userSession = new UserSession({ appConfig });\n  }\n  return userSession;\n};\n\nexport const authenticate = async (\n  authOptions: AuthOptions,\n  provider: StacksProvider = getStacksProvider()\n) => {\n  if (!provider) throw new Error('[Connect] No installed Stacks wallet found');\n\n  const {\n    redirectTo = '/',\n    manifestPath,\n    onFinish,\n    onCancel,\n    sendToSignIn = false,\n    userSession: _userSession,\n    appDetails,\n  } = authOptions;\n  const userSession = getOrCreateUserSession(_userSession);\n  if (userSession.isUserSignedIn()) {\n    userSession.signUserOut();\n  }\n  const transitKey = userSession.generateAndStoreTransitKey();\n  const authRequest = userSession.makeAuthRequest(\n    transitKey,\n    `${document.location.origin}${redirectTo}`,\n    `${document.location.origin}${manifestPath}`,\n    userSession.appConfig.scopes,\n    undefined,\n    undefined,\n    {\n      sendToSignIn,\n      appDetails,\n      connectVersion: '__VERSION__', // replaced via tsup esbuildOptions,\n    }\n  );\n\n  try {\n    const authResponse = await provider.authenticationRequest(authRequest);\n    await userSession.handlePendingSignIn(authResponse);\n    const token = decodeToken(authResponse);\n    const payload = token?.payload;\n    const authResponsePayload = payload as unknown as AuthResponsePayload;\n    onFinish?.({\n      authResponse,\n      authResponsePayload,\n      userSession,\n    });\n  } catch (error) {\n    console.error('[Connect] Error during auth request', error);\n    onCancel?.();\n  }\n};\n\n// eslint-disable-next-line @typescript-eslint/require-await\nexport const getUserData = async (userSession?: UserSession) => {\n  userSession = getOrCreateUserSession(userSession);\n  if (userSession.isUserSignedIn()) {\n    return userSession.loadUserData();\n  }\n  if (userSession.isSignInPending()) {\n    return userSession.handlePendingSignIn();\n  }\n  return null;\n};\n", "import { getSelectedProviderId, getProviderFromId } from '@stacks/connect-ui';\nimport {\n  StacksNetwork as LegacyStacksNetwork,\n  StacksMainnet as LegacyStacksMainnet,\n  StacksTestnet as LegacyStacksTestnet,\n} from '@stacks/network-v6';\nimport { ConnectNetwork } from './types';\nimport { TransactionVersion } from '@stacks/network';\n\nexport function getStacksProvider() {\n  const provider = getProviderFromId(getSelectedProviderId());\n  return provider || window.StacksProvider || window.BlockstackProvider;\n}\n\nexport function isStacksWalletInstalled() {\n  return !!getStacksProvider();\n}\n\n/** @internal */\nexport function legacyNetworkFromConnectNetwork(network?: ConnectNetwork): LegacyStacksNetwork {\n  if (!network) return new LegacyStacksTestnet();\n  if (typeof network === 'string') return LegacyStacksNetwork.fromName(network);\n  if ('version' in network) return network; // legacy type\n\n  if ('url' in network) return new LegacyStacksMainnet({ url: network.url }); // experimental\n\n  return network.transactionVersion === (TransactionVersion.Mainnet as number)\n    ? new LegacyStacksMainnet({ url: network.client.baseUrl })\n    : new LegacyStacksTestnet({ url: network.client.baseUrl });\n}\n", "import { createUnsecuredToken, Json, TokenSigner } from 'jsontokens';\nimport { getKeys, getUserSession, hasAppPrivateKey } from '../transactions';\nimport { StacksProvider } from '../types';\nimport { PsbtPayload, PsbtPopup, PsbtRequestOptions } from '../types/bitcoin';\nimport { getStacksProvider, legacyNetworkFromConnectNetwork } from '../utils';\n\n// eslint-disable-next-line @typescript-eslint/require-await\nasync function signPayload(payload: PsbtPayload, privateKey: string) {\n  const tokenSigner = new TokenSigner('ES256k', privateKey);\n  // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n  return tokenSigner.signAsync({ ...payload } as any);\n}\n\nexport function getDefaultPsbtRequestOptions(options: PsbtRequestOptions) {\n  const network = legacyNetworkFromConnectNetwork(options.network);\n  const userSession = getUserSession(options.userSession);\n  const defaults: PsbtRequestOptions = {\n    ...options,\n    network,\n    userSession,\n  };\n  return {\n    ...defaults,\n  };\n}\n\nasync function openPsbtPopup({ token, options }: PsbtPopup, provider: StacksProvider) {\n  if (!provider) throw new Error('[Connect] No installed Stacks wallet found');\n\n  try {\n    const psbtResponse = await provider.psbtRequest(token);\n    options.onFinish?.(psbtResponse);\n  } catch (error) {\n    console.error('[Connect] Error during psbt request', error);\n    options.onCancel?.();\n  }\n}\n\n// eslint-disable-next-line @typescript-eslint/require-await\nexport const makePsbtToken = async (options: PsbtRequestOptions) => {\n  const { allowedSighash, hex, signAtIndex, userSession, ..._options } = options;\n  if (hasAppPrivateKey(userSession)) {\n    const { privateKey, publicKey } = getKeys(userSession);\n\n    const payload: PsbtPayload = {\n      ..._options,\n      allowedSighash,\n      hex,\n      signAtIndex,\n      publicKey,\n    };\n\n    return signPayload(payload, privateKey);\n  }\n  const payload = { ..._options };\n  return createUnsecuredToken(payload as Json);\n};\n\nasync function generateTokenAndOpenPopup<T extends PsbtRequestOptions>(\n  options: T,\n  makeTokenFn: (options: T) => Promise<string>,\n  provider: StacksProvider\n) {\n  const token = await makeTokenFn({\n    ...getDefaultPsbtRequestOptions(options),\n    ...options,\n  } as T);\n  return openPsbtPopup({ token, options }, provider);\n}\n\n/**\n * @experimental\n */\nexport function openPsbtRequestPopup(\n  options: PsbtRequestOptions,\n  provider: StacksProvider = getStacksProvider()\n) {\n  return generateTokenAndOpenPopup(options, makePsbtToken, provider);\n}\n", "import { UserSession } from '@stacks/auth';\nimport type { AuthOptions } from '../types/auth';\nimport {\n  ClarityValue as LegacyClarityValue,\n  PostCondition as LegacyPostCondition,\n} from '@stacks/transactions-v6';\nimport {\n  PostConditionMode,\n  PostCondition,\n  AnchorMode,\n  ClarityValue,\n  StacksTransactionWire,\n} from '@stacks/transactions';\nimport { ConnectNetwork } from './network';\n\nexport interface TxBase {\n  appDetails?: AuthOptions['appDetails'];\n  postConditionMode?: PostConditionMode;\n  postConditions?: (string | LegacyPostCondition | PostCondition)[];\n  network?: ConnectNetwork;\n  anchorMode?: AnchorMode;\n  attachment?: string;\n  fee?: number | string;\n  /**\n   * Provide the Hiro Wallet with a suggested account to sign this transaction with.\n   * This is set by default if a `userSession` option is provided.\n   */\n  stxAddress?: string;\n  /** @deprecated `unused - only included for compatibility with @stacks/transactions` */\n  senderKey?: string;\n  /** @deprecated `unused - only included for compatibility with @stacks/transactions` */\n  nonce?: number;\n}\n\nexport interface SignTransactionBase {\n  appDetails?: AuthOptions['appDetails'];\n  network?: ConnectNetwork;\n  attachment?: string;\n  /**\n   * Provide wallets with a suggested account to sign this transaction with.\n   * This is set by default if a `userSession` option is provided.\n   */\n  stxAddress?: string;\n  txHex: string;\n  /** @deprecated `unused - only included for compatibility with other transaction types` */\n  postConditions?: (string | LegacyPostCondition | PostCondition)[];\n}\n\nexport interface SponsoredFinishedTxPayload {\n  txRaw: string;\n}\n\nexport interface SponsoredFinishedTxData extends SponsoredFinishedTxPayload {\n  stacksTransaction: StacksTransactionWire;\n}\n\nexport interface FinishedTxPayload extends SponsoredFinishedTxPayload {\n  txId: string;\n}\n\nexport interface FinishedTxData extends FinishedTxPayload {\n  stacksTransaction: StacksTransactionWire;\n}\n\nexport enum TransactionTypes {\n  ContractCall = 'contract_call',\n  ContractDeploy = 'smart_contract',\n  STXTransfer = 'token_transfer',\n}\n\n/**\n * Contract Call\n */\n\nexport enum ContractCallArgumentType {\n  BUFFER = 'buffer',\n  UINT = 'uint',\n  INT = 'int',\n  PRINCIPAL = 'principal',\n  BOOL = 'bool',\n}\n\nexport interface ContractCallBase extends TxBase {\n  contractAddress: string;\n  contractName: string;\n  functionName: string;\n  functionArgs: (string | LegacyClarityValue | ClarityValue)[];\n}\n\nexport interface OptionsBase {\n  /**\n   * @deprecated Authentication is no longer supported through a hosted\n   * version. Users must install an extension.\n   */\n  authOrigin?: string;\n  userSession?: UserSession;\n}\n\nexport type SponsoredFinished = (data: SponsoredFinishedTxData) => void;\nexport type Finished = (data: FinishedTxData) => void;\nexport type Canceled = () => void;\n\nexport interface SponsoredOptionsBase extends TxBase, OptionsBase {\n  sponsored: true;\n  onFinish?: SponsoredFinished;\n  onCancel?: Canceled;\n}\n\nexport interface RegularOptionsBase extends TxBase, OptionsBase {\n  sponsored?: false;\n  onFinish?: Finished;\n  onCancel?: Canceled;\n}\n\nexport type ContractCallRegularOptions = ContractCallBase & RegularOptionsBase;\nexport type ContractCallSponsoredOptions = ContractCallBase & SponsoredOptionsBase;\nexport type ContractCallOptions = ContractCallRegularOptions | ContractCallSponsoredOptions;\n\nexport interface ContractCallArgument {\n  type: ContractCallArgumentType;\n  value: string;\n}\n\nexport interface ContractCallPayload extends ContractCallBase {\n  txType: TransactionTypes.ContractCall;\n  publicKey: string;\n  functionArgs: string[];\n  sponsored?: boolean;\n}\n\n/**\n * Contract Deploy\n */\nexport interface ContractDeployBase extends TxBase {\n  contractName: string;\n  codeBody: string;\n  /**\n   * Optional integer value to specify the Clarity version to use for this contract.\n   * Current live Clarity versions are: `1`, `2`, and `3`.\n   *\n   * ⚠︎ Warning: Wallets may not support this parameter yet and typically default to the latest Clarity version.\n   */\n  clarityVersion?: number;\n}\n\nexport type ContractDeployRegularOptions = ContractDeployBase & RegularOptionsBase;\nexport type ContractDeploySponsoredOptions = ContractDeployBase & SponsoredOptionsBase;\nexport type ContractDeployOptions = ContractDeployRegularOptions | ContractDeploySponsoredOptions;\n\nexport interface ContractDeployPayload extends ContractDeployBase {\n  publicKey: string;\n  txType: TransactionTypes.ContractDeploy;\n  sponsored?: boolean;\n}\n\n/**\n * STX Transfer\n */\n\nexport interface STXTransferBase extends TxBase {\n  recipient: string;\n  amount: BigInt | string;\n  memo?: string;\n}\n\nexport type STXTransferRegularOptions = STXTransferBase & RegularOptionsBase;\nexport type STXTransferSponsoredOptions = STXTransferBase & SponsoredOptionsBase;\nexport type STXTransferOptions = STXTransferRegularOptions | STXTransferSponsoredOptions;\n\nexport interface STXTransferPayload extends STXTransferBase {\n  publicKey: string;\n  txType: TransactionTypes.STXTransfer;\n  amount: string;\n  sponsored?: boolean;\n}\n\n/**\n * Transaction Popup\n */\n\nexport type TransactionOptions =\n  | ContractCallOptions\n  | ContractDeployOptions\n  | STXTransferOptions\n  | SignTransactionOptions;\nexport type TransactionPayload =\n  | ContractCallPayload\n  | ContractDeployPayload\n  | STXTransferPayload\n  | SignTransactionPayload;\n\nexport interface TransactionPopup {\n  token: string;\n  options: TransactionOptions;\n}\n\nexport interface SignTransactionOptionBase extends SignTransactionBase, OptionsBase {\n  onFinish?: SignTransactionFinished;\n  onCancel?: Canceled;\n}\n\nexport interface SignTransactionPayload extends SignTransactionBase {\n  publicKey: string;\n}\n\nexport type SignTransactionFinished = (data: SignTransactionFinishedTxData) => void;\n\nexport type SignTransactionOptions = SignTransactionOptionBase;\n\nexport interface SignTransactionFinishedTxData {\n  stacksTransaction: StacksTransactionWire;\n}\n", "import { AppConfig, UserSession } from '@stacks/auth';\nimport { bytesToHex, hexToBytes } from '@stacks/common';\nimport { ChainId } from '@stacks/network';\nimport {\n  deserializeTransaction,\n  PostCondition,\n  postConditionToHex,\n  serializeCV,\n} from '@stacks/transactions';\nimport {\n  PostCondition as LegacyPostCondition,\n  serializeCV as legacySerializeCV,\n  serializePostCondition as legacySerializePostCondition,\n} from '@stacks/transactions-v6';\nimport { createUnsecuredToken, Json, SECP256K1Client, TokenSigner } from 'jsontokens';\nimport { StacksProvider } from '../types';\nimport {\n  ContractCallOptions,\n  ContractCallPayload,\n  ContractCallRegularOptions,\n  ContractCallSponsoredOptions,\n  ContractDeployOptions,\n  ContractDeployPayload,\n  ContractDeployRegularOptions,\n  ContractDeploySponsoredOptions,\n  FinishedTxPayload,\n  SignTransactionOptions,\n  SignTransactionPayload,\n  SponsoredFinishedTxPayload,\n  STXTransferOptions,\n  STXTransferPayload,\n  STXTransferRegularOptions,\n  STXTransferSponsoredOptions,\n  TransactionOptions,\n  TransactionPayload,\n  TransactionPopup,\n  TransactionTypes,\n} from '../types/transactions';\nimport { getStacksProvider, legacyNetworkFromConnectNetwork } from '../utils';\n\n// TODO extract out of transactions\nexport const getUserSession = (_userSession?: UserSession) => {\n  let userSession = _userSession;\n\n  if (!userSession) {\n    const appConfig = new AppConfig(['store_write'], document.location.href);\n    userSession = new UserSession({ appConfig });\n  }\n  return userSession;\n};\n\nexport function hasAppPrivateKey(userSession?: UserSession) {\n  try {\n    const session = getUserSession(userSession).loadUserData();\n    return session.appPrivateKey;\n  } catch (e) {\n    return false;\n  }\n}\n\nexport const getKeys = (_userSession?: UserSession) => {\n  const userSession = getUserSession(_userSession);\n  const privateKey = userSession.loadUserData().appPrivateKey;\n  const publicKey = SECP256K1Client.derivePublicKey(privateKey);\n\n  return { privateKey, publicKey };\n};\n\n// TODO extract out of transactions\nexport function getStxAddress(options: TransactionOptions) {\n  const { stxAddress, userSession, network: _network } = options;\n\n  if (stxAddress) return stxAddress;\n  if (!userSession || !_network) return undefined;\n  const stxAddresses = userSession?.loadUserData().profile?.stxAddress;\n\n  const chainIdToKey = {\n    [ChainId.Mainnet]: 'mainnet',\n    [ChainId.Testnet]: 'testnet',\n  };\n  const network = legacyNetworkFromConnectNetwork(_network);\n  const address: string | undefined = stxAddresses?.[chainIdToKey[network.chainId]];\n  return address;\n}\n\nfunction getDefaults(options: TransactionOptions) {\n  const network = legacyNetworkFromConnectNetwork(options.network);\n\n  const userSession = getUserSession(options.userSession);\n  const defaults: TransactionOptions = {\n    ...options,\n    network,\n    userSession,\n  };\n\n  return {\n    stxAddress: getStxAddress(defaults),\n    ...defaults,\n  };\n}\n\n// eslint-disable-next-line @typescript-eslint/require-await\nasync function signPayload(payload: TransactionPayload, privateKey: string) {\n  let { postConditions } = payload;\n  if (postConditions && postConditions.length > 0 && typeof postConditions[0] !== 'string') {\n    if (typeof postConditions[0].type === 'string') {\n      // new readable types\n      postConditions = (postConditions as PostCondition[]).map(postConditionToHex);\n    } else {\n      // legacy types\n      postConditions = (postConditions as LegacyPostCondition[]).map(pc => {\n        return bytesToHex(legacySerializePostCondition(pc));\n      });\n    }\n  }\n  const tokenSigner = new TokenSigner('ES256k', privateKey);\n  // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n  return tokenSigner.signAsync({ ...payload, postConditions } as any);\n}\n\nfunction createUnsignedTransactionPayload(payload: Partial<TransactionPayload>) {\n  let { postConditions } = payload;\n  if (postConditions && postConditions.length > 0 && typeof postConditions[0] !== 'string') {\n    if (typeof postConditions[0].type === 'string') {\n      // new readable types\n      postConditions = (postConditions as PostCondition[]).map(postConditionToHex);\n    } else {\n      // legacy types\n      postConditions = (postConditions as LegacyPostCondition[]).map(pc => {\n        return bytesToHex(legacySerializePostCondition(pc));\n      });\n    }\n  }\n  return createUnsecuredToken({ ...payload, postConditions } as unknown as Json);\n}\n\nconst openTransactionPopup = async (\n  { token, options }: TransactionPopup,\n  provider: StacksProvider\n) => {\n  try {\n    const txResponse = await provider.transactionRequest(token);\n    const { txRaw } = txResponse;\n    const txBytes = hexToBytes(txRaw.replace(/^0x/, ''));\n    const stacksTransaction = deserializeTransaction(txBytes);\n\n    if ('sponsored' in options && options.sponsored) {\n      options.onFinish?.({\n        ...(txResponse as SponsoredFinishedTxPayload),\n        stacksTransaction,\n      });\n      return;\n    }\n    options.onFinish?.({\n      ...(txResponse as FinishedTxPayload),\n      stacksTransaction,\n    });\n  } catch (error) {\n    console.error('[Connect] Error during transaction request', error);\n    options.onCancel?.();\n  }\n};\n\n// eslint-disable-next-line @typescript-eslint/require-await\nexport const makeContractCallToken = async (options: ContractCallOptions) => {\n  const { functionArgs, appDetails, userSession, ..._options } = options;\n\n  const args: string[] = functionArgs.map(arg => {\n    if (typeof arg === 'string') {\n      return arg;\n    }\n    if (typeof arg.type === 'string') {\n      // new readable types\n      return serializeCV(arg);\n    }\n\n    // legacy types\n    return bytesToHex(legacySerializeCV(arg));\n  });\n  if (hasAppPrivateKey(userSession)) {\n    const { privateKey, publicKey } = getKeys(userSession);\n    const payload: ContractCallPayload = {\n      ..._options,\n      functionArgs: args,\n      txType: TransactionTypes.ContractCall,\n      publicKey,\n    };\n    if (appDetails) payload.appDetails = appDetails;\n    return signPayload(payload, privateKey);\n  }\n  const payload: Partial<ContractCallPayload> = {\n    ..._options,\n    functionArgs: args,\n    txType: TransactionTypes.ContractCall,\n  };\n  if (appDetails) payload.appDetails = appDetails;\n  return createUnsignedTransactionPayload(payload);\n};\n\n// eslint-disable-next-line @typescript-eslint/require-await\nexport const makeContractDeployToken = async (options: ContractDeployOptions) => {\n  const { appDetails, userSession, ..._options } = options;\n  if (hasAppPrivateKey(userSession)) {\n    const { privateKey, publicKey } = getKeys(userSession);\n    const payload: ContractDeployPayload = {\n      ..._options,\n      publicKey,\n      txType: TransactionTypes.ContractDeploy,\n    };\n    if (appDetails) payload.appDetails = appDetails;\n    return signPayload(payload, privateKey);\n  }\n\n  const payload: Partial<ContractDeployPayload> = {\n    ..._options,\n    txType: TransactionTypes.ContractDeploy,\n  };\n  if (appDetails) payload.appDetails = appDetails;\n  return createUnsignedTransactionPayload(payload);\n};\n\n// eslint-disable-next-line @typescript-eslint/require-await\nexport const makeSTXTransferToken = async (options: STXTransferOptions) => {\n  const { amount, appDetails, userSession, ..._options } = options;\n\n  if (hasAppPrivateKey(userSession)) {\n    const { privateKey, publicKey } = getKeys(userSession);\n    const payload: STXTransferPayload = {\n      ..._options,\n      amount: amount.toString(10),\n      publicKey,\n      txType: TransactionTypes.STXTransfer,\n    };\n    if (appDetails) payload.appDetails = appDetails;\n    return signPayload(payload, privateKey);\n  }\n\n  const payload: Partial<STXTransferPayload> = {\n    ..._options,\n    amount: amount.toString(10),\n    txType: TransactionTypes.STXTransfer,\n  };\n  if (appDetails) payload.appDetails = appDetails;\n  return createUnsignedTransactionPayload(payload);\n};\n\nexport const makeSignTransaction = async (options: SignTransactionOptions) => {\n  const { txHex, appDetails, userSession, ..._options } = options;\n\n  if (hasAppPrivateKey(userSession)) {\n    const { privateKey, publicKey } = getKeys(userSession);\n    const payload: SignTransactionPayload = {\n      ..._options,\n      txHex,\n      publicKey,\n    };\n    if (appDetails) payload.appDetails = appDetails;\n    return signPayload(payload, privateKey);\n  }\n\n  const payload: Partial<SignTransactionOptions> = {\n    ..._options,\n    txHex,\n  };\n  if (appDetails) payload.appDetails = appDetails;\n  return createUnsignedTransactionPayload(payload);\n};\n\nasync function generateTokenAndOpenPopup<T extends TransactionOptions>(\n  options: T,\n  makeTokenFn: (options: T) => Promise<string>,\n  provider: StacksProvider\n) {\n  const token = await makeTokenFn({\n    ...getDefaults(options),\n    ...options,\n    network: legacyNetworkFromConnectNetwork(options.network), // ensure network is legacy compatible\n  } as T);\n  return openTransactionPopup({ token, options }, provider);\n}\n\nexport function openContractCall(\n  options: ContractCallOptions | ContractCallRegularOptions | ContractCallSponsoredOptions,\n  provider: StacksProvider = getStacksProvider()\n) {\n  if (!provider) throw new Error('[Connect] No installed Stacks wallet found');\n  return generateTokenAndOpenPopup(options, makeContractCallToken, provider);\n}\n\nexport function openContractDeploy(\n  options: ContractDeployOptions | ContractDeployRegularOptions | ContractDeploySponsoredOptions,\n  provider: StacksProvider = getStacksProvider()\n) {\n  if (!provider) throw new Error('[Connect] No installed Stacks wallet found');\n  return generateTokenAndOpenPopup(options, makeContractDeployToken, provider);\n}\n\nexport function openSTXTransfer(\n  options: STXTransferOptions | STXTransferRegularOptions | STXTransferSponsoredOptions,\n  provider: StacksProvider = getStacksProvider()\n) {\n  if (!provider) throw new Error('[Connect] No installed Stacks wallet found');\n  return generateTokenAndOpenPopup(options, makeSTXTransferToken, provider);\n}\n\nexport function openSignTransaction(\n  options: SignTransactionOptions,\n  provider: StacksProvider = getStacksProvider()\n) {\n  if (!provider) throw new Error('[Connect] No installed Stacks wallet found');\n  return generateTokenAndOpenPopup(options, makeSignTransaction, provider);\n}\n", "import { ChainId } from '@stacks/network';\nimport { createUnsecuredToken, TokenSigner } from 'jsontokens';\nimport { getKeys, getUserSession, hasAppPrivateKey } from '../transactions';\nimport { StacksProvider } from '../types';\nimport {\n  CommonSignatureRequestOptions,\n  SignatureOptions,\n  SignaturePayload,\n  SignaturePopup,\n  SignatureRequestOptions,\n} from '../types/signature';\nimport { getStacksProvider, legacyNetworkFromConnectNetwork } from '../utils';\n\nfunction getStxAddress(options: CommonSignatureRequestOptions) {\n  const { userSession, network: _network } = options;\n\n  if (!userSession || !_network) return undefined;\n  const stxAddresses = userSession?.loadUserData().profile?.stxAddress;\n  const chainIdToKey = {\n    [ChainId.Mainnet]: 'mainnet',\n    [ChainId.Testnet]: 'testnet',\n  };\n  const network = legacyNetworkFromConnectNetwork(_network);\n  const address: string | undefined = stxAddresses?.[chainIdToKey[network.chainId]];\n  return address;\n}\n\n// eslint-disable-next-line @typescript-eslint/require-await\nasync function signPayload(payload: SignaturePayload, privateKey: string) {\n  const tokenSigner = new TokenSigner('ES256k', privateKey);\n  // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n  return tokenSigner.signAsync({ ...payload } as any);\n}\n\nexport function getDefaultSignatureRequestOptions(options: CommonSignatureRequestOptions) {\n  const network = legacyNetworkFromConnectNetwork(options.network);\n  const userSession = getUserSession(options.userSession);\n  const defaults: CommonSignatureRequestOptions = {\n    ...options,\n    network,\n    userSession,\n  };\n  return {\n    stxAddress: getStxAddress(defaults),\n    ...defaults,\n  };\n}\n\nasync function openSignaturePopup({ token, options }: SignaturePopup, provider: StacksProvider) {\n  try {\n    const signatureResponse = await provider.signatureRequest(token);\n    options.onFinish?.(signatureResponse);\n  } catch (error) {\n    console.error('[Connect] Error during signature request', error);\n    options.onCancel?.();\n  }\n}\n\nexport interface SignatureRequestPayload {\n  message: string;\n}\n\n// eslint-disable-next-line @typescript-eslint/require-await\nexport const signMessage = async (options: SignatureRequestOptions) => {\n  const { userSession, ..._options } = options;\n  if (hasAppPrivateKey(userSession)) {\n    const { privateKey, publicKey } = getKeys(userSession);\n\n    const payload: SignaturePayload = {\n      ..._options,\n      publicKey,\n    };\n\n    return signPayload(payload, privateKey);\n  }\n  const payload = { ..._options };\n  // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n  return createUnsecuredToken(payload as any);\n};\n\nasync function generateTokenAndOpenPopup<T extends SignatureOptions>(\n  options: T,\n  makeTokenFn: (options: T) => Promise<string>,\n  provider: StacksProvider\n) {\n  const token = await makeTokenFn({\n    ...getDefaultSignatureRequestOptions(options),\n    ...options,\n  } as T);\n  return openSignaturePopup({ token, options }, provider);\n}\n\nexport function openSignatureRequestPopup(\n  options: SignatureRequestOptions,\n  provider: StacksProvider = getStacksProvider()\n) {\n  if (!provider) throw new Error('[Connect] No installed Stacks wallet found');\n  return generateTokenAndOpenPopup(options, signMessage, provider);\n}\n", "import { bytesToHex } from '@stacks/common';\nimport {\n  serializeCV as legacySerializeCV,\n  ClarityValue as LegacyClarityValue,\n  TupleCV as LegacyTupleCV,\n} from '@stacks/transactions-v6';\nimport { serializeCV } from '@stacks/transactions';\nimport { createUnsecuredToken, Json, TokenSigner } from 'jsontokens';\nimport { getDefaultSignatureRequestOptions } from '.';\nimport { getKeys, hasAppPrivateKey } from '../transactions';\nimport {\n  StructuredDataSignatureOptions,\n  StructuredDataSignaturePayload,\n  StructuredDataSignaturePopup,\n  StructuredDataSignatureRequestOptions,\n} from '../types/structuredDataSignature';\nimport { getStacksProvider } from '../utils';\nimport { StacksProvider } from '../types';\n\nasync function generateTokenAndOpenPopup<T extends StructuredDataSignatureOptions>(\n  options: T,\n  makeTokenFn: (options: T) => Promise<string>,\n  provider: StacksProvider\n) {\n  const token = await makeTokenFn({\n    ...getDefaultSignatureRequestOptions(options),\n    ...options,\n  } as T);\n  return openStructuredDataSignaturePopup({ token, options }, provider);\n}\n\nfunction parseUnserializableBigIntValues(payload: StructuredDataSignaturePayload) {\n  const { message, domain } = payload;\n\n  if (typeof message.type === 'string' && typeof domain.type === 'string') {\n    // new readable types\n    return {\n      ...payload,\n      message: serializeCV(message),\n      domain: serializeCV(domain),\n    } as Json;\n  }\n\n  // legacy types\n  return {\n    ...payload,\n    message: bytesToHex(legacySerializeCV(message as LegacyClarityValue)),\n    domain: bytesToHex(legacySerializeCV(domain as LegacyTupleCV)),\n  } as Json;\n}\n\n// eslint-disable-next-line @typescript-eslint/require-await\nasync function signPayload(payload: StructuredDataSignaturePayload, privateKey: string) {\n  const tokenSigner = new TokenSigner('ES256k', privateKey);\n  return tokenSigner.signAsync(parseUnserializableBigIntValues(payload));\n}\n\n// eslint-disable-next-line @typescript-eslint/require-await\nexport async function signStructuredMessage(options: StructuredDataSignatureRequestOptions) {\n  const { userSession, ..._options } = options;\n  if (hasAppPrivateKey(userSession)) {\n    const { privateKey, publicKey } = getKeys(userSession);\n    const payload: StructuredDataSignaturePayload = {\n      ..._options,\n      publicKey,\n    };\n    return signPayload(payload, privateKey);\n  }\n  return createUnsecuredToken(\n    parseUnserializableBigIntValues(options as StructuredDataSignaturePayload)\n  );\n}\n\nasync function openStructuredDataSignaturePopup(\n  { token, options }: StructuredDataSignaturePopup,\n  provider: StacksProvider\n) {\n  try {\n    const signatureResponse = await provider.structuredDataSignatureRequest(token);\n\n    options.onFinish?.(signatureResponse);\n  } catch (error) {\n    console.error('[Connect] Error during signature request', error);\n    options.onCancel?.();\n  }\n}\n\nexport function openStructuredDataSignatureRequestPopup(\n  options: StructuredDataSignatureRequestOptions,\n  provider: StacksProvider = getStacksProvider()\n) {\n  if (!provider) throw new Error('[Connect] No installed Stacks wallet found');\n  return generateTokenAndOpenPopup(options, signStructuredMessage, provider);\n}\n", "import { createUnsecuredToken, Json, TokenSigner } from 'jsontokens';\nimport { getKeys, getUserSession, hasAppPrivateKey } from '../transactions';\nimport {\n  ProfileUpdatePayload,\n  ProfileUpdatePopup,\n  ProfileUpdateRequestOptions,\n  StacksProvider,\n} from '../types';\n\nimport { getStacksProvider, legacyNetworkFromConnectNetwork } from '../utils';\n\n// eslint-disable-next-line @typescript-eslint/require-await\nasync function signPayload(payload: ProfileUpdatePayload, privateKey: string) {\n  const tokenSigner = new TokenSigner('ES256k', privateKey);\n  // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n  return tokenSigner.signAsync({ ...payload } as any);\n}\n\nexport function getDefaultProfileUpdateRequestOptions(options: ProfileUpdateRequestOptions) {\n  const network = legacyNetworkFromConnectNetwork(options.network);\n  const userSession = getUserSession(options.userSession);\n  const defaults: ProfileUpdateRequestOptions = {\n    ...options,\n    network,\n    userSession,\n  };\n  return {\n    ...defaults,\n  };\n}\n\nasync function openProfileUpdatePopup(\n  { token, options }: ProfileUpdatePopup,\n  provider: StacksProvider\n) {\n  try {\n    const profileUpdateResponse = await provider.profileUpdateRequest(token);\n    options.onFinish?.(profileUpdateResponse);\n  } catch (error) {\n    console.error('[Connect] Error during signature request', error);\n    options.onCancel?.();\n  }\n}\n\n// eslint-disable-next-line @typescript-eslint/require-await\nexport const makeProfileUpdateToken = async (options: ProfileUpdateRequestOptions) => {\n  const { userSession, profile, ..._options } = options;\n  if (hasAppPrivateKey(userSession)) {\n    const { privateKey, publicKey } = getKeys(userSession);\n\n    const payload: ProfileUpdatePayload = {\n      ..._options,\n      profile,\n      publicKey,\n    };\n\n    return signPayload(payload, privateKey);\n  }\n  const payload = { ..._options };\n  return createUnsecuredToken(payload as Json);\n};\n\nasync function generateTokenAndOpenPopup<T extends ProfileUpdateRequestOptions>(\n  options: T,\n  makeTokenFn: (options: T) => Promise<string>,\n  provider: StacksProvider\n) {\n  const token = await makeTokenFn({\n    ...getDefaultProfileUpdateRequestOptions(options),\n    ...options,\n  } as T);\n  return openProfileUpdatePopup({ token, options }, provider);\n}\n\nexport function openProfileUpdateRequestPopup(\n  options: ProfileUpdateRequestOptions,\n  provider: StacksProvider = getStacksProvider()\n) {\n  if (!provider) throw new Error('[Connect] No installed Stacks wallet found');\n  return generateTokenAndOpenPopup(options, makeProfileUpdateToken, provider);\n}\n", "import { UserSession } from '@stacks/auth';\n\nimport { AuthOptions } from './auth';\nimport { ConnectNetwork } from './network';\n\n// Taken from @scure/btc-signer\n// https://github.com/paulmillr/scure-btc-signer\nexport enum SignatureHash {\n  DEFAULT = 0,\n  ALL = 1,\n  NONE = 2,\n  SINGLE = 3,\n  ANYONECANPAY = 0x80,\n}\n\nexport interface PsbtData {\n  hex: string;\n}\n\nexport type PsbtCanceled = () => void;\nexport type PsbtFinished = (data: PsbtData) => void;\n\nexport interface PsbtBase {\n  appDetails?: AuthOptions['appDetails'];\n  authOrigin?: string;\n  network?: ConnectNetwork;\n  onCancel?: PsbtCanceled;\n  onFinish?: PsbtFinished;\n  stxAddress?: string;\n  userSession?: UserSession;\n}\n\nexport interface PsbtRequestOptions extends PsbtBase {\n  allowedSighash?: SignatureHash[];\n  hex: string;\n  signAtIndex?: number | number[];\n}\n\nexport interface CommonPsbtPayload extends PsbtBase {\n  publicKey: string;\n}\n\nexport interface PsbtPayload extends CommonPsbtPayload {\n  allowedSighash?: SignatureHash[];\n  hex: string;\n  signAtIndex?: number | number[];\n}\n\n/**\n * Psbt Popup\n */\nexport interface PsbtPopup {\n  token: string;\n  options: PsbtRequestOptions;\n}\n", "import {\n  WebBTCProvider,\n  clearSelectedProviderId,\n  getInstalledProviders,\n  getSelectedProviderId,\n} from '@stacks/connect-ui';\nimport { defineCustomElements } from '@stacks/connect-ui/loader';\nimport { authenticate } from './auth';\nimport { openPsbtRequestPopup } from './bitcoin';\nimport { openProfileUpdateRequestPopup } from './profile';\nimport { openSignatureRequestPopup } from './signature';\nimport { openStructuredDataSignatureRequestPopup } from './signature/structuredData';\nimport {\n  openContractCall,\n  openContractDeploy,\n  openSTXTransfer,\n  openSignTransaction,\n} from './transactions';\nimport {\n  ContractCallOptions,\n  ContractDeployOptions,\n  ProfileUpdateRequestOptions,\n  PsbtRequestOptions,\n  STXTransferOptions,\n  SignatureRequestOptions,\n  StacksProvider,\n  StructuredDataSignatureRequestOptions,\n  TransactionOptions,\n} from './types';\nimport type { AuthOptions } from './types/auth';\nimport { getStacksProvider } from './utils';\nimport { DEFAULT_PROVIDERS } from './providers';\n\nexport type ActionOptions = (\n  | AuthOptions\n  | STXTransferOptions\n  | ContractCallOptions\n  | ContractDeployOptions\n  | TransactionOptions\n  | PsbtRequestOptions\n  | ProfileUpdateRequestOptions\n  | SignatureRequestOptions\n  | StructuredDataSignatureRequestOptions\n) & {\n  defaultProviders?: WebBTCProvider[];\n};\n\n/** Helper higher-order function for creating connect methods that allow for wallet selection */\nfunction wrapConnectCall<O extends ActionOptions>(\n  action: (options: O, provider?: StacksProvider) => any,\n  persistSelection = true\n) {\n  return function wrapped(options: O, provider?: StacksProvider) {\n    if (provider) return action(options, provider); // if a provider is passed, use it\n\n    const selectedId = getSelectedProviderId();\n    const selectedProvider = getStacksProvider();\n    if (selectedId && selectedProvider) return action(options, selectedProvider); // if a provider is selected, use it\n\n    if (typeof window === 'undefined') return;\n    void defineCustomElements(window);\n\n    const defaultProviders = options?.defaultProviders ?? DEFAULT_PROVIDERS;\n    const installedProviders = getInstalledProviders(defaultProviders);\n\n    const element = document.createElement('connect-modal');\n    element.defaultProviders = defaultProviders;\n    element.installedProviders = installedProviders;\n    element.persistSelection = persistSelection;\n\n    const originalOverflow = document.body.style.overflow;\n    document.body.style.overflow = 'hidden';\n\n    const closeModal = () => {\n      element.remove();\n      document.body.style.overflow = originalOverflow;\n    };\n\n    element.callback = (selectedProvider: StacksProvider | undefined) => {\n      closeModal();\n      action(options, selectedProvider);\n    };\n    element.cancelCallback = () => {\n      closeModal();\n      options.onCancel?.();\n    };\n\n    document.body.appendChild(element);\n\n    const handleEsc = (ev: KeyboardEvent) => {\n      if (ev.key === 'Escape') {\n        document.removeEventListener('keydown', handleEsc);\n        element.remove();\n      }\n    };\n    document.addEventListener('keydown', handleEsc);\n  };\n}\n\n/** A wrapper for selecting a wallet (if none is selected) and then calling the {@link authenticate} action. */\nexport const showConnect = wrapConnectCall(authenticate, false);\n\n/** A wrapper for selecting a wallet (if none is selected) and then calling the {@link openSTXTransfer} action. */\nexport const showSTXTransfer = wrapConnectCall(openSTXTransfer);\n/** A wrapper for selecting a wallet (if none is selected) and then calling the {@link openContractCall} action. */\nexport const showContractCall = wrapConnectCall(openContractCall);\n/** A wrapper for selecting a wallet (if none is selected) and then calling the {@link openContractDeploy} action. */\nexport const showContractDeploy = wrapConnectCall(openContractDeploy);\n/** A wrapper for selecting a wallet (if none is selected) and then calling the {@link openSignTransaction} action. */\nexport const showSignTransaction = wrapConnectCall(openSignTransaction);\n\n/** A wrapper for selecting a wallet (if none is selected) and then calling the {@link openPsbtRequestPopup} action. */\nexport const showPsbt = wrapConnectCall(openPsbtRequestPopup);\n/** A wrapper for selecting a wallet (if none is selected) and then calling the {@link openProfileUpdateRequestPopup} action. */\nexport const showProfileUpdate = wrapConnectCall(openProfileUpdateRequestPopup);\n/** A wrapper for selecting a wallet (if none is selected) and then calling the {@link openSignatureRequestPopup} action. */\nexport const showSignMessage = wrapConnectCall(openSignatureRequestPopup);\n/** A wrapper for selecting a wallet (if none is selected) and then calling the {@link openStructuredDataSignatureRequestPopup} action. */\nexport const showSignStructuredMessage = wrapConnectCall(openStructuredDataSignatureRequestPopup);\n\n/** Disconnect selected wallet. Alias for {@link clearSelectedProviderId} */\nexport const disconnect = clearSelectedProviderId;\n\n/**\n * @deprecated Use the renamed {@link showConnect} method\n */\nexport const showBlockstackConnect = showConnect;\n", "const source = 'asigna-stx';\n\nconst generateCall = (payload: string, key: string) => {\n  return new Promise(res => {\n    function listener(message: MessageEvent<any>) {\n      if (message.data.source === source && message.data[key]) {\n        res(message.data[key]);\n        window.removeEventListener('message', listener);\n      }\n    }\n    window.addEventListener('message', listener);\n    window.top.postMessage(generateAsignaMessage(payload, key), '*');\n  });\n};\n\nconst AsignaIframeProvider = {\n  authenticationRequest: async (payload: string) => {\n    return generateCall(payload, 'authenticationRequest');\n  },\n  transactionRequest: async (payload: string) => {\n    return generateCall(payload, 'transactionRequest');\n  },\n};\nconst generateAsignaMessage = (payload: string, key: string) => {\n  return { source, [key]: payload };\n};\n\nexport const initializeAsignaProvider = () => {\n  if (typeof window === 'undefined') return;\n\n  const isIframe = window.top !== window.self;\n  if (isIframe) {\n    window['AsignaProvider'] = AsignaIframeProvider;\n  }\n};\n", "import { WebBTCProvider } from '@stacks/connect-ui';\nimport { initializeAsignaProvider } from './asigna';\n\ninitializeAsignaProvider();\n\nexport const DEFAULT_PROVIDERS: WebBTCProvider[] = [\n  {\n    id: 'LeatherProvider',\n    name: 'Leather',\n    icon: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgdmlld0JveD0iMCAwIDEyOCAxMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMjgiIGhlaWdodD0iMTI4IiByeD0iMjYuODM4NyIgZmlsbD0iIzEyMTAwRiIvPgo8cGF0aCBkPSJNNzQuOTE3MSA1Mi43MTE0QzgyLjQ3NjYgNTEuNTQwOCA5My40MDg3IDQzLjU4MDQgOTMuNDA4NyAzNy4zNzYxQzkzLjQwODcgMzUuNTAzMSA5MS44OTY4IDM0LjIxNTQgODkuNjg3MSAzNC4yMTU0Qzg1LjUwMDQgMzQuMjE1NCA3OC40MDYxIDQwLjUzNjggNzQuOTE3MSA1Mi43MTE0Wk0zOS45MTEgODMuNDk5MUMzMC4wMjU2IDgzLjQ5OTEgMjkuMjExNSA5My4zMzI0IDM5LjA5NjkgOTMuMzMyNEM0My41MTYzIDkzLjMzMjQgNDguODY2MSA5MS41NzY0IDUxLjY1NzMgODguNDE1N0M0Ny41ODY4IDg0LjkwMzggNDQuMjE0MSA4My40OTkxIDM5LjkxMSA4My40OTkxWk0xMDIuODI5IDc5LjI4NDhDMTAzLjQxIDk1Ljc5MDcgOTUuMDM2OSAxMDUuMDM5IDgwLjg0ODQgMTA1LjAzOUM3Mi40NzQ4IDEwNS4wMzkgNjguMjg4MSAxMDEuODc4IDU5LjMzMyA5Ni4wMjQ5QzU0LjY4MSAxMDEuMTc2IDQ1Ljg0MjMgMTA1LjAzOSAzOC41MTU0IDEwNS4wMzlDMTMuMjc4NSAxMDUuMDM5IDE0LjMyNTIgNzIuODQ2MyA0MC4wMjczIDcyLjg0NjNDNDUuMzc3MSA3Mi44NDYzIDQ5LjkxMjggNzQuMjUxMSA1NS43Mjc3IDc3Ljg4TDU5LjU2NTYgNjQuNDE3N0M0My43NDg5IDYwLjA4NjQgMzUuODQwNSA0Ny45MTE4IDQzLjYzMjYgMzAuNDY5M0g1Ni4xOTI5QzQ5LjIxNSA0Mi4wNTg2IDUzLjk4MzIgNTEuNjU3OCA2Mi44MjIgNTIuNzExNEM2Ny41OTAzIDM1LjczNzIgNzcuODI0NiAyMi41MDkgOTEuNDMxNiAyMi41MDlDOTkuMTA3NCAyMi41MDkgMTA1LjE1NSAyNy41NDI4IDEwNS4xNTUgMzYuNjczN0MxMDUuMTU1IDUxLjMwNjYgODYuMDgxOSA2My4yNDcxIDcxLjY2MDcgNjQuNDE3N0w2NS43Mjk1IDg1LjM3MjFDNzIuNDc0OCA5My4yMTUzIDkxLjE5OSAxMDAuODI0IDkxLjE5OSA3OS4yODQ4SDEwMi44MjlaIiBmaWxsPSIjRjVGMUVEIi8+Cjwvc3ZnPgo=',\n\n    webUrl: 'https://leather.io',\n    chromeWebStoreUrl:\n      'https://chrome.google.com/webstore/detail/hiro-wallet/ldinpeekobnhjjdofggfgjlcehhmanlj',\n    mozillaAddOnsUrl: 'https://leather.io/install-extension',\n  },\n  {\n    id: 'XverseProviders.StacksProvider',\n    name: 'Xverse Wallet',\n    icon: 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MDAiIGhlaWdodD0iNjAwIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGZpbGw9IiMxNzE3MTciIGQ9Ik0wIDBoNjAwdjYwMEgweiIvPjxwYXRoIGZpbGw9IiNGRkYiIGZpbGwtcnVsZT0ibm9uemVybyIgZD0iTTQ0MCA0MzUuNHYtNTFjMC0yLS44LTMuOS0yLjItNS4zTDIyMCAxNjIuMmE3LjYgNy42IDAgMCAwLTUuNC0yLjJoLTUxLjFjLTIuNSAwLTQuNiAyLTQuNiA0LjZ2NDcuM2MwIDIgLjggNCAyLjIgNS40bDc4LjIgNzcuOGE0LjYgNC42IDAgMCAxIDAgNi41bC03OSA3OC43Yy0xIC45LTEuNCAyLTEuNCAzLjJ2NTJjMCAyLjQgMiA0LjUgNC42IDQuNUgyNDljMi42IDAgNC42LTIgNC42LTQuNlY0MDVjMC0xLjIuNS0yLjQgMS40LTMuM2w0Mi40LTQyLjJhNC42IDQuNiAwIDAgMSA2LjQgMGw3OC43IDc4LjRhNy42IDcuNiAwIDAgMCA1LjQgMi4yaDQ3LjVjMi41IDAgNC42LTIgNC42LTQuNloiLz48cGF0aCBmaWxsPSIjRUU3QTMwIiBmaWxsLXJ1bGU9Im5vbnplcm8iIGQ9Ik0zMjUuNiAyMjcuMmg0Mi44YzIuNiAwIDQuNiAyLjEgNC42IDQuNnY0Mi42YzAgNCA1IDYuMSA4IDMuMmw1OC43LTU4LjVjLjgtLjggMS4zLTIgMS4zLTMuMnYtNTEuMmMwLTIuNi0yLTQuNi00LjYtNC42TDM4NCAxNjBjLTEuMiAwLTIuNC41LTMuMyAxLjNsLTU4LjQgNTguMWE0LjYgNC42IDAgMCAwIDMuMiA3LjhaIi8+PC9nPjwvc3ZnPg==',\n\n    webUrl: 'https://xverse.app',\n    chromeWebStoreUrl:\n      'https://chrome.google.com/webstore/detail/xverse-wallet/idnnbdplmphpflfnlkomgpfbpcgelopg',\n    googlePlayStoreUrl: 'https://play.google.com/store/apps/details?id=com.secretkeylabs.xverse',\n    iOSAppStoreUrl: 'https://apps.apple.com/app/xverse-bitcoin-web3-wallet/id1552272513',\n    mozillaAddOnsUrl: 'https://www.xverse.app/download',\n  },\n  {\n    id: 'AsignaProvider',\n    name: 'Asigna Multisig',\n    icon: 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMDEwMCIgZD0iTTAgMGgzMnYzMkgweiIvPjxwYXRoIGZpbGw9InVybCgjYSkiIGQ9Ik0xNS4xMSA1LjU1YTMgMyAwIDAgMC0xLjgyIDEuM2wtLjA1LjA4LS40My43Mi0uMDcuMTEtLjUuODUtLjA1LjA5LTEuMjkgMi4xOC0uMDQuMDctLjQ3LjgtLjA2LjEtLjQ2Ljc4LS4wNy4xMS0xLjYzIDIuNzYtLjA3LjExLS4zOC42Ni0uMDUuMDgtLjczIDEuMjQtLjM1LjYtLjQuNjctLjA1LjA5TDUuMSAyMC43bC0uMTEuMTgtLjE0LjIzLS4wNy4xMy0uMzMuNTUtLjA0LjA3di4wMWExLjI2IDEuMjYgMCAwIDAtLjE0LjQ3IDEuMzEgMS4zMSAwIDAgMCAxLjI0IDEuNGgxLjVsLjA1LS4wNi4wNC0uMDYuODctMS4yMS4wNS0uMDguNzctMS4wNy4wNS0uMDcuNC0uNTcuMDUtLjA2LjI0LS4zNGExLjUyIDEuNTIgMCAwIDEgMS4zOS0uNjIgMS41IDEuNSAwIDAgMSAuNjQuMiAxLjQ3IDEuNDcgMCAwIDEgLjczIDEuMjcgMS40NCAxLjQ0IDAgMCAxLS4yNy44NGwtLjYzLjg4LS4wNS4wNy0uMzIuNDUtLjA2LjA4LS4wOC4xMi0uMTIuMTYtLjA1LjA4aDIuMTNhMi4zMiAyLjMyIDAgMCAwIDEuNzctLjk2bDEuMTgtMS42My43Ny0xLjA4IDEuMy0xLjhhMS4yNCAxLjI0IDAgMCAxIC41NS0uNDNsLjA4LS4wM2ExLjMgMS4zIDAgMCAxIC4zLS4wNiAxLjI4IDEuMjggMCAwIDEgMS4xNS41NGwuMTEuMmExLjEzIDEuMTMgMCAwIDEgLjEuNDEgMS4xOSAxLjE5IDAgMCAxLS4yMy43N2wtLjAzLjA1LS41Ny44LS43Ljk4LS4yNy4zN2ExLjIyIDEuMjIgMCAwIDAtLjIuNSAxLjA1IDEuMDUgMCAwIDAtLjAyLjIzdi4wNmExLjE3IDEuMTcgMCAwIDAgLjE0LjQzbC4wMi4wNS4wNy4xYTEuNDQgMS40NCAwIDAgMCAuMS4xMWwuMDUuMDYuMDEuMDFhMS44IDEuOCAwIDAgMCAuMTQuMWMwIC4wMi4wMi4wMy4wNC4wM2ExIDEgMCAwIDAgLjA4LjA1bC4wNy4wNGExLjI1IDEuMjUgMCAwIDAgLjUuMWg2LjljLjEgMCAuMi0uMDEuMjktLjAzbC4wNi0uMDJhMS4yNyAxLjI3IDAgMCAwIC4yNy0uMS41Ny41NyAwIDAgMCAuMDctLjAzIDEuMjEgMS4yMSAwIDAgMCAuMjYtLjE5bC4wOC0uMDdhLjkyLjkyIDAgMCAwIC4xNS0uMTkgMS41NSAxLjU1IDAgMCAwIC4wOS0uMTdsLjAyLS4wNWExLjIyIDEuMjIgMCAwIDAgLjA4LS4yNnYtLjA0bC4wMi0uMDh2LS4wOGExLjMyIDEuMzIgMCAwIDAtLjItLjc0bC0xLjYtMi42NC0uMDYtLjEtLjItLjMyLS4zMy0uNTR2LS4wMWwtLjA1LS4wOC0xLjMtMi4xNS0uMDctLjEtLjA0LS4wNi0uOC0xLjMyLS4wNC0uMDctLjItLjM0LS4xLS4xNC0uMS0uMTYtLjUzLS45LS4xMy0uMi0uMDktLjE0LTIuMTctMy41Ny0uMDQtLjA3LS43Mi0xLjE5LS4wNS0uMDctLjQtLjY1YTIuNjUgMi42NSAwIDAgMC0uMy0uNCAyLjk2IDIuOTYgMCAwIDAtLjk3LS43NCAzLjA0IDMuMDQgMCAwIDAtMS4zLS4zYy0uMjUgMC0uNS4wNC0uNzQuMVoiLz48cGF0aCBmaWxsPSJ1cmwoI2IpIiBkPSJNMTkgMTYuM2E1LjQ1IDUuNDUgMCAwIDAtLjgzIDEuNTZsLS4wNC4xNWExLjM2IDEuMzYgMCAwIDEgLjI4LS4xNiAxLjI0IDEuMjQgMCAwIDEgLjM4LS4wOGguMWExLjI4IDEuMjggMCAwIDEgMS4wNS41NGMuMDQuMDYuMDguMTMuMS4yYTEuMjQgMS4yNCAwIDAgMSAuMDkuMjcgMS4xOSAxLjE5IDAgMCAxLS4yLjkxbC0uMDQuMDUtLjU3Ljc5LS43Ljk5LS4yNy4zN2ExLjIzIDEuMjMgMCAwIDAtLjIuNDIgMS4wNiAxLjA2IDAgMCAwLS4wMi4zMXYuMDZhMS4xNyAxLjE3IDAgMCAwIC4xNi40Ny45My45MyAwIDAgMCAuMDcuMSAxLjUgMS41IDAgMCAwIC4xLjEybC4wNS4wNmguMDFhMS45NCAxLjk0IDAgMCAwIC4wOS4wOCAxIDEgMCAwIDAgLjE3LjFsLjA3LjA0YTEuMjUgMS4yNSAwIDAgMCAuNS4xaDYuOWMuMSAwIC4yIDAgLjI4LS4wMmwuMDctLjAyYTEuMzIgMS4zMiAwIDAgMCAuMzQtLjEzbC4xNi0uMS4wMy0uMDNhMS4yOSAxLjI5IDAgMCAwIC4yLS4yIDIuNDMgMi40MyAwIDAgMCAuMTItLjE3Yy4wMy0uMDMuMDUtLjA4LjA3LS4xMmwuMDItLjA1YTEuMjEgMS4yMSAwIDAgMCAuMDktLjN2LS4wOGwuMDEtLjA5YTEuMzIgMS4zMiAwIDAgMC0uMi0uNzNsLTEuNi0yLjY0LS4wNi0uMS0uMi0uMzItLjMzLS41NHYtLjAybC0uMDUtLjA3LTEuMy0yLjE1LS4xMi0uMDctLjA3LS4wNGE0Ljk0IDQuOTQgMCAwIDAtMi40Ni0uNjdjLTEuMDMgMC0xLjc2LjU3LTIuMjYgMS4yWiIvPjxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik0xMi4yOSAyMS4wOGMwIC4yOS0uMDkuNTgtLjI3Ljg0bC0xLjMxIDEuODRIN2wyLjUyLTMuNTNhMS41NCAxLjU0IDAgMCAxIDIuMS0uMzZjLjQzLjI4LjY2Ljc0LjY2IDEuMloiLz48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMTEuMTYgMjEuMjVhLjU2LjU2IDAgMCAxLS41Ny41NS41Ni41NiAwIDAgMS0uNTctLjU2LjU2LjU2IDAgMCAxIC41Ny0uNTUuNTYuNTYgMCAwIDEgLjU3LjU2WiIvPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0iYSIgeDE9IjE1LjIzIiB4Mj0iMTkuMyIgeTE9IjI1Ljc4IiB5Mj0iNi4xMSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIHN0b3AtY29sb3I9IiM2NTIyRjQiLz48c3RvcCBvZmZzZXQ9Ii41NSIgc3RvcC1jb2xvcj0iIzlCNkJGRiIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI0E1ODVGRiIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJiIiB4MT0iMjIuNTkiIHgyPSIyNC44IiB5MT0iMjQuNzEiIHkyPSIxNS41MyIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIHN0b3AtY29sb3I9IiM0MjFGOEIiLz48c3RvcCBvZmZzZXQ9Ii41NSIgc3RvcC1jb2xvcj0iIzcyMzBGRiIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzk3NzNGRiIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjwvc3ZnPg==',\n    webUrl: 'https://asigna.io',\n    chromeWebStoreUrl: 'https://stx.asigna.io/',\n  },\n];\n"],
  "mappings": "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AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;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",
  "names": ["toByteArray", "fromByteArray", "len", "i", "len2", "hmac", "u", "i", "l", "a", "b", "encode", "x", "decode", "alphabet", "padding", "checksum", "sha256", "wordlist", "entropyToMnemonic", "mnemonicToEntropy", "validateMnemonic", "encode", "decode", "require_lib", "a", "b", "k", "k2", "x", "x2", "y", "Point", "B", "D", "E", "F", "H", "d", "W", "window", "f", "isCompressed", "hexToBytes", "bytesToHex", "Signature", "concatBytes", "hexes", "rt", "u", "q", "m", "hashLen", "getPublicKey", "getSharedSecret", "signSync", "verify", "crypto", "randomBytes", "SECP256K1Client", "isSubtleCryptoAvailable", "createUnsecuredToken", "TokenSigner", "TokenVerifier", "decodeToken", "getZoneFileTemplate", "makeZoneFile", "jsonZoneFile", "template", "processOrigin", "processTTL", "processSOA", "processNS", "processA", "processAAAA", "processCNAME", "processMX", "processPTR", "processTXT", "processSRV", "processSPF", "processURI", "processValues", "replace", "data", "ret", "name", "ttl", "key", "value", "record", "host", "ip", "alias", "preference", "txtData", "txt", "Array", "map", "datum", "join", "priority", "weight", "port", "target", "Date", "toISOString", "time", "Math", "round", "now", "parseZoneFile", "text", "removeComments", "flatten", "parseRRs", "re", "_m", "g1", "captured", "match", "exec", "replacement", "push", "arrText", "split", "cur", "splice", "index", "length", "rrs", "rr", "trim", "uRR", "toUpperCase", "test", "parseTXT", "indexOf", "$origin", "$ttl", "parseInt", "soa", "parseSOA", "ns", "parseNS", "a", "parseA", "aaaa", "parseAAAA", "cname", "parseCNAME", "mx", "parseMX", "ptr", "parsePTR", "srv", "parseSRV", "spf", "parseSPF", "uri", "parseURI", "rrTokens", "l", "minimum", "expire", "retry", "refresh", "serial", "rname", "mname", "isNaN", "result", "recordsSoFar", "urrTokens", "lastIndexOf", "Error", "indexTXT", "stripText", "tokenTxt", "slice", "currentOrigin", "unshift", "fullname", "ZoneFile", "zoneFile", "JSON", "parse", "stringify", "undefined", "toJSON", "toString", "global", "exports", "args", "index", "transform", "iterator", "_", "callback", "q", "l", "x", "cb", "a", "b", "filter", "hasOwnProperty", "memoized", "k", "a", "self", "l", "next", "data", "ne", "require_schema_inspector", "self", "exports", "g", "Headers", "decode", "fetch", "BLOCKSTACK_HANDLER", "x", "_", "u", "ERROR_CODES", "BlockstackError", "BlockstackError", "ERROR_CODES", "levels", "levelToInt", "intToLevel", "without0x", "hexes", "_", "bytesToHex", "u", "hexToBytes", "without0x", "utf8ToBytes", "bytesToUtf8", "a", "hexToBytes", "createCipher", "bytesToHex", "base58", "hexToBytes", "bytesToHex", "InvalidPublicKeyReason", "a", "b", "bytesToHex", "hexToBytes", "bytesToUtf8", "utf8ToBytes", "utf8ToBytes", "location", "import_jsontokens", "location", "BLOCKSTACK_HANDLER", "import_jsontokens", "addressFromPublicKeys", "import_jsontokens", "import_jsontokens", "config", "ERROR_CODES", "levels", "levelToInt", "intToLevel", "Logger", "config", "makeUUID4", "hexes", "_", "makeUUID4", "import_zone_file", "Logger", "defaultFetchOpts", "fetchWrapper", "defaultFetchOpts", "argsForCreateFetchFn", "fetchWrapper", "createFetchFn", "ERROR_CODES", "levels", "levelToInt", "intToLevel", "bigIntToBytes", "hexToBytes", "bn", "bytesToHex", "bigIntToBytes", "hexToBytes", "hexes", "_", "bytesToHex", "u", "utf8ToBytes", "concatBytes", "a", "ChainID", "TransactionVersion", "PeerNetworkID", "writeUInt32BE", "TransactionVersion", "createFetchFn", "ERROR_CODES", "levels", "levelToInt", "intToLevel", "without0x", "hexes", "_", "bytesToHex", "u", "hexToBytes", "without0x", "ChainID", "StacksMessageType", "PayloadType", "ClarityVersion", "AnchorMode", "TransactionVersion", "PostConditionMode", "PostConditionType", "AuthType", "AddressHashMode", "AddressVersion", "PubKeyEncoding", "FungibleConditionCode", "NonFungibleConditionCode", "PostConditionPrincipalID", "AssetType", "TxRejectedReason", "import_c32check", "import_c32check", "ClarityType", "import_c32check", "TenureChangeCause", "AuthFieldType", "hexToBytes", "utf8ToBytes", "hexToBytes", "serializeCV", "serializeCV", "writeUInt32BE", "concatBytes", "bigIntToBytes", "a", "b", "utf8ToBytes", "utf8ToBytes", "import_polyfill", "defaultFetchOpts", "fetchWrapper", "defaultFetchOpts", "argsForCreateFetchFn", "fetchWrapper", "createFetchFn", "HIRO_MAINNET_DEFAULT", "HIRO_TESTNET_DEFAULT", "HIRO_MOCKNET_DEFAULT", "StacksNetworks", "StacksNetwork", "TransactionVersion", "createFetchFn", "StacksMainnet", "StacksTestnet", "StacksDevnet", "StacksMocknet", "import_c32check", "ClarityAbiTypeId", "a", "getStacksProvider", "getProviderFromId", "getSelectedProviderId", "isStacksWalletInstalled", "legacyNetworkFromConnectNetwork", "network", "LegacyStacksNetwork", "LegacyStacksMainnet", "TransactionVersion", "LegacyStacksTestnet", "defaultAuthURL", "isMobile", "ua", "shouldUsePopup", "getOrCreateUserSession", "userSession", "appConfig", "AppConfig", "UserSession", "authenticate", "authOptions", "provider", "redirectTo", "manifestPath", "onFinish", "onCancel", "sendToSignIn", "_userSession", "appDetails", "transitKey", "authRequest", "authResponse", "token", "decodeToken", "authResponsePayload", "error", "getUserData", "TransactionTypes", "ContractCallArgumentType", "getUserSession", "hasAppPrivateKey", "e", "getKeys", "privateKey", "publicKey", "SECP256K1Client", "getStxAddress", "options", "_a", "stxAddress", "_network", "stxAddresses", "chainIdToKey", "ChainId", "getDefaults", "defaults", "__spreadProps", "__spreadValues", "signPayload", "payload", "postConditions", "postConditionToHex", "pc", "bytesToHex", "legacySerializePostCondition", "TokenSigner", "createUnsignedTransactionPayload", "createUnsecuredToken", "openTransactionPopup", "_b", "_c", "txResponse", "txRaw", "txBytes", "hexToBytes", "stacksTransaction", "deserializeTransaction", "makeContractCallToken", "functionArgs", "_options", "__objRest", "args", "arg", "serializeCV", "legacySerializeCV", "makeContractDeployToken", "makeSTXTransferToken", "amount", "makeSignTransaction", "txHex", "generateTokenAndOpenPopup", "makeTokenFn", "openContractCall", "openContractDeploy", "openSTXTransfer", "openSignTransaction", "getDefaultPsbtRequestOptions", "openPsbtPopup", "psbtResponse", "makePsbtToken", "allowedSighash", "hex", "signAtIndex", "openPsbtRequestPopup", "getDefaultSignatureRequestOptions", "openSignaturePopup", "signatureResponse", "signMessage", "openSignatureRequestPopup", "openStructuredDataSignaturePopup", "parseUnserializableBigIntValues", "message", "domain", "signStructuredMessage", "openStructuredDataSignatureRequestPopup", "getDefaultProfileUpdateRequestOptions", "openProfileUpdatePopup", "profileUpdateResponse", "makeProfileUpdateToken", "profile", "openProfileUpdateRequestPopup", "SignatureHash", "source", "generateCall", "key", "res", "listener", "generateAsignaMessage", "AsignaIframeProvider", "initializeAsignaProvider", "DEFAULT_PROVIDERS", "wrapConnectCall", "action", "persistSelection", "selectedId", "selectedProvider", "defineCustomElements", "defaultProviders", "installedProviders", "getInstalledProviders", "element", "originalOverflow", "closeModal", "handleEsc", "ev", "showConnect", "showSTXTransfer", "showContractCall", "showContractDeploy", "showSignTransaction", "showPsbt", "showProfileUpdate", "showSignMessage", "showSignStructuredMessage", "disconnect", "clearSelectedProviderId", "showBlockstackConnect"]
}
