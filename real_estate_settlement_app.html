          {/* Escrow Actions */}
          <div className="bg-green-50/50 rounded-xl p-4 mb-6">
            <h3 className="font-semibold text-green-600 mb-3">Escrow Actions</h3>
            <div className="space-y-3">
              {/* Currency Selection */}
              <div>
                <label className="block text-sm text-gray-600 mb-1">Currency:</label>
                <select
                  value={selectedCurrency}
                  onChange={(e) => setSelectedCurrency(e.target.value)}
                  className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-green-500 bg-white"
                >
                  {supportedCurrencies.map((currency) => (
                    <option key={currency.symbol} value={currency.symbol}>
                      {currency.symbol} - {currency.name}
                    </option>
                  ))}
                </select>
                <div className="mt-1 text-xs text-gray-500 flex items-center gap-1">
                  {supportedCurrencies.find(c => c.symbol === selectedCurrency)?.isNative ? (
                    <span className="inline-block w-2 h-2 bg-green-500 rounded-full"></span>
                  ) : (
                    <span className="inline-block w-2 h-2 bg-blue-500 rounded-full"></span>
                  )}
                  {supportedCurrencies.find(c => c.symbol === selectedCurrency)?.description}
                </div>
              </div>

              {/* Amount Input */}
              <div>
                <label className="block text-sm text-gray-600 mb-1">
                  Escrow Amount ({selectedCurrency}):
                </label>
                <div className="relative">
                  <input
                    type="number"
                    value={escrowAmount}
                    onChange={(e) => setEscrowAmount(e.target.value)}
                    min="0"
                    step="0.01"
                    placeholder={`Enter amount in ${selectedCurrency}`}
                    className="w-full px-3 py-2 pr-16 border border-gray-300 rounded-lg focus:outline-none focus:border-green-500"
                  />
                  <span className="absolute right-3 top-2 text-sm font-semibold text-gray-500">
                    {selectedCurrency}
                  </span>
                </div>
                {escrowAmount && (
                  <div className="mt-1 text-xs text-gray-600">
                    Earnest Money (10%): {(parseFloat(escrowAmount) * 0.1).toFixed(2)} {selectedCurrency}
                  </div>
                )}
              </div>

              {/* Currency Info Card */}
              <div className="bg-white/50 rounded-lg p-3 border border-green-200">
                <div className="text-xs space-y-1">
                  <div className="flex justify-between">
                    <span className="text-gray-600">Currency Type:</span>
                    <span className="font-semibold">
                      {supportedCurrencies.find(c => c.symbol === selectedCurrency)?.isNative ? 'Native' : 'SIP-010 Token'}
                    </span>
                  </div>
                  <div className="flex justify-between">
                    <span className="text-gray-600">Decimals:</span>
                    <span className="font-semibold">
                      {supportedCurrencies.find(c => c.symbol === selectedCurrency)?.decimals}
                    </span>
                  </div>
                  {!supportedCurrencies.find(c => c.symbol === selectedCurrency)?.isNative && (
                    <div className="mt-2 pt-2 border-t border-green-200">
                      <div className="text-gray-600 mb-1">Contract:</div>
                      <div className="font-mono text-[10px] break-all bg-gray-50 p-1 rounded">
                        {supportedCurrencies.find(c => c.symbol === selectedCurrency)?.contract}
                      </div>
                    </div>
                  )}
                </div>
              </div>

              {/* Action Buttons */}
              <button
                onClick={createEscrow}
                disabled={!selectedProperty || !isWalletConnected || isLoading || !escrowAmount}
                className="w-full px-4 py-2 bg-green-500 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-green-600 transition-colors font-semibold"
              >
                {isLoading ? 'Processing...' : `Create Escrow (${selectedCurrency})`}
              </button>
              <button
                onClick={checkEscrowStatus}
                disabled={!selectedProperty || isLoading}
                className="w-full px-4 py-2 bg-green-100 text-green-700 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-green-200 transition-colors"
              >
                Check Escrow Status
              </button>
            </div>
          </div>

          {/* Currency Info Panel */}
          <div className="bg-blue-50/50 rounded-xl p-4 mb-6">
            <h3 className="font-semibold text-blue-600 mb-3">üí∞ Supported Currencies</h3>
            <div className="space-y-2">
              {supportedCurrencies.map((currency) => (
                <div 
                  key={currency.symbol}
                  className={`p-2 rounded-lg border transition-all cursor-pointer ${
                    selectedCurrency === currency.symbol 
                      ? 'bg-blue-100 border-blue-400' 
                      : 'bg-white/50 border-blue-200 hover:bg-blue-50'
                  }`}
                  onClick={() => setSelectedCurrency(currency.symbol)}
                >
                  <div className="flex items-start justify-between">
                    <div className="flex-1">
                      <div className="font-semibold text-sm flex items-center gap-2">
                        {currency.symbol}
                        {currency.isNative && (
                          <span className="text-xs bg-green-500 text-white px-2 py-0.5 rounded-full">
                            Native
                          </span>
                        )}
                        {currency.symbol === 'USDh' && (
                          <span className="text-xs bg-purple-500 text-white px-2 py-0.5 rounded-full">
                            Stablecoin
                          </span>
                        )}
                      </div>
                      <div className="text-xs text-gray-600 mt-0.5">{currency.name}</div>
                    </div>
                    <div className={`w-4 h-4 rounded-full border-2 flex items-center justify-center ${
                      selectedCurrency === currency.symbol 
                        ? 'border-blue-600 bg-blue-600' 
                        : 'border-gray-300'
                    }`}>
                      {selectedCurrency === currency.symbol && (
                        <div className="w-2 h-2 bg-white rounded-full"></div>
                      )}
                    </div>
                  </div>
                </div>
              ))}
            </div>
            <div className="mt-3 p-2 bg-yellow-50 border border-yellow-200 rounded-lg">
              <div className="text-xs text-yellow-800">
                <strong>Note:</strong> sBTC and USDh require SIP-010 token approval before escrow funding.
              </div>
            </div>
          </div>import React, { useState, useEffect, useRef } from 'react';
import { 
  AppConfig, 
  UserSession, 
  showConnect, 
  openContractCall,
  StacksTestnet,
  makeContractCall,
  broadcastTransaction,
  AnchorMode,
  PostConditionMode,
  stringUtf8CV,
  uintCV,
  principalCV,
  tupleCV,
  intCV
} from '@stacks/connect';
import { 
  callReadOnlyFunction,
  cvToJSON
} from '@stacks/transactions';

// Leaflet imports would be handled by Vite in a real setup
// For this demo, we'll simulate the map functionality

const RealEstateApp = () => {
  // App configuration for Stacks testnet
  const appConfig = new AppConfig(['store_write', 'publish_data']);
  const userSession = new UserSession({ appConfig });
  
  // State management
  const [isWalletConnected, setIsWalletConnected] = useState(false);
  const [userAddress, setUserAddress] = useState('');
  const [selectedProperty, setSelectedProperty] = useState(null);
  const [isLoading, setIsLoading] = useState(false);
  const [registryStatus, setRegistryStatus] = useState('');
  const [escrowAmount, setEscrowAmount] = useState('');
  const [selectedCurrency, setSelectedCurrency] = useState('STX');
  const [addressSearch, setAddressSearch] = useState('');
  const [mapCenter, setMapCenter] = useState({ lat: 40.7128, lng: -74.0060 });
  
  // Supported currencies with their details
  const supportedCurrencies = [
    { 
      symbol: 'STX', 
      name: 'Stacks', 
      decimals: 6, 
      isNative: true,
      description: 'Native Stacks token'
    },
    { 
      symbol: 'sBTC', 
      name: 'Stacks Bitcoin', 
      decimals: 8, 
      isNative: false,
      contract: 'SP3DX3H4FEYZJZ586MFBS25ZW3HZDMEW92260R2PR.Wrapped-Bitcoin',
      description: 'Bitcoin on Stacks'
    },
    { 
      symbol: 'USDh', 
      name: 'Hermetica USD', 
      decimals: 8, 
      isNative: false,
      contract: 'SP2XD7417HGPRTREMKF748VNEQPDRR0RMANB7X1NK.token-abtc',
      description: 'BTC-backed stablecoin'
    }
  ];
  
  // Contract configuration for testnet
  const contractAddress = 'ST1PQHQKV0RJXZFY1DGX8MNSNYVE3VGZJSRTPGZGM'; // Example testnet address
  const contractName = 'real-estate-registry';
  const network = new StacksTestnet();
  
  const mapRef = useRef(null);

  useEffect(() => {
    // Check if user is already authenticated
    if (userSession.isSignInPending()) {
      userSession.handlePendingSignIn().then((userData) => {
        setIsWalletConnected(true);
        setUserAddress(userData.profile.stxAddress.testnet);
      });
    } else if (userSession.isUserSignedIn()) {
      const userData = userSession.loadUserData();
      setIsWalletConnected(true);
      setUserAddress(userData.profile.stxAddress.testnet);
    }
    
    // Initialize map simulation
    initializeMap();
  }, []);

  const initializeMap = () => {
    // In a real Vite app, this would initialize Leaflet map
    console.log('Map initialized at coordinates:', mapCenter);
  };

  const connectWallet = () => {
    showConnect({
      appDetails: {
        name: 'Real Estate Settlement DApp',
        icon: window.location.origin + '/logo.png',
      },
      redirectTo: '/',
      onFinish: () => {
        const userData = userSession.loadUserData();
        setIsWalletConnected(true);
        setUserAddress(userData.profile.stxAddress.testnet);
      },
      userSession,
    });
  };

  const disconnectWallet = () => {
    userSession.signUserOut('/');
    setIsWalletConnected(false);
    setUserAddress('');
  };

  const handleMapClick = (coordinates) => {
    const { lat, lng } = coordinates;
    const propertyId = generatePropertyId(lat, lng);
    
    setSelectedProperty({
      id: propertyId,
      lat: lat,
      lng: lng,
      address: `${lat.toFixed(6)}, ${lng.toFixed(6)}`,
      parcelId: `PARCEL-${Date.now()}`,
      status: 'available'
    });
    
    checkRegistryStatus(propertyId);
  };

  const generatePropertyId = (lat, lng) => {
    const latStr = lat.toFixed(6).replace('.', '').replace('-', 'N');
    const lngStr = lng.toFixed(6).replace('.', '').replace('-', 'W');
    return `PROP_${latStr}_${lngStr}`;
  };

  const searchAddress = async () => {
    if (!addressSearch) return;
    
    try {
      setIsLoading(true);
      // Using OpenStreetMap Nominatim API
      const response = await fetch(
        `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(addressSearch)}`
      );
      const data = await response.json();

      if (data && data.length > 0) {
        const result = data[0];
        const lat = parseFloat(result.lat);
        const lng = parseFloat(result.lon);
        
        setMapCenter({ lat, lng });
        handleMapClick({ lat, lng });
      } else {
        alert('Address not found. Please try a different search term.');
      }
    } catch (error) {
      console.error('Geocoding error:', error);
      alert('Error searching for address.');
    } finally {
      setIsLoading(false);
    }
  };

  const checkRegistryStatus = async (propertyId) => {
    try {
      setIsLoading(true);
      
      const functionArgs = [stringUtf8CV(propertyId)];
      
      const result = await callReadOnlyFunction({
        contractAddress,
        contractName,
        functionName: 'get-parcel-info',
        functionArgs,
        network,
        senderAddress: userAddress || contractAddress,
      });

      const jsonResult = cvToJSON(result);
      
      if (jsonResult.value === null) {
        setRegistryStatus('Property not registered in system');
        setSelectedProperty(prev => ({ ...prev, status: 'unregistered' }));
      } else {
        const parcelData = jsonResult.value;
        setRegistryStatus(`Property registered - Status: ${parcelData.status.value}`);
        setSelectedProperty(prev => ({ 
          ...prev, 
          status: parcelData.status.value,
          owner: parcelData.owner.value 
        }));
      }
    } catch (error) {
      console.error('Registry check error:', error);
      setRegistryStatus('Error checking registry status');
    } finally {
      setIsLoading(false);
    }
  };

  const registerProperty = async () => {
    if (!isWalletConnected || !selectedProperty) {
      alert('Please connect wallet and select a property.');
      return;
    }

    try {
      setIsLoading(true);
      
      const functionArgs = [
        stringUtf8CV(selectedProperty.id),
        tupleCV({
          'lat': intCV(Math.round(selectedProperty.lat * 1000000)),
          'lng': intCV(Math.round(selectedProperty.lng * 1000000))
        }),
        stringUtf8CV(selectedProperty.parcelId)
      ];

      const txOptions = {
        contractAddress,
        contractName,
        functionName: 'register-parcel',
        functionArgs,
        senderKey: userSession.loadUserData().appPrivateKey,
        network,
        anchorMode: AnchorMode.Any,
        postConditionMode: PostConditionMode.Allow,
      };

      const transaction = await makeContractCall(txOptions);
      const broadcastResponse = await broadcastTransaction(transaction, network);
      
      console.log('Transaction broadcast:', broadcastResponse);
      setRegistryStatus('Property registration submitted to blockchain');
      
    } catch (error) {
      console.error('Registration error:', error);
      setRegistryStatus('Error registering property');
    } finally {
      setIsLoading(false);
    }
  };

  const createEscrow = async () => {
    if (!isWalletConnected || !selectedProperty) {
      alert('Please connect wallet and select a property.');
      return;
    }

    if (!escrowAmount || parseFloat(escrowAmount) <= 0) {
      alert('Please enter a valid escrow amount.');
      return;
    }

    try {
      setIsLoading(true);
      
      const currencyInfo = supportedCurrencies.find(c => c.symbol === selectedCurrency);
      const multiplier = Math.pow(10, currencyInfo.decimals);
      const amountInBaseUnits = Math.round(parseFloat(escrowAmount) * multiplier);
      
      const functionArgs = [
        stringUtf8CV(selectedProperty.id),
        principalCV(userAddress), // seller - in real app, this would be different
        uintCV(amountInBaseUnits),
        uintCV(Math.round(amountInBaseUnits * 0.1)), // 10% earnest money
        uintCV(1000), // duration in blocks (~7 days)
        [], // conditions list - empty for now
        stringUtf8CV(selectedCurrency)
      ];

      const txOptions = {
        contractAddress,
        contractName: 'real-estate-escrow',
        functionName: 'create-escrow',
        functionArgs,
        senderKey: userSession.loadUserData().appPrivateKey,
        network,
        anchorMode: AnchorMode.Any,
        postConditionMode: PostConditionMode.Allow,
      };

      const transaction = await makeContractCall(txOptions);
      const broadcastResponse = await broadcastTransaction(transaction, network);
      
      console.log('Escrow creation transaction:', broadcastResponse);
      setRegistryStatus(`Escrow contract creation submitted (${selectedCurrency})`);
      
    } catch (error) {
      console.error('Escrow creation error:', error);
      setRegistryStatus('Error creating escrow contract');
    } finally {
      setIsLoading(false);
    }
  };

  const fundEscrow = async (escrowId) => {
    if (!isWalletConnected) {
      alert('Please connect wallet first.');
      return;
    }

    try {
      setIsLoading(true);
      
      const functionArgs = [uintCV(escrowId)];

      const txOptions = {
        contractAddress,
        contractName: 'real-estate-escrow',
        functionName: 'fund-escrow',
        functionArgs,
        senderKey: userSession.loadUserData().appPrivateKey,
        network,
        anchorMode: AnchorMode.Any,
        postConditionMode: PostConditionMode.Allow,
      };

      const transaction = await makeContractCall(txOptions);
      const broadcastResponse = await broadcastTransaction(transaction, network);
      
      console.log('Escrow funding transaction:', broadcastResponse);
      setRegistryStatus('Escrow funding transaction submitted');
      
    } catch (error) {
      console.error('Escrow funding error:', error);
      setRegistryStatus('Error funding escrow contract');
    } finally {
      setIsLoading(false);
    }
  };

  const getCurrencyDisplayAmount = (amount, currency) => {
    const currencyInfo = supportedCurrencies.find(c => c.symbol === currency);
    if (!currencyInfo) return amount;
    
    const divisor = Math.pow(10, currencyInfo.decimals);
    return (amount / divisor).toFixed(currencyInfo.decimals);
  };

  const checkEscrowStatus = async () => {
    if (!selectedProperty) {
      alert('Please select a property first.');
      return;
    }

    try {
      setIsLoading(true);
      
      const functionArgs = [stringUtf8CV(selectedProperty.id)];
      
      const result = await callReadOnlyFunction({
        contractAddress,
        contractName,
        functionName: 'get-escrow-contract',
        functionArgs,
        network,
        senderAddress: userAddress || contractAddress,
      });

      const jsonResult = cvToJSON(result);
      
      if (jsonResult.value === null) {
        setRegistryStatus('No active escrow contract found for this property');
      } else {
        setRegistryStatus('Active escrow contract found');
      }
      
    } catch (error) {
      console.error('Escrow status check error:', error);
      setRegistryStatus('Error checking escrow status');
    } finally {
      setIsLoading(false);
    }
  };

  // Simulate map click for demo purposes
  const simulateMapClick = () => {
    const randomLat = 40.7128 + (Math.random() - 0.5) * 0.1;
    const randomLng = -74.0060 + (Math.random() - 0.5) * 0.1;
    handleMapClick({ lat: randomLat, lng: randomLng });
  };

  return (
    <div className="min-h-screen bg-gradient-to-br from-indigo-500 via-purple-600 to-indigo-800">
      {/* Header */}
      <div className="bg-white/10 backdrop-blur-md border-b border-white/20 px-6 py-4">
        <h1 className="text-3xl font-light text-white">üè† Real Estate Settlement DApp</h1>
        <p className="text-white/80 mt-1">Stacks Testnet ‚Ä¢ Vite + React</p>
      </div>

      <div className="container mx-auto p-6 grid grid-cols-1 lg:grid-cols-3 gap-6 h-[calc(100vh-100px)]">
        {/* Map Section */}
        <div className="lg:col-span-2 bg-white/95 backdrop-blur-md rounded-2xl p-6 shadow-2xl">
          <div className="flex gap-3 mb-4">
            <input
              type="text"
              value={addressSearch}
              onChange={(e) => setAddressSearch(e.target.value)}
              placeholder="Search for property address..."
              className="flex-1 px-4 py-3 border-2 border-indigo-200 rounded-xl focus:outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-100 transition-all"
              onKeyPress={(e) => e.key === 'Enter' && searchAddress()}
            />
            <button
              onClick={searchAddress}
              disabled={isLoading}
              className="px-6 py-3 bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-xl font-semibold hover:shadow-lg hover:-translate-y-0.5 transition-all disabled:opacity-50"
            >
              Search
            </button>
          </div>

          {/* Map Placeholder */}
          <div className="bg-gradient-to-br from-gray-100 to-gray-200 rounded-xl h-full min-h-[400px] border-2 border-indigo-200 flex flex-col items-center justify-center relative overflow-hidden">
            <div className="absolute inset-0 bg-gradient-to-br from-indigo-50/50 to-purple-50/50"></div>
            <div className="relative z-10 text-center">
              <div className="text-6xl mb-4">üó∫Ô∏è</div>
              <p className="text-gray-600 mb-4">Interactive Map Component</p>
              <p className="text-sm text-gray-500 mb-4">
                Center: {mapCenter.lat.toFixed(4)}, {mapCenter.lng.toFixed(4)}
              </p>
              <button
                onClick={simulateMapClick}
                className="px-4 py-2 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 transition-colors"
              >
                Simulate Property Selection
              </button>
            </div>
            
            {selectedProperty && (
              <div className="absolute bottom-4 left-4 bg-white/90 backdrop-blur-sm p-3 rounded-lg shadow-lg">
                <div className="text-sm font-semibold text-indigo-600">Selected Property</div>
                <div className="text-xs text-gray-600">
                  {selectedProperty.lat.toFixed(6)}, {selectedProperty.lng.toFixed(6)}
                </div>
              </div>
            )}
          </div>
        </div>

        {/* Controls Section */}
        <div className="bg-white/95 backdrop-blur-md rounded-2xl p-6 shadow-2xl overflow-y-auto">
          {/* Wallet Section */}
          <div className="text-center mb-6">
            {!isWalletConnected ? (
              <button
                onClick={connectWallet}
                className="w-full px-6 py-3 bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-xl font-semibold hover:shadow-lg hover:-translate-y-0.5 transition-all"
              >
                Connect Stacks Wallet (Testnet)
              </button>
            ) : (
              <div>
                <div className="mb-3">
                  <div className="text-sm text-gray-600">Connected to Testnet</div>
                  <div className="font-mono text-xs bg-indigo-50 p-2 rounded-lg mt-1 break-all">
                    {userAddress}
                  </div>
                </div>
                <button
                  onClick={disconnectWallet}
                  className="px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors"
                >
                  Disconnect
                </button>
              </div>
            )}
          </div>

          {/* Selected Property */}
          <div className="bg-indigo-50/50 rounded-xl p-4 mb-6">
            <h3 className="font-semibold text-indigo-600 mb-3">Selected Property</h3>
            {selectedProperty ? (
              <div className="space-y-2 text-sm">
                <div className="flex justify-between">
                  <span className="text-gray-600">Property ID:</span>
                  <span className="font-mono text-xs">{selectedProperty.id.slice(0, 16)}...</span>
                </div>
                <div className="flex justify-between">
                  <span className="text-gray-600">Coordinates:</span>
                  <span>{selectedProperty.lat.toFixed(4)}, {selectedProperty.lng.toFixed(4)}</span>
                </div>
                <div className="flex justify-between">
                  <span className="text-gray-600">Status:</span>
                  <span className={`px-2 py-1 rounded-full text-xs font-semibold ${
                    selectedProperty.status === 'available' ? 'bg-green-100 text-green-800' :
                    selectedProperty.status === 'in-escrow' ? 'bg-yellow-100 text-yellow-800' :
                    'bg-gray-100 text-gray-800'
                  }`}>
                    {selectedProperty.status}
                  </span>
                </div>
              </div>
            ) : (
              <p className="text-gray-500 text-center py-4">Click on map or simulate selection</p>
            )}
          </div>

          {/* Registry Actions */}
          <div className="bg-purple-50/50 rounded-xl p-4 mb-6">
            <h3 className="font-semibold text-purple-600 mb-3">Registry Actions</h3>
            <div className="space-y-3">
              <button
                onClick={registerProperty}
                disabled={!selectedProperty || !isWalletConnected || isLoading}
                className="w-full px-4 py-2 bg-purple-500 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-purple-600 transition-colors"
              >
                Register Property
              </button>
              <button
                onClick={() => selectedProperty && checkRegistryStatus(selectedProperty.id)}
                disabled={!selectedProperty || isLoading}
                className="w-full px-4 py-2 bg-purple-100 text-purple-700 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-purple-200 transition-colors"
              >
                Check Registry Status
              </button>
            </div>
          </div>

          {/* Escrow Actions */}
          <div className="bg-green-50/50 rounded-xl p-4 mb-6">
            <h3 className="font-semibold text-green-600 mb-3">Escrow Actions</h3>
            <div className="space-y-3">
              <div>
                <label className="block text-sm text-gray-600 mb-1">Escrow Amount (STX):</label>
                <input
                  type="number"
                  value={escrowAmount}
                  onChange={(e) => setEscrowAmount(e.target.value)}
                  min="0"
                  step="0.01"
                  placeholder="Enter amount"
                  className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-green-500"
                />
              </div>
              <button
                onClick={createEscrow}
                disabled={!selectedProperty || !isWalletConnected || isLoading}
                className="w-full px-4 py-2 bg-green-500 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-green-600 transition-colors"
              >
                Create Escrow Contract
              </button>
              <button
                onClick={checkEscrowStatus}
                disabled={!selectedProperty || isLoading}
                className="w-full px-4 py-2 bg-green-100 text-green-700 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-green-200 transition-colors"
              >
                Check Escrow Status
              </button>
            </div>
          </div>

          {/* Status Display */}
          <div className="bg-gray-50/50 rounded-xl p-4">
            <h3 className="font-semibold text-gray-600 mb-3">Contract Status</h3>
            {isLoading ? (
              <div className="flex items-center justify-center py-4">
                <div className="animate-spin rounded-full h-6 w-6 border-2 border-indigo-500 border-t-transparent"></div>
                <span className="ml-2 text-sm text-gray-600">Processing...</span>
              </div>
            ) : (
              <div className="text-sm text-gray-700 bg-white/50 p-3 rounded-lg">
                {registryStatus || 'Select a property to view status'}
              </div>
            )}
          </div>
        </div>
      </div>
    </div>
  );
};

export default RealEstateApp;